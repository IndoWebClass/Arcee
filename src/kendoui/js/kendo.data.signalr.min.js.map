{"version":3,"file":"kendo.data.signalr.min.js","sources":["kendo.data.signalr.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\r\n    define('kendo.data.signalr',[ \"./kendo.data\" ], f);\r\n})(function(){\r\n\r\nvar __meta__ = { // jshint ignore:line\r\n    id: \"data.signalr\",\r\n    name: \"SignalR\",\r\n    category: \"framework\",\r\n    depends: [ \"data\" ],\r\n    hidden: true\r\n};\r\n\r\n(function($) {\r\n    var kendo = window.kendo;\r\n    var isFunction = kendo.isFunction;\r\n\r\n    function isJQueryPromise(promise) {\r\n        return promise && isFunction(promise.done) && isFunction(promise.fail);\r\n    }\r\n\r\n    function isNativePromise(promise) {\r\n        return promise && isFunction(promise.then) && isFunction(promise.catch); // jshint ignore:line\r\n    }\r\n\r\n    var transport = kendo.data.RemoteTransport.extend({\r\n        init: function (options) {\r\n            var signalr = options && options.signalr ? options.signalr : {};\r\n\r\n            var promise = signalr.promise;\r\n\r\n            if (!promise) {\r\n                throw new Error('The \"promise\" option must be set.');\r\n            }\r\n\r\n            if (!isJQueryPromise(promise) && !isNativePromise(promise)) {\r\n                throw new Error('The \"promise\" option must be a Promise.');\r\n            }\r\n\r\n            this.promise = promise;\r\n\r\n            var hub = signalr.hub;\r\n\r\n            if (!hub) {\r\n                throw new Error('The \"hub\" option must be set.');\r\n            }\r\n\r\n            if (typeof hub.on != \"function\" || typeof hub.invoke != \"function\") {\r\n                throw new Error('The \"hub\" option is not a valid SignalR hub proxy.');\r\n            }\r\n\r\n            this.hub = hub;\r\n\r\n            kendo.data.RemoteTransport.fn.init.call(this, options);\r\n        },\r\n\r\n        push: function(callbacks) {\r\n            var client = this.options.signalr.client || {};\r\n\r\n            if (client.create) {\r\n                this.hub.on(client.create, callbacks.pushCreate);\r\n            }\r\n\r\n            if (client.update) {\r\n                this.hub.on(client.update, callbacks.pushUpdate);\r\n            }\r\n\r\n            if (client.destroy) {\r\n                this.hub.on(client.destroy, callbacks.pushDestroy);\r\n            }\r\n        },\r\n\r\n        _crud: function(options, type) {\r\n            var hub = this.hub;\r\n            var promise = this.promise;\r\n            var server = this.options.signalr.server;\r\n\r\n            if (!server || !server[type]) {\r\n                throw new Error(kendo.format('The \"server.{0}\" option must be set.', type));\r\n            }\r\n\r\n            var args = [server[type]];\r\n\r\n            var data = this.parameterMap(options.data, type);\r\n\r\n            if (!$.isEmptyObject(data)) {\r\n                args.push(data);\r\n            }\r\n\r\n            if (isJQueryPromise(promise)) {\r\n                promise.done(function() {\r\n                    hub.invoke.apply(hub, args)\r\n                              .done(options.success)\r\n                              .fail(options.error);\r\n                });\r\n            } else if (isNativePromise(promise)) {\r\n                promise.then(function() {\r\n                    hub.invoke.apply(hub, args)\r\n                              .then(options.success)\r\n                              .catch(options.error); // jshint ignore:line\r\n                });\r\n            }\r\n        },\r\n\r\n        read: function(options) {\r\n            this._crud(options, \"read\");\r\n        },\r\n\r\n        create: function(options) {\r\n            this._crud(options, \"create\");\r\n        },\r\n\r\n        update: function(options) {\r\n            this._crud(options, \"update\");\r\n        },\r\n\r\n        destroy: function(options) {\r\n            this._crud(options, \"destroy\");\r\n        }\r\n    });\r\n\r\n    $.extend(true, kendo.data, {\r\n        transports: {\r\n            signalr: transport\r\n        }\r\n    });\r\n\r\n})(window.kendo.jQuery);\r\n\r\nreturn window.kendo;\r\n\r\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\r\n\n"],"names":["define","__meta__","id","name","category","depends","hidden","$","window","kendo","jQuery","isFunction","isJQueryPromise","promise","done","fail","isNativePromise","then","catch","transport","data","RemoteTransport","extend","init","options","signalr","Error","this","hub","on","invoke","fn","call","push","callbacks","client","create","pushCreate","update","pushUpdate","destroy","pushDestroy","_crud","type","server","format","args","parameterMap","isEmptyObject","apply","success","error","read","transports","amd","a1","a2","a3"],"mappings":"CAwBA,SAAaA,QACTA,OAAO,qBAAqB,CAAE,gBAC/B,WAEH,IAAIC,EAAW,CACXC,GAAI,eACJC,KAAM,UACNC,SAAU,YACVC,QAAS,CAAE,QACXC,OAAQ,MAGFC,EAkHPC,OAAOC,MAAMC,OAjHRD,EAAQD,OAAOC,MACfE,EAAaF,EAAME,WAEvB,SAASC,EAAgBC,GACrB,OAAOA,GAAWF,EAAWE,EAAQC,OAASH,EAAWE,EAAQE,MAGrE,SAASC,EAAgBH,GACrB,OAAOA,GAAWF,EAAWE,EAAQI,OAASN,EAAWE,EAAQK,OAGrE,IAAIC,EAAYV,EAAMW,KAAKC,gBAAgBC,OAAO,CAC9CC,KAAM,SAAUC,GACZ,IAAIC,EAAUD,GAAWA,EAAQC,QAAUD,EAAQC,QAAU,GAE7D,IAAIZ,EAAUY,EAAQZ,QAEtB,IAAKA,EACD,MAAM,IAAIa,MAAM,qCAGpB,IAAKd,EAAgBC,KAAaG,EAAgBH,GAC9C,MAAM,IAAIa,MAAM,2CAGpBC,KAAKd,QAAUA,EAEf,IAAIe,EAAMH,EAAQG,IAElB,IAAKA,EACD,MAAM,IAAIF,MAAM,iCAGpB,UAAWE,EAAIC,IAAM,mBAAqBD,EAAIE,QAAU,WACpD,MAAM,IAAIJ,MAAM,sDAGpBC,KAAKC,IAAMA,EAEXnB,EAAMW,KAAKC,gBAAgBU,GAAGR,KAAKS,KAAKL,KAAMH,IAGlDS,KAAM,SAASC,GACX,IAAIC,EAASR,KAAKH,QAAQC,QAAQU,QAAU,GAE5C,GAAIA,EAAOC,OACPT,KAAKC,IAAIC,GAAGM,EAAOC,OAAQF,EAAUG,YAGzC,GAAIF,EAAOG,OACPX,KAAKC,IAAIC,GAAGM,EAAOG,OAAQJ,EAAUK,YAGzC,GAAIJ,EAAOK,QACPb,KAAKC,IAAIC,GAAGM,EAAOK,QAASN,EAAUO,cAI9CC,MAAO,SAASlB,EAASmB,GACrB,IAAIf,EAAMD,KAAKC,IACf,IAAIf,EAAUc,KAAKd,QACnB,IAAI+B,EAASjB,KAAKH,QAAQC,QAAQmB,OAElC,IAAKA,IAAWA,EAAOD,GACnB,MAAM,IAAIjB,MAAMjB,EAAMoC,OAAO,uCAAwCF,IAGzE,IAAIG,EAAO,CAACF,EAAOD,IAEnB,IAAIvB,EAAOO,KAAKoB,aAAavB,EAAQJ,KAAMuB,GAE3C,IAAKpC,EAAEyC,cAAc5B,GACjB0B,EAAKb,KAAKb,GAGd,GAAIR,EAAgBC,GAChBA,EAAQC,KAAK,WACTc,EAAIE,OAAOmB,MAAMrB,EAAKkB,GACXhC,KAAKU,EAAQ0B,SACbnC,KAAKS,EAAQ2B,cAEzB,GAAInC,EAAgBH,GACvBA,EAAQI,KAAK,WACTW,EAAIE,OAAOmB,MAAMrB,EAAKkB,GACX7B,KAAKO,EAAQ0B,SACbhC,MAAMM,EAAQ2B,UAKrCC,KAAM,SAAS5B,GACXG,KAAKe,MAAMlB,EAAS,SAGxBY,OAAQ,SAASZ,GACbG,KAAKe,MAAMlB,EAAS,WAGxBc,OAAQ,SAASd,GACbG,KAAKe,MAAMlB,EAAS,WAGxBgB,QAAS,SAAShB,GACdG,KAAKe,MAAMlB,EAAS,cAYhC,OARIjB,EAAEe,OAAO,KAAMb,EAAMW,KAAM,CACvBiC,WAAY,CACR5B,QAASN,KAMdX,OAAOC,QAhId,CAkIoB,mBAAVT,QAAwBA,OAAOsD,IAAMtD,OAAS,SAASuD,EAAIC,EAAIC,IAAMA,GAAMD"}