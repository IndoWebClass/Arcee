{"version":3,"file":"kendo.dropdownlist.min.js","sources":["kendo.dropdownlist.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.dropdownlist',[ \"./kendo.list\", \"./kendo.mobile.scroller\", \"./kendo.virtuallist\", \"./kendo.html.button\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"dropdownlist\",\n    name: \"DropDownList\",\n    category: \"web\",\n    description: \"The DropDownList widget displays a list of values and allows the selection of a single value from the list.\",\n    depends: [ \"list\", \"html.button\" ],\n    features: [ {\n        id: \"mobile-scroller\",\n        name: \"Mobile scroller\",\n        description: \"Support for kinetic scrolling in mobile device\",\n        depends: [ \"mobile.scroller\" ]\n    }, {\n        id: \"virtualization\",\n        name: \"VirtualList\",\n        description: \"Support for virtualization\",\n        depends: [ \"virtuallist\" ]\n    } ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        html = kendo.html,\n        List = ui.List,\n        Select = ui.Select,\n        support = kendo.support,\n        activeElement = kendo._activeElement,\n        ObservableObject = kendo.data.ObservableObject,\n        keys = kendo.keys,\n        ns = \".kendoDropDownList\",\n        nsFocusEvent = ns + \"FocusEvent\",\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        CHANGE = \"change\",\n        FOCUSED = \"k-focus\",\n        STATEDISABLED = \"k-disabled\",\n        ARIA_DISABLED = \"aria-disabled\",\n        ARIA_READONLY = \"aria-readonly\",\n        CLICKEVENTS = \"click\" + ns + \" touchend\" + ns,\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        TABINDEX = \"tabindex\",\n        STATE_FILTER = \"filter\",\n        STATE_ACCEPT = \"accept\",\n        MSG_INVALID_OPTION_LABEL = \"The `optionLabel` option is not valid due to missing fields. Define a custom optionLabel as shown here http://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist#configuration-optionLabel\",\n        proxy = $.proxy,\n        OPEN = \"open\",\n        CLOSE = \"close\";\n\n    var DropDownList = Select.extend( {\n        init: function(element, options) {\n            var that = this;\n            var index = options && options.index;\n            var optionLabel, text, disabled;\n\n            that.ns = ns;\n            options = Array.isArray(options) ? { dataSource: options } : options;\n\n            Select.fn.init.call(that, element, options);\n\n            options = that.options;\n            element = that.element.on(\"focus\" + ns, proxy(that._focusHandler, that));\n\n            that._focusInputHandler = $.proxy(that._focusInput, that);\n\n            that.optionLabel = $();\n            that._optionLabel();\n\n            that._inputTemplate();\n\n            that._reset();\n\n            that._prev = \"\";\n            that._word = \"\";\n\n            that._wrapper();\n\n            that._tabindex();\n            that.wrapper.data(TABINDEX, that.wrapper.attr(TABINDEX));\n\n            that._span();\n\n            that._popup();\n\n            that._mobile();\n\n            that._dataSource();\n\n            that._ignoreCase();\n\n            that._filterHeader();\n\n            that._aria();\n\n            //should read changed value of closed dropdownlist\n            that.wrapper.attr(\"aria-live\", \"polite\");\n\n            that._enable();\n\n            that._attachFocusHandlers();\n\n            that._oldIndex = that.selectedIndex = -1;\n\n            if (index !== undefined) {\n                options.index = index;\n            }\n\n            that._initialIndex = options.index;\n\n            that.requireValueMapper(that.options);\n            that._initList();\n            that.listView.one(\"dataBound\", proxy(that._attachAriaActiveDescendant, that));\n\n            that._cascade();\n\n            that.one(\"set\", function(e) {\n                if (!e.sender.listView.bound() && that.hasOptionLabel()) {\n                    that._textAccessor(that._optionLabelText());\n                }\n            });\n\n            if (options.autoBind) {\n                that.dataSource.fetch();\n            } else if (that.selectedIndex === -1) { //selectedIndex !== -1 when cascade functionality happens instantly\n                text = options.text || \"\";\n                if (!text) {\n                    optionLabel = options.optionLabel;\n\n                    if (optionLabel && options.index === 0) {\n                        text = optionLabel;\n                    } else if (that._isSelect) {\n                        text = element.children(\":selected\").text();\n                    }\n                }\n\n                that._textAccessor(text);\n            }\n\n            disabled = $(that.element).parents(\"fieldset\").is(':disabled');\n\n            if (disabled) {\n                that.enable(false);\n            }\n\n            that.listView.bind(\"click\", function(e) { e.preventDefault(); });\n\n            kendo.notify(that);\n            that._applyCssClasses();\n        },\n\n        options: {\n            name: \"DropDownList\",\n            enabled: true,\n            autoBind: true,\n            index: 0,\n            text: null,\n            value: null,\n            delay: 500,\n            height: 200,\n            dataTextField: \"\",\n            dataValueField: \"\",\n            optionLabel: \"\",\n            cascadeFrom: \"\",\n            cascadeFromField: \"\",\n            cascadeFromParentField: \"\",\n            ignoreCase: true,\n            animation: {},\n            filter: \"none\",\n            minLength: 1,\n            enforceMinLength: false,\n            virtual: false,\n            template: null,\n            valueTemplate: null,\n            optionLabelTemplate: null,\n            groupTemplate: \"#:data#\",\n            fixedGroupTemplate: \"#:data#\",\n            autoWidth: false,\n            popup: null,\n            filterTitle: null,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        events: [\n            \"open\",\n            \"close\",\n            CHANGE,\n            \"select\",\n            \"filtering\",\n            \"dataBinding\",\n            \"dataBound\",\n            \"cascade\",\n            \"set\",\n            \"kendoKeydown\"\n        ],\n\n        setOptions: function(options) {\n            Select.fn.setOptions.call(this, options);\n\n            this.listView.setOptions(this._listOptions(options));\n\n            this._optionLabel();\n            this._inputTemplate();\n            this._accessors();\n            this._filterHeader();\n            this._enable();\n            this._aria();\n\n            if (!this.value() && this.hasOptionLabel()) {\n                this.select(0);\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Select.fn.destroy.call(that);\n\n            that.wrapper.off(ns);\n            that.wrapper.off(nsFocusEvent);\n            that.element.off(ns);\n\n            that._arrow.off();\n            that._arrow = null;\n            that._arrowIcon = null;\n\n            that.optionLabel.off();\n\n            if(that.filterInput){\n                that.filterInput.off(nsFocusEvent);\n            }\n        },\n\n        open: function() {\n            var that = this;\n            var isFiltered = that.dataSource.filter() ? that.dataSource.filter().filters.length > 0 : false;\n            var listView = this.listView;\n\n            if (that.popup.visible()) {\n                return;\n            }\n\n            if (!that.listView.bound() || that._state === STATE_ACCEPT) {\n                that._open = true;\n                that._state = \"rebind\";\n\n                if (that.filterInput) {\n                    that.filterInput.val(\"\");\n                    that._prev = \"\";\n                }\n\n                if (that.filterInput && that.options.minLength !== 1 && !isFiltered) {\n                    that.refresh();\n                    that.popup.one(\"activate\", that._focusInputHandler);\n                    that.wrapper.attr(\"aria-activedescendant\", listView._optionID);\n                    that.popup.open();\n                    that._resizeFilterInput();\n                } else {\n                    that._filterSource();\n                }\n            } else if (that._allowOpening()) {\n                that._focusFilter = true;\n                that.popup.one(\"activate\", that._focusInputHandler);\n                // In some cases when the popup is opened resize is triggered which will cause it to close\n                // Setting the below flag will prevent this from happening\n                that.popup._hovered = true;\n                that.wrapper.attr(\"aria-activedescendant\", listView._optionID);\n                that.popup.open();\n                that._resizeFilterInput();\n                that._focusItem();\n            }\n        },\n\n        close: function() {\n            this._attachAriaActiveDescendant();\n            this.popup.close();\n        },\n\n        _attachAriaActiveDescendant: function() {\n            var wrapper = this.wrapper,\n                inputId = wrapper.find(\".k-input-inner\").attr('id');\n\n            wrapper.attr(\"aria-activedescendant\", inputId);\n        },\n\n        _focusInput: function () {\n            this._focusElement(this.filterInput);\n        },\n\n        _resizeFilterInput: function () {\n            var filterInput = this.filterInput;\n            var originalPrevent = this._prevent;\n\n            if (!filterInput) {\n                return;\n            }\n\n            var isInputActive = this.filterInput[0] === activeElement();\n            var caret = kendo.caret(this.filterInput[0])[0];\n\n            this._prevent = true;\n\n            filterInput.addClass(\"k-hidden\");\n            filterInput.closest(\".k-list-filter\").css(\"width\", this.popup.element.css(\"width\"));\n            filterInput.removeClass(\"k-hidden\");\n\n            if (isInputActive) {\n                filterInput.trigger(\"focus\");\n                kendo.caret(filterInput[0], caret);\n            }\n\n            this._prevent = originalPrevent;\n        },\n\n        _allowOpening: function() {\n            return this.hasOptionLabel() || this.filterInput || Select.fn._allowOpening.call(this);\n        },\n\n        toggle: function(toggle) {\n            this._toggle(toggle, true);\n        },\n\n        current: function(candidate) {\n            var current;\n\n            if (candidate === undefined) {\n                current = this.listView.focus();\n\n                if (!current && this.selectedIndex === 0 && this.hasOptionLabel()) {\n                    return this.optionLabel;\n                }\n\n                return current;\n            }\n\n            this._focus(candidate);\n        },\n\n        dataItem: function(index) {\n            var that = this;\n            var dataItem = null;\n\n            if (index === null) { return index; }\n\n            if (index === undefined) {\n                dataItem = that.listView.selectedDataItems()[0];\n            } else {\n                if (typeof index !== \"number\") {\n                    if (that.options.virtual) {\n                        return that.dataSource.getByUid($(index).data(\"uid\"));\n                    }\n                    if (index.hasClass(\"k-list-optionlabel\")) {\n                        index = -1;\n                    } else {\n                        index = $(that.items()).index(index);\n                    }\n                } else if (that.hasOptionLabel()) {\n                    index -= 1;\n                }\n\n                dataItem = that.dataSource.flatView()[index];\n            }\n\n            if (!dataItem) {\n                dataItem = that._optionLabelDataItem();\n            }\n\n            return dataItem;\n        },\n\n        refresh: function() {\n            this.listView.refresh();\n        },\n\n        text: function (text) {\n            var that = this;\n            var loweredText;\n            var ignoreCase = that.options.ignoreCase;\n\n            text = text === null ? \"\" : text;\n\n            if (text !== undefined) {\n                if (typeof text !== \"string\") {\n                    that._textAccessor(text);\n                    return;\n                }\n\n                loweredText = ignoreCase ? text.toLowerCase() : text;\n\n                that._select(function(data) {\n                    data = that._text(data);\n\n                    if (ignoreCase) {\n                        data = (data + \"\").toLowerCase();\n                    }\n\n                    return data === loweredText;\n                }).done(function() {\n                    that._textAccessor(that.dataItem() || text);\n                });\n\n            } else {\n                return that._textAccessor();\n            }\n        },\n\n        _clearFilter: function() {\n            $(this.filterInput).val(\"\");\n            Select.fn._clearFilter.call(this);\n        },\n\n        value: function(value) {\n            var that = this;\n            var listView = that.listView;\n            var dataSource = that.dataSource;\n\n            if (value === undefined) {\n                value = that._accessor() || that.listView.value()[0];\n                return value === undefined || value === null ? \"\" : value;\n            }\n\n            that.requireValueMapper(that.options, value);\n\n            if (value || !that.hasOptionLabel()) {\n                that._initialIndex = null;\n            }\n\n            this.trigger(\"set\", { value: value });\n\n            if (that._request && that.options.cascadeFrom && that.listView.bound()) {\n                if (that._valueSetter) {\n                    dataSource.unbind(CHANGE, that._valueSetter);\n                }\n\n                that._valueSetter = proxy(function() { that.value(value); }, that);\n\n                dataSource.one(CHANGE, that._valueSetter);\n                return;\n            }\n\n            if (that._isFilterEnabled() && listView.bound() && listView.isFiltered()) {\n                that._clearFilter();\n            } else {\n                that._fetchData();\n            }\n\n            listView.value(value).done(function() {\n                that._old = that._valueBeforeCascade = that._accessor();\n                that._oldIndex = that.selectedIndex;\n            });\n        },\n\n        hasOptionLabel: function() {\n            return this.optionLabel && !!this.optionLabel[0];\n        },\n\n        _optionLabel: function() {\n            var that = this;\n            var options = that.options;\n            var optionLabel = options.optionLabel;\n            var template = options.optionLabelTemplate;\n\n            if (!optionLabel) {\n                that.optionLabel.off().remove();\n                that.optionLabel = $();\n                return;\n            }\n\n            if (!template) {\n                template = \"#:\";\n\n                if (typeof optionLabel === \"string\") {\n                    template += \"data\";\n                } else {\n                    template += kendo.expr(options.dataTextField, \"data\");\n                }\n\n                template += \"#\";\n            }\n\n            if (typeof template !== \"function\") {\n                template = kendo.template(template);\n            }\n\n            that.optionLabelTemplate = template;\n\n            if (!that.hasOptionLabel()) {\n                that.optionLabel = $('<div class=\"k-list-optionlabel\"></div>').prependTo(that.list);\n            }\n\n            that.optionLabel.html(template(optionLabel))\n                            .off()\n                            .on(CLICKEVENTS, proxy(that._click, that))\n                            .on(HOVEREVENTS, that._toggleHover);\n\n            that.angular(\"compile\", function() {\n                return { elements: that.optionLabel, data: [{ dataItem: that._optionLabelDataItem() }] };\n            });\n        },\n\n        _optionLabelText: function() {\n            var optionLabel = this.options.optionLabel;\n            return (typeof optionLabel === \"string\") ? optionLabel : this._text(optionLabel);\n        },\n\n        _optionLabelDataItem: function() {\n            var that = this;\n            var optionLabel = that.options.optionLabel;\n\n            if (that.hasOptionLabel()) {\n                return $.isPlainObject(optionLabel) ? new ObservableObject(optionLabel) : that._assignInstance(that._optionLabelText(), \"\");\n            }\n\n            return undefined;\n        },\n\n        _buildOptions: function(data) {\n            var that = this;\n            if (!that._isSelect) {\n                return;\n            }\n\n            var value = that.listView.value()[0];\n            var optionLabel = that._optionLabelDataItem();\n            var optionLabelValue = optionLabel && that._value(optionLabel);\n\n            if (value === undefined || value === null) {\n                value = \"\";\n            }\n\n            if (optionLabel) {\n                if (optionLabelValue === undefined || optionLabelValue === null) {\n                    optionLabelValue = \"\";\n                }\n\n                optionLabel = '<option value=\"' + optionLabelValue + '\">' + that._text(optionLabel) + \"</option>\";\n            }\n\n            that._options(data, optionLabel, value);\n\n            if (value !== List.unifyType(that._accessor(), typeof value)) {\n                that._customOption = null;\n                that._custom(value);\n            }\n        },\n\n        _listBound: function() {\n\n            var that = this;\n            var initialIndex = that._initialIndex;\n            var filtered = that._state === STATE_FILTER;\n\n            var data = that.dataSource.flatView();\n            var dataItem;\n\n            that._presetValue = false;\n\n            that._renderFooter();\n            that._renderNoData();\n            that._toggleNoData(!data.length);\n\n            that._resizePopup(true);\n\n            that.popup.position();\n\n            that._buildOptions(data);\n\n            if (!filtered) {\n                if (that._open) {\n                    that.toggle(that._allowOpening());\n                }\n\n                that._open = false;\n\n                if (!that._fetch) {\n                    if (data.length) {\n                        if (!that.listView.value().length && initialIndex > -1 && initialIndex !== null) {\n                            that.select(initialIndex);\n                        }\n\n                        that._initialIndex = null;\n                        dataItem = that.listView.selectedDataItems()[0];\n                        if (dataItem && that.text() !== that._text(dataItem)) {\n                            that._selectValue(dataItem);\n                        }\n                    } else if (that._textAccessor() !== that._optionLabelText()) {\n                        that.listView.value(\"\");\n                        that._selectValue(null);\n                        that._oldIndex = that.selectedIndex;\n                    }\n                }\n            }\n\n            that._hideBusy();\n            that.trigger(\"dataBound\");\n        },\n\n        _listChange: function() {\n            this._selectValue(this.listView.selectedDataItems()[0]);\n\n            if (this._presetValue || (this._old && this._oldIndex === -1)) {\n                this._oldIndex = this.selectedIndex;\n            }\n        },\n\n        _filterPaste: function() {\n            this._search();\n        },\n\n        _attachFocusHandlers: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            wrapper.on(\"focusin\" + nsFocusEvent, proxy(that._focusinHandler, that))\n                   .on(\"focusout\" + nsFocusEvent, proxy(that._focusoutHandler, that));\n            if(that.filterInput) {\n                that.filterInput.on(\"focusin\" + nsFocusEvent, proxy(that._focusinHandler, that))\n                   .on(\"focusout\" + nsFocusEvent, proxy(that._focusoutHandler, that));\n            }\n        },\n\n        _focusHandler: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        _focusinHandler: function() {\n            this.wrapper.addClass(FOCUSED);\n            this._prevent = false;\n        },\n\n        _focusoutHandler: function() {\n            var that = this;\n            var isIFrame = window.self !== window.top;\n\n            if (!that._prevent) {\n                clearTimeout(that._typingTimeout);\n\n                if (support.mobileOS.ios && isIFrame) {\n                    that._change();\n                } else {\n                    that._blur();\n                }\n\n                that.wrapper.removeClass(FOCUSED);\n                that._prevent = true;\n                that._open = false;\n                that.element.trigger(\"blur\");\n            }\n        },\n\n        _wrapperMousedown: function() {\n            this._prevent = !!this.filterInput;\n        },\n\n        _wrapperClick: function(e) {\n            e.preventDefault();\n            this.popup.unbind(\"activate\", this._focusInputHandler);\n            this._focused = this.wrapper;\n            this._prevent = false;\n            this._toggle();\n        },\n\n        _editable: function(options) {\n            var that = this;\n            var element = that.element;\n            var disable = options.disable;\n            var readonly = options.readonly;\n            var wrapper = that.wrapper.add(that.filterInput).off(ns);\n            var dropDownWrapper = that.wrapper.off(HOVEREVENTS);\n\n            if (!readonly && !disable) {\n                element.prop(DISABLED, false).prop(READONLY, false);\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX))\n                    .attr(ARIA_DISABLED, false)\n                    .attr(ARIA_READONLY, false)\n                    .on(\"keydown\" + ns, that, proxy(that._keydown, that))\n                    .on(kendo.support.mousedown + ns, proxy(that._wrapperMousedown, that))\n                    .on(\"paste\" + ns, proxy(that._filterPaste, that));\n\n                that.wrapper.on(\"click\" + ns, proxy(that._wrapperClick, that));\n\n                if (!that.filterInput) {\n                    wrapper.on(\"keypress\" + ns, proxy(that._keypress, that));\n                } else {\n                    wrapper.on(\"input\" + ns, proxy(that._search, that));\n                }\n\n            } else if (disable) {\n                wrapper.removeAttr(TABINDEX);\n                dropDownWrapper.addClass(STATEDISABLED);\n            } else {\n                dropDownWrapper.removeClass(STATEDISABLED);\n            }\n\n            element.attr(DISABLED, disable)\n                   .attr(READONLY, readonly);\n\n            wrapper.attr(ARIA_DISABLED, disable)\n                    .attr(ARIA_READONLY, readonly);\n        },\n\n        _keydown: function(e) {\n            var that = this;\n            var key = e.keyCode;\n            var altKey = e.altKey;\n            var isInputActive;\n            var handled;\n\n            var isPopupVisible = that.popup.visible();\n\n            if (that.filterInput) {\n                isInputActive = that.filterInput[0] === activeElement();\n            }\n\n            if (key === keys.LEFT) {\n                key = keys.UP;\n                handled = true;\n            } else if (key === keys.RIGHT) {\n                key = keys.DOWN;\n                handled = true;\n            }\n\n            if (handled && isInputActive) {\n                return;\n            }\n\n            e.keyCode = key;\n\n            if ((altKey && key === keys.UP) || key === keys.ESC) {\n                that._focusElement(that.wrapper);\n            }\n\n            if (that._state === STATE_FILTER && key === keys.ESC) {\n                that._clearFilter();\n                that._open = false;\n                that._state = STATE_ACCEPT;\n            }\n\n            if (key === keys.ENTER && that._typingTimeout && that.filterInput && isPopupVisible) {\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.SPACEBAR && !isInputActive) {\n                that.toggle(!isPopupVisible);\n                e.preventDefault();\n            }\n\n            handled = that._move(e);\n\n            if (handled) {\n                return;\n            }\n\n            if (!isPopupVisible || !that.filterInput) {\n                var current = that._focus();\n\n                if (key === keys.HOME) {\n                    handled = true;\n                    that._firstItem();\n                } else if (key === keys.END) {\n                    handled = true;\n                    that._lastItem();\n                }\n\n                if (handled) {\n                    if (that.trigger(\"select\", { dataItem: that._getElementDataItem(that._focus()), item: that._focus() })) {\n                        that._focus(current);\n                        return;\n                    }\n\n                    that._select(that._focus(), true).done(function() {\n                        if (!isPopupVisible) {\n                            that._blur();\n                        }\n                    });\n                    e.preventDefault();\n                }\n            }\n\n            if (!altKey && !handled && that.filterInput) {\n                that._search();\n            }\n        },\n\n        _matchText: function(text, word) {\n            var ignoreCase = this.options.ignoreCase;\n\n            if (text === undefined || text === null) {\n                return false;\n            }\n\n            text = text + \"\";\n\n            if (ignoreCase) {\n                text = text.toLowerCase();\n            }\n\n            return text.indexOf(word) === 0;\n        },\n\n        _shuffleData: function(data, splitIndex) {\n            var optionDataItem = this._optionLabelDataItem();\n\n            if (optionDataItem) {\n                data = [optionDataItem].concat(data);\n            }\n\n            return data.slice(splitIndex).concat(data.slice(0, splitIndex));\n        },\n\n        _selectNext: function() {\n            var that = this;\n            var data = that.dataSource.flatView();\n            var dataLength = data.length + (that.hasOptionLabel() ? 1 : 0);\n            var isInLoop = sameCharsOnly(that._word, that._last);\n            var startIndex = that.selectedIndex;\n            var oldFocusedItem;\n            var text;\n\n            if (startIndex === -1) {\n                startIndex = 0;\n            } else {\n                startIndex += isInLoop ? 1 : 0;\n                startIndex = normalizeIndex(startIndex, dataLength);\n            }\n\n            data = data.toJSON ? data.toJSON() : data.slice();\n            data = that._shuffleData(data, startIndex);\n\n            for (var idx = 0; idx < dataLength; idx++) {\n                text = that._text(data[idx]);\n\n                if (isInLoop && that._matchText(text, that._last)) {\n                    break;\n                } else if (that._matchText(text, that._word)) {\n                    break;\n                }\n            }\n\n            if (idx !== dataLength) {\n                oldFocusedItem = that._focus();\n\n                that._select(normalizeIndex(startIndex + idx, dataLength)).done(function() {\n                    var done = function() {\n                        if (!that.popup.visible()) {\n                            that._change();\n                        }\n                    };\n\n                    if (that.trigger(\"select\", { dataItem: that._getElementDataItem(that._focus()), item: that._focus() })) {\n                        that._select(oldFocusedItem).done(done);\n                    } else {\n                        done();\n                    }\n                });\n            }\n        },\n\n        _keypress: function(e) {\n            var that = this;\n\n            if (e.which === 0 || e.keyCode === kendo.keys.ENTER) {\n                return;\n            }\n\n            var character = String.fromCharCode(e.charCode || e.keyCode);\n\n            if (that.options.ignoreCase) {\n                character = character.toLowerCase();\n            }\n\n            if (character === \" \") {\n                e.preventDefault();\n            }\n\n            that._word += character;\n            that._last = character;\n\n            that._search();\n        },\n\n        _popupOpen: function() {\n            var popup = this.popup;\n\n            popup.wrapper = kendo.wrap(popup.element);\n\n            if (popup.element.closest(\".km-root\")[0]) {\n                popup.wrapper.addClass(\"km-popup km-widget\");\n                this.wrapper.addClass(\"km-widget\");\n            }\n        },\n\n        _popup: function() {\n            Select.fn._popup.call(this);\n            this.popup.one(\"open\", proxy(this._popupOpen, this));\n        },\n\n        _getElementDataItem: function(element) {\n            if (!element || !element[0]) {\n                return null;\n            }\n\n            if (element[0] === this.optionLabel[0]) {\n                return this._optionLabelDataItem();\n            }\n\n            return this.listView.dataItemByIndex(this.listView.getElementIndex(element));\n        },\n\n        _click: function (e) {\n            var that = this;\n            var item = e.item || $(e.currentTarget);\n\n            e.preventDefault();\n\n            if (that.trigger(\"select\", { dataItem: that._getElementDataItem(item), item: item })) {\n                that.close();\n                return;\n            }\n\n            that._userTriggered = true;\n\n            that._select(item).done(function() {\n                that._blur();\n                that._focusElement(that.wrapper);\n            });\n        },\n\n        _focusElement: function(element) {\n            var active = activeElement();\n            var wrapper = this.wrapper;\n            var filterInput = this.filterInput;\n            var compareElement = element === filterInput ? wrapper : filterInput;\n            var touchEnabled = support.mobileOS && (support.touch || support.MSPointers || support.pointers);\n\n            if (filterInput && filterInput[0] === element[0] && touchEnabled) {\n                return;\n            }\n\n            if (filterInput && (compareElement[0] === active || this._focusFilter)) {\n                this._focusFilter = false;\n                this._prevent = true;\n                this._focused = element.trigger(\"focus\");\n            }\n        },\n\n        _searchByWord: function(word) {\n            if (!word) {\n                return;\n            }\n\n            var that = this;\n            var ignoreCase = that.options.ignoreCase;\n\n            if (ignoreCase) {\n                word = word.toLowerCase();\n            }\n\n            that._select(function(dataItem) {\n                return that._matchText(that._text(dataItem), word);\n            });\n        },\n\n        _inputValue: function() {\n            return this.text();\n        },\n\n        _search: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n\n            clearTimeout(that._typingTimeout);\n\n            if (that._isFilterEnabled()) {\n                that._typingTimeout = setTimeout(function() {\n                    var value = that.filterInput.val();\n\n                    if (that._prev !== value) {\n                        that._prev = value;\n                        that.search(value);\n                        that._resizeFilterInput();\n                    }\n\n                    that._typingTimeout = null;\n                }, that.options.delay);\n            } else {\n                that._typingTimeout = setTimeout(function() {\n                    that._word = \"\";\n                }, that.options.delay);\n\n                if (!that.listView.bound()) {\n                    dataSource.fetch().done(function () {\n                        that._selectNext();\n                    });\n                    return;\n                }\n\n                that._selectNext();\n            }\n        },\n\n        _get: function(candidate) {\n            var data, found, idx;\n            var isFunction = typeof candidate === \"function\";\n            var jQueryCandidate = !isFunction ? $(candidate) : $();\n\n            if (this.hasOptionLabel()) {\n                if (typeof candidate === \"number\") {\n                    if (candidate > -1) {\n                        candidate -= 1;\n                    }\n                } else if (jQueryCandidate.hasClass(\"k-list-optionlabel\")) {\n                    candidate = -1;\n                }\n            }\n\n            if (isFunction) {\n                data = this.dataSource.flatView();\n\n                for (idx = 0; idx < data.length; idx++) {\n                    if (candidate(data[idx])) {\n                        candidate = idx;\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    candidate = -1;\n                }\n            }\n\n            return candidate;\n        },\n\n        _firstItem: function() {\n            if (this.hasOptionLabel()) {\n                this._focus(this.optionLabel);\n            } else {\n                this.listView.focusFirst();\n            }\n        },\n\n        _lastItem: function() {\n            this._resetOptionLabel();\n            this.listView.focusLast();\n        },\n\n        _nextItem: function() {\n            var focusIndex;\n\n            if (this.optionLabel.hasClass(\"k-focus\")) {\n                this._resetOptionLabel();\n                this.listView.focusFirst();\n                focusIndex = 1;\n            } else {\n                focusIndex = this.listView.focusNext();\n            }\n\n            return focusIndex;\n        },\n\n        _prevItem: function() {\n            var focusIndex;\n\n            if (this.optionLabel.hasClass(\"k-focus\")) {\n                return;\n            }\n\n            focusIndex = this.listView.focusPrev();\n\n            if (!this.listView.focus() && !this.options.virtual) {\n                this._focus(this.optionLabel);\n            }\n\n            return focusIndex;\n        },\n\n        _focusItem: function() {\n            var options = this.options;\n            var listView = this.listView;\n            var focusedItem = listView.focus();\n            var index = listView.select();\n\n            index = index[index.length - 1];\n\n            if (index === undefined && options.highlightFirst && !focusedItem) {\n                index = 0;\n            }\n\n            if (index !== undefined) {\n                listView.focus(index);\n            } else {\n                if (options.optionLabel && (!options.virtual || options.virtual.mapValueTo !== \"dataItem\")) {\n                    this._focus(this.optionLabel);\n                    this._select(this.optionLabel);\n                    this.listView.content.scrollTop(0);\n                } else {\n                    listView.scrollToIndex(0);\n                }\n            }\n        },\n\n        _resetOptionLabel: function(additionalClass) {\n            this.optionLabel.removeClass(\"k-focus\" + (additionalClass || \"\")).removeAttr(\"id\");\n        },\n\n        _focus: function(candidate) {\n            var listView = this.listView;\n            var optionLabel = this.optionLabel;\n\n            if (candidate === undefined) {\n                candidate = listView.focus();\n\n                if (!candidate && optionLabel.hasClass(\"k-focus\")) {\n                    candidate = optionLabel;\n                }\n\n                return candidate;\n            }\n\n            this._resetOptionLabel();\n\n            candidate = this._get(candidate);\n\n            listView.focus(candidate);\n\n            if (candidate === -1) {\n                optionLabel.addClass(\"k-focus\")\n                           .attr(\"id\", listView._optionID);\n\n                this._focused.add(this.filterInput)\n                    .removeAttr(\"aria-activedescendant\")\n                    .attr(\"aria-activedescendant\", listView._optionID);\n            }\n        },\n\n        _select: function(candidate, keepState) {\n            var that = this;\n\n            candidate = that._get(candidate);\n\n            return that.listView.select(candidate).done(function() {\n                if (!keepState && that._state === STATE_FILTER) {\n                    that._state = STATE_ACCEPT;\n                }\n\n                if (candidate === -1) {\n                    that._selectValue(null);\n                }\n            });\n        },\n\n        _selectValue: function(dataItem) {\n            var that = this;\n            var optionLabel = that.options.optionLabel;\n            var idx = that.listView.select();\n\n            var value = \"\";\n            var text = \"\";\n\n            idx = idx[idx.length - 1];\n            if (idx === undefined) {\n                idx = -1;\n            }\n\n            this._resetOptionLabel(\" k-selected\");\n\n            if (dataItem || dataItem === 0) {\n                text = dataItem;\n                value = that._dataValue(dataItem);\n                if (optionLabel) {\n                    idx += 1;\n                }\n            } else if (optionLabel) {\n                that._focus(that.optionLabel.addClass(\"k-selected\"));\n\n                text = that._optionLabelText();\n\n                if (typeof optionLabel === \"string\") {\n                    value = \"\";\n                } else {\n                    value = that._value(optionLabel);\n                }\n\n                idx = 0;\n            }\n\n            that.selectedIndex = idx;\n\n            if (value === null) {\n                value = \"\";\n            }\n\n            that._textAccessor(text);\n            that._accessor(value, idx);\n\n            that._triggerCascade();\n        },\n\n        _mobile: function() {\n            var that = this,\n                popup = that.popup,\n                mobileOS = support.mobileOS,\n                root = popup.element.parents(\".km-root\").eq(0);\n\n            if (root.length && mobileOS) {\n                popup.options.animation.open.effects = (mobileOS.android || mobileOS.meego) ? \"fadeIn\" : (mobileOS.ios || mobileOS.wp) ? \"slideIn:up\" : popup.options.animation.open.effects;\n            }\n        },\n\n        _filterHeader: function() {\n            var filterTemplate = '<div class=\"k-list-filter\">' +\n                '<span class=\"k-searchbox k-input k-input-md k-rounded-md k-input-solid\" type=\"text\" autocomplete=\"off\">' +\n                    '<span class=\"k-input-icon k-icon k-i-search\"></span>' +\n                '</span>' +\n            '</div>';\n\n            if (this.filterInput) {\n                this.filterInput\n                    .off(ns)\n                    .closest(\".k-list-filter\")\n                    .remove();\n\n                this.filterInput = null;\n            }\n\n            if (this._isFilterEnabled()) {\n                this.filterInput = $('<input class=\"k-input-inner\" type=\"text\" />')\n                    .attr({\n                        placeholder: this.element.attr(\"placeholder\"),\n                        title: this.options.filterTitle || this.element.attr(\"title\"),\n                        role: \"searchbox\",\n                        \"aria-label\": this.options.filterTitle,\n                        \"aria-haspopup\": \"listbox\",\n                        \"aria-autocomplete\": \"list\"\n                    });\n\n                this.list\n                    .parent()\n                    .prepend($(filterTemplate))\n                    .find(\".k-searchbox\")\n                    .append(this.filterInput);\n            }\n        },\n\n        _span: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                SELECTOR = \"span.k-input-value-text\",\n                id = kendo.guid(),\n                options = that.options,\n                span, arrowBtn;\n\n            span = wrapper.find(SELECTOR);\n\n            if (!span[0]) {\n                arrowBtn = html.renderButton('<button type=\"button\" tabindex=\"-1\" unselectable=\"on\" class=\"k-select k-input-button\" aria-label=\"select\"></button>', {\n                    icon: \"arrow-s\",\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    shape: null,\n                    rounded: null\n                });\n\n                wrapper.append('<span id=\"' + id + '\" unselectable=\"on\" role=\"option\" aria-selected=\"true\" class=\"k-input-inner\">' +\n                            '<span class=\"k-input-value-text\"></span>' +\n                        '</span>')\n                    .append(arrowBtn)\n                    .append(that.element);\n\n                span = wrapper.find(SELECTOR);\n            }\n\n            that.span = span;\n            that._arrow = wrapper.find(\".k-select\");\n            that._arrowIcon = that._arrow.find(\".k-icon\");\n        },\n\n        _wrapper: function() {\n            var that = this,\n                element = that.element,\n                DOMelement = element[0],\n                wrapper;\n\n            wrapper = element.parent();\n\n            if (!wrapper.is(\"span.k-picker\")) {\n                wrapper = element.wrap(\"<span />\").parent();\n                wrapper[0].style.cssText = DOMelement.style.cssText;\n                wrapper[0].title = DOMelement.title;\n            }\n\n            that._focused = that.wrapper = wrapper\n                .addClass(\"k-picker k-dropdown k-widget\")\n                .addClass(DOMelement.className)\n                .removeClass('input-validation-error')\n                .css(\"display\", \"\")\n                .attr({\n                    accesskey: element.attr(\"accesskey\"),\n                    unselectable: \"on\",\n                    role: \"listbox\",\n                    \"aria-haspopup\": \"listbox\",\n                    \"aria-expanded\": false\n                });\n\n            element.hide().removeAttr(\"accesskey\");\n        },\n\n        _clearSelection: function(parent) {\n            this.select(parent.value() ? 0 : -1);\n        },\n\n        _openHandler: function(e) {\n            this._adjustListWidth();\n\n            if (this.trigger(OPEN)) {\n                e.preventDefault();\n            } else {\n                this.wrapper.attr(\"aria-expanded\", true);\n                this.ul.attr(\"aria-hidden\", false);\n            }\n        },\n\n        _closeHandler: function(e) {\n            if (this.trigger(CLOSE)) {\n                e.preventDefault();\n            } else {\n                this.wrapper.attr(\"aria-expanded\", false);\n                this.ul.attr(\"aria-hidden\", true);\n            }\n        },\n\n        _inputTemplate: function() {\n            var that = this,\n                template = that.options.valueTemplate;\n\n\n            if (!template) {\n                template = $.proxy(kendo.template('#:this._text(data)#', { useWithBlock: false }), that);\n            } else {\n                template = kendo.template(template);\n            }\n\n            that.valueTemplate = template;\n\n            if (that.hasOptionLabel() && !that.options.optionLabelTemplate) {\n                try {\n                    that.valueTemplate(that._optionLabelDataItem());\n                } catch(e) {\n                    throw new Error(MSG_INVALID_OPTION_LABEL);\n                }\n            }\n        },\n\n        _textAccessor: function(text) {\n            var dataItem = null;\n            var template = this.valueTemplate;\n            var optionLabelText = this._optionLabelText();\n            var span = this.span;\n\n            if (text === undefined) {\n                return span.text();\n            }\n\n            if ($.isPlainObject(text) || text instanceof ObservableObject) {\n                dataItem = text;\n            } else if (optionLabelText && optionLabelText === text) {\n                dataItem = this.options.optionLabel;\n            }\n\n            if (!dataItem) {\n                dataItem = this._assignInstance(text, this._accessor());\n            }\n\n            if (this.hasOptionLabel()) {\n                if (dataItem === optionLabelText || this._text(dataItem) === optionLabelText) {\n                    template = this.optionLabelTemplate;\n\n                    if (typeof this.options.optionLabel === \"string\" && !this.options.optionLabelTemplate) {\n                        dataItem = optionLabelText;\n                    }\n                }\n            }\n\n            var getElements = function(){\n                return {\n                    elements: span.get(),\n                    data: [ { dataItem: dataItem } ]\n                };\n            };\n\n            this.angular(\"cleanup\", getElements);\n\n            try {\n                span.html(template(dataItem));\n            } catch(e) {\n                //dataItem has missing fields required in custom template\n                span.html(\"\");\n            }\n\n            this.angular(\"compile\", getElements);\n        },\n\n        _preselect: function(value, text) {\n            if (!value && !text) {\n                text = this._optionLabelText();\n            }\n\n            this._accessor(value);\n            this._textAccessor(text);\n\n            this._old = this._accessor();\n            this._oldIndex = this.selectedIndex;\n\n            this.listView.setValue(value);\n\n            this._initialIndex = null;\n            this._presetValue = true;\n        },\n\n        _assignInstance: function(text, value) {\n            var dataTextField = this.options.dataTextField;\n            var dataItem = {};\n\n            if (dataTextField) {\n                assign(dataItem, dataTextField.split(\".\"), text);\n                assign(dataItem, this.options.dataValueField.split(\".\"), value);\n                dataItem = new ObservableObject(dataItem);\n            } else {\n                dataItem = text;\n            }\n\n            return dataItem;\n        }\n    });\n\n    function assign(instance, fields, value) {\n        var idx = 0,\n            lastIndex = fields.length - 1,\n            field;\n\n        for (; idx < lastIndex; ++idx) {\n            field = fields[idx];\n\n            if (!(field in instance)) {\n                instance[field] = {};\n            }\n\n            instance = instance[field];\n        }\n\n        instance[fields[lastIndex]] = value;\n    }\n\n    function normalizeIndex(index, length) {\n        if (index >= length) {\n            index -= length;\n        }\n        return index;\n    }\n\n    function sameCharsOnly(word, character) {\n        for (var idx = 0; idx < word.length; idx++) {\n            if (word.charAt(idx) !== character) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    ui.plugin(DropDownList);\n\n    kendo.cssProperties.registerPrefix(\"DropDownList\", \"k-picker-\");\n\n    kendo.cssProperties.registerValues(\"DropDownList\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","features","$","window","kendo","jQuery","undefined","ui","html","List","Select","support","activeElement","_activeElement","ObservableObject","data","keys","ns","nsFocusEvent","DISABLED","READONLY","CHANGE","FOCUSED","STATEDISABLED","ARIA_DISABLED","ARIA_READONLY","CLICKEVENTS","HOVEREVENTS","TABINDEX","STATE_FILTER","STATE_ACCEPT","MSG_INVALID_OPTION_LABEL","proxy","OPEN","CLOSE","DropDownList","extend","init","element","options","that","this","index","optionLabel","text","disabled","Array","isArray","dataSource","fn","call","on","_focusHandler","_focusInputHandler","_focusInput","_optionLabel","_inputTemplate","_reset","_prev","_word","_wrapper","_tabindex","wrapper","attr","_span","_popup","_mobile","_dataSource","_ignoreCase","_filterHeader","_aria","_enable","_attachFocusHandlers","_oldIndex","selectedIndex","_initialIndex","requireValueMapper","_initList","listView","one","_attachAriaActiveDescendant","_cascade","e","sender","bound","hasOptionLabel","_textAccessor","_optionLabelText","autoBind","fetch","_isSelect","children","parents","is","enable","bind","preventDefault","notify","_applyCssClasses","enabled","value","delay","height","dataTextField","dataValueField","cascadeFrom","cascadeFromField","cascadeFromParentField","ignoreCase","animation","filter","minLength","enforceMinLength","virtual","template","valueTemplate","optionLabelTemplate","groupTemplate","fixedGroupTemplate","autoWidth","popup","filterTitle","size","fillMode","rounded","events","setOptions","_listOptions","_accessors","select","destroy","off","_arrow","_arrowIcon","filterInput","open","isFiltered","filters","length","visible","_state","_open","val","refresh","_optionID","_resizeFilterInput","_filterSource","_allowOpening","_focusFilter","_hovered","_focusItem","close","inputId","find","_focusElement","originalPrevent","_prevent","isInputActive","caret","addClass","closest","css","removeClass","trigger","toggle","_toggle","current","candidate","focus","_focus","dataItem","selectedDataItems","getByUid","hasClass","items","flatView","_optionLabelDataItem","loweredText","toLowerCase","_select","_text","done","_clearFilter","_accessor","_request","_valueSetter","unbind","_isFilterEnabled","_fetchData","_old","_valueBeforeCascade","remove","expr","prependTo","list","_click","_toggleHover","angular","elements","isPlainObject","_assignInstance","_buildOptions","optionLabelValue","_value","_options","unifyType","_customOption","_custom","_listBound","initialIndex","filtered","_presetValue","_renderFooter","_renderNoData","_toggleNoData","_resizePopup","position","_fetch","_selectValue","_hideBusy","_listChange","_filterPaste","_search","_focusinHandler","_focusoutHandler","isIFrame","self","top","clearTimeout","_typingTimeout","mobileOS","ios","_change","_blur","_wrapperMousedown","_wrapperClick","_focused","_editable","disable","readonly","add","dropDownWrapper","prop","_keydown","mousedown","_keypress","removeAttr","key","keyCode","altKey","handled","isPopupVisible","LEFT","UP","RIGHT","DOWN","ESC","ENTER","SPACEBAR","_move","HOME","_firstItem","END","_lastItem","_getElementDataItem","item","_matchText","word","indexOf","_shuffleData","splitIndex","optionDataItem","concat","slice","_selectNext","dataLength","isInLoop","sameCharsOnly","_last","startIndex","oldFocusedItem","normalizeIndex","toJSON","idx","which","character","String","fromCharCode","charCode","_popupOpen","wrap","dataItemByIndex","getElementIndex","currentTarget","_userTriggered","active","compareElement","touchEnabled","touch","MSPointers","pointers","_searchByWord","_inputValue","setTimeout","search","_get","found","isFunction","jQueryCandidate","focusFirst","_resetOptionLabel","focusLast","_nextItem","focusIndex","focusNext","_prevItem","focusPrev","focusedItem","highlightFirst","mapValueTo","content","scrollTop","scrollToIndex","additionalClass","keepState","_dataValue","_triggerCascade","root","eq","effects","android","meego","wp","filterTemplate","placeholder","title","role","aria-label","aria-haspopup","aria-autocomplete","parent","prepend","append","SELECTOR","guid","span","arrowBtn","renderButton","icon","shape","DOMelement","style","cssText","className","accesskey","unselectable","aria-expanded","hide","_clearSelection","_openHandler","_adjustListWidth","ul","_closeHandler","useWithBlock","Error","optionLabelText","getElements","get","_preselect","setValue","assign","split","instance","fields","lastIndex","field","charAt","plugin","cssProperties","registerPrefix","registerValues","values","roundedValues","amd","a1","a2","a3"],"mappings":"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"}