{"version":3,"file":"kendo.editor.min.js","sources":["kendo.editor.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('util/undoredostack',[ \"../kendo.core\" ], f);\n})(function(){\n\n(function(kendo) {\n    var UndoRedoStack = kendo.Observable.extend({\n        init: function(options) {\n            kendo.Observable.fn.init.call(this, options);\n            this.clear();\n        },\n        events: [ \"undo\", \"redo\" ],\n        push: function (command) {\n            this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n            this.currentCommandIndex = this.stack.push(command) - 1;\n        },\n        undo: function () {\n            if (this.canUndo()) {\n                var command = this.stack[this.currentCommandIndex--];\n                command.undo();\n                this.trigger(\"undo\", { command: command });\n            }\n        },\n        redo: function () {\n            if (this.canRedo()) {\n                var command = this.stack[++this.currentCommandIndex];\n                command.redo();\n                this.trigger(\"redo\", { command: command });\n            }\n        },\n        clear: function() {\n            this.stack = [];\n            this.currentCommandIndex = -1;\n        },\n        canUndo: function () {\n            return this.currentCommandIndex >= 0;\n        },\n        canRedo: function () {\n            return this.currentCommandIndex != this.stack.length - 1;\n        }\n    });\n\n    kendo.deepExtend(kendo, {\n        util: {\n            UndoRedoStack: UndoRedoStack\n        }\n    });\n})(kendo);\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n/*jshint scripturl: true */\n(function(f, define){\n    define('editor/main',[\n        \"../util/undoredostack\",\n        \"../kendo.combobox\",\n        \"../kendo.dropdownlist\",\n        \"../kendo.window\",\n        \"../kendo.colorpicker\"\n    ], f);\n})(function(){\n\n(function($,undefined) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Widget = kendo.ui.Widget,\n        os = kendo.support.mobileOS,\n        browser = kendo.support.browser,\n        extend = $.extend,\n        proxy = $.proxy,\n        deepExtend = kendo.deepExtend,\n        keys = kendo.keys;\n\n    var SELECT = \"select\";\n    var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n    var PLACEHOLDER_CLASS= \"k-placeholder\";\n    var PLACEHOLDER_TAG_ID = \"placeholder\";\n    var REFRESH_INTERVAL = 200;\n    var DEFAULT_LANGUAGE = \"en\";\n\n    // options can be: template (as string), cssClass, title, defaultValue\n    var ToolTemplate = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        getHtml: function() {\n            var options = this.options;\n            return kendo.template(options.template, {useWithBlock:false})(options);\n        }\n    });\n\n    var EditorUtils = {\n        editorWrapperTemplate:\n            '<table cellspacing=\"0\" cellpadding=\"0\" class=\"k-widget k-editor\" role=\"presentation\">' +\n                '<tbody>' +\n                    '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\"></ul></td></tr>' +\n                    '<tr><td class=\"k-editable-area k-editor-content\"></td></tr>' +\n                '</tbody>' +\n            '</table>',\n\n        buttonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-tool\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' +\n                '<span class=\"#= iconCssClass #\"></span>' +\n                '<span class=\"k-tool-text k-button-text\">#= data.title #</span>' +\n            '</button>',\n\n        iconTextButtonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-i-import k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' +\n                '<span class=\"k-button-icon #= iconCssClass #\"></span>' +\n                '<span class=\"k-button-text\">#= data.title #</span>' +\n            '</button>',\n\n        tableWizardButtonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-tool k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">'+\n                '<span class=\"#= iconCssClass #\"></span>' +\n                '<span class=\"k-tool-text\">#= data.title #</span>'+\n            '</button>',\n\n        colorPickerTemplate:\n            '<input class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n\n        comboBoxTemplate:\n            '<select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select>',\n\n        dropDownListTemplate:\n            '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select></span>',\n\n        separatorTemplate:\n            '<span class=\"k-separator\"></span>',\n\n        overflowAnchorTemplate:\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-tool k-overflow-anchor\" data-popup' +\n                ' title=\"#= data.title #\" aria-label=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' +\n                '<span class=\"k-icon k-i-more-vertical k-button-icon\"></span>' +\n            '</button>',\n\n        formatByName: function(name, format) {\n            for (var i = 0; i < format.length; i++) {\n                if ($.inArray(name, format[i].tags) >= 0) {\n                    return format[i];\n                }\n            }\n        },\n\n        getToolCssClass: function (name) {\n            var toolCssClassNames = {\n\n                superscript: \"sup-script\",\n                subscript: \"sub-script\",\n                justifyLeft: \"align-left\",\n                justifyCenter: \"align-center\",\n                justifyRight: \"align-right\",\n                justifyFull: \"align-justify\",\n                insertUnorderedList: \"list-unordered\",\n                insertOrderedList: \"list-ordered\",\n                insertUpperRomanList: \"list-roman-upper\",\n                insertLowerRomanList: \"list-roman-lower\",\n                \"import\": \"import\",\n                indent: \"indent-increase\",\n                outdent: \"indent-decrease\",\n                createLink: \"link-horizontal\",\n                unlink: \"unlink-horizontal\",\n                insertImage: \"image\",\n                insertFile: \"file-add\",\n                viewHtml: \"html\",\n                foreColor: \"foreground-color\",\n                backColor: \"paint\",\n                createTable: \"table-insert\",\n                addColumnLeft: \"table-column-insert-left\",\n                addColumnRight: \"table-column-insert-right\",\n                addRowAbove: \"table-row-insert-above\",\n                addRowBelow: \"table-row-insert-below\",\n                deleteRow: \"table-row-delete\",\n                deleteColumn: \"table-column-delete\",\n                mergeCellsHorizontally: \"cells-merge-horizontally\",\n                mergeCellsVertically: \"cells-merge-vertically\",\n                splitCellHorizontally: \"cell-split-horizontally\",\n                splitCellVertically: \"cell-split-vertically\",\n                tableWizard: \"table-properties\",\n                tableWizardInsert: \"table-wizard\",\n                tableAlignLeft: \"table-position-left\",\n                tableAlignCenter: \"table-position-center\",\n                tableAlignRight: \"table-position-right\",\n                cleanFormatting: \"clear-css\",\n                copyFormat: \"copy-format\",\n                applyFormat: \"apply-format\"\n            };\n\n            var cssClass = toolCssClassNames[name];\n            if(cssClass) {\n                return cssClass;\n            }\n            return name;\n        },\n\n        registerTool: function(toolName, tool) {\n            var toolOptions = tool.options;\n            if (toolOptions && toolOptions.template) {\n                toolOptions.template.options.cssClass = \"k-\" + EditorUtils.getToolCssClass(toolName);\n            }\n\n            if (!tool.name) {\n                tool.options.name = toolName;\n                tool.name = toolName.toLowerCase();\n            }\n\n            Editor.defaultTools[toolName] = tool;\n        },\n\n        registerFormat: function(formatName, format) {\n            Editor.fn.options.formats[formatName] = format;\n        },\n\n        cacheComments: function (content, comments) {\n            for(var index in comments){\n                content = content.replace(comments[index], \"{\" + index + \"}\");\n            }\n            return content;\n        },\n\n        retrieveComments: function (content, comments) {\n            for(var index in comments){\n                content = content.replace(\"{\" + index + \"}\", comments[index]);\n            }\n            return content;\n        }\n    };\n\n    var messages = {\n        bold: \"Bold\",\n        italic: \"Italic\",\n        underline: \"Underline\",\n        strikethrough: \"Strikethrough\",\n        superscript: \"Superscript\",\n        subscript: \"Subscript\",\n        justifyCenter: \"Center text\",\n        justifyLeft: \"Align text left\",\n        justifyRight: \"Align text right\",\n        justifyFull: \"Justify\",\n        insertUnorderedList: \"Insert unordered list\",\n        insertOrderedList: \"Insert ordered list\",\n        indent: \"Indent\",\n        outdent: \"Outdent\",\n        createLink: \"Insert hyperlink\",\n        unlink: \"Remove hyperlink\",\n        insertImage: \"Insert image\",\n        insertFile: \"Insert file\",\n        insertHtml: \"Insert HTML\",\n        viewHtml: \"View HTML\",\n        fontName: \"Select font family\",\n        fontNameInherit: \"(inherited font)\",\n        fontSize: \"Select font size\",\n        fontSizeInherit: \"(inherited size)\",\n        formatBlock: \"Format\",\n        formatting: \"Format\",\n        foreColor: \"Color\",\n        backColor: \"Background color\",\n        style: \"Styles\",\n        emptyFolder: \"Empty Folder\",\n        editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n        uploadFile: \"Upload\",\n        overflowAnchor: \"More tools\",\n        orderBy: \"Arrange by:\",\n        orderBySize: \"Size\",\n        orderByName: \"Name\",\n        invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n        deleteFile: 'Are you sure you want to delete \"{0}\"?',\n        overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n        directoryNotFound: \"A directory with this name was not found.\",\n        imageWebAddress: \"Web address\",\n        imageAltText: \"Alternate text\",\n        imageWidth: \"Width (px)\",\n        imageHeight: \"Height (px)\",\n        fileWebAddress: \"Web address\",\n        fileTitle: \"Title\",\n        fileText: \"Text\",\n        linkWebAddress: \"Web address\",\n        linkText: \"Text\",\n        linkToolTip: \"ToolTip\",\n        linkOpenInNewWindow: \"Open link in new window\",\n        dialogUpdate: \"Update\",\n        dialogInsert: \"Insert\",\n        dialogOk: \"Ok\",\n        dialogCancel: \"Cancel\",\n        cleanFormatting: \"Clean formatting\",\n        createTable: \"Create a table\",\n        createTableHint: \"Create a {0} x {1} table\",\n        addColumnLeft: \"Add column on the left\",\n        addColumnRight: \"Add column on the right\",\n        addRowAbove: \"Add row above\",\n        addRowBelow: \"Add row below\",\n        deleteRow: \"Delete row\",\n        deleteColumn: \"Delete column\",\n        mergeCellsHorizontally: \"Merge cells horizontally\",\n        mergeCellsVertically: \"Merge cells vertically\",\n        splitCellHorizontally: \"Split cells horizontally\",\n        splitCellVertically: \"Split cells vertically\",\n        tableAlignLeft: \"Table Align Left\",\n        tableAlignCenter: \"Table Align Center\",\n        tableAlignRight: \"Table Align Right\",\n        tableWizard: \"Table Wizard\",\n        tableTab: \"Table\",\n        cellTab: \"Cell\",\n        accessibilityTab: \"Accessibility\",\n        caption: \"Caption\",\n        summary: \"Summary\",\n        width: \"Width\",\n        height: \"Height\",\n        units: \"Units\",\n        cellSpacing: \"Cell Spacing\",\n        cellPadding: \"Cell Padding\",\n        cellMargin: \"Cell Margin\",\n        alignment: \"Alignment\",\n        background: \"Background\",\n        cssClass: \"CSS Class\",\n        id: \"ID\",\n        border: \"Border\",\n        borderStyle: \"Border Style\",\n        collapseBorders: \"Collapse borders\",\n        wrapText: \"Wrap text\",\n        associateCellsWithHeaders: \"Associate headers\",\n        alignLeft: \"Align Left\",\n        alignCenter: \"Align Center\",\n        alignRight: \"Align Right\",\n        alignLeftTop: \"Align Left Top\",\n        alignCenterTop: \"Align Center Top\",\n        alignRightTop: \"Align Right Top\",\n        alignLeftMiddle: \"Align Left Middle\",\n        alignCenterMiddle: \"Align Center Middle\",\n        alignRightMiddle: \"Align Right Middle\",\n        alignLeftBottom: \"Align Left Bottom\",\n        alignCenterBottom: \"Align Center Bottom\",\n        alignRightBottom: \"Align Right Bottom\",\n        alignRemove: \"Remove Alignment\",\n        columns: \"Columns\",\n        rows: \"Rows\",\n        selectAllCells: \"Select All Cells\",\n        exportAs: \"Export As\",\n        \"import\": \"Import\",\n        print: \"Print\",\n        headerRows: \"Header Rows\",\n        headerColumns: \"Header Cols\",\n        tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n        associateNone: \"None\",\n        associateScope: \"Associate using 'scope' attribute\",\n        associateIds: \"Associate using Ids\",\n        copyFormat: \"Copy format\",\n        applyFormat: \"Apply format\",\n        borderNone: \"None\",\n        undo: \"Undo\",\n        redo: \"Redo\"\n    };\n\n    var supportedBrowser = !os || (os.ios && os.flatVersion >= 500) || (!os.ios && typeof(document.documentElement.contentEditable) != 'undefined');\n\n    var toolGroups = {\n        basic: [ \"bold\", \"italic\", \"underline\" ],\n        alignment: [ \"justifyLeft\", \"justifyCenter\", \"justifyRight\" ],\n        lists: [ \"insertUnorderedList\", \"insertOrderedList\" ],\n        indenting: [ \"indent\", \"outdent\" ],\n        formatPainter: [ \"copyFormat\", \"applyFormat\" ],\n        links: [ \"createLink\", \"unlink\" ],\n        tables: [ \"tableWizard\", \"createTable\", \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\", \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\", \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ]\n    };\n\n    var Editor = Widget.extend({\n        init: function (element, options) {\n            var that = this,\n                value,\n                editorNS = kendo.ui.editor,\n                toolbarContainer,\n                toolbarOptions,\n                type, comments;\n            var domElement;\n            var dom = editorNS.Dom;\n\n            /* suppress initialization in mobile webkit devices (w/o proper contenteditable support) */\n            if (!supportedBrowser) {\n                return;\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.options = deepExtend({}, that.options, options);\n            that.options.tools = that.options.tools.slice();\n\n            element = that.element;\n            domElement = element[0];\n\n            type = dom.name(domElement);\n\n            this._registerHandler(\n                element.closest(\"form\"), \"submit\", proxy(that.update, that, undefined)\n            );\n\n            toolbarOptions = extend({}, that.options);\n            toolbarOptions.editor = that;\n\n            if (type == \"textarea\") {\n                that._wrapTextarea();\n\n                toolbarContainer = that.wrapper.find(\".k-editor-toolbar\");\n\n                if (domElement.id) {\n                    toolbarContainer.attr(\"aria-controls\", domElement.id);\n                }\n            } else {\n                that.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n\n                toolbarOptions.popup = true;\n\n                toolbarContainer = $('<ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n            }\n\n            that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n\n            that.toolbar.bindTo(that);\n\n            if (type == \"textarea\") {\n                setTimeout(function () {\n                    var heightStyle = that.wrapper[0].style.height;\n                    var expectedHeight = parseInt(heightStyle, 10);\n                    var actualHeight = that.wrapper.height();\n                    if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                        that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                    }\n                });\n            }\n\n            that._resizable();\n            that._initializeContentElement(that);\n\n            that.keyboard = new editorNS.Keyboard([\n                new editorNS.BackspaceHandler(that),\n                new editorNS.TypingHandler(that),\n                new editorNS.SystemHandler(that),\n                new editorNS.SelectAllHandler(that)\n            ]);\n\n            that.clipboard = new editorNS.Clipboard(this);\n\n            that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n            if (options && options.value) {\n                value = options.value;\n            } else if (that.textarea) {\n                // indented HTML introduces problematic ranges in IE\n                value = domElement.value;\n\n                if(!value.replace(/\\s/g, '').length) {\n                    value = value.replace(/\\s/g, '');\n                }\n\n                // revert encoding of value when content is fetched from cache\n                if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                    value = domElement.defaultValue;\n                }\n\n                var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                comments = dom.getAllComments(deserializedRoot);\n                value = EditorUtils.cacheComments(value, comments);\n                value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                value = EditorUtils.retrieveComments(value, comments);\n            } else {\n                value = domElement.innerHTML;\n            }\n\n            that.value(value || '\\ufeff');\n\n            // using $.proxy here will break #5337\n            this._registerHandler(document, {\n                \"mousedown\": function() { that._endTyping(); },\n                \"mouseup\": function(e) { that._mouseup(e); }\n            });\n\n            that._initializeImmutables();\n\n            that.toolbar.resize();\n\n            kendo.notify(that);\n        },\n\n        setOptions: function(options) {\n            var editor = this;\n\n            Widget.fn.setOptions.call(editor, options);\n            if (options.tools) {\n                editor.toolbar.bindTo(editor);\n            }\n\n            this._initializePlaceholder();\n        },\n\n        _togglePlaceholder: function(show) {\n            var that = this,\n                body = that.body,\n                $body = $(body),\n                placeholder = that.options.placeholder;\n\n            if(!that.textarea || !placeholder) {\n                return;\n            }\n\n            $body.attr('aria-label', function() {\n                return  show ? placeholder : \"\";\n            });\n\n            $body.toggleClass(PLACEHOLDER_CLASS, show);\n        },\n\n        _endTyping: function() {\n            var keyboard = this.keyboard;\n\n            try {\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                    this.saveSelection();\n                }\n            } catch (e) { }\n        },\n\n        _selectionChange: function() {\n            this._selectionStarted = false;\n            this.saveSelection();\n            this.trigger(\"select\", {});\n        },\n\n        _resizable: function() {\n            var resizable = this.options.resizable;\n            var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined || resizable.content === true) : resizable;\n\n            if (isResizable && this.textarea) {\n                var draggableElement = $(\"<div class='k-resize-handle'><span class='k-icon k-i-arrow-45-down-right'></span></div>\")\n                    .insertAfter(this.textarea);\n\n                this.wrapper.addClass('k-resizable');\n\n                this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                    draggableElement: draggableElement,\n                    start: function(e) {\n                        var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                        this.initialSize = editor.height();\n                        editor.find(\"td\").last().append(\"<div class='k-overlay' />\");\n                    },\n                    resize: function(e) {\n                        var delta = e.y.initialDelta;\n                        var newSize = this.initialSize + delta;\n                        var min = this.options.min || 0;\n                        var max = this.options.max || Infinity;\n\n                        newSize = Math.min(max, Math.max(min, newSize));\n\n                        this.editor.height(newSize);\n                    },\n                    resizeend: function() {\n                        this.editor.find(\".k-overlay\").remove();\n                        this.editor = null;\n                    }\n                }));\n\n                if (kendo.support.mobileOS.ios) {\n                    var resizableWidget = this.wrapper.getKendoResizable();\n                    resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                }\n            }\n        },\n\n        _initializeElementResizing: function() {\n            var editor = this;\n\n            kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n            editor._showElementResizeHandlesProxy = proxy(editor._showElementResizeHandles, editor);\n            editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n        },\n\n        _destroyElementResizing: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing) {\n                elementResizing.destroy();\n                editor.elementResizing = null;\n            }\n\n            if (editor._showElementResizeHandlesProxy) {\n                editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n            }\n        },\n\n        _showElementResizeHandles: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                elementResizing.showResizeHandles();\n            } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                editor._destroyElementResizing();\n            }\n        },\n\n        _initializeColumnResizing: function() {\n            kendo.ui.editor.ColumnResizing.create(this);\n        },\n\n        _destroyColumnResizing: function() {\n            var editor = this;\n\n            if (editor.columnResizing) {\n                editor.columnResizing.destroy();\n                editor.columnResizing = null;\n            }\n        },\n\n        _initializeRowResizing: function() {\n            kendo.ui.editor.RowResizing.create(this);\n        },\n\n        _destroyRowResizing: function() {\n            var editor = this;\n\n            if (editor.rowResizing) {\n                editor.rowResizing.destroy();\n                editor.rowResizing = null;\n            }\n        },\n\n        _wrapTextarea: function() {\n            var that = this,\n                textarea = that.element,\n                w = textarea[0].style.width,\n                h = textarea[0].style.height,\n                template = EditorUtils.editorWrapperTemplate,\n                editorWrap = $(template).insertBefore(textarea),\n                editArea = editorWrap.find(\".k-editable-area\");\n\n            editorWrap.css({\n                \"width\": w,\n                \"height\": h\n            });\n\n            textarea.attr(\"autocomplete\", \"off\")\n                .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n            that.textarea = textarea;\n            that.wrapper = editorWrap;\n        },\n\n        _createContentElement: function(stylesheets) {\n            var editor = this;\n            var iframe, wnd, doc;\n            var textarea = editor.textarea;\n            var specifiedDomain = editor.options.domain;\n            var domain = specifiedDomain || document.domain;\n            var domainScript = \"\";\n            var src = 'javascript:\"\"';\n            var lang =\"\";\n\n            textarea.hide();\n\n            iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n            $(iframe)\n                .css(\"display\", \"\")\n                .addClass(\"k-content k-iframe\")\n                .attr(\"tabindex\", textarea[0].tabIndex)\n                .insertBefore(textarea);\n\n            // automatically relax same-origin policy if document.domain != location.hostname,\n            // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n            if (specifiedDomain || domain != location.hostname) {\n                // relax same-origin policy\n                domainScript = \"<script>document.domain=\\\"\" + domain + \"\\\"</script>\";\n                src = \"javascript:document.write('\" + domainScript + \"')\";\n                iframe.src = src;\n            }\n\n            if(!iframe.src) {\n                iframe.src = \"\";\n            }\n\n            wnd = iframe.contentWindow || iframe;\n            doc = wnd.document || iframe.contentDocument;\n\n            $(iframe).one(\"load\", function() {\n                editor.toolbar.decorateFrom(doc.body);\n            });\n\n            lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n            doc.open();\n            doc.write(\n                \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                \"<meta charset='utf-8' />\" +\n                \"<title>Kendo UI Editor content</title>\" +\n                \"<style>\" +\n                    \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                    \"body{padding:0;margin:0;}\" +\n                    \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                    \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                    (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                    (os.ios ? \"word-break:keep-all;\" : \"\") +\n                    (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                    \"}\" +\n                    \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                    \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                    \"ul,ol{padding-left:2.5em}\" +\n                    \"span{-ms-high-contrast-adjust:none;}\" +\n                    \"a{color:#00a}\" +\n                    \"code{font-size:1.23em}\" +\n                    \"telerik\\\\3Ascript{display: none;}\" +\n                    \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                    \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                    \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                    \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                    \".k-table p{margin:0;padding:0;}\" +\n                    \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                    \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                    \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                    \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                    \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                    \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                    \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                    \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                    \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                    \".k-table.k-element-resizing{opacity:0.6;}\" +\n                    \".k-placeholder{color:grey}\" +\n                    \"k\\\\:script{display:none;}\" +\n                \"</style>\" +\n                domainScript +\n                $.map(stylesheets, function(href){\n                    return \"<link rel='stylesheet' href='\" + href + \"'>\";\n                }).join(\"\") +\n                \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n            );\n            doc.close();\n\n            return wnd;\n        },\n\n        _blur: function() {\n            var textarea = this.textarea;\n            var old = textarea ? textarea.val() : this._oldValue;\n            var value = this.options.encoded ? this.encodedValue() : this.value();\n\n            this.update();\n\n            if (textarea) {\n                textarea.trigger(\"blur\");\n            }\n\n            if (value != old) {\n                this.trigger(\"change\");\n                if(textarea) {\n                    textarea.trigger(\"change\");\n                }\n            }\n        },\n\n        _spellCorrect: function(editor) {\n            var beforeCorrection;\n            var falseTrigger = false;\n\n            this._registerHandler(editor.body, {\n                \"contextmenu\": function() {\n                    editor.one(\"select\", function() {\n                        beforeCorrection = null;\n                    });\n\n                    editor._spellCorrectTimeout = setTimeout(function() {\n                        beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                        falseTrigger = false;\n                    }, 10);\n                },\n                \"input\": function() {\n                    if (!beforeCorrection) {\n                        return;\n                    }\n\n                    if (kendo.support.browser.mozilla && !falseTrigger) {\n                        falseTrigger = true;\n                        return;\n                    }\n\n                    kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                }\n            });\n        },\n\n        _registerHandler: function(element, type, handler) {\n            var editor = this;\n            var NS = \".kendoEditor\";\n            var eventNames;\n            var i;\n\n            element = $(element);\n\n            if (!this._handlers) {\n                this._handlers = [];\n            }\n\n            if (element.length) {\n                if ($.isPlainObject(type)) {\n                    for (var t in type) {\n                        if (type.hasOwnProperty(t)) {\n                            this._registerHandler(element, t, type[t]);\n                        }\n                    }\n                } else {\n                    //map the original event to handle interaction on mobile platforms\n                    eventNames = kendo.applyEventMap(type).split(\" \");\n\n                    for (i = 0; i < eventNames.length; i++) {\n                        editor._handlers.push({\n                            element: element,\n                            type: eventNames[i] + NS,\n                            handler: handler\n                        });\n\n                        element.on(eventNames[i] + NS, handler);\n                    }\n                }\n            }\n        },\n\n        _deregisterHandlers: function() {\n            var handlers = this._handlers;\n\n            for (var i = 0; i < handlers.length; i++) {\n                var h = handlers[i];\n                h.element.off(h.type, h.handler);\n            }\n\n            this._handlers = [];\n        },\n\n        _initializeContentElement: function() {\n            var editor = this;\n            var doc;\n            var blurTrigger;\n            var mousedownTrigger;\n\n            if (editor.textarea) {\n                editor.window = editor._createContentElement(editor.options.stylesheets);\n                doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                // https://github.com/telerik/kendo-ui-core/issues/3515\n                if (!doc.body) {\n                    var body = doc.createElement(\"body\");\n                    body.setAttribute(\"contenteditable\", \"true\");\n                    body.setAttribute(\"autocorrect\", \"off\");\n                    doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                    var interval = setInterval(function (){\n                        if ($(editor.document).find(\"body\").length > 1) {\n                            $(editor.document).find(\"body\").last().remove();\n                            window.clearInterval(interval);\n                        }\n                    },10);\n                }\n\n                editor.body = doc.body;\n\n                blurTrigger = editor.window;\n                mousedownTrigger = doc;\n\n                this._registerHandler(doc, \"mouseup\", proxy(this._mouseup, this));\n            } else {\n                editor.window = window;\n                doc = editor.document = document;\n                editor.body = editor.element[0];\n\n                blurTrigger = editor.body;\n                mousedownTrigger = editor.body;\n\n                editor.toolbar.decorateFrom(editor.body);\n            }\n\n            this._registerHandler(blurTrigger, \"blur\", proxy(this._blur, this));\n            editor._registerHandler(mousedownTrigger, \"down\", proxy(editor._mousedown, editor));\n\n            try {\n                doc.execCommand(\"enableInlineTableEditing\", null, false);\n            } catch(e) { }\n\n            if (kendo.support.touch) {\n                this._registerHandler(doc, {\n                    \"keydown\": function() {\n                        // necessary in iOS when touch events are bound to the page\n                        if (kendo._activeElement() != doc.body) {\n                            editor.window.focus();\n                        }\n                    }\n                });\n            }\n\n            this._initializePlaceholder();\n\n            this._spellCorrect(editor);\n\n            this._registerHandler(editor.document, {\n                \"mouseover dragenter\": function(e){\n                    var height = $(editor.body).height();\n                    var htmlHeight = $(editor.body.parentElement).height();\n\n                    if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                        editor._cachedHeight = \"\" + editor.body.style.height;\n                        editor.body.style.height = \"100%\";\n                    }\n                },\n                \"mouseout dragleave drop contextmenu\": function(e){\n                    var restoreHeight = function(){\n                        if (editor._cachedHeight !== undefined && e.target === editor.body) {\n                            editor.body.style.height = editor._cachedHeight;\n                            delete editor._cachedHeight;\n                        }\n                    };\n\n                    if (e.type === \"contextmenu\") {\n                        setTimeout(function(){\n                            restoreHeight();\n                        }, 10);\n                    } else {\n                        restoreHeight();\n                    }\n\n                }\n            });\n\n            this._registerHandler(editor.body, {\n                \"keydown\": function (e) {\n                    var range;\n\n                    if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                        return false;\n                    }\n\n                    if (e.keyCode === keys.F10) {\n                        // Handling with timeout to avoid the default IE menu\n                        setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                        editor.toolbar.preventPopupHide = true;\n                        e.preventDefault();\n                        return;\n                    } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                        // skip bom nodes when navigating with arrows\n                        range = editor.getRange();\n                        var left = e.keyCode == keys.LEFT;\n                        var container = range[left ? \"startContainer\" : \"endContainer\"];\n                        var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                        var direction = left ? -1 : 1;\n\n                        var next = offset + direction;\n                        var nextChar = left ? next : offset;\n\n                        if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                            range.setStart(container, next);\n                            range.collapse(true);\n                            editor.selectRange(range);\n                        }\n                    }\n\n                    var tools = editor.toolbar.tools;\n                    var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                    var toolOptions = toolName ? tools[toolName].options : {};\n                    if (toolName && !toolOptions.keyPressCommand) {\n                        e.preventDefault();\n\n                        if (!/^(undo|redo)$/.test(toolName)) {\n                            editor.keyboard.endTyping(true);\n                        }\n\n                        editor.trigger(\"keydown\", e);\n                        editor.exec(toolName);\n                        editor._runPostContentKeyCommands(e);\n\n                        return false;\n                    }\n\n                    editor.keyboard.clearTimeout();\n\n                    editor.keyboard.keydown(e);\n                },\n                \"keypress\": function(e) {\n                    setTimeout(function () {\n                        editor._runPostContentKeyCommands(e);\n                        editor._showElementResizeHandles();\n                    }, 0);\n                },\n                \"keyup\": function (e) {\n                    var selectionCodes = [\n                       keys.BACKSPACE,\n                       keys.TAB,\n                       keys.PAGEUP,\n                       keys.PAGEDOWN,\n                       keys.END,\n                       keys.HOME,\n                       keys.LEFT,\n                       keys.UP,\n                       keys.RIGHT,\n                       keys.DOWN,\n                       keys.INSERT,\n                       keys.DELETE\n                    ];\n\n                    if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                        window.clearTimeout(this._refreshInterval);\n                        this._refreshInterval = window.setTimeout(function(){\n                            editor._selectionChange();\n                        }, REFRESH_INTERVAL);\n                    }\n\n                    editor.keyboard.keyup(e);\n                },\n                \"click\": function(e) {\n                    var dom = kendo.ui.editor.Dom, range;\n\n                    if (dom.name(e.target) === \"img\") {\n                        range = editor.createRange();\n                        range.selectNode(e.target);\n                        editor.selectRange(range);\n                    }\n                },\n                \"cut copy paste drop dragover\": function (e) {\n                    editor.clipboard[\"on\" + e.type](e);\n                },\n                \"focusin\": function () {\n                    if (editor.body.hasAttribute(\"contenteditable\")) {\n                        $(this).addClass(\"k-state-active\");\n                        editor.toolbar.show();\n                        editor._togglePlaceholder(false);\n                    }\n                },\n                \"focusout\": function() {\n                    setTimeout(function() {\n                        var active = kendo._activeElement();\n                        var body = editor.body;\n                        var toolbar = editor.toolbar;\n\n                        if (toolbar.options.popup) {\n                            var toolbarContainerElement = toolbar.window.element.get(0);\n                            if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                toolbar.preventPopupHide = false;\n                            }\n                        }\n\n                        if (active != body && !$.contains(body, active) && !toolbar.focused() && !toolbar.preventPopupHide) {\n                            $(body).removeClass(\"k-state-active\");\n                            toolbar.hide();\n                        }\n\n                        editor._togglePlaceholder(!editor.value().trim());\n                    }, 10);\n                }\n            });\n\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n\n        _initializePlaceholder: function() {\n            var that = this,\n                placeholder = that.options.placeholder,\n                style, $head;\n\n            if(!that.textarea || !placeholder) {\n                return;\n            }\n\n            style = \"<style id='\"+ PLACEHOLDER_TAG_ID +\"'>.\" +\n                        PLACEHOLDER_CLASS +  \":before { content: '\"+ placeholder + \"'; }\" +\n                    \"</style>\";\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n            $head.append(style);\n\n            that._togglePlaceholder(!that.value().trim());\n        },\n\n        _initializeImmutables: function(){\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            if (that.options.immutables){\n                that.immutables = new editorNS.Immutables(that);\n            }\n        },\n\n        _mousedown: function (e) {\n            var editor = this;\n            editor._selectionStarted = true;\n\n            if ($(editor.body).parents('.k-window').length) {\n                e.stopPropagation();\n            }\n\n            // handle middle-click and ctrl-click on links\n            if (browser.gecko) {\n                return;\n            }\n\n            var target = $(e.target).closest(\"a[href]\");\n\n            if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target &&  target.is(\"a[href]\")) {\n                window.open(target.attr(\"href\"), \"_new\");\n            }\n\n            if(e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                setTimeout(function(){\n                    editor.body.focus();\n                }, 0);\n            }\n        },\n\n        _mouseup: function(e) {\n            var that = this;\n\n            if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                return;\n            }\n\n            if (that._selectionStarted) {\n                setTimeout(function() {\n                    that._selectionChange();\n                }, 1);\n            }\n        },\n\n        _runPostContentKeyCommands: function (e) {\n            var range = this.getRange();\n            var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n\n            for (var i = 0; i < tools.length; i++) {\n                var tool = tools[i];\n                var o = tool.options;\n                if (!o.keyPressCommand) {\n                    continue;\n                }\n\n                var cmd = new o.command({range: range});\n                if (cmd.changesContent()) {\n                    this.keyboard.endTyping(true);\n                    this.exec(tool.name);\n                }\n            }\n        },\n\n        refresh: function() {\n            var that = this;\n\n            if (that.textarea) {\n                that._destroyResizings();\n                // preserve updated value before re-initializing\n                // don't use update() to prevent the editor from encoding the content too early\n                var value = that.value();\n                that.textarea.val(value);\n                that.wrapper.find(\"iframe\").remove();\n                that._initializeContentElement(that);\n                that.value(value);\n            }\n        },\n\n        events: [\n            \"select\",\n            \"change\",\n            \"execute\",\n            \"error\",\n            \"paste\",\n            \"keydown\",\n            \"keyup\"\n        ],\n\n        options: {\n            name: \"Editor\",\n            messages: messages,\n            placeholder: \"\",\n            formats: {},\n            encoded: true,\n            domain: null,\n            resizable: false,\n            deserialization: {\n                custom: null\n            },\n            serialization: {\n                entities: true,\n                semantic: true,\n                scripts: false\n            },\n            pasteCleanup: {\n                all: false,\n                css: false,\n                custom: null,\n                keepNewLines: false,\n                msAllFormatting: false,\n                msConvertLists: true,\n                msTags: true,\n                none: false,\n                span: false\n            },\n            stylesheets: [],\n            dialogOptions: {\n                modal: true, resizable: false, draggable: true,\n                animation: false\n            },\n            imageBrowser: null,\n            fileBrowser: null,\n            fontName: [\n                { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                { text: \"Georgia\", value: \"Georgia, serif\" },\n                { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n            ],\n            fontSize: [\n                { text: \"1 (8pt)\",  value: \"xx-small\" },\n                { text: \"2 (10pt)\", value: \"x-small\" },\n                { text: \"3 (12pt)\", value: \"small\" },\n                { text: \"4 (14pt)\", value: \"medium\" },\n                { text: \"5 (18pt)\", value: \"large\" },\n                { text: \"6 (24pt)\", value: \"x-large\" },\n                { text: \"7 (36pt)\", value: \"xx-large\" }\n            ],\n            formatBlock: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            tools: [].concat.call(\n                [\"formatting\"],\n                toolGroups.basic,\n                [\"undo\", \"redo\"],\n                toolGroups.alignment,\n                toolGroups.formatPainter,\n                toolGroups.lists,\n                toolGroups.indenting,\n                toolGroups.links,\n                [\"insertImage\"],\n                toolGroups.tables\n            )\n        },\n\n        destroy: function() {\n            var editor = this;\n\n            Widget.fn.destroy.call(this);\n\n            this._endTyping(true);\n\n            this._deregisterHandlers();\n\n            clearTimeout(this._spellCorrectTimeout);\n\n            this._focusOutside();\n\n            this.toolbar.destroy();\n\n            editor._destroyUploadWidget();\n\n            editor._destroyResizings();\n\n            kendo.destroy(this.wrapper);\n        },\n\n        _destroyResizings: function() {\n            var editor = this;\n\n            editor._destroyElementResizing();\n            kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n            editor._destroyRowResizing();\n            kendo.ui.editor.RowResizing.dispose(editor);\n            editor._destroyColumnResizing();\n            kendo.ui.editor.ColumnResizing.dispose(editor);\n        },\n\n        _focusOutside: function () {\n            // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n            if (kendo.support.browser.msie && this.textarea) {\n                var tempInput = $(\"<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />\").appendTo(document.body).trigger(\"focus\");\n                tempInput.trigger(\"blur\").remove();\n            }\n        },\n\n        _destroyUploadWidget: function(){\n            var editor = this;\n            if (editor._uploadWidget) {\n                editor._uploadWidget.destroy();\n                editor._uploadWidget = null;\n            }\n        },\n\n        state: function(toolName) {\n            var tool = Editor.defaultTools[toolName];\n            var finder = tool && (tool.options.finder || tool.finder);\n            var RangeUtils = kendo.ui.editor.RangeUtils;\n            var range, textNodes;\n\n            if (finder) {\n                range = this.getRange();\n\n                textNodes = RangeUtils.textNodes(range);\n\n                if (!textNodes.length && range.collapsed) {\n                    textNodes = [range.startContainer];\n                }\n\n                return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n            }\n\n            return false;\n        },\n\n        value: function (html) {\n            var body = this.body,\n                editorNS = kendo.ui.editor,\n                options = this.options,\n                currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n            if (html === undefined) {\n                return currentHtml;\n            }\n\n            if (html == currentHtml) {\n                return;\n            }\n\n            editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n            this.selectionRestorePoint = null;\n            this.update();\n\n            this.toolbar.refreshTools();\n        },\n\n        saveSelection: function(range) {\n            range = range || this.getRange();\n            var container = range.commonAncestorContainer,\n                body = this.body;\n\n            if (container == body || $.contains(body, container)) {\n                this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n            }\n        },\n\n        _focusBody: function() {\n            var body = this.body;\n            var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n            var documentElement = this.document.documentElement;\n            var activeElement = kendo._activeElement();\n            var scrollTop;\n\n\n            if(!iframe && body.scrollHeight > body.clientHeight) {\n                scrollTop = body.scrollTop;\n                body.focus();\n                body.scrollTop = scrollTop;\n\n            } else if(activeElement != body && activeElement != iframe) {\n                scrollTop = documentElement.scrollTop;\n                body.focus();\n                documentElement.scrollTop = scrollTop;\n            }\n        },\n\n        restoreSelection: function() {\n            this._focusBody();\n\n            if (this.selectionRestorePoint) {\n                this.selectRange(this.selectionRestorePoint.toRange());\n            }\n        },\n\n        focus: function () {\n            this.restoreSelection();\n        },\n\n        update: function (value) {\n            value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n            if (this.textarea) {\n                this.textarea.val(value);\n                this._togglePlaceholder(!value.trim());\n            } else {\n                this._oldValue = value;\n            }\n        },\n\n        encodedValue: function () {\n            return kendo.ui.editor.Dom.encode(this.value());\n        },\n\n        createRange: function (document) {\n            return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n        },\n\n        getSelection: function () {\n            return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n        },\n\n        selectRange: function(range) {\n            this._focusBody();\n            var selection = this.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            this.saveSelection(range);\n        },\n\n        getRange: function () {\n            var selection = this.getSelection(),\n                range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                doc = this.document;\n\n            if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                range.setStart(this.body, 0);\n                range.collapse(true);\n            }\n\n            return range;\n        },\n\n        _containsRange: function (range) {\n            var dom = kendo.ui.editor.Dom;\n            var body = this.body;\n            return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                dom.isAncestorOrSelf(body, range.endContainer);\n        },\n\n        _deleteSavedRange: function () {\n            if (\"_range\" in this) {\n                delete this._range;\n            }\n        },\n\n        selectedHtml: function() {\n            return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n        },\n\n        paste: function (html, options) {\n            this.focus();\n\n            var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                range: this.getRange(),\n                html: html\n            }, options));\n\n            command.editor = this;\n\n            command.exec();\n        },\n\n        exec: function (name, params) {\n            var that = this;\n            var command = null;\n            var range, tool, prevented;\n\n            if (!name) {\n                throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n            }\n\n            if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                name !== \"print\" &&\n                name !== \"pdf\" &&\n                name !== \"exportAs\") {\n                return false;\n            }\n\n            name = name.toLowerCase();\n\n            if (!that.keyboard.isTypingInProgress()) {\n                that._focusBody();\n                that.selectRange(that._range || that.getRange());\n            }\n\n            tool = that.toolbar.toolById(name);\n\n            if (!tool) {\n                // execute non-toolbar tool\n                for (var id in Editor.defaultTools) {\n                    if (id.toLowerCase() == name) {\n                        tool = Editor.defaultTools[id];\n                        break;\n                    }\n                }\n            }\n\n            if (tool) {\n                range = that.getRange();\n\n                if (tool.command) {\n                    command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                }\n\n                prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                if (prevented) {\n                    return;\n                }\n\n                if (/^(undo|redo)$/i.test(name)) {\n                    that.undoRedoStack[name]();\n                } else if (command) {\n                    that.execCommand(command);\n\n                    if (command.async) {\n                        command.change = proxy(that._selectionChange, that);\n                        return;\n                    }\n                }\n\n                that._selectionChange();\n            }\n        },\n\n        execCommand: function(command) {\n            if (!command.managesUndoRedo) {\n                this.undoRedoStack.push(command);\n            }\n\n            command.editor = this;\n            command.exec();\n        }\n    });\n\n    Editor.defaultTools = {};\n\n    kendo.ui.plugin(Editor);\n\n    var Tool = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        initialize: function(ui, options) {\n            ui.attr({ unselectable: \"on\", title: options.title, \"aria-label\": options.title });\n        },\n\n        command: function (commandArguments) {\n            return new this.options.command(commandArguments);\n        },\n\n        update: $.noop\n    });\n\n    Tool.exec = function (editor, name, value) {\n        editor.exec(name, { value: value });\n    };\n\n    var UndoTool = Tool.extend({\n        command:  $.noop,\n        update: function (ui, nodes, undoRedoStack) {\n            var that = this,\n                name = that.options.name;\n\n            switch (name) {\n                case \"undo\":\n                    ui.attr(\"disabled\", !undoRedoStack.canUndo());\n                    break;\n                case \"redo\":\n                    ui.attr(\"disabled\", !undoRedoStack.canRedo());\n                    break;\n                default:\n                    break;\n            }\n        }\n    });\n\n    EditorUtils.registerTool(\"separator\", new Tool({ template: new ToolTemplate({template: EditorUtils.separatorTemplate})}));\n    EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Undo\"})}));\n    EditorUtils.registerTool(\"redo\", new UndoTool({key: \"Y\", ctrl: true, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Redo\"})}));\n\n    // Exports ================================================================\n\n    var emptyElementContent = '\\ufeff';\n    var emptyTableCellContent = emptyElementContent;\n\n    if(browser.msie || browser.edge) {\n        emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n    }\n\n    extend(kendo.ui, {\n        editor: {\n            ToolTemplate: ToolTemplate,\n            EditorUtils: EditorUtils,\n            Tool: Tool,\n            emptyElementContent: emptyElementContent,\n            emptyTableCellContent: emptyTableCellContent\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Editor.prototype);\n        Editor.prototype._drawPDF = function() {\n            return kendo.drawing.drawDOM(this.body, this.options.pdf);\n        };\n        Editor.prototype.saveAsPDF = function() {\n            var progress = new $.Deferred();\n            var promise = progress.promise();\n            var args = { promise: promise };\n\n            if (this.trigger(\"pdfExport\", args)) {\n                return;\n            }\n\n            var options = this.options.pdf;\n\n            this._drawPDF(progress)\n            .then(function(root) {\n                return kendo.drawing.exportPDF(root, options);\n            })\n            .done(function(dataURI) {\n                kendo.saveAs({\n                    dataURI: dataURI,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL,\n                    proxyTarget: options.proxyTarget,\n                    forceProxy: options.forceProxy\n                });\n                progress.resolve();\n            })\n            .fail(function(err) {\n                progress.reject(err);\n            });\n\n            return promise;\n        };\n    }\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/dom',[ \"./main\" ], f);\n})(function(){\n\n(function($) {\n\nvar kendo = window.kendo,\n    map = $.map,\n    extend = $.extend,\n    browser = kendo.support.browser,\n    STYLE = \"style\",\n    FLOAT = \"float\",\n    CSSFLOAT = \"cssFloat\",\n    STYLEFLOAT = \"styleFloat\",\n    CLASS = \"class\",\n    KMARKER = \"k-marker\";\n\nfunction makeMap(items) {\n    var obj = {},\n        i, len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n        obj[items[i]] = true;\n    }\n    return obj;\n}\n\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n    nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n    blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n    block = makeMap(blockElements),\n    selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n    inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n    inline = makeMap(inlineElements),\n    fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\"));\n\nvar normalize = function (node) {\n    if (node.nodeType == 1) {\n        node.normalize();\n    }\n};\n\nif (browser.msie && browser.version >= 8) {\n    normalize = function(parent) {\n        if (parent.nodeType == 1 && parent.firstChild) {\n            var prev = parent.firstChild,\n                node = prev;\n\n            normalize(node);\n\n            while (true) {\n                node = node.nextSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                normalize(node);\n\n                if (node.nodeType == 3 && prev.nodeType == 3) {\n                    node.nodeValue = prev.nodeValue + node.nodeValue;\n                    Dom.remove(prev);\n                }\n\n                prev = node;\n            }\n        }\n    };\n}\n\nvar whitespace = /^\\s+$/,\n    emptyspace = /^[\\n\\r\\t]+$/,\n    rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n    bom = /\\ufeff/g,\n    whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n    persistedScrollTop,\n    cssAttributes =\n           (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n            \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n            \"border-top-style,border-top-width,border-top-color,\" +\n            \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n            \"border-left-style,border-left-width,border-left-color,\" +\n            \"border-right-style,border-right-width,border-right-color,\" +\n            \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n           ).split(\",\"),\n    htmlRe = /[<>\\&]/g,\n    entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n    entityTable = {\n            34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n            160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n            165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n            170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n            175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n            180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n            185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n            190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n            195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n            200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n            205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n            210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n            215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n            220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n            225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n            230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n            235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n            240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n            245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n            250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n            255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n            916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n            921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n            926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n            932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n            937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n            949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n            954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n            959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n            964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n            969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n            8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n            8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n            8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n            8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n            8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n            8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n            8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n            8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n            8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n            8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n            8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n            8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n            8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n            9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n            338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n            710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n            8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n            8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n            8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n            8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n        };\n\nvar Dom = {\n    block: block,\n    inline: inline,\n\n    findNodeIndex: function(node, skipText) {\n        var i = 0;\n\n        if (!node) {\n            return -1;\n        }\n\n        while (true) {\n            node = node.previousSibling;\n\n            if (!node) {\n                break;\n            }\n\n            if (!(skipText && node.nodeType == 3)) {\n                i++;\n            }\n        }\n\n        return i;\n    },\n\n    isDataNode: function(node) {\n        return node && node.nodeValue !== null && node.data !== null;\n    },\n\n    isAncestorOf: function(parent, node) {\n        try {\n            return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n        } catch (e) {\n            return false;\n        }\n    },\n\n    isAncestorOrSelf: function(root, node) {\n        return Dom.isAncestorOf(root, node) || root == node;\n    },\n\n    findClosestAncestor: function(root, node) {\n        if (Dom.isAncestorOf(root, node)) {\n            while (node && node.parentNode != root) {\n                node = node.parentNode;\n            }\n        }\n\n        return node;\n    },\n\n    getAllComments: function (rootElem) {\n        var comments = [];\n        // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n        var iterator = document.createNodeIterator(rootElem,\n            NodeFilter.SHOW_COMMENT,\n            function () {\n                return NodeFilter.FILTER_ACCEPT;\n            }, false);\n\n        var curNode = iterator.nextNode();\n        while (curNode) {\n            comments.push(curNode.nodeValue);\n            curNode = iterator.nextNode();\n        }\n        return comments;\n    },\n\n    getNodeLength: function(node) {\n        return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n    },\n\n    splitDataNode: function(node, offset) {\n        var newNode = node.cloneNode(false);\n        var denormalizedText = \"\";\n        var iterator = node.nextSibling;\n        var temp;\n\n        while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n            denormalizedText += iterator.nodeValue;\n            temp = iterator;\n            iterator = iterator.nextSibling;\n            Dom.remove(temp);\n        }\n\n        node.deleteData(offset, node.length);\n        newNode.deleteData(0, offset);\n        newNode.nodeValue += denormalizedText;\n        Dom.insertAfter(newNode, node);\n    },\n\n    attrEquals: function(node, attributes) {\n        for (var key in attributes) {\n            var value = node[key];\n\n            if (key == FLOAT) {\n                value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n            }\n\n            if (typeof value == \"object\") {\n                if (!Dom.attrEquals(value, attributes[key])) {\n                    return false;\n                }\n            } else if (value != attributes[key]) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    blockParentOrBody: function(node) {\n        return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n    },\n\n    blockParents: function(nodes) {\n        var blocks = [],\n            i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n            if (block && $.inArray(block, blocks) < 0) {\n                blocks.push(block);\n            }\n        }\n\n        return blocks;\n    },\n\n    windowFromDocument: function(document) {\n        return document.defaultView || document.parentWindow;\n    },\n\n    normalize: normalize,\n    blockElements: blockElements,\n    nonListBlockElements: nonListBlockElements,\n    inlineElements: inlineElements,\n    empty: empty,\n    fillAttrs: fillAttrs,\n    nodeTypes: {\n        ELEMENT_NODE: 1,\n        ATTRIBUTE_NODE: 2,\n        TEXT_NODE: 3,\n        CDATA_SECTION_NODE: 4,\n        ENTITY_REFERENCE_NODE: 5,\n        ENTITY_NODE: 6,\n        PROCESSING_INSTRUCTION_NODE: 7,\n        COMMENT_NODE: 8,\n        DOCUMENT_NODE: 9,\n        DOCUMENT_TYPE_NODE: 10,\n        DOCUMENT_FRAGMENT_NODE: 11,\n        NOTATION_NODE: 12\n    },\n\n    toHex: function (color) {\n        var matches = rgb.exec(color);\n\n        if (!matches) {\n            return color;\n        }\n\n        return \"#\" + map(matches.slice(1), function (x) {\n            x = parseInt(x, 10).toString(16);\n            return x.length > 1 ? x : \"0\" + x;\n        }).join(\"\");\n    },\n\n    encode: function (value, options) {\n        var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n        return value.replace(encodableChars, function(c) {\n            var charCode = c.charCodeAt(0);\n            var entity = entityTable[charCode];\n            return entity ? '&'+entity+';' : c;\n        });\n    },\n    isBom: function(node) {\n        return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n    },\n    stripBom: function(text) {\n        return (text || \"\").replace(bom, \"\");\n    },\n\n    stripBomNode: function(node) {\n        if(Dom.isBom(node)) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    insignificant: function(node) {\n        var attr = node.attributes;\n\n        return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n    },\n    tableCell: function(node) {\n        return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n    },\n    significantNodes: function(nodes) {\n        return $.grep(nodes, function(child) {\n            var name = Dom.name(child);\n\n            if (name == 'br') {\n                return false;\n            } else if (Dom.insignificant(child)) {\n                return false;\n            } else if (Dom.emptyTextNode(child)) {\n                return false;\n            } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                return false;\n            }\n\n            return true;\n        });\n    },\n\n    emptyTextNode: function(node) {\n        return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n    },\n\n    emptyNode: function(node) {\n        return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n    },\n\n    name: function (node) {\n        return node.nodeName.toLowerCase();\n    },\n\n    significantChildNodes: function(node) {\n        return $.grep(node.childNodes, function(child) {\n            return child.nodeType != 3 || !Dom.isWhitespace(child);\n        });\n    },\n\n    lastTextNode: function(node) {\n        var result = null;\n\n        if (node.nodeType == 3) {\n            return node;\n        }\n\n        for (var child = node.lastChild; child; child = child.previousSibling) {\n            result = Dom.lastTextNode(child);\n\n            if (result) {\n                return result;\n            }\n        }\n\n        return result;\n    },\n\n    is: function (node, nodeName) {\n        return node && Dom.name(node) == nodeName;\n    },\n\n    isMarker: function(node) {\n        return node.className == KMARKER;\n    },\n\n    isWhitespace: function(node) {\n        return whitespace.test(node.nodeValue);\n    },\n\n    allWhitespaceContent: function(node) {\n        var child = node.firstChild;\n        while(child && Dom.isWhitespace(child)) {\n            child = child.nextSibling;\n        }\n\n        return !child;\n    },\n\n\n    isEmptyspace: function(node) {\n        return emptyspace.test(node.nodeValue);\n    },\n\n    htmlIndentSpace: function (node){\n        if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n            return false;\n        }\n\n        if (emptyspace.test(node.nodeValue)) {\n            return true;\n        }\n\n        var sibling = function(el, direction) {\n            while (el[direction]) {\n                el = el[direction];\n                if (Dom.significantNodes([el]).length  > 0) {\n                    return el;\n                }\n            }\n        };\n\n        var parent = node.parentNode;\n        var prev = sibling(node, \"previousSibling\");\n        var next = sibling(node, \"nextSibling\");\n\n        if (bom.test(node.nodeValue)) {\n            return !!(prev || next);\n        }\n\n        if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n            return true;\n        }\n\n        if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n            var isPrevBlock = prev && Dom.isBlock(prev);\n            var isNextBlock = next && Dom.isBlock(next);\n            if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    isBlock: function(node) {\n        return block[Dom.name(node)];\n    },\n\n    isSelfClosing: function(node) {\n        return selfClosing[Dom.name(node)];\n    },\n\n    isEmpty: function(node) {\n        return empty[Dom.name(node)];\n    },\n\n    isInline: function(node) {\n        return inline[Dom.name(node)];\n    },\n\n    isBr: function(node) {\n        return Dom.name(node) == \"br\";\n    },\n\n    list: function(node) {\n        var name = node ? Dom.name(node) : \"\";\n        return name == \"ul\" || name == \"ol\" || name == \"dl\";\n    },\n\n    scrollContainer: function(doc) {\n        var wnd = Dom.windowFromDocument(doc),\n            scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n        if (scrollContainer.compatMode == 'BackCompat') {\n            scrollContainer = scrollContainer.body;\n        } else {\n            scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n        }\n\n        return scrollContainer;\n    },\n\n    scrollTo: function (node, toStart) {\n        var doc = node.ownerDocument;\n        var wnd = Dom.windowFromDocument(doc);\n        var windowHeight = wnd.innerHeight;\n        var scrollContainer = Dom.scrollContainer(doc);\n        var element, elementTop, elementHeight, marker;\n\n        if (Dom.isDataNode(node)) {\n            if (toStart) {\n                marker = Dom.create(doc, \"span\", {\"innerHTML\": \"&#xfeff;\"});\n                Dom.insertBefore(marker, node);\n                element = $(marker);\n            } else {\n                element = $(node.parentNode);\n            }\n        } else {\n            element = $(node);\n        }\n\n        elementTop = element.offset().top;\n        elementHeight = element[0].offsetHeight;\n\n        if (toStart || !elementHeight) {\n            elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                            Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                            15;\n        }\n\n        if (marker) {\n            Dom.remove(marker);\n        }\n\n        if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n            scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n        }\n    },\n\n    persistScrollTop: function(doc) {\n        persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n    },\n\n    offset: function (target, offsetParent) {\n        var result = {top: target.offsetTop, left: target.offsetLeft};\n        var parent = target.offsetParent;\n\n        while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n            result.top += parent.offsetTop;\n            result.left += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n\n        return result;\n    },\n\n    restoreScrollTop: function(doc) {\n        if (typeof persistedScrollTop == \"number\") {\n            Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            persistedScrollTop = undefined;\n        }\n    },\n\n    insertAt: function (parent, newElement, position) {\n        parent.insertBefore(newElement, parent.childNodes[position] || null);\n    },\n\n    insertBefore: function (newElement, referenceElement) {\n        if (referenceElement.parentNode) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n        } else {\n            return referenceElement;\n        }\n    },\n\n    insertAfter: function (newElement, referenceElement) {\n        return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n    },\n\n    remove: function (node) {\n        if(node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    removeChildren: function(node){\n        while(node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n    },\n\n    removeTextSiblings: function(node) {\n        var parentNode = node.parentNode;\n\n        while (node.nextSibling && node.nextSibling.nodeType == 3) {\n            parentNode.removeChild(node.nextSibling);\n        }\n\n        while (node.previousSibling && node.previousSibling.nodeType == 3) {\n            parentNode.removeChild(node.previousSibling);\n        }\n    },\n\n    trim: function (parent) {\n        for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n            var node = parent.childNodes[i];\n            if (Dom.isDataNode(node)) {\n                if (!Dom.stripBom(node.nodeValue).length) {\n                    Dom.remove(node);\n                }\n            } else if (node.className != KMARKER) {\n                Dom.trim(node);\n\n                if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                    (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                    Dom.remove(node);\n                }\n            }\n        }\n\n        return parent;\n    },\n\n    closest: function(node, tags) {\n        if(typeof tags === \"string\") {\n            tags = [tags];\n        }\n\n        while (node && tags.indexOf(Dom.name(node)) < 0) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    closestBy: function(node, condition, rootCondition) {\n        while (node && !condition(node)) {\n            if (rootCondition && rootCondition(node)){\n                return null;\n            }\n            node = node.parentNode;\n        }\n        return node;\n    },\n\n    sibling: function(node, direction) {\n        do {\n            node = node[direction];\n        } while (node && node.nodeType != 1);\n\n        return node;\n    },\n\n    next: function(node) {\n        return Dom.sibling(node, \"nextSibling\");\n    },\n\n    prev: function(node) {\n        return Dom.sibling(node, \"previousSibling\");\n    },\n\n    parentOfType: function (node, tags) {\n        do {\n            node = node.parentNode;\n        } while (node && !(Dom.ofType(node, tags)));\n\n        return node;\n    },\n\n    ofType: function (node, tags) {\n        return $.inArray(Dom.name(node), tags) >= 0;\n    },\n\n    changeTag: function (referenceElement, tagName, skipAttributes) {\n        var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n            attributes = referenceElement.attributes,\n            i, len, name, value, attribute;\n\n        if (!skipAttributes) {\n            for (i = 0, len = attributes.length; i < len; i++) {\n                attribute = attributes[i];\n                if (attribute.specified) {\n                    // IE < 8 cannot set class or style via setAttribute\n                    name = attribute.nodeName;\n                    value = attribute.nodeValue;\n                    if (name == CLASS) {\n                        newElement.className = value;\n                    } else if (name == STYLE) {\n                        newElement.style.cssText = referenceElement.style.cssText;\n                    } else {\n                        newElement.setAttribute(name, value);\n                    }\n                }\n            }\n        }\n\n        while (referenceElement.firstChild) {\n            newElement.appendChild(referenceElement.firstChild);\n        }\n\n        Dom.insertBefore(newElement, referenceElement);\n        Dom.remove(referenceElement);\n        return newElement;\n    },\n\n    editableParent: function(node) {\n        while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    wrap: function (node, wrapper) {\n        Dom.insertBefore(wrapper, node);\n        wrapper.appendChild(node);\n        return wrapper;\n    },\n\n    unwrap: function (node) {\n        var parent = node.parentNode;\n        while (node.firstChild) {\n            parent.insertBefore(node.firstChild, node);\n        }\n\n        parent.removeChild(node);\n    },\n\n    wrapper: function(node) {\n        var wrapper = Dom.closestBy(node, function (el) {\n            return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n        });\n\n        return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n    },\n\n    create: function (document, tagName, attributes) {\n        return Dom.attr(document.createElement(tagName), attributes);\n    },\n\n    createEmptyNode: function (document, tagName, attributes) {\n        var node = Dom.attr(document.createElement(tagName), attributes);\n        node.innerHTML = \"\\ufeff\";\n        return node;\n    },\n\n    attr: function (element, attributes) {\n        attributes = extend({}, attributes);\n\n        if (attributes && STYLE in attributes) {\n            Dom.style(element, attributes.style);\n            delete attributes.style;\n        }\n\n        for (var attr in attributes) {\n            if (attributes[attr] === null) {\n                element.removeAttribute(attr);\n                delete attributes[attr];\n            } else if (attr == \"className\") {\n                element[attr] = attributes[attr];\n            }\n        }\n\n        return extend(element, attributes);\n    },\n\n    mergeAttributes: function (origin, target, traverseCss) {\n        if (!origin.attributes.length) {\n            return;\n        }\n\n        $.each(origin.attributes, function() {\n            if(this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                $(target).attr(this.name, this.value);\n            }\n\n            if (traverseCss && this.name === STYLE) {\n                $.each(origin.style, function(){\n                    target.style[this] = origin.style[this];\n                });\n            }\n        });\n    },\n\n    style: function (node, value) {\n        $(node).css(value || {});\n    },\n\n    unstyle: function (node, value) {\n        for (var key in value) {\n            if (key == FLOAT) {\n                key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n            }\n\n            node.style[key] = \"\";\n        }\n\n        if (node.style.cssText === \"\") {\n            node.removeAttribute(STYLE);\n        }\n    },\n\n    inlineStyle: function(body, name, attributes) {\n        var span = $(Dom.create(body.ownerDocument, name, attributes)),\n            style;\n\n        body.appendChild(span[0]);\n\n        style = map(cssAttributes, function(value) {\n            if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                return \"line-height:1.5\";\n            } else {\n                return value + \":\" + span.css(value);\n            }\n        }).join(\";\");\n\n        span.remove();\n\n        return style;\n    },\n\n    getEffectiveBackground: function(element) {\n        var backgroundStyle = element.css(\"background-color\") || \"\";\n\n        if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n            return backgroundStyle;\n        } else if (element[0].tagName.toLowerCase() === \"html\") {\n            return \"Window\";\n        } else {\n            return Dom.getEffectiveBackground(element.parent());\n        }\n    },\n\n    innerText: function(node) {\n        var text = node.innerHTML;\n        text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n        text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n        return text;\n    },\n\n    removeClass: function(node, classNames) {\n        var className = \" \" + node.className + \" \",\n            classes = classNames.split(\" \"),\n            i, len;\n\n        for (i = 0, len = classes.length; i < len; i++) {\n            className = className.replace(\" \" + classes[i] + \" \", \" \");\n        }\n\n        className = kendo.trim(className);\n\n        if (className.length) {\n            node.className = className;\n        } else {\n            node.removeAttribute(CLASS);\n        }\n    },\n\n    commonAncestor: function () {\n        var count = arguments.length,\n            paths = [],\n            minPathLength = Infinity,\n            output = null,\n            i, ancestors, node, first, j;\n\n        if (!count) {\n            return null;\n        }\n\n        if (count == 1) {\n            return arguments[0];\n        }\n\n        for (i = 0; i < count; i++) {\n            ancestors = [];\n            node = arguments[i];\n            while (node) {\n                ancestors.push(node);\n                node = node.parentNode;\n            }\n            paths.push(ancestors.reverse());\n            minPathLength = Math.min(minPathLength, ancestors.length);\n        }\n\n        if (count == 1) {\n            return paths[0][0];\n        }\n\n        for (i = 0; i < minPathLength; i++) {\n            first = paths[0][i];\n\n            for (j = 1; j < count; j++) {\n                if (first != paths[j][i]) {\n                    return output;\n                }\n            }\n\n            output = first;\n        }\n        return output;\n    },\n\n    closestSplittableParent: function(nodes) {\n        var result;\n\n        if (nodes.length == 1) {\n            result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n        } else {\n            result = Dom.commonAncestor.apply(null, nodes);\n        }\n\n        if (!result) {\n            result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n        }\n\n        if (Dom.isInline(result)) {\n            result = Dom.blockParentOrBody(result);\n        }\n\n        var editableParents = map(nodes, Dom.editableParent);\n        var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n        if ($.contains(result, editableAncestor)) {\n            result = editableAncestor;\n        }\n\n        return result;\n    },\n\n    closestEditable: function(node, types) {\n        var closest;\n        var editable = Dom.editableParent(node);\n\n        if (Dom.ofType(node, types)) {\n            closest = node;\n        } else {\n            closest = Dom.parentOfType(node, types);\n        }\n\n        if (closest && editable && $.contains(closest, editable)) {\n            closest = editable;\n        } else if (!closest && editable) {\n            closest = editable;\n        }\n\n        return closest;\n    },\n\n    closestEditableOfType: function(node, types) {\n        var editable = Dom.closestEditable(node, types);\n\n        if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n            return editable;\n        }\n    },\n\n    filter: function(tagName, nodes, invert) {\n        var filterFn = function (node) {\n            return Dom.name(node) == tagName;\n        };\n\n        return Dom.filterBy(nodes, filterFn, invert);\n    },\n\n    filterBy: function(nodes, condition, invert) {\n        var i = 0;\n        var len = nodes.length;\n        var result = [];\n        var match;\n\n        for (; i < len; i++) {\n            match = condition(nodes[i]);\n            if ((match && !invert) || (!match && invert)) {\n                result.push(nodes[i]);\n            }\n        }\n\n        return result;\n    },\n\n    ensureTrailingBreaks: function(node) {\n        var elements = $(node).find(\"p,td,th\");\n        var length = elements.length;\n        var i = 0;\n\n        if (length) {\n            for (; i < length; i++) {\n                Dom.ensureTrailingBreak(elements[i]);\n            }\n        } else {\n            Dom.ensureTrailingBreak(node);\n        }\n    },\n\n    removeTrailingBreak: function(node) {\n        $(node).find(\"br[type=_moz],.k-br\").remove();\n    },\n\n    ensureTrailingBreak: function(node) {\n        Dom.removeTrailingBreak(node);\n\n        var lastChild = node.lastChild;\n        var name = lastChild && Dom.name(lastChild);\n        var br;\n\n        if (!name ||\n            (name != \"br\" && name != \"img\") ||\n            (name == \"br\" && lastChild.className != \"k-br\")) {\n            br = node.ownerDocument.createElement(\"br\");\n            br.className = \"k-br\";\n            node.appendChild(br);\n        }\n    },\n\n    // Start: Table Utilities\n\n    reMapTableColumns: function (table, colAttr) {\n        Dom._mapColIndices(table, colAttr);\n    },\n\n    clearTableMappings: function (table, colAttr) {\n        $(table).find(\"[\"+ colAttr + \"]\").removeAttr(colAttr);\n    },\n\n    _mapColIndices: function (table, colAttr) {\n        var registeredColumns = {};\n\n        for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n            var cells = table.rows[rowIndex].cells;\n            var colIndex = 0;\n            for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                var cell = cells[cellIndex];\n\n                if(cell.rowSpan > 1) {\n                    this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                }\n\n                if(registeredColumns[rowIndex]) {\n                    while(registeredColumns[rowIndex][colIndex]) {\n                        colIndex++;\n                    }\n                }\n\n                cell.setAttribute(colAttr, colIndex);\n\n                if(cell.colSpan > 1) {\n                    colIndex = colIndex + cell.colSpan - 1;\n                }\n            }\n        }\n    },\n\n    _mapColspan: function (cell, rowIndex, colIndex, registeredColumns) {\n        var rowSpan = cell.rowSpan,\n            colSpan = cell.colSpan,\n            index;\n\n        for (var ci = 0; ci < colSpan; ci++) {\n            index = colIndex + ci;\n\n            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                if(!registeredColumns[ri]) {\n                    registeredColumns[ri] = {};\n                    registeredColumns[ri].length = 0;\n                }\n\n                if(registeredColumns[rowIndex]) {\n                    while(registeredColumns[rowIndex][index]) {\n                        index++;\n                    }\n                }\n\n                registeredColumns[ri][index] = true;\n                registeredColumns[ri].length++;\n            }\n        }\n\n    },\n\n    associateWithIds: function(table) {\n        var that = this;\n        var numberOfTheadRows = 0;\n        var tableRows = table.rows;\n        var numberOfTableRows = tableRows.length;\n        var theadMatrix = [];\n        var tbodyMatrix = [];\n        var theadRows, i;\n\n        if(table.tHead) {\n            theadRows = table.tHead.rows;\n            numberOfTheadRows = theadRows.length;\n        } else {\n            numberOfTheadRows = that._getNumberOfHeaderRows(table);\n            theadRows = [];\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadRows.push(tableRows[i]);\n            }\n        }\n        for (i = 0; i < numberOfTheadRows; i++) {\n            theadMatrix.push([]);\n        }\n        for (i = 0; i < numberOfTableRows; i++) {\n            tbodyMatrix.push([]);\n        }\n\n        that._generateIdsForColumns(theadMatrix, theadRows);\n        that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n    },\n\n    _generateIdsForColumns: function(theadMatrix, theadRows) {\n        var timestamp = new Date().getTime();\n        var numberOfTheadRows = theadRows ? theadRows.length : 0;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n        for (i = 0; i < numberOfTheadRows; i++) {\n            row = theadRows[i];\n            cells = row.cells;\n            col = 0;\n\n            for(j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while(theadMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for(k = 0; k < rowspan; k++) {\n                    for(l = 0; l < colspan; l++) {\n                        theadMatrix[i + k][j + col + l] = id;\n                    }\n                }\n            }\n        }\n    },\n\n    _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var timestamp = new Date().getTime();\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n        var pushHeaderId = function(row){\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"th\");\n            col = 0;\n\n            for(j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while(tbodyMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for(k = 0; k < rowspan; k++) {\n                    for(l = 0; l < colspan; l++) {\n                        tbodyMatrix[i + k][j + col + l] = id;\n                    }\n                }\n\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = [];\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, i, j, colIndex, headers;\n\n        var pushHeaderId = function(row){\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"td\");\n\n            for(j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = tbodyMatrix[i].slice();\n\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _getNumberOfColumns: function(table) {\n        var cells = $(table).find(\"th, td\");\n        var numberOfCols = 0;\n        var cell, i, currentIndex;\n\n        for(i = 0; i < cells.length; i++) {\n            cell = cells[i];\n            currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n            if(currentIndex > numberOfCols) {\n                numberOfCols = currentIndex;\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n        var rows = table.rows;\n        var numberOfCols = 0;\n        var currentIndex, row, i, j, cell;\n\n        for(i = numberOfHeaderRows; i < rows.length; i++) {\n            row = rows[i];\n\n            for(j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if(this.is(cell, \"th\")) {\n                    currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                    if(currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderRows: function(table) {\n        var rows = table.rows;\n        var thead = table.tHead;\n        var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n        var j, row, cell, length;\n\n        if(number === 0) {\n            row = rows[0];\n            length = row.cells && row.cells.length;\n\n            while(row && length && this.is(row.cells[0], \"th\")) {\n                for(j = 0; j < length; j++) {\n                    cell = row ? row.cells[j] : null;\n\n                    if(!this.is(cell, \"th\")) {\n                        row = null;\n                    }\n                }\n\n                if(row) {\n                    number += 1;\n                    row = this.next(row);\n                    length = row && row.cells && row.cells.length;\n                }\n            }\n        }\n\n        return number ;\n    },\n\n    // End: Table Utilities\n\n    _onlyUnique: function(value, index, self) {\n        return self.indexOf(value) === index;\n    }\n};\n\nkendo.ui.editor.Dom = Dom;\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n\n(function(f, define){\n    define('editor/serializer',[ \"./dom\" ], f);\n})(function(){\n\n(function($, undefined) {\n\n// Imports ================================================================\nvar kendo = window.kendo;\nvar Editor = kendo.ui.editor;\nvar dom = Editor.Dom;\nvar extend = $.extend;\n\nvar fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\nvar quoteRe = /\"/g; //\"\nvar brRe = /<br[^>]*>/i;\nvar pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\nvar emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\nvar cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\nvar sizzleAttr = /^sizzle-\\d+/i;\nvar scriptAttr = /^k-script-/i;\nvar onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\nvar br = '<br class=\"k-br\">';\nvar bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\nvar div = document.createElement(\"div\");\ndiv.innerHTML = \" <hr>\";\nvar supportsLeadingWhitespace = div.firstChild.nodeType === 3;\ndiv = null;\nvar isFunction = kendo.isFunction;\n\nvar TD = \"td\";\n\nvar Serializer = {\n    toEditableHtml: function(html) {\n        return (html || \"\")\n            .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n            .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n            .replace(/<img([^>]*)>/ig, function(match) {\n                return match.replace(onerrorRe, \"\");\n            })\n            .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n            .replace(/^<(table|blockquote)/i, br + '<$1')\n            .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n            .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n    },\n\n    _toEditableImmutables: function(body) {\n        var immutable = Editor.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)){\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)){\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    _fillEmptyElements: function(body) {\n        // fills empty elements to allow them to be focused\n        $(body).find(\"p,td\").each(function() {\n            var p = $(this);\n            if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                var node = this;\n                while (node.children[0] && node.children[0].nodeType != 3) {\n                    node = node.children[0];\n                }\n\n                if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                    if(dom.is(node, \"td\")) {\n                        node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                    }\n                    else {\n                        node.innerHTML = kendo.ui.editor.emptyElementContent;\n                    }\n                }\n            }\n        });\n    },\n\n    _removeSystemElements: function(body) {\n        // removes persisted system elements\n        $(\".k-paste-container\", body).remove();\n    },\n\n    _resetOrderedLists: function(root){\n        // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n        var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n        for (i = 0; i < ols.length; i++) {\n            ol = ols[i];\n            originalStart = ol.getAttribute(\"start\");\n\n            ol.setAttribute(\"start\", 1);\n\n            if (originalStart) {\n                ol.setAttribute(\"start\", originalStart);\n            } else {\n                ol.removeAttribute(originalStart);\n            }\n        }\n    },\n\n    _preventScriptExecution: function(root) {\n        $(root).find(\"*\").each(function() {\n            var attributes = this.attributes;\n            var attribute, i, l, name;\n            var attributesToRemove = [];\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n\n                if (attribute.specified && /^on/i.test(name)) {\n                    this.setAttribute(\"k-script-\" + name, attribute.value);\n                    attributesToRemove.push(name);\n                }\n            }\n\n            for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                this.removeAttribute(attributesToRemove[i]);\n            }\n        });\n    },\n\n    htmlToDom: function(html, root, options) {\n        var browser = kendo.support.browser;\n        var msie = browser.msie;\n        var o = options || {};\n        var immutables = o.immutables;\n\n        html = Serializer.toEditableHtml(html);\n\n        if(isFunction(o.custom)) {\n            html = o.custom(html) || html;\n        }\n        root.innerHTML = html;\n\n        if (immutables) {\n            immutables.deserialize(root);\n        }\n\n        if (msie) {\n            // unicode characters denormalize the DOM tree in IE9\n            dom.normalize(root);\n\n            Serializer._resetOrderedLists(root);\n        }\n\n        Serializer._preventScriptExecution(root);\n\n        Serializer._fillEmptyElements(root);\n\n        Serializer._removeSystemElements(root);\n\n        Serializer._toEditableImmutables(root);\n\n        // add k-table class to all tables\n        $(\"table\", root).addClass(\"k-table\");\n\n        return root;\n    },\n\n    domToXhtml: function(root, options) {\n        var result = [];\n        var immutables = options && options.immutables;\n\n        function semanticFilter(attributes) {\n            return $.grep(attributes, function(attr) {\n                return attr.name != \"style\";\n            });\n        }\n\n        function mapStart(node, tag) {\n            result.push('<' + tag);\n            attr(node);\n            result.push('>');\n        }\n\n        var tagMap = {\n            iframe: {\n                start: function (node) { mapStart(node, \"iframe\"); },\n                end: function () { result.push('</iframe>'); }\n            },\n            'k:script': {\n                start: function (node) { mapStart(node, \"script\"); },\n                end: function () { result.push('</script>'); },\n                skipEncoding: true\n            },\n            span: {\n                semantic: true,\n                start: function(node) {\n                    var style = node.style;\n                    var attributes = specifiedAttributes(node);\n                    var semanticAttributes = semanticFilter(attributes);\n\n                    if (semanticAttributes.length) {\n                        result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"<u>\");\n                    }\n\n                    var font = [];\n                    if (style.color) {\n                        font.push('color=\"' + dom.toHex(style.color) + '\"');\n                    }\n\n                    if (style.fontFamily) {\n                        font.push('face=\"' + style.fontFamily + '\"');\n                    }\n\n                    if (style.fontSize) {\n                        var size = $.inArray(style.fontSize, fontSizeMappings);\n                        font.push('size=\"' + size + '\"');\n                    }\n\n                    if (font.length) {\n                        result.push(\"<font \" + font.join(\" \") + \">\");\n                    }\n                },\n                end: function(node) {\n                    var style = node.style;\n\n                    if (style.color || style.fontFamily || style.fontSize) {\n                        result.push(\"</font>\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"</u>\");\n                    }\n\n                    if (semanticFilter(specifiedAttributes(node)).length) {\n                        result.push(\"</span>\");\n                    }\n                }\n            },\n            strong: {\n                semantic: true,\n                start: function (node) { mapStart(node, \"b\"); },\n                end: function () { result.push('</b>'); }\n            },\n            em: {\n                semantic: true,\n                start: function (node) { mapStart(node, \"i\"); },\n                end: function () { result.push('</i>'); }\n            },\n            b: {\n                semantic: false,\n                start: function (node) { mapStart(node, \"strong\"); },\n                end: function () { result.push('</strong>'); }\n            },\n            i: {\n                semantic: false,\n                start: function (node) { mapStart(node, \"em\"); },\n                end: function () { result.push('</em>'); }\n            },\n            u: {\n                semantic: false,\n                start: function (node) {\n                    result.push('<span');\n\n                    var attributes = specifiedAttributes(node);\n                    var style = $(attributes).filter(function(i, item){ return item.name == \"style\"; })[0];\n                    var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\"};\n\n                    if (style) {\n                        styleObj.value  = style.value;\n                        if (!/text-decoration/i.test(styleObj.value)) {\n                            styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                        }\n                        attributes.splice($.inArray(style, attributes), 1);\n                    }\n                    attributes.push(styleObj);\n\n                    attr(node, attributes);\n                    result.push('>');\n                },\n                end: function () { result.push('</span>'); }\n            },\n            font: {\n                semantic: false,\n                start: function (node) {\n                    result.push('<span style=\"');\n\n                    var color = node.getAttribute('color');\n                    var size = fontSizeMappings[node.getAttribute('size')];\n                    var face = node.getAttribute('face');\n\n                    if (color) {\n                        result.push('color:');\n                        result.push(dom.toHex(color));\n                        result.push(';');\n                    }\n\n                    if (face) {\n                        result.push('font-family:');\n                        result.push(face);\n                        result.push(';');\n                    }\n\n                    if (size) {\n                        result.push('font-size:');\n                        result.push(size);\n                        result.push(';');\n                    }\n\n                    result.push('\">');\n                },\n                end: function () {\n                    result.push('</span>');\n                }\n            }\n        };\n\n        tagMap.script = tagMap[\"k:script\"];\n\n        options = options || {};\n\n        if (typeof options.semantic == \"undefined\") {\n            options.semantic = true;\n        }\n\n        function cssProperties(cssText) {\n            var trim = kendo.trim;\n            var css = trim(cssText);\n            var match;\n            var property, value;\n            var properties = [];\n\n            cssDeclaration.lastIndex = 0;\n\n            while (true) {\n                match = cssDeclaration.exec(css);\n\n                if (!match) {\n                    break;\n                }\n\n                property = trim(match[1].toLowerCase());\n                value = trim(match[2]);\n\n                if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                    continue;\n                }\n\n                if (property.indexOf('color') >= 0) {\n                    value = dom.toHex(value);\n                } else if (property.indexOf('font') >= 0) {\n                    value = value.replace(quoteRe, \"'\");\n                } else if (/\\burl\\(/g.test(value)) {\n                    value = value.replace(quoteRe, \"\");\n                }\n\n                properties.push({ property: property, value: value });\n            }\n\n            return properties;\n        }\n\n        function styleAttr(cssText) {\n            var properties = cssProperties(cssText);\n            var i;\n\n            for (i = 0; i < properties.length; i++) {\n                result.push(properties[i].property);\n                result.push(':');\n                result.push(properties[i].value);\n                result.push(';');\n            }\n        }\n\n        function specifiedAttributes(node) {\n            var result = [];\n            var attributes = node.attributes;\n            var attribute, i, l;\n            var name, value, specified;\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n\n                name = attribute.nodeName;\n                value = attribute.value;\n                specified = attribute.specified;\n\n                // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                if (name == 'value' && 'value' in node && node.value) {\n                    specified = true;\n                } else if (name == 'type' && value == 'text') {\n                    specified = true;\n                } else if (name == \"class\" && !value) {\n                    specified = false;\n                } else if (sizzleAttr.test(name)) {\n                    specified = false;\n                } else if (name == 'complete') {\n                    specified = false;\n                } else if (name == 'altHtml') {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ul\")) {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                    specified = false;\n                } else if (name.indexOf('_moz') >= 0) {\n                    specified = false;\n                } else if (scriptAttr.test(name)) {\n                    specified = !!options.scripts;\n                } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                    specified = false;\n                }\n\n                if (specified) {\n                    result.push(attribute);\n                }\n            }\n\n            return result;\n        }\n\n        function attr(node, attributes) {\n            var i, l, attribute, name, value;\n\n            attributes = attributes || specifiedAttributes(node);\n\n            if (dom.is(node, 'img')) {\n                var width = node.style.width,\n                    height = node.style.height,\n                    $node = $(node);\n\n                if (width && pixelRe.test(width)) {\n                    $node.attr('width', parseInt(width, 10));\n                    dom.unstyle(node, { width: undefined });\n                }\n\n                if (height && pixelRe.test(height)) {\n                    $node.attr('height', parseInt(height, 10));\n                    dom.unstyle(node, { height: undefined });\n                }\n            }\n\n            if (!attributes.length) {\n                return;\n            }\n\n            // Remove the following if everything seems to be in order.\n            // https://github.com/telerik/kendo-ui-core/issues/3639\n            // attributes.sort(function (a, b) {\n            //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n            // });\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                value = attribute.value;\n\n                if (name == \"class\" && value == \"k-table\") {\n                    continue;\n                }\n\n                name = name.replace(scriptAttr, \"\");\n\n                result.push(' ');\n                result.push(name);\n                result.push('=\"');\n\n                if (name == 'style') {\n                    styleAttr(value || node.style.cssText);\n                } else if (name == 'src' || name == 'href') {\n                    result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                } else {\n                    result.push(dom.fillAttrs[name] ? name : value);\n                }\n\n                result.push('\"');\n            }\n        }\n\n        function children(node, skip, skipEncoding) {\n            for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                child(childNode, skip, skipEncoding);\n            }\n        }\n\n        function text(node) {\n            return node.nodeValue.replace(/\\ufeff/g, \"\");\n        }\n\n        function isEmptyBomNode(node) {\n            if (dom.isBom(node)) {\n                do {\n                    node = node.parentNode;\n\n                    if (dom.is(node, TD) && node.childNodes.length === 1) {\n                        return true;\n                    }\n\n                    if (node.childNodes.length !== 1) {\n                        return false;\n                    }\n                } while(!dom.isBlock(node));\n\n                return true;\n            }\n\n            return false;\n        }\n\n        function child(node, skip, skipEncoding) {\n            var nodeType = node.nodeType,\n                tagName, mapper,\n                parent, value, previous, jqNode;\n\n            if (immutables && Editor.Immutables.immutable(node)) {\n                result.push(immutables.serialize(node));\n            } else if (nodeType == 1) {\n                tagName = dom.name(node);\n                jqNode = $(node);\n\n                if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                    return;\n                }\n\n                if (!tagName || dom.insignificant(node)) {\n                    return;\n                }\n\n                if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                    return;\n                }\n\n                mapper = tagMap[tagName];\n\n                if (mapper) {\n                    if (typeof mapper.semantic == \"undefined\" ||\n                        (options.semantic ^ mapper.semantic)) {\n                        mapper.start(node);\n                        children(node, false, mapper.skipEncoding);\n                        mapper.end(node);\n                        return;\n                    }\n                }\n\n                result.push('<');\n                result.push(tagName);\n\n                attr(node);\n\n                if (dom.empty[tagName]) {\n                    result.push(' />');\n                } else {\n                    result.push('>');\n                    children(node, skip || dom.is(node, 'pre'));\n                    result.push('</');\n                    result.push(tagName);\n                    result.push('>');\n                }\n            } else if (nodeType == 3) {\n                if(isEmptyBomNode(node)) {\n                    result.push('&nbsp;');\n                    return;\n                }\n\n                value = text(node);\n\n                if (!skip && supportsLeadingWhitespace) {\n                    parent = node.parentNode;\n                    previous = node.previousSibling;\n\n                    if (!previous) {\n                         previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                    }\n\n                    if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                        value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                    }\n\n                    value = value.replace(/ +/, ' ');\n                }\n\n                result.push(skipEncoding ? value : dom.encode(value, options));\n\n            } else if (nodeType == 4) {\n                result.push('<![CDATA[');\n                result.push(node.data);\n                result.push(']]>');\n            } else if (nodeType == 8) {\n                if (node.data.indexOf('[CDATA[') < 0) {\n                    result.push('<!--');\n                    result.push(node.data);\n                    result.push('-->');\n                } else {\n                    result.push('<!');\n                    result.push(node.data);\n                    result.push('>');\n                }\n            }\n        }\n\n        function textOnly(root) {\n            var childrenCount = root.childNodes.length;\n            var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n            return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n        }\n\n        function runCustom() {\n            if (kendo.isFunction(options.custom)) {\n                result = options.custom(result) || result;\n            }\n        }\n\n        if (textOnly(root)) {\n            result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n            runCustom();\n\n            return result;\n        }\n\n        children(root);\n        result = result.join('');\n        runCustom();\n\n        // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n        if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n            return \"\";\n        }\n\n        return result;\n    }\n\n};\n\nextend(Editor, {\n    Serializer: Serializer\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n\n\n(function(f, define){\n    define('editor/components',[ \"./serializer\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    DropDownList = kendo.ui.DropDownList,\n    dom = kendo.ui.editor.Dom;\n\nvar SelectBox = DropDownList.extend({\n    init: function(element, options) {\n        var that = this;\n\n        DropDownList.fn.init.call(that, element, options);\n\n        // overlay drop-down with popout for snappier interaction\n        if (kendo.support.mobileOS.ios) {\n            this._initSelectOverlay();\n            this.bind(\"dataBound\", $.proxy(this._initSelectOverlay, this));\n        }\n\n        that.text(that.options.title);\n\n        that.element.attr(\"title\", that.options.title);\n        that.wrapper.attr(\"title\", that.options.title);\n\n        that.bind(\"open\", function() {\n            if (that.options.autoSize) {\n                var list = that.list,\n                    listWidth;\n\n                list.css({\n                        whiteSpace: \"nowrap\",\n                        width: \"auto\"\n                    });\n\n                listWidth = list.width();\n\n                if (listWidth > 0) {\n                    listWidth += 20;\n                } else {\n                    listWidth = that._listWidth;\n                }\n\n                list.css(\"width\", listWidth + kendo.support.scrollbar());\n\n                that._listWidth = listWidth;\n            }\n        });\n    },\n    options: {\n        name: \"SelectBox\",\n        index: -1\n    },\n\n    _initSelectOverlay: function() {\n        var selectBox = this;\n        var value = selectBox.value();\n        var view = this.dataSource.view();\n        var item;\n        var html = \"\";\n        var encode = kendo.htmlEncode;\n\n        for (var i = 0; i < view.length; i++) {\n            item = view[i];\n\n            html += \"<option value='\" + encode(item.value) + \"'\";\n\n            if (item.value == value) {\n                html += \" selected\";\n            }\n\n            html += \">\" + encode(item.text) + \"</option>\";\n        }\n\n        var select = $(\"<select class='k-select-overlay'>\" + html + \"</select>\");\n        var wrapper = $(this.element).closest(\".k-widget\");\n\n        wrapper.next(\".k-select-overlay\").remove();\n\n        select.insertAfter(wrapper);\n\n        select.on(\"change\", function() {\n            selectBox.value(this.value);\n            selectBox.trigger(\"change\");\n        });\n    },\n\n    value: function(value) {\n        var that = this,\n            result = DropDownList.fn.value.call(that, value);\n\n        if (value === undefined) {\n            return result;\n        }\n\n        if (!DropDownList.fn.value.call(that)) {\n           that.text(that.options.title);\n        }\n    },\n\n    decorate: function(body) {\n        var that = this,\n            dataSource = that.dataSource,\n            items = dataSource.data(),\n            i, tag, className, style;\n\n        if (body) {\n            that.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n        }\n\n        for (i = 0; i < items.length; i++) {\n            tag = items[i].tag || \"span\";\n            className = items[i].className;\n\n            style = dom.inlineStyle(body, tag, { className : className });\n\n            style = style.replace(/\"/g, \"'\");\n\n            items[i].style = style + \";display:inline-block\";\n        }\n\n        dataSource.trigger(\"change\");\n    }\n});\n\n\nkendo.ui.plugin(SelectBox);\nkendo.ui.editor.SelectBox = SelectBox;\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n/*jshint boss: true */\n\n(function(f, define){\n    define('editor/range',[ \"./components\" ], f);\n})(function(){\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        browser = kendo.support.browser,\n        dom = Editor.Dom,\n        findNodeIndex = dom.findNodeIndex,\n        isDataNode = dom.isDataNode,\n        findClosestAncestor = dom.findClosestAncestor,\n        getNodeLength = dom.getNodeLength,\n        normalize = dom.normalize;\n\nvar SelectionUtils = {\n    selectionFromWindow: function(window) {\n        if(!window) {\n            return;\n        }\n\n        if (!(\"getSelection\" in window)) {\n            return new W3CSelection(window.document);\n        }\n\n        return window.getSelection();\n    },\n\n    selectionFromRange: function(range) {\n        var rangeDocument = RangeUtils.documentFromRange(range);\n        return SelectionUtils.selectionFromDocument(rangeDocument);\n    },\n\n    selectionFromDocument: function(document) {\n        return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n    }\n};\n\nvar W3CRange = Class.extend({\n    init: function(doc) {\n        $.extend(this, {\n            ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n            startContainer: doc,\n            endContainer: doc,\n            commonAncestorContainer: doc,\n            startOffset: 0,\n            endOffset: 0,\n            collapsed: true\n        });\n    },\n\n    // Positioning Methods\n    setStart: function (node, offset) {\n        this.startContainer = node;\n        this.startOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, true);\n    },\n\n    setEnd: function (node, offset) {\n        this.endContainer = node;\n        this.endOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, false);\n    },\n\n    setStartBefore: function (node) {\n        this.setStart(node.parentNode, findNodeIndex(node));\n    },\n\n    setStartAfter: function (node) {\n        this.setStart(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    setEndBefore: function (node) {\n        this.setEnd(node.parentNode, findNodeIndex(node));\n    },\n\n    setEndAfter: function (node) {\n        this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    selectNode: function (node) {\n        this.setStartBefore(node);\n        this.setEndAfter(node);\n    },\n\n    selectNodeContents: function (node) {\n        this.setStart(node, 0);\n        this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n    },\n\n    collapse: function (toStart) {\n        var that = this;\n\n        if (toStart) {\n            that.setEnd(that.startContainer, that.startOffset);\n        } else {\n            that.setStart(that.endContainer, that.endOffset);\n        }\n    },\n\n    // Editing Methods\n\n    deleteContents: function () {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        (function deleteSubtree(iterator) {\n            while (iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    deleteSubtree(iterator.getSubtreeIterator());\n                } else {\n                    iterator.remove();\n                }\n            }\n        })(new RangeIterator(range));\n    },\n\n    cloneContents: function () {\n        // clone subtree\n        var document = RangeUtils.documentFromRange(this);\n        return (function cloneSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                    if (iterator.hasPartialSubtree()) {\n                        node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n        })(new RangeIterator(this));\n    },\n\n    extractContents: function () {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        var document = RangeUtils.documentFromRange(that);\n\n        return (function extractSubtree(iterator) {\n            var node, frag = document.createDocumentFragment();\n\n            while (node = iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    node = node.cloneNode(false);\n                    node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                } else {\n                    iterator.remove(that.originalRange);\n                }\n\n                frag.appendChild(node);\n            }\n\n            return frag;\n        })(new RangeIterator(range));\n    },\n\n    insertNode: function (node) {\n        var that = this;\n\n        if (isDataNode(that.startContainer)) {\n            if (that.startOffset != that.startContainer.nodeValue.length) {\n                dom.splitDataNode(that.startContainer, that.startOffset);\n            }\n\n            dom.insertAfter(node, that.startContainer);\n        } else {\n            dom.insertAt(that.startContainer, node, that.startOffset);\n        }\n\n        that.setStart(that.startContainer, that.startOffset);\n    },\n\n    cloneRange: function () {\n        // fast copy\n        return $.extend(new W3CRange(this.ownerDocument), {\n            startContainer: this.startContainer,\n            endContainer: this.endContainer,\n            commonAncestorContainer: this.commonAncestorContainer,\n            startOffset: this.startOffset,\n            endOffset: this.endOffset,\n            collapsed: this.collapsed,\n\n            originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n        });\n    },\n\n    // used for debug purposes\n    toString: function () {\n        var startNodeName = this.startContainer.nodeName,\n            endNodeName = this.endContainer.nodeName;\n\n        return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n    }\n});\n\nW3CRange.fromNode = function(node) {\n    return new W3CRange(node.ownerDocument);\n};\n\n/* can be used in Range.compareBoundaryPoints if we need it one day */\nfunction compareBoundaries(start, end, startOffset, endOffset) {\n    if (start == end) {\n        return endOffset - startOffset;\n    }\n\n    // end is child of start\n    var container = end;\n    while (container && container.parentNode != start) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return findNodeIndex(container) - startOffset;\n    }\n\n    // start is child of end\n    container = start;\n    while (container && container.parentNode != end) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return endOffset - findNodeIndex(container) - 1;\n    }\n\n    // deep traversal\n    var root = dom.commonAncestor(start, end);\n    var startAncestor = start;\n\n    while (startAncestor && startAncestor.parentNode != root) {\n        startAncestor = startAncestor.parentNode;\n    }\n\n    if (!startAncestor) {\n        startAncestor = root;\n    }\n\n    var endAncestor = end;\n    while (endAncestor && endAncestor.parentNode != root) {\n        endAncestor = endAncestor.parentNode;\n    }\n\n    if (!endAncestor) {\n        endAncestor = root;\n    }\n\n    if (startAncestor == endAncestor) {\n        return 0;\n    }\n\n    return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n}\n\nfunction fixIvalidRange(range, toStart) {\n    function isInvalidRange(range) {\n        try {\n            return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n        } catch (ex) {\n            // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n            return true;\n        }\n    }\n\n    if (isInvalidRange(range)) {\n        if (toStart) {\n            range.commonAncestorContainer = range.endContainer = range.startContainer;\n            range.endOffset = range.startOffset;\n        } else {\n            range.commonAncestorContainer = range.startContainer = range.endContainer;\n            range.startOffset = range.endOffset;\n        }\n\n        range.collapsed = true;\n    }\n}\n\nfunction updateRangeProperties(range) {\n    range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n    var node = range.startContainer;\n    while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n        node = node.parentNode;\n    }\n\n    range.commonAncestorContainer = node;\n}\n\nvar RangeIterator = Class.extend({\n    init: function(range) {\n        $.extend(this, {\n            range: range,\n            _current: null,\n            _next: null,\n            _end: null\n        });\n\n        if (range.collapsed) {\n            return;\n        }\n\n        var root = range.commonAncestorContainer;\n\n        this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n        range.startContainer.childNodes[range.startOffset] :\n        findClosestAncestor(root, range.startContainer);\n\n        this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n        range.endContainer.childNodes[range.endOffset] :\n        findClosestAncestor(root, range.endContainer).nextSibling;\n    },\n\n    hasNext: function () {\n        return !!this._next;\n    },\n\n    next: function () {\n        var that = this,\n            current = that._current = that._next;\n        that._next = that._current && that._current.nextSibling != that._end ?\n        that._current.nextSibling : null;\n\n        if (isDataNode(that._current)) {\n            if (that.range.endContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n            }\n\n            if (that.range.startContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(0, that.range.startOffset);\n            }\n        }\n\n        return current;\n    },\n\n    traverse: function (callback) {\n        var that = this,\n            current;\n\n        function next() {\n            that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n            return that._current;\n        }\n\n        while (current = next()) {\n            if (that.hasPartialSubtree()) {\n                that.getSubtreeIterator().traverse(callback);\n            } else {\n                callback(current);\n            }\n        }\n\n        return current;\n    },\n\n    remove: function (originalRange) {\n        var that = this,\n            inStartContainer = that.range.startContainer == that._current,\n            inEndContainer = that.range.endContainer == that._current,\n            start, end, delta;\n\n        if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n            start = inStartContainer ? that.range.startOffset : 0;\n            end = inEndContainer ? that.range.endOffset : that._current.length;\n            delta = end - start;\n\n            if (originalRange && (inStartContainer || inEndContainer)) {\n                if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                    originalRange.startOffset -= delta;\n                }\n\n                if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                    originalRange.endOffset -= delta;\n                }\n            }\n\n            that._current.deleteData(start, delta);\n        } else {\n            var parent = that._current.parentNode;\n\n            if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                var nodeIndex = findNodeIndex(that._current);\n\n                if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                    originalRange.startOffset -= 1;\n                }\n\n                if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                    originalRange.endOffset -= 1;\n                }\n            }\n\n            dom.remove(that._current);\n        }\n    },\n\n    hasPartialSubtree: function () {\n        return !isDataNode(this._current) &&\n        (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n            dom.isAncestorOrSelf(this._current, this.range.endContainer));\n    },\n\n    getSubtreeIterator: function () {\n        return new RangeIterator(this.getSubRange());\n    },\n\n    getSubRange: function(){\n        var that = this,\n            subRange = that.range.cloneRange();\n        subRange.selectNodeContents(that._current);\n        if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n            subRange.setStart(that.range.startContainer, that.range.startOffset);\n        }\n        if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n            subRange.setEnd(that.range.endContainer, that.range.endOffset);\n        }\n\n        return subRange;\n    }\n});\n\nvar W3CSelection = Class.extend({\n    init: function(doc) {\n        this.ownerDocument = doc;\n        this.rangeCount = 1;\n    },\n\n    addRange: function (range) {\n        var textRange = this.ownerDocument.body.createTextRange();\n\n        // end container should be adopted first in order to prevent selection with negative length\n        adoptContainer(textRange, range, false);\n        adoptContainer(textRange, range, true);\n\n        textRange.select();\n    },\n\n    removeAllRanges: function () {\n        var selection = this.ownerDocument.selection;\n\n        if (selection.type != \"None\") {\n            selection.empty();\n        }\n    },\n\n    getRangeAt: function () {\n        var textRange,\n            range = new W3CRange(this.ownerDocument),\n            selection = this.ownerDocument.selection,\n            element, commonAncestor;\n\n        try {\n            textRange = selection.createRange();\n            element = textRange.item ? textRange.item(0) : textRange.parentElement();\n            if (element.ownerDocument != this.ownerDocument) {\n                return range;\n            }\n        } catch (ex) {\n            return range;\n        }\n\n        if (selection.type == \"Control\") {\n            range.selectNode(textRange.item(0));\n        } else {\n            commonAncestor = textRangeContainer(textRange);\n            adoptEndPoint(textRange, range, commonAncestor, true);\n            adoptEndPoint(textRange, range, commonAncestor, false);\n\n            if (range.startContainer.nodeType == 9) {\n                range.setStart(range.endContainer, range.startOffset);\n            }\n\n            if (range.endContainer.nodeType == 9) {\n                range.setEnd(range.startContainer, range.endOffset);\n            }\n\n            if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                range.collapse(false);\n            }\n\n            var startContainer = range.startContainer,\n                endContainer = range.endContainer,\n                body = this.ownerDocument.body;\n\n            if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) &&  // check for full body selection\n                !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                var movedStart = false,\n                    movedEnd = false;\n\n                while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                    startContainer = startContainer.parentNode;\n                    movedStart = true;\n                }\n\n                while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                    endContainer = endContainer.parentNode;\n                    movedEnd = true;\n                }\n\n                if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                    range.setStart(startContainer, 0);\n                    range.setEnd(endContainer, getNodeLength(body));\n                }\n            }\n        }\n\n        return range;\n    }\n});\n\nfunction textRangeContainer(textRange) {\n    var left = textRange.duplicate(),\n        right = textRange.duplicate();\n\n    left.collapse(true);\n    right.collapse(false);\n\n    return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n}\n\nfunction adoptContainer(textRange, range, start) {\n    // find anchor node and offset\n    var container = range[start ? \"startContainer\" : \"endContainer\"],\n        offset = range[start ? \"startOffset\" : \"endOffset\"],\n        textOffset = 0,\n        isData = isDataNode(container),\n        anchorNode = isData ? container : container.childNodes[offset] || null,\n        anchorParent = isData ? container.parentNode : container,\n        doc = range.ownerDocument,\n        cursor = doc.body.createTextRange(),\n        cursorNode;\n\n    // visible data nodes need a text offset\n    if (container.nodeType == 3 || container.nodeType == 4) {\n        textOffset = offset;\n    }\n\n    if (!anchorParent) {\n        anchorParent = doc.body;\n    }\n\n    if (anchorParent.nodeName.toLowerCase() == \"img\") {\n        cursor.moveToElementText(anchorParent);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    } else {\n        // create a cursor element node to position range (since we can't select text nodes)\n        cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n        cursor.moveToElementText(cursorNode);\n        dom.remove(cursorNode);\n        cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    }\n}\n\nfunction adoptEndPoint(textRange, range, commonAncestor, start) {\n    var cursorNode = dom.create(range.ownerDocument, \"a\"),\n        cursor = textRange.duplicate(),\n        comparison = start ? \"StartToStart\" : \"StartToEnd\",\n        result, parent, target,\n        previous, next,\n        args, index,\n        appended = false;\n\n    cursorNode.innerHTML = \"\\ufeff\";\n    cursor.collapse(start);\n\n    parent = cursor.parentElement();\n\n    if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n        parent = commonAncestor;\n    }\n\n    // detect range end points\n    // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n    do {\n        if (appended) {\n            parent.insertBefore(cursorNode, cursorNode.previousSibling);\n        } else {\n            parent.appendChild(cursorNode);\n            appended = true;\n        }\n        cursor.moveToElementText(cursorNode);\n    } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n    target = cursorNode.nextSibling;\n\n    if (result == -1 && isDataNode(target)) {\n        cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n        dom.remove(cursorNode);\n\n        args = [target, cursor.text.length];\n    } else {\n        previous = !start && cursorNode.previousSibling;\n        next = start && cursorNode.nextSibling;\n\n        if (isDataNode(next)) {\n            args = [next, 0];\n        } else if (isDataNode(previous)) {\n            args = [previous, previous.length];\n        } else {\n            index = findNodeIndex(cursorNode);\n\n            if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                args = [parent.nextSibling, 0];\n            } else {\n                args = [parent, index];\n            }\n        }\n\n        dom.remove(cursorNode);\n    }\n\n    range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n}\n\nvar RangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function () {\n            var nodes = [];\n\n            function visit(node) {\n                if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                    nodes.push(node);\n                } else {\n                    node = node.firstChild;\n                    while (node) {\n                        visit(node);\n                        node = node.nextSibling;\n                    }\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar ImmutablesRangeIterator = RangeIterator.extend({\n    hasPartialSubtree: function () {\n        var immutable = Editor.Immutables && Editor.Immutables.immutable;\n        return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n    },\n\n    getSubtreeIterator: function () {\n        return new ImmutablesRangeIterator(this.getSubRange());\n    }\n});\n\nvar ImmutablesRangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function () {\n            var nodes = [];\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            function visit(node) {\n                if (immutable && !immutable(node)) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n            }\n\n            new ImmutablesRangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar RestorePoint = Class.extend({\n    init: function(range, body, options) {\n        var that = this;\n        that.range = range;\n        that.rootNode = RangeUtils.documentFromRange(range);\n        that.body = body || that.getEditable(range);\n        if (dom.name(that.body) != \"body\") {\n            that.rootNode = that.body;\n        }\n\n        that.startContainer = that.nodeToPath(range.startContainer);\n        that.endContainer = that.nodeToPath(range.endContainer);\n        that.startOffset = that.offset(range.startContainer, range.startOffset);\n        that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n        that.immutables = options && options.immutables;\n\n        if (that.immutables) {\n            that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n        }\n\n        that.html = that.body.innerHTML;\n\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    index: function(node) {\n        var result = 0,\n            lastType = node.nodeType;\n\n        while (node = node.previousSibling) {\n            var nodeType = node.nodeType;\n\n            if (nodeType != 3 || lastType != nodeType) {\n                result ++;\n            }\n\n            lastType = nodeType;\n        }\n\n        return result;\n    },\n\n    getEditable: function(range) {\n        var root = range.commonAncestorContainer;\n\n        while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n            root = root.parentNode;\n        }\n\n        return root;\n    },\n\n    restoreHtml: function() {\n        var that = this;\n\n        dom.removeChildren(that.body);\n        that.body.innerHTML = that.html;\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    offset: function(node, value) {\n        if (node.nodeType == 3) {\n            while ((node = node.previousSibling) && node.nodeType == 3) {\n                value += node.nodeValue.length;\n            }\n        }\n\n        return value;\n    },\n\n    nodeToPath: function(node) {\n        var path = [];\n\n        while (node != this.rootNode) {\n            path.push(this.index(node));\n            node = node.parentNode;\n        }\n\n        return path;\n    },\n\n    toRangePoint: function(range, start, path, denormalizedOffset) {\n        var node = this.rootNode,\n            length = path.length,\n            offset = denormalizedOffset;\n\n        while (length-- && node) {\n            node = node.childNodes[path[length]];\n        }\n\n        while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n            offset -= node.nodeValue.length;\n            node = node.nextSibling;\n        }\n\n        if (node && offset >= 0) {\n            range[start ? 'setStart' : 'setEnd'](node, offset);\n        }\n    },\n\n    toRange: function () {\n        var that = this,\n            result = that.range.cloneRange();\n\n        that.toRangePoint(result, true, that.startContainer, that.startOffset);\n        that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n        return result;\n    }\n\n});\n\nvar Marker = Class.extend({\n    init: function() {\n        this.caret = null;\n    },\n\n    addCaret: function (range) {\n        var that = this;\n        var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n        range.insertNode(caret);\n\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n\n        range.selectNode(caret);\n        return caret;\n    },\n\n    removeCaret: function (range) {\n        var that = this,\n            previous = that.caret.previousSibling,\n            startOffset = 0;\n\n        if (previous) {\n            startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n        }\n\n        var container = that.caret.parentNode;\n        var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n        dom.remove(that.caret);\n        normalize(container);\n\n        var node = container.childNodes[containerIndex];\n\n        if (isDataNode(node)) {\n            range.setStart(node, startOffset);\n        } else if (node) {\n            var textNode = dom.lastTextNode(node);\n            if (textNode) {\n                range.setStart(textNode, textNode.nodeValue.length);\n            } else {\n                range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n            }\n        } else {\n            if (!browser.msie && !container.innerHTML) {\n                container.innerHTML = '<br _moz_dirty=\"\" />';\n            }\n\n            range.selectNodeContents(container);\n        }\n        range.collapse(true);\n    },\n\n    add: function (range, expand) {\n        var that = this;\n\n        var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (expand && range.collapsed) {\n            that.addCaret(range);\n            range = RangeUtils.expand(range);\n        }\n\n        var rangeBoundary = range.cloneRange();\n\n        rangeBoundary.collapse(false);\n        that.end = dom.create(doc, 'span', { className: 'k-marker' });\n        rangeBoundary.insertNode(that.end);\n\n        rangeBoundary = range.cloneRange();\n        rangeBoundary.collapse(true);\n        that.start = that.end.cloneNode(true);\n        rangeBoundary.insertNode(that.start);\n\n        that._removeDeadMarkers(that.start, that.end);\n\n        if (collapsed) {\n            var bom = doc.createTextNode(\"\\ufeff\");\n            dom.insertAfter(bom.cloneNode(), that.start);\n            dom.insertBefore(bom, that.end);\n        }\n\n        normalize(range.commonAncestorContainer);\n\n        range.setStartBefore(that.start);\n        range.setEndAfter(that.end);\n\n        return range;\n    },\n\n    _removeDeadMarkers: function(start, end) {\n        if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(start.previousSibling);\n        }\n\n        if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(end.nextSibling);\n        }\n    },\n\n    _normalizedIndex: function(node) {\n        var index = findNodeIndex(node);\n        var pointer = node;\n\n        while (pointer.previousSibling) {\n            if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                index--;\n            }\n\n            pointer = pointer.previousSibling;\n        }\n\n        return index;\n    },\n\n    remove: function (range) {\n        var that = this,\n            start = that.start,\n            end = that.end,\n            shouldNormalizeStart,\n            shouldNormalizeEnd,\n            shouldNormalize;\n\n        normalize(range.commonAncestorContainer);\n\n        while (!start.nextSibling && start.parentNode) {\n            start = start.parentNode;\n        }\n\n        while (!end.previousSibling && end.parentNode) {\n            end = end.parentNode;\n        }\n\n        // merely accessing the siblings will solve range issues in IE\n        shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                               (start.nextSibling && start.nextSibling.nodeType == 3);\n\n        shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                             (end.nextSibling && end.nextSibling.nodeType == 3);\n\n        shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n        start = start.nextSibling;\n        end = end.previousSibling;\n\n        var isBomSelected = start === end && dom.isBom(start);\n        if (isBomSelected && start.length > 1) {\n            start.nodeValue = start.nodeValue.charAt(0);\n        }\n\n        var collapsed = isBomSelected;\n        var collapsedToStart = false;\n        // collapsed range\n        if (start == that.end) {\n            collapsedToStart = !!that.start.previousSibling;\n            start = end = that.start.previousSibling || that.end.nextSibling;\n            collapsed = true;\n        }\n\n        dom.remove(that.start);\n        dom.remove(that.end);\n\n        if (!start || !end) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            range.collapse(true);\n            return;\n        }\n\n        var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n        var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n        if (start.nodeType == 3) {\n            while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                start = start.previousSibling;\n                startOffset += start.nodeValue.length;\n            }\n        }\n\n        if (end.nodeType == 3) {\n            while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                end = end.previousSibling;\n                endOffset += end.nodeValue.length;\n            }\n        }\n\n        var startParent = start.parentNode;\n        var endParent = end.parentNode;\n        var startIndex = this._normalizedIndex(start);\n        var endIndex = this._normalizedIndex(end);\n\n        normalize(startParent);\n        if (start.nodeType == 3) {\n            start = startParent.childNodes[startIndex];\n        }\n\n        normalize(endParent);\n        if (end.nodeType == 3) {\n            end = endParent.childNodes[endIndex];\n        }\n\n        if (collapsed) {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n            }\n\n            range.collapse(true);\n\n        } else {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range.setStartBefore(start);\n            }\n\n            if (end.nodeType == 3) {\n                range.setEnd(end, endOffset);\n            } else {\n                range.setEndAfter(end);\n            }\n        }\n\n        if (that.caret) {\n            that.removeCaret(range);\n        }\n    }\n});\n\nvar boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\nvar RangeUtils = {\n    nodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n        return nodes;\n    },\n\n    textNodes: function(range) {\n        return new RangeEnumerator(range).enumerate();\n    },\n\n    editableTextNodes: function(range) {\n        var nodes = [],\n            immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n\n        if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n            nodes = new ImmutablesRangeEnumerator(range).enumerate();\n        }\n\n        return nodes;\n    },\n\n    documentFromRange: function(range) {\n        var startContainer = range.startContainer;\n        return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n    },\n\n    createRange: function(document) {\n        return document.createRange();\n    },\n\n    selectRange: function(range) {\n        var image = RangeUtils.image(range);\n        if (image) {\n            range.setStartAfter(image);\n            range.setEndAfter(image);\n        }\n        var selection = SelectionUtils.selectionFromRange(range);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    },\n\n    stringify: function(range) {\n        return kendo.format(\n            \"{0}:{1} - {2}:{3}\",\n            dom.name(range.startContainer), range.startOffset,\n            dom.name(range.endContainer), range.endOffset\n        );\n    },\n\n    split: function(range, node, trim) {\n        function partition(start) {\n            var partitionRange = range.cloneRange();\n            partitionRange.collapse(start);\n            partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n            var contents = partitionRange.extractContents();\n            if (trim) {\n                contents = dom.trim(contents);\n            }\n            dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n        }\n        partition(true);\n        partition(false);\n    },\n\n    mapAll: function(range, map) {\n        var nodes = [];\n\n        new RangeIterator(range).traverse(function(node) {\n            var mapped = map(node);\n\n            if (mapped && $.inArray(mapped, nodes) < 0) {\n                nodes.push(mapped);\n            }\n        });\n\n        return nodes;\n    },\n\n    getAll: function(range, predicate) {\n        var selector = predicate;\n\n        if (typeof predicate == \"string\") {\n            predicate = function(node) {\n                return dom.is(node, selector);\n            };\n        }\n\n        return RangeUtils.mapAll(range, function (node) {\n            if (predicate(node)) {\n                return node;\n            }\n        });\n    },\n\n    getMarkers: function(range) {\n        return RangeUtils.getAll(range, function(node) {\n            return node.className == 'k-marker';\n        });\n    },\n\n    image: function (range) {\n        var nodes = RangeUtils.getAll(range, \"img\");\n\n        if (nodes.length == 1) {\n            return nodes[0];\n        }\n    },\n\n    isStartOf: function(originalRange, node) {\n        if (originalRange.startOffset !== 0) {\n            return false;\n        }\n\n        var range = originalRange.cloneRange();\n\n        while (range.startOffset === 0 && range.startContainer != node) {\n            var index = dom.findNodeIndex(range.startContainer);\n            var parent = range.startContainer.parentNode;\n\n            while (index > 0 && parent[index-1] && dom.insignificant(parent[index-1])) {\n                index--;\n            }\n\n            range.setStart(parent, index);\n        }\n\n        return range.startOffset === 0 && range.startContainer == node;\n    },\n\n    isEndOf: function(originalRange, node) {\n        var range = originalRange.cloneRange();\n\n        range.collapse(false);\n\n        var start = range.startContainer;\n\n        if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n            range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n            range.collapse(true);\n        }\n\n        range.setEnd(node, dom.getNodeLength(node));\n\n        var nodes = [];\n\n        function visit(node) {\n            if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                nodes.push(node);\n            }\n        }\n\n        new RangeIterator(range).traverse(visit);\n\n        return !nodes.length;\n    },\n\n    wrapSelectedElements: function(range) {\n        var startEditable = dom.editableParent(range.startContainer);\n        var endEditable = dom.editableParent(range.endContainer);\n\n        while (range.startOffset === 0 && range.startContainer != startEditable) {\n            range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n        }\n\n        function isEnd(offset, container) {\n            var length = dom.getNodeLength(container);\n\n            if (offset == length) {\n                return true;\n            }\n\n            for (var i = offset; i < length; i++) {\n                if (!dom.insignificant(container.childNodes[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n            range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n        }\n\n        return range;\n    },\n\n    expand: function (range) {\n        var result = range.cloneRange();\n\n        var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n        var endContainer = result.endContainer.childNodes[result.endOffset];\n\n        if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n            return result;\n        }\n\n        var beforeCaret = startContainer.nodeValue;\n        var afterCaret = endContainer.nodeValue;\n\n        if (!beforeCaret || !afterCaret) {\n            return result;\n        }\n\n        var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        var endOffset = afterCaret.search(boundary);\n\n        if (!startOffset || !endOffset) {\n            return result;\n        }\n\n        endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n        startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n        result.setStart(startContainer, startOffset);\n        result.setEnd(endContainer, endOffset);\n\n        return result;\n    },\n\n    isExpandable: function (range) {\n        var node = range.startContainer;\n        var rangeDocument = RangeUtils.documentFromRange(range);\n\n        if (node == rangeDocument || node == rangeDocument.body) {\n            return false;\n        }\n\n        var result = range.cloneRange();\n\n        var value = node.nodeValue;\n        if (!value) {\n            return false;\n        }\n\n        var beforeCaret = value.substring(0, result.startOffset);\n        var afterCaret = value.substring(result.startOffset);\n\n        var startOffset = 0, endOffset = 0;\n\n        if (beforeCaret) {\n            startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        }\n\n        if (afterCaret) {\n            endOffset = afterCaret.search(boundary);\n        }\n\n        return startOffset && endOffset;\n    }\n};\n\nextend(Editor, {\n    SelectionUtils: SelectionUtils,\n    W3CRange: W3CRange,\n    RangeIterator: RangeIterator,\n    W3CSelection: W3CSelection,\n    RangeEnumerator: RangeEnumerator,\n    RestorePoint: RestorePoint,\n    Marker: Marker,\n    RangeUtils: RangeUtils\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\r\n    define('editor/immutables',[ \"./range\" ], f);\r\n})(function(){\r\n\r\n(function($, undefined) {\r\n    var kendo = window.kendo,\r\n        Class = kendo.Class,\r\n        Editor = kendo.ui.editor,\r\n        dom = Editor.Dom,\r\n        template = kendo.template,\r\n        RangeUtils = Editor.RangeUtils,\r\n        complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\r\n        toolsToBeUpdated = [\r\n            \"bold\",\r\n            \"italic\",\r\n            \"underline\",\r\n            \"strikethrough\",\r\n            \"superscript\",\r\n            \"subscript\",\r\n            \"forecolor\",\r\n            \"backcolor\",\r\n            \"fontname\",\r\n            \"fontsize\",\r\n            \"createlink\",\r\n            \"unlink\",\r\n            \"autolink\",\r\n            \"addcolumnleft\",\r\n            \"addcolumnright\",\r\n            \"addrowabove\",\r\n            \"addrowbelow\",\r\n            \"deleterow\",\r\n            \"deletecolumn\",\r\n            \"mergecells\",\r\n            \"formatting\",\r\n            \"cleanformatting\" ],\r\n        IMMUTABALE = \"k-immutable\",\r\n        IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\r\n        IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\r\n\r\n    var rootCondition = function(node) {\r\n        return $(node).is(\"body,.k-editor\");\r\n    };\r\n\r\n    var immutable = function(node) {\r\n        return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\r\n    };\r\n\r\n    var immutableParent = function (node) {\r\n        return dom.closestBy(node, immutable, rootCondition);\r\n    };\r\n\r\n    var expandImmutablesIn = function(range) {\r\n        var startImmutableParent = immutableParent(range.startContainer);\r\n        var endImmutableParent = immutableParent(range.endContainer);\r\n\r\n        if (startImmutableParent || endImmutableParent) {\r\n            if (startImmutableParent){\r\n                range.setStartBefore(startImmutableParent);\r\n            }\r\n            if (endImmutableParent){\r\n                range.setEndAfter(endImmutableParent);\r\n            }\r\n        }\r\n    };\r\n\r\n    var immutablesContext = function(range) {\r\n        if (immutableParent(range.commonAncestorContainer)) {\r\n            return true;\r\n        } else if(immutableParent(range.startContainer) || immutableParent(range.endContainer)){\r\n            var editableNodes = RangeUtils.editableTextNodes(range);\r\n            if (editableNodes.length === 0){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    var randomId = function(length) {\r\n        var result = '';\r\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n        for (var i = length || 10; i > 0; --i) {\r\n            result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\r\n        }\r\n        return result;\r\n    };\r\n\r\n    var removeImmutables = function (root) {\r\n        var serializedImmutables = {empty: true}, nodeName, id, serialized;\r\n         $(root).find(IMMUTABLE_SELECTOR).each(function(i, node){\r\n            nodeName = dom.name(node);\r\n            id = randomId();\r\n            serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\r\n            serializedImmutables[id] = {node: node, style: $(node).attr(\"style\")};\r\n            serializedImmutables.empty = false;\r\n            $(node).replaceWith(serialized);\r\n        });\r\n\r\n        return serializedImmutables;\r\n    };\r\n\r\n    var restoreImmutables = function(root, serializedImmutables) {\r\n        var id, immutable;\r\n        $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\r\n            id = node.getAttribute(IMMUTABALE);\r\n            immutable = serializedImmutables[id];\r\n            $(node).replaceWith(immutable.node);\r\n            if (immutable.style != $(immutable.node).attr(\"style\")) {\r\n                $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\r\n            }\r\n        });\r\n    };\r\n\r\n    var deletingKey = function (keyCode) {\r\n        var keys = kendo.keys;\r\n        return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\r\n    };\r\n    var updateToolOptions = function(tool) {\r\n        var options = tool ? tool.options : undefined;\r\n        if (options && options.finder) {\r\n            options.finder._initOptions({immutables: true});\r\n        }\r\n    };\r\n\r\n    var Immutables = Class.extend({\r\n        init: function (editor) {\r\n            this.editor = editor;\r\n            this.serializedImmutables = {};\r\n            this.options = $.extend({}, editor && editor.options && editor.options.immutables);\r\n\r\n            var tools = editor.toolbar.tools;\r\n            updateToolOptions(tools.justifyLeft);\r\n            updateToolOptions(tools.justifyCenter);\r\n            updateToolOptions(tools.justifyRight);\r\n            updateToolOptions(tools.justifyFull);\r\n        },\r\n\r\n        serialize: function(node) {\r\n            var result = this._toHtml(node),\r\n                id;\r\n\r\n            if (result.indexOf(IMMUTABALE) === -1) {\r\n                id = this.randomId();\r\n                result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\r\n            } else {\r\n                id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\r\n            }\r\n\r\n            this.serializedImmutables[id] = node;\r\n            return result;\r\n        },\r\n\r\n        _toHtml: function(node){\r\n            var serialization = this.options.serialization;\r\n            var serializationType = typeof serialization;\r\n            var nodeName;\r\n\r\n            switch (serializationType) {\r\n                case \"string\":\r\n                    return template(serialization)(node);\r\n                case \"function\":\r\n                    return serialization(node);\r\n                default:\r\n                    nodeName = dom.name(node);\r\n                    return \"<\" + nodeName + \"></\" + nodeName + \">\";\r\n            }\r\n        },\r\n\r\n        deserialize: function(node) {\r\n            var that = this;\r\n            var deserialization = this.options.deserialization;\r\n\r\n            $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\r\n                var id = this.getAttribute(IMMUTABALE);\r\n                var immutable = that.serializedImmutables[id];\r\n                if (kendo.isFunction(deserialization)) {\r\n                    deserialization(this, immutable);\r\n                }\r\n                $(this).replaceWith(immutable);\r\n            });\r\n\r\n            that.serializedImmutables = {};\r\n        },\r\n\r\n        randomId: function (length) {\r\n            return randomId(length);\r\n        },\r\n\r\n        keydown: function(e, range) {\r\n            var isDeleting = deletingKey(e.keyCode);\r\n            var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\r\n                (!isDeleting && this._cancelTyping(e, range));\r\n\r\n            if (shouldCancelEvent) {\r\n                e.preventDefault();\r\n                return true;\r\n            }\r\n        },\r\n\r\n        _cancelTyping: function(e, range) {\r\n            var editor = this.editor;\r\n            var keyboard = editor.keyboard;\r\n\r\n            return range.collapsed && !keyboard.typingInProgress &&\r\n                keyboard.isTypingKey(e) && immutablesContext(range);\r\n        },\r\n\r\n        _cancelDeleting: function(e, range) {\r\n            var keys = kendo.keys;\r\n            var backspace = e.keyCode === keys.BACKSPACE;\r\n            var del = e.keyCode == keys.DELETE;\r\n\r\n            if (!backspace && !del) {\r\n                return false;\r\n            }\r\n            var cancelDeleting = false;\r\n            if (range.collapsed) {\r\n                if (immutablesContext(range)) {\r\n                    return true;\r\n                }\r\n                var immutable = this.nextImmutable(range, del);\r\n                if (immutable && backspace) {\r\n                    var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\r\n                    if (closestSelectionLi) {\r\n                        var closestImmutableLi = dom.closest(immutable, \"li\");\r\n                        if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\r\n                            return cancelDeleting;\r\n                        }\r\n                    }\r\n                }\r\n                if (immutable && !dom.tableCell(immutable)) {\r\n                    if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\r\n                        while (immutable && immutable.parentNode.childNodes.length == 1) {\r\n                            immutable = immutable.parentNode;\r\n                        }\r\n                        if (dom.tableCell(immutable)) {\r\n                            return cancelDeleting;\r\n                        }\r\n                        this._removeImmutable(immutable, range);\r\n                    }\r\n                    cancelDeleting = true;\r\n                }\r\n            }\r\n            return cancelDeleting;\r\n        },\r\n\r\n        nextImmutable: function(range, forwards) {\r\n            var commonContainer = range.commonAncestorContainer;\r\n            if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\r\n                var next = this._nextNode(commonContainer, forwards);\r\n                if (next && dom.isBlock(next) && !immutableParent(next)) {\r\n                    while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\r\n                        next = next.children[forwards ? 0 : next.children.length - 1];\r\n                    }\r\n                }\r\n                return immutableParent(next);\r\n            }\r\n        },\r\n\r\n        _removeImmutable: function(immutable, range) {\r\n            var editor = this.editor;\r\n            var startRestorePoint = new Editor.RestorePoint(range, editor.body);\r\n            dom.remove(immutable);\r\n            Editor._finishUpdate(editor, startRestorePoint);\r\n        },\r\n\r\n        _nextNode: function(node, forwards) {\r\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\r\n            var current = node, next;\r\n            while(current && !next) {\r\n                next = current[sibling];\r\n                if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)){\r\n                    current = next;\r\n                    next = current[sibling];\r\n                }\r\n                if (!next){\r\n                    current = current.parentNode;\r\n                }\r\n            }\r\n            return next;\r\n        }\r\n    });\r\n\r\n    Immutables.immutable = immutable;\r\n    Immutables.immutableParent = immutableParent;\r\n    Immutables.expandImmutablesIn = expandImmutablesIn;\r\n    Immutables.immutablesContext = immutablesContext;\r\n    Immutables.toolsToBeUpdated = toolsToBeUpdated;\r\n    Immutables.removeImmutables = removeImmutables;\r\n    Immutables.restoreImmutables = restoreImmutables;\r\n\r\n    Editor.Immutables = Immutables;\r\n})(window.kendo.jQuery);\r\n\r\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\r\n\n(function(f, define){\n    define('editor/command',[ \"./immutables\" ], f);\n})(function(){\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        extend = $.extend;\n\nfunction finishUpdate(editor, startRestorePoint) {\n    var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n    var command = new GenericCommand(startRestorePoint, endRestorePoint);\n    command.editor = editor;\n\n    editor.undoRedoStack.push(command);\n    editor.toolbar.refreshTools();\n\n    return endRestorePoint;\n}\n\nvar Command = Class.extend({\n    init: function(options) {\n        this.options = options;\n        this.restorePoint = new RestorePoint(options.range, options.body, {immutables: options.immutables});\n        this.marker = new Marker();\n        this.formatter = options.formatter;\n    },\n\n    getRange: function () {\n        return this.restorePoint.toRange();\n    },\n\n    lockRange: function (expand) {\n        return this.marker.add(this.getRange(), expand);\n    },\n\n    releaseRange: function (range) {\n        this.marker.remove(range);\n        this.editor.selectRange(range);\n    },\n\n    undo: function () {\n        var point = this.restorePoint;\n        point.restoreHtml();\n        this.editor.selectRange(point.toRange());\n    },\n\n    redo: function () {\n        this.exec();\n    },\n\n    createDialog: function (content, options) {\n        var editor = this.editor;\n\n        return $(content).appendTo(document.body)\n            .kendoWindow(extend({}, editor.options.dialogOptions, options))\n            .closest(\".k-window\").toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n    },\n\n    exec: function () {\n        var range = this.lockRange(true);\n        this.formatter.editor = this.editor;\n        this.formatter.toggle(range);\n        this.releaseRange(range);\n    },\n\n    immutables: function(){\n        return this.editor && this.editor.options.immutables;\n    },\n\n    expandImmutablesIn: function(range) {\n        if (this.immutables()) {\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            this.restorePoint = new RestorePoint(range, this.editor.body);\n        }\n    }\n});\n\nvar GenericCommand = Class.extend({\n    init: function(startRestorePoint, endRestorePoint) {\n        this.body = startRestorePoint.body;\n        this.startRestorePoint = startRestorePoint;\n        this.endRestorePoint = endRestorePoint;\n    },\n\n    redo: function () {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.endRestorePoint.html;\n        this.editor.selectRange(this.endRestorePoint.toRange());\n    },\n\n    undo: function () {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.startRestorePoint.html;\n        this.editor.selectRange(this.startRestorePoint.toRange());\n    }\n});\n\nextend(editorNS, {\n    _finishUpdate: finishUpdate,\n    Command: Command,\n    GenericCommand: GenericCommand\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/toolbar',[ \"./range\" ], f);\n})(function(){\n\n(function($,undefined) {\n    var kendo = window.kendo;\n    var ui = kendo.ui;\n    var editorNS = ui.editor;\n    var Widget = ui.Widget;\n    var extend = $.extend;\n    var proxy = $.proxy;\n    var keys = kendo.keys;\n    var NS = \".kendoEditor\";\n    var EditorUtils = editorNS.EditorUtils;\n    var ToolTemplate = editorNS.ToolTemplate;\n    var Tool = editorNS.Tool;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var OVERFLOWANCHOR = \"overflowAnchor\";\n\n    var focusable = \".k-tool-group:visible .k-tool:not(.k-disabled):not([disabled]),\" +\n                    \".k-tool.k-overflow-anchor:visible,\" +\n                    \".k-tool-group:visible .k-colorpicker:not(input),\" +\n                    \".k-tool-group:visible .k-selectbox,\" +\n                    \".k-tool-group:visible .k-dropdown,\" +\n                    \".k-tool-group:visible .k-combobox .k-input-inner\";\n\n    var toolNamesByCssClass = {\n        \"k-i-sup-script\": \"superscript\",\n        \"k-i-sub-script\": \"subscript\",\n        \"k-i-align-left\": \"justifyLeft\",\n        \"k-i-align-center\": \"justifyCenter\",\n        \"k-i-align-right\": \"justifyRight\",\n        \"k-i-align-justify\": \"justifyFull\",\n        \"k-i-list-unordered\": \"insertUnorderedList\",\n        \"k-i-list-ordered\": \"insertOrderedList\",\n        \"k-i-list-roman-upper\": \"insertUpperRomanList\",\n        \"k-i-list-roman-lower\": \"insertLowerRomanList\",\n        \"k-i-import\": \"import\",\n        \"k-i-indent-increase\": \"indent\",\n        \"k-i-indent-decrease\": \"outdent\",\n        \"k-i-link-horizontal\": \"createLink\",\n        \"k-i-unlink-horizontal\": \"unlink\",\n        \"k-i-image\": \"insertImage\",\n        \"k-i-file-add\": \"insertFile\",\n        \"k-i-html\": \"viewHtml\",\n        \"k-i-foreground-color\": \"foreColor\",\n        \"k-i-paint\": \"backColor\",\n        \"k-i-table-insert\": \"createTable\",\n        \"k-i-table-column-insert-left\": \"addColumnLeft\",\n        \"k-i-table-column-insert-right\": \"addColumnRight\",\n        \"k-i-table-row-insert-above\": \"addRowAbove\",\n        \"k-i-table-row-insert-below\": \"addRowBelow\",\n        \"k-i-table-row-delete\": \"deleteRow\",\n        \"k-i-table-column-delete\": \"deleteColumn\",\n        \"k-i-table-properties\": \"tableWizard\",\n        \"k-i-table-wizard\": \"tableWizardInsert\",\n        \"k-i-table-position-left\": \"tableAlignLeft\",\n        \"k-i-table-position-center\": \"tableAlignCenter\",\n        \"k-i-table-position-right\": \"tableAlignRight\",\n        \"k-i-clear-css\": \"cleanFormatting\",\n        \"k-i-cells-merge-horizontally\": \"mergeCellsHorizontally\",\n        \"k-i-cells-merge-vertically\": \"mergeCellsVertically\",\n        \"k-i-cell-split-horizontally\": \"splitCellHorizontally\",\n        \"k-i-cell-split-vertically\": \"splitCellVertically\",\n        \"k-i-copy-format\": \"copyFormat\",\n        \"k-i-apply-format\": \"applyFormat\",\n        \".k-i-undo\": \"undo\",\n        \"k-i-redo\": \"redo\",\n\n    };\n\n    var OverflowAnchorTool = Tool.extend({\n        initialize: function(ui, options) {\n            var toolbar = options.editor.toolbar;\n\n            ui.attr(\"aria-controls\", options.editor.element.attr(\"id\"))\n                .on(\"click\", $.proxy(function() {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n        },\n\n        options: {\n            name: OVERFLOWANCHOR\n        },\n\n        command: $.noop,\n        update: $.noop,\n        destroy: $.noop\n\n    });\n\n    EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n        key: \"\",\n        ctrl: true,\n        template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n    }));\n\n    var Toolbar = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = extend({}, options, { name: \"EditorToolbar\" });\n\n            Widget.fn.init.call(that, element, options);\n\n            if (options.popup) {\n                that._initPopup();\n            }\n\n            if (options.resizable && options.resizable.toolbar) {\n                that._resizeHandler = kendo.onResize(function() {\n                    that.resize(true);\n                });\n\n                that.element.addClass(\"k-toolbar-resizable\");\n            }\n        },\n\n        events: [\n            \"execute\"\n        ],\n\n        groups: {\n            basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n            undo: [\"undo\", \"redo\"],\n            scripts: [\"subscript\", \"superscript\" ],\n            alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n            links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n            lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\", \"indent\", \"outdent\"],\n            tablesInsert: [\"createTable\"],\n            tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n            tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n            tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n            advanced: [ \"viewHtml\", \"cleanFormatting\", \"print\", \"pdf\", \"exportAs\", \"import\"],\n            fonts: [ \"fontName\", \"fontSize\" ],\n            colors: [ \"foreColor\", \"backColor\" ],\n            formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n        },\n\n        overflowFlaseTools: [ \"formatting\", \"fontName\", \"fontSize\", \"foreColor\", \"backColor\", \"insertHtml\" ],\n\n        _initPopup: function() {\n            var that = this;\n            this.window = $(this.element)\n                .wrap(\"<div class='editorToolbarWindow' />\")\n                .parent()\n                .prepend(\"<span class='k-editortoolbar-dragHandle'><span class='k-icon k-i-handler-drag'></span></span>\")\n                .kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: {\n                        dragHandle: \".k-editortoolbar-dragHandle\"\n                    },\n                    animation: {\n                        open: { effects: \"fade:in\" },\n                        close: { effects: \"fade:out\" }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function() {\n                        this._moved = true;\n                    }\n                })\n                .on(\"mousedown\", function(e){\n                    if (!$(e.target).is(\".k-icon\")) {\n                        that.preventPopupHide = true;\n                    }\n                })\n                .on(\"focusout\", function(){\n                    that.options.editor.element.focusout();\n                })\n                .data(\"kendoWindow\");\n        },\n\n        _toggleOverflowStyles: function(element, show) {\n            element\n                .find(\"> li\").toggleClass(\"k-item\", show)\n                .find(\".k-tool:not(.k-disabled), .k-overflow-button\").toggleClass(\"k-overflow-button\", show);\n        },\n\n        _initOverflowPopup: function(ui) {\n            var that = this;\n            var popupTemplate = \"<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>\";\n\n            that.overflowPopup = $(popupTemplate).appendTo(\"body\").kendoPopup({\n                anchor: ui,\n                origin: kendo.support.isRtl(that.element) ? \"bottom left\" : \"bottom right\",\n                position: kendo.support.isRtl(that.element) ? \"top left\" : \"top right\",\n                copyAnchorStyles: false,\n                open: function(e) {\n                    if (this.element.is(\":empty\")) {\n                        e.preventDefault();\n                    }\n\n                    that._toggleOverflowStyles(this.element, true);\n                    ui.attr(\"aria-expanded\", true);\n                },\n                close: function() {\n                    ui.attr(\"aria-expanded\", false);\n                },\n                activate: proxy(that.focusOverflowPopup, that)\n            }).data(\"kendoPopup\");\n        },\n\n        items: function() {\n            var isResizable = this.options.resizable && this.options.resizable.toolbar,\n                popup, result;\n\n            result = this.element.children().find(\"> *, select\");\n\n            if (isResizable) {\n                popup = this.overflowPopup;\n                result = result.add(popup.element.children().find(\"> *\"));\n            }\n\n            return result;\n        },\n\n        focused: function() {\n            var active = kendo._activeElement(),\n                popup = this.window,\n                overflowPopup = this.overflowPopup;\n\n            return (popup && $(active).closest(popup.wrapper).length) ||\n                (overflowPopup && overflowPopup.visible());\n        },\n\n        toolById: function(name) {\n            var id, tools = this.tools;\n\n            for (id in tools) {\n                if (id.toLowerCase() == name) {\n                    return tools[id];\n                }\n            }\n        },\n\n        toolGroupFor: function(toolName) {\n            var i, groups = this.groups;\n\n            if (this.isCustomTool(toolName)) {\n                return \"custom\";\n            }\n\n            for (i in groups) {\n                if ($.inArray(toolName, groups[i]) >= 0) {\n                    return i;\n                }\n            }\n        },\n\n        bindTo: function(editor) {\n            var that = this,\n                window = that.window;\n\n            // detach from editor that was previously listened to\n            if (that._editor) {\n                that._editor.unbind(\"select\", proxy(that.resize, that));\n            }\n\n            that._editor = editor;\n\n            if (that.options.resizable && that.options.resizable.toolbar) {\n                editor.options.tools.push(OVERFLOWANCHOR);\n            }\n\n            // re-initialize the tools\n            that.tools = that.expandTools(editor.options.tools);\n            that.render();\n\n            that.element.find(\".k-combobox .k-input-inner\").on(\"keydown\", function(e) {\n                var combobox = $(this).closest(\".k-combobox\").data(\"kendoComboBox\"),\n                    key = e.keyCode;\n\n                if (key == keys.RIGHT || key == keys.LEFT) {\n                    combobox.close();\n                } else if (key == keys.DOWN) {\n                    if (!combobox.dropDown.isOpened()) {\n                        e.stopImmediatePropagation();\n                        combobox.open();\n                    }\n                }\n            });\n\n            that._attachEvents();\n\n            that.items().each(function initializeTool() {\n\n                var toolName = that._toolName(this),\n                    tool = toolName !== \"moreVertical\" ? that.tools[toolName] : that.tools.overflowAnchor,\n                    options = tool && tool.options,\n                    messages = editor.options.messages,\n                    description = options && options.tooltip || messages[toolName],\n                    ui = $(this);\n\n                if (!tool || !tool.initialize) {\n                    return;\n                }\n\n                if (toolName == \"fontSize\" || toolName == \"fontName\") {\n                    var inheritText = messages[toolName + \"Inherit\"];\n\n                    ui.find(\"input\").val(inheritText).end()\n                      .find(\"span.k-input-inner\").text(inheritText).end();\n                }\n\n                tool.initialize(ui, {\n                    title: that._appendShortcutSequence(description, tool),\n                    editor: that._editor\n                });\n\n                ui.closest(\".k-widget\", that.element).addClass(\"k-editor-widget\");\n\n                ui.closest(\".k-colorpicker\", that.element).next(\".k-colorpicker\").addClass(\"k-editor-widget\");\n            });\n\n            editor.bind(\"select\", proxy(that.resize, that));\n\n            that.update();\n\n            if (window) {\n                window.wrapper.css({top: \"\", left: \"\", width: \"\"});\n            }\n        },\n\n        show: function() {\n            var that = this,\n                window = that.window,\n                editorOptions = that.options.editor,\n                wrapper, editorElement, editorOffset,\n                browser = kendo.support.browser;\n\n            if (window) {\n                wrapper = window.wrapper;\n                editorElement = editorOptions.element;\n\n                if (!wrapper.is(\":visible\") || !that.window.options.visible) {\n\n                    if (!wrapper[0].style.width) {\n                        wrapper.width(this._getWindowWidth());\n                    }\n\n                    // track content position when other parts of page change\n                    if (!window._moved) {\n                        editorOffset = editorElement.offset();\n                        wrapper.css({\n                            top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css(\"padding-bottom\"), 10)),\n                            left: Math.max(0, parseInt(editorOffset.left, 10))\n                        });\n                    }\n\n                    if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                        setTimeout(function() {\n                            window.open();\n                        }, 0);\n                    } else {\n                        window.open();\n                    }\n                }\n            }\n        },\n\n        _getWindowWidth: function(){\n            var that = this,\n                wrapper = that.window.wrapper,\n                editorElement = that.options.editor.element;\n\n            return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n        },\n\n        _overlaps: function(box) {\n            var toolbarWrapper = this.window.wrapper,\n                toolbarWrapperOffset = toolbarWrapper.offset(),\n                toolbarWrapperLeft = toolbarWrapperOffset.left,\n                toolbarWrapperTop = toolbarWrapperOffset.top,\n                boxOffset = box.offset(),\n                boxOffsetLeft = boxOffset.left,\n                boxOffsetTop = boxOffset.top;\n\n            return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                    boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                    boxOffsetTop + box.height() < toolbarWrapperTop ||\n                    boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n        },\n\n        hide: function() {\n            if (this.window) {\n                this.window.close();\n            }\n        },\n\n        focus: function() {\n            var TABINDEX = \"tabIndex\";\n            var element = this.element;\n            var tabIndex = this._editor.element.attr(TABINDEX);\n\n            // Chrome can't focus something which has already been focused\n            element.attr(TABINDEX, tabIndex || 0).trigger(\"focus\")\n                .find(focusable).first().trigger(\"focus\");\n\n            if (!tabIndex && tabIndex !== 0) {\n                element.removeAttr(TABINDEX);\n            }\n        },\n\n        focusOverflowPopup: function() {\n            var TABINDEX = \"tabIndex\";\n            var element = this.overflowPopup.element;\n            var tabIndex = this._editor.element.attr(TABINDEX);\n\n            element.closest(\".k-animation-container\").addClass(\"k-overflow-wrapper\");\n\n            element.attr(TABINDEX, tabIndex || 0)\n                .find(focusable).first().trigger(\"focus\");\n\n            if (!tabIndex && tabIndex !== 0) {\n                element.removeAttr(TABINDEX);\n            }\n        },\n\n        _appendShortcutSequence: function(localizedText, tool) {\n            if (!tool.key) {\n                return localizedText;\n            }\n\n            var res = localizedText + \" (\";\n\n            if (tool.ctrl) {\n                res += \"Ctrl + \";\n            }\n\n            if (tool.shift) {\n                res += \"Shift + \";\n            }\n\n            if (tool.alt) {\n                res += \"Alt + \";\n            }\n\n            res += tool.key + \")\";\n\n            return res;\n        },\n\n        _nativeTools: [\n            \"insertLineBreak\",\n            \"insertParagraph\",\n            \"redo\",\n            \"undo\",\n            \"autoLink\"\n        ],\n\n        tools: {}, // tools collection is copied from defaultTools during initialization\n\n        isCustomTool: function(toolName) {\n            return !(toolName in kendo.ui.Editor.defaultTools);\n        },\n\n        // expand the tools parameter to contain tool options objects\n        expandTools: function(tools) {\n            var currentTool,\n                i,\n                nativeTools = this._nativeTools,\n                options,\n                defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                result = {},\n                name;\n\n            for (i = 0; i < tools.length; i++) {\n                currentTool = tools[i];\n                name = currentTool.name;\n\n                if ($.isPlainObject(currentTool)) {\n                    if (name && defaultTools[name]) {\n                        // configured tool\n                        result[name] = extend({}, defaultTools[name]);\n                        extend(result[name].options, currentTool);\n                    } else {\n                        // custom tool\n                        options = extend({ cssClass: \"k-i-gear\", type: \"button\", title: \"\" }, currentTool);\n                        if (!options.name) {\n                            options.name = \"custom\";\n                        }\n\n                        options.cssClass = \"k-\" + options.name;\n\n                        if (!options.template && options.type == \"button\") {\n                            options.template = editorNS.EditorUtils.buttonTemplate;\n                            options.title = options.title || options.tooltip;\n                        }\n\n                        result[name] = {\n                            options: options\n                        };\n                    }\n                } else if (defaultTools[currentTool]) {\n                    // tool by name\n                    result[currentTool] = defaultTools[currentTool];\n                }\n            }\n\n            for (i = 0; i < nativeTools.length; i++) {\n                if (!result[nativeTools[i]]) {\n                    result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                }\n            }\n\n            return result;\n        },\n\n        render: function() {\n            var that = this,\n                tools = that.tools,\n                options, template, toolElement,\n                toolName,\n                editorElement = that._editor.element,\n                element = that.element.empty(),\n                groupName, newGroupName,\n                toolConfig = that._editor.options.tools,\n                group, i, groupPosition = 0,\n                resizable = that.options.resizable && that.options.resizable.toolbar,\n                overflowFlaseTools = this.overflowFlaseTools;\n\n            function stringify(template) {\n                var result = \"\";\n\n                if (template.getHtml) {\n                    result = template.getHtml();\n                } else {\n                    if (!kendo.isFunction(template)) {\n                        template = kendo.template(template);\n                    }\n\n                    result = template(options);\n                }\n\n                return kendo.trim(result);\n            }\n\n            function endGroup() {\n                if (group.children().length) {\n                    if (resizable) {\n                        group.data(\"position\", groupPosition);\n                        groupPosition++;\n                    }\n\n                    group.appendTo(element);\n                }\n            }\n\n            function startGroup(toolName) {\n                if (toolName !== OVERFLOWANCHOR) {\n                    group = $(\"<li class='k-tool-group' role='presentation' />\");\n                    group.data(\"overflow\", $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                } else {\n                    group = $(\"<li class='k-overflow-tools' />\");\n                }\n            }\n\n            element.empty();\n\n            if (toolConfig.length) {\n                toolName = toolConfig[0].name || toolConfig[0];\n            }\n            startGroup(toolName, overflowFlaseTools);\n\n            for (i = 0; i < toolConfig.length; i++) {\n                toolName = toolConfig[i].name || toolConfig[i];\n                options = tools[toolName] && tools[toolName].options;\n\n                if (!options && $.isPlainObject(toolName)) {\n                    options = toolName;\n                }\n\n                template = options && options.template;\n\n                if (toolName == \"break\") {\n                    endGroup();\n                    $(\"<li class='k-row-break' role='presentation' />\").appendTo(that.element);\n                    startGroup(toolName, overflowFlaseTools);\n                }\n\n                if (!template) {\n                    continue;\n                }\n\n                newGroupName = that.toolGroupFor(toolName);\n\n                if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                    endGroup();\n                    startGroup(toolName, overflowFlaseTools);\n                    groupName = newGroupName;\n                }\n\n                if (toolName == OVERFLOWANCHOR) {\n                    template.options.title = that.options.messages.overflowAnchor;\n                }\n\n                template = stringify(template);\n\n                toolElement = $(template).appendTo(group);\n\n                if (newGroupName == \"custom\") {\n                    endGroup();\n                    startGroup(toolName, overflowFlaseTools);\n                }\n\n                if (options.exec && toolElement.hasClass(\"k-tool\")) {\n                    toolElement.on(\"click\", proxy(options.exec, editorElement[0]));\n                }\n            }\n\n            endGroup();\n\n            $(that.element).children(\":has(> .k-tool)\").not(\".k-overflow-tools\").addClass(\"k-button-group\");\n\n            that.updateGroups();\n\n            if (resizable) {\n                that._initOverflowPopup(that.element.find(\".k-overflow-anchor\"));\n            }\n\n            that.angular(\"compile\", function(){\n                return { elements: that.element };\n            });\n        },\n\n        updateGroups: function() {\n            $(this.element).children().not(\".k-overflow-tools\").each(function() {\n                $(this).children()\n                    .removeClass(\"k-group-start k-group-end\")\n                    .first().addClass(\"k-group-start\").end()\n                    .last().addClass(\"k-group-end\").end();\n            });\n        },\n\n        decorateFrom: function(body) {\n            this.items().filter(\".k-decorated\")\n                .each(function() {\n                    var selectBox = $(this).data(\"kendoSelectBox\");\n\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            var id, tools = this.tools;\n\n            for (id in tools) {\n                if (tools[id].destroy) {\n                    tools[id].destroy();\n                }\n            }\n\n            if (this.window) {\n                this.window.destroy();\n            }\n\n            if (this._resizeHandler) {\n                kendo.unbindResize(this._resizeHandler);\n            }\n\n            if (this.overflowPopup) {\n                this.overflowPopup.destroy();\n            }\n        },\n\n        _attachEvents: function() {\n            var that = this,\n                popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n\n            that.attachToolsEvents(that.element.add(popupElement));\n        },\n\n        attachToolsEvents: function(element) {\n            var that = this,\n                buttons = \"[role=button].k-tool\",\n                enabledButtons = buttons + \":not(.k-disabled)\" + \", [role=button].k-i-import:not(.k-disabled)\",\n                disabledButtons = buttons + \".k-disabled\",\n                dropdown = \".k-dropdown\",\n                colorpicker = \".k-colorpicker\",\n                editorTools = [buttons, dropdown, colorpicker].join(\",\");\n\n            element.off(NS)\n                .on(\"mouseenter\" + NS, enabledButtons, function() { $(this).addClass(\"k-hover\"); })\n                .on(\"mouseleave\" + NS, enabledButtons, function() { $(this).removeClass(\"k-hover\"); })\n                .on(\"mousedown\" + NS, editorTools, function(e) {\n                    e.preventDefault();\n                })\n                .on(\"keydown\" + NS, focusable, function(e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement,\n                        currentContainer,\n                        keyCode = e.keyCode;\n\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n\n                        return tools[index];\n                    }\n\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is(\".k-dropdown\")) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function () {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass(\"k-overflow-tool-group\") ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n\n                        // skip tabbing to disabled tools, and focus the editing area when running out of tools\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n\n                            if (!focusElement || $(focusElement).closest(\".k-overflow-tools\").css(\"visibility\") === \"hidden\") {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && ( $(current).is(\"button\") || $(current).is(\"a\") ) && !$(current).attr(\"href\") ) {\n                        //anchors without href attribute do not respond to Enter key\n                        that._executeToolCommand(current, e);\n                    }\n                })\n                .on(\"click\" + NS, enabledButtons, function(e) {\n                    that._executeToolCommand(this, e);\n                })\n                .on(\"click\" + NS, disabledButtons, function(e) { e.preventDefault(); });\n\n        },\n\n        _executeToolCommand: function(toolElement, e) {\n            var that = this;\n            var button = $(toolElement);\n            e.preventDefault();\n            e.stopPropagation();\n            button.removeClass(\"k-hover\");\n            if (!button.is(\"[data-popup]\")) {\n                that._editor.exec(that._toolName(toolElement));\n            }\n        },\n\n        _toolName: function (element) {\n            if (!element) {\n                return;\n            }\n\n            var className = element.className;\n\n            if (/k-tool\\b/i.test(className)) {\n                className = element.firstChild.className;\n            }\n\n            var tool = $.grep(className.split(\" \"), function (x) {\n                return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n            });\n\n            if (tool[0]) {\n                var toolname = tool[0];\n                if (toolNamesByCssClass[toolname]) {\n                    toolname = toolNamesByCssClass[toolname];\n                }\n                if (toolname.indexOf(\"k-i-\") >=0) {\n                    return kendo.toCamelCase(toolname.substring(toolname.indexOf(\"k-i-\") + 4));\n                }\n                else {\n                    return toolname.substring(toolname.lastIndexOf(\"-\") + 1);\n                }\n            }\n            return \"custom\";\n        },\n\n        refreshTools: function() {\n            var that = this,\n                editor = that._editor,\n                range = editor.getRange(),\n                nodes = editorNS.RangeUtils.textNodes(range),\n                immutables = editor.options.immutables,\n                immutablesContext = that._immutablesContext(range);\n\n            nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n            if (!nodes.length) {\n                nodes = [range.startContainer];\n            }\n\n            that.items().each(function() {\n                var tool = that.tools[that._toolName(this)];\n                if (tool) {\n                    var ui = $(this);\n                    if (tool.update) {\n                        tool.update(ui, nodes, editor.undoRedoStack);\n                    }\n\n                    if (immutables) {\n                        that._updateImmutablesState(tool, ui, immutablesContext);\n                    }\n                }\n            });\n            this.update();\n        },\n\n        _immutablesContext: function(range) {\n            if (this._editor.options.immutables) {\n                if (range.collapsed) {\n                    return editorNS.Immutables.immutablesContext(range);\n                } else {\n                    return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                }\n            }\n        },\n\n        _updateImmutablesState: function(tool, ui, immutablesContext) {\n            var name = tool.name;\n            var uiElement = ui;\n\n            var trackImmutables = tool.options.trackImmutables;\n            if (trackImmutables === undefined) {\n                trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n            }\n\n            if (trackImmutables) {\n                var display = immutablesContext ? \"none\" : \"\";\n                if (!ui.is(\".k-tool\")) {\n                    var uiData = ui.data();\n                    for (var key in uiData) {\n                        if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                            var widget = uiData[key];\n                            uiElement = widget.wrapper;\n                            break;\n                        }\n                    }\n                }\n                uiElement.css(\"display\", display);\n                var groupUi = uiElement.closest(\"li\");\n                if (groupUi.children(\":visible\").length === 0) {\n                    groupUi.css(\"display\", display);\n                }\n            }\n        },\n\n        update: function() {\n            this.updateGroups();\n        },\n\n        _resize: function(e) {\n            var containerWidth = e.width;\n            var resizable = this.options.resizable && this.options.resizable.toolbar;\n            var popup = this.overflowPopup;\n            var editorElement = this.options.editor.element;\n            var toolbarWindow = this.window;\n\n            this.refreshTools();\n\n            if (!resizable) {\n                return;\n            }\n\n            if(toolbarWindow) {\n                toolbarWindow.wrapper.width(this._getWindowWidth());\n\n                if(!toolbarWindow._moved) {\n                    toolbarWindow.wrapper.css({\n                        left: Math.max(0, parseInt(editorElement.offset().left, 10))\n                    });\n                }\n            }\n\n            if (popup.visible()) {\n                popup.close(true);\n            }\n\n            this._refreshWidths();\n\n            this._shrink(containerWidth);\n            this._stretch(containerWidth);\n\n            this._toggleOverflowStyles(this.element, false);\n            this._toggleOverflowStyles(this.overflowPopup.element, true);\n\n            this.element\n                .children(\"li.k-overflow-tools\")\n                .css(\"visibility\", popup.element.is(\":empty\") ? \"hidden\" : \"visible\");\n        },\n\n        _refreshWidths: function() {\n            this.element.children(\"li\").each(function(idx, element) {\n                var group = $(element);\n                group.data(\"outerWidth\", outerWidth(group, true));\n            });\n        },\n\n        _shrink: function(width) {\n            var group, visibleGroups;\n\n            if (width < this._groupsWidth()) {\n                visibleGroups = this._visibleGroups().filter(\":not(.k-overflow-tools)\");\n\n                for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                    group = visibleGroups.eq(i);\n                    if (width > this._groupsWidth()) {\n                        break;\n                    } else {\n                        this._hideGroup(group);\n                    }\n                }\n            }\n        },\n\n        _stretch: function(width) {\n            var group, hiddenGroups;\n\n            if (width > this._groupsWidth()) {\n                hiddenGroups = this._hiddenGroups();\n\n                for (var i = 0; i < hiddenGroups.length ; i++) {\n                    group = hiddenGroups.eq(i);\n                    if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                        break;\n                    }\n                }\n            }\n        },\n\n        _hiddenGroups: function() {\n            var popup = this.overflowPopup;\n\n            var hiddenGroups = this.element.children(\"li.k-tool-group\").filter(\":hidden\");\n\n            hiddenGroups = hiddenGroups.add(popup.element.children(\"li\"));\n\n            hiddenGroups.sort(function(a, b) {\n                return ($(a).data(\"position\") > $(b).data(\"position\")) ? 1 : -1;\n            });\n\n            return hiddenGroups;\n        },\n\n        _visibleGroups: function() {\n            return this.element.children(\"li.k-tool-group, li.k-overflow-tools\").filter(\":visible\");\n        },\n\n        _groupsWidth: function() {\n            var width = 0;\n\n            this._visibleGroups().each(function() {\n                width += $(this).data(\"outerWidth\");\n            });\n\n            return Math.ceil(width);\n        },\n\n        _hideGroup: function(group) {\n            if (group.data(\"overflow\")) {\n                var popup = this.overflowPopup;\n                group.detach().prependTo(popup.element).addClass(\"k-overflow-tool-group\");\n            } else {\n                group.addClass(\"k-hidden\");\n            }\n        },\n\n        _showGroup: function(group, width) {\n            var position, previous, groupWidth;\n\n            if (group.hasClass('k-disabled')) {\n                return true;\n            }\n\n            if (group.hasClass(\"k-overflow-tool-group\")) {\n                groupWidth = group.data(\"outerWidth\");\n            } else {\n                group.removeClass(\"k-hidden\");\n                groupWidth = outerWidth(group, true);\n                group.addClass(\"k-hidden\");\n            }\n\n            if (group.length && width > this._groupsWidth() + groupWidth) {\n                if (group.hasClass(\"k-overflow-tool-group\")) {\n                    position = group.data(\"position\");\n\n                    if (position === 0) {\n                        group.detach().prependTo(this.element);\n                    } else {\n                        previous = this.element.children().filter(function(idx, element) {\n                            return $(element).data(\"position\") === position - 1;\n                        });\n\n                        group.detach().insertAfter(previous);\n                    }\n\n                    group.removeClass(\"k-overflow-tool-group\");\n\n                } else {\n                    group.removeClass(\"k-hidden\");\n                }\n\n                return true;\n            }\n\n            return false;\n        }\n\n    });\n\n$.extend(editorNS, {\n    Toolbar: Toolbar\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/viewhtml',[ \"../command\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    dom = Editor.Dom;\n\nvar ViewHtmlCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.async = true;\n    },\n\n    exec: function() {\n        var that = this,\n            editor = that.editor,\n            options = editor.options,\n            messages = editor.options.messages,\n            dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n            textarea = \".k-editor-textarea > textarea\",\n            content, comments;\n\n        options.serialization.immutables = editor.immutables;\n\n        comments = dom.getAllComments(editor.body);\n\n        content = EditorUtils.cacheComments(editor.value(), comments);\n        content = ViewHtmlCommand.indent(content);\n        content = EditorUtils.retrieveComments(content, comments);\n\n        options.serialization.immutables = undefined;\n\n        function apply(e) {\n            options.deserialization.immutables = editor.immutables;\n            editor.value(dialog.find(textarea).val());\n            options.deserialization.immutables = undefined;\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            editor.trigger(\"change\");\n        }\n\n        function close(e) {\n            e.preventDefault();\n\n            dialog.data(\"kendoWindow\").destroy();\n\n            if (editor.immutables) {\n                editor.immutables.serializedImmutables = {};\n            }\n\n            editor.focus();\n        }\n\n        this.createDialog(dialog, {\n            title: messages.viewHtml,\n            width: 600,\n            height: 400,\n            resizable: true,\n            close: close,\n            visible: false\n        })\n            .find(textarea).val(content).end()\n            .find(\".k-dialog-update\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .data(\"kendoWindow\").center().open();\n\n        dialog.find(textarea).trigger(\"focus\");\n    }\n});\n\nextend(ViewHtmlCommand, {\n    template: \"\" +\n    \"<div class='k-editor-dialog k-popup-edit-form k-viewhtml-dialog'>\" +\n        \"<span class='k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea'><textarea class='k-input-inner !k-overflow-auto !k-resize-none'></textarea></span>\" +\n        \"<div class='k-edit-buttons'>\" +\n            \"<button class='k-dialog-update k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary'><span class='k-button-text'>#: dialogUpdate #</span></button>\" +\n            \"<button class='k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base'><span class='k-button-text'>#: dialogCancel #</span></button>\" +\n        \"</div>\" +\n    \"</div>\",\n    indent: function(content) {\n        return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                      .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                      .replace(/<br \\/>/ig, \"<br />\\n\")\n                      .replace(/\\n$/, \"\");\n    }\n});\n\nkendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\nEditor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"View HTML\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/format',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils;\n\nvar FormatCommand = Command.extend({\n    init: function (options) {\n        options.formatter = options.formatter();\n        var finder = options.formatter.finder;\n        if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n            finder._initOptions({immutables: options.immutables});\n        }\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar FormatTool = Tool.extend({\n    init: function (options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function (commandArguments) {\n        var that = this;\n        return new FormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = this.options.finder.isFormatted(nodes);\n\n        ui.toggleClass(\"k-selected\", isFormatted);\n        ui.attr(\"aria-pressed\", isFormatted);\n    }\n});\n\n$.extend(Editor, {\n    FormatCommand: FormatCommand,\n    FormatTool: FormatTool\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/inlineformat',[ \"./format\" ], f);\n})(function(){\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    EditorUtils = Editor.EditorUtils,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    extend = $.extend,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n    KEYDOWN_NS = \"keydown.kendoEditor\",\n    KMARKER = \"k-marker\";\n\nvar InlineFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    numberOfSiblings: function(referenceNode) {\n        var textNodesCount = 0,\n            elementNodesCount = 0,\n            markerCount = 0,\n            parentNode = referenceNode.parentNode,\n            node;\n\n        for (node = parentNode.firstChild; node; node = node.nextSibling) {\n            if (node != referenceNode) {\n                if (node.className == KMARKER) {\n                    markerCount++;\n                } else if (node.nodeType == 3) {\n                    textNodesCount++;\n                } else {\n                    elementNodesCount++;\n                }\n            }\n        }\n\n        if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n            // full node selection\n            return 0;\n        } else {\n            return elementNodesCount + textNodesCount;\n        }\n    },\n\n    findSuitable: function (sourceNode, skip) {\n        if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n            return null;\n        }\n\n        var node = sourceNode.parentNode;\n        var tags = this.format[0].tags;\n\n        while (!dom.ofType(node, tags)) {\n            if (this.numberOfSiblings(node) > 0) {\n                return null;\n            }\n\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    findFormat: function (sourceNode) {\n        var format = this.format,\n            attrEquals = dom.attrEquals,\n            i, len, node, tags, attributes;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                return node;\n            }\n\n            while (node) {\n                node = dom.parentOfType(node, tags);\n                if (node && attrEquals(node, attributes)) {\n                    return node;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    isFormatted: function (nodes) {\n        var i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            if (this.findFormat(nodes[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n});\n\nvar InlineFormatter = Class.extend({\n    init: function(format, values) {\n        this.finder = new InlineFormatFinder(format);\n        this.attributes = extend({}, format[0].attr, values);\n        this.tag = format[0].tags[0];\n    },\n\n    wrap: function(node) {\n        return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n    },\n\n    activate: function(range, nodes) {\n        if (this.finder.isFormatted(nodes)) {\n            this.split(range);\n            this.remove(nodes);\n        } else {\n            this.apply(nodes);\n        }\n    },\n\n    toggle: function (range) {\n        var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n        var nodes = textNodes(range);\n\n        if (nodes.length > 0) {\n            this.activate(range, nodes);\n        }\n    },\n\n    immutables: function(){\n        return this.editor && this.editor.options.immutables;\n    },\n\n    apply: function (nodes) {\n        var formatNodes = [];\n        var i, l, node, formatNode;\n\n        if (nodes.length > 1) {\n            for (i = 0, l = nodes.length; i < l; i++) {\n                node = nodes[i];\n                formatNode = this.format(node, true);\n                formatNodes.push(formatNode);\n\n            }\n        } else {\n            node = nodes[0];\n            formatNode = this.format(node, false);\n        }\n\n        this.consolidate(formatNodes);\n    },\n\n    format: function (node, outerMostInline) {\n        var formatNode = this.finder.findSuitable(node);\n        var attributes = this.attributes;\n        var styleAttr = attributes ? attributes.style || {} : {};\n\n        if (formatNode) {\n            if (dom.is(formatNode, \"font\")) {\n                if (styleAttr.color) {\n                    formatNode.removeAttribute(\"color\");\n                }\n                if (styleAttr.fontName) {\n                    formatNode.removeAttribute(\"face\");\n                }\n                if (styleAttr.fontSize) {\n                    formatNode.removeAttribute(\"size\");\n                }\n            }\n            dom.attr(formatNode, attributes);\n        } else {\n            while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                node = node.parentNode;\n            }\n\n            formatNode = this.wrap(node);\n        }\n\n        return formatNode;\n    },\n\n    remove: function (nodes) {\n        var i, l, formatNode;\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                if (this.attributes && this.attributes.style) {\n                    dom.unstyle(formatNode, this.attributes.style);\n                    if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                        dom.unwrap(formatNode);\n                    }\n                } else {\n                    dom.unwrap(formatNode);\n                }\n            }\n        }\n    },\n\n    split: function (range) {\n        var nodes = RangeUtils.textNodes(range);\n        var l = nodes.length;\n        var i, formatNode;\n\n        if (l > 0) {\n            for (i = 0; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    RangeUtils.split(range, formatNode, true);\n                }\n            }\n        }\n    },\n\n    consolidate: function (nodes) {\n        var node, last;\n\n        while (nodes.length > 1) {\n            node = nodes.pop();\n            last = nodes[nodes.length - 1];\n\n            if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                last.appendChild(node.previousSibling);\n            }\n\n            if (node.tagName == last.tagName &&\n                node.previousSibling == last &&\n                node.style.cssText == last.style.cssText &&\n                node.className === last.className) {\n\n                while (node.firstChild) {\n                    last.appendChild(node.firstChild);\n                }\n\n                dom.remove(node);\n            }\n        }\n    }\n});\n\nvar GreedyInlineFormatFinder = InlineFormatFinder.extend({\n    init: function(format, greedyProperty, fontAttr) {\n        this.format = format;\n        this.greedyProperty = greedyProperty;\n        this.fontAttr = fontAttr;\n        InlineFormatFinder.fn.init.call(this, format);\n    },\n\n    getInlineCssValue: function(node) {\n        var attributes = node.attributes;\n        var trim = kendo.trim;\n        var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n        var propertyAndValue, property, value;\n\n        if (!attributes) {\n            return;\n        }\n\n        for (i = 0, l = attributes.length; i < l; i++) {\n            attribute = attributes[i];\n            name = attribute.nodeName;\n            attributeValue = attribute.nodeValue;\n\n            if (attribute.specified && name == \"style\") {\n\n                css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                    pair = css[cssIndex];\n                    if (pair.length) {\n                        propertyAndValue = pair.split(\":\");\n                        property = trim(propertyAndValue[0].toLowerCase());\n                        value = trim(propertyAndValue[1]);\n\n                        if (property != this.greedyProperty) {\n                            continue;\n                        }\n\n                        return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                    }\n                }\n            }\n\n            if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                property = attribute.nodeValue;\n                value = attribute.nodeValue;\n\n                return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n            }\n        }\n    },\n\n    getFormatInner: function (node) {\n        var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n        var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n        var i, len, value;\n\n        for (i = 0, len = parents.length; i < len; i++) {\n            value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n            if (value) {\n                return value;\n            }\n        }\n\n        return \"inherit\";\n    },\n\n    getFormat: function (nodes) {\n        var result = this.getFormatInner(nodes[0]), i, len;\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != this.getFormatInner(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result;\n    },\n\n    isFormatted: function (nodes) {\n        return this.getFormat(nodes) !== \"\";\n    }\n});\n\nvar GreedyInlineFormatter = InlineFormatter.extend({\n    init: function(format, values, greedyProperty) {\n        InlineFormatter.fn.init.call(this, format, values);\n\n        this.values = values;\n        this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n        if (greedyProperty) {\n            this.greedyProperty = kendo.toCamelCase(greedyProperty);\n        }\n\n    },\n\n    activate: function(range, nodes) {\n        var greedyProperty = this.greedyProperty;\n        var action = \"apply\";\n\n        this.split(range);\n\n        if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n            action = \"remove\";\n        }\n\n        this[action](nodes);\n    }\n});\n\nvar InlineFormatTool = FormatTool.extend({\n    init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new InlineFormatFinder(options.format),\n            formatter: function () { return new InlineFormatter(options.format); }\n        }));\n    }\n});\n\nvar DelayedExecutionTool = Tool.extend({\n    update: function(ui, nodes) {\n        var list = ui.data(this.type);\n\n        list.close();\n        list.value(this.finder.getFormat(nodes));\n    }\n});\n\nvar FontTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        // IE has single selection hence we are using select box instead of combobox\n        this.type = (kendo.support.browser.msie || kendo.support.touch) ? \"kendoDropDownList\" : \"kendoComboBox\";\n        this.format = [{ tags: [\"span\", \"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n    },\n\n    command: function (commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function () {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function (ui, initOptions) {\n        var editor = initOptions.editor,\n            options = this.options,\n            toolName = options.name,\n            dataSource,\n            range,\n            defaultValue = [];\n\n        if (options.defaultValue) {\n           defaultValue = [{\n                text: editor.options.messages[options.defaultValue[0].text],\n                value: options.defaultValue[0].value\n           }];\n        }\n\n        dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n\n        ui.attr({ title: initOptions.title});\n        ui[this.type]({\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            dataSource: dataSource,\n            change: function () {\n                editor._range = range;\n                Tool.exec(editor, toolName, this.value());\n            },\n            close: function () {\n                setTimeout(function(){\n                    editor._deleteSavedRange();\n                },0);\n            },\n            highlightFirst: false\n        });\n\n        ui.closest(\".k-widget\").removeClass(\"k-\" + toolName).find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        var widget = ui.data(this.type);\n        widget.value(\"inherit\");\n\n        widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input\", function() {\n            var newRange = editor.getRange();\n            range = editor._containsRange(newRange) ? newRange : range;\n        })\n        .on(KEYDOWN_NS, function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                editor._deleteSavedRange();\n                e.preventDefault();\n            }\n        });\n    }\n\n});\n\nvar ColorTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.format = [{ tags: [\"span\",\"font\"]}];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n    },\n\n    options: {\n        palette: \"websafe\",\n        columns: 18\n    },\n\n    update: function() {\n        this._widget.close();\n    },\n\n    command: function (commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function () {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, initOptions) {\n        var that = this,\n            editor = initOptions.editor,\n            toolName = this.name,\n            options =  extend({}, ColorTool.fn.options, this.options),\n            palette = options.palette,\n            columns = options.columns;\n\n        ui = this._widget = new kendo.ui.ColorPicker(ui, {\n            closeOnSelect: true,\n            views: [\"palette\"],\n            preview: false,\n            input: false,\n            buttons: false,\n            toolIcon: \"k-icon k-i-\" + EditorUtils.getToolCssClass(options.name),\n            palette: palette,\n            columns: columns,\n            change: function() {\n                var color = ui.value();\n\n                if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                    editor.selectRange(that.storedRange);\n                }\n\n                if (color) {\n                    Tool.exec(editor, toolName, color);\n                }\n\n                delete that.storedRange;\n                delete that._inputFocused;\n                editor.focus();\n            },\n            open: function (e) {\n                var picker = e.sender;\n                that.storedRange = editor.getRange();\n\n                picker._popup.element.on(MOUSEDOWN_NS, function(e){\n                    if(!$(e.target).is(\"input.k-color-value\")){\n                        e.preventDefault();\n                    }\n                });\n\n                if(!picker._popup.element.is(\"[unselectable='on']\")) {\n                    picker._popup.element\n                        .attr({ unselectable: \"on\" })\n                        .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                        .end().find(\"input\").on(\"focus\", function(){\n                            that._inputFocused = true;\n                        });\n                }\n            },\n            close: function(e) {\n                e.sender._popup.element.off(MOUSEDOWN_NS);\n\n                if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                    editor.selectRange(that.storedRange);\n                }\n            },\n            activate: function(e) {\n                e.preventDefault();\n\n                if (e.sender._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                    return;\n                }\n\n                ui.trigger(\"change\");\n            }\n        });\n        ui.wrapper\n            .attr({ title: initOptions.title, unselectable: \"on\" })\n            .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n        ui.value(\"transparent\");\n    }\n});\n\nextend(Editor, {\n    InlineFormatFinder: InlineFormatFinder,\n    InlineFormatter: InlineFormatter,\n    DelayedExecutionTool: DelayedExecutionTool,\n    GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n    GreedyInlineFormatter: GreedyInlineFormatter,\n    InlineFormatTool: InlineFormatTool,\n    FontTool: FontTool,\n    ColorTool: ColorTool\n});\n\nregisterFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\"}} } ]);\nregisterTool(\"bold\", new InlineFormatTool({ key: \"B\", ctrl: true, format: formats.bold, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Bold\"}) }));\n\nregisterFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\"}} } ]);\nregisterTool(\"italic\", new InlineFormatTool({ key: \"I\", ctrl: true, format: formats.italic, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Italic\"})}));\n\nregisterFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\"}} }, { tags: [\"u\"] } ]);\nregisterTool(\"underline\", new InlineFormatTool({ key: \"U\", ctrl: true, format: formats.underline, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Underline\"})}));\n\nregisterFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\"}} } ]);\nregisterTool(\"strikethrough\", new InlineFormatTool({format: formats.strikethrough, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Strikethrough\"})}));\n\nregisterFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\nregisterTool(\"superscript\", new InlineFormatTool({format: formats.superscript, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Superscript\"})}));\n\nregisterFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\nregisterTool(\"subscript\", new InlineFormatTool({format: formats.subscript, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Subscript\"})}));\n\nregisterTool(\"foreColor\", new ColorTool({cssAttr:\"color\", fontAttr: \"color\", domAttr:\"color\", name:\"foreColor\", template: new ToolTemplate({template: EditorUtils.colorPickerTemplate, title: \"Color\"})}));\n\nregisterTool(\"backColor\", new ColorTool({cssAttr:\"background-color\", domAttr: \"backgroundColor\", name:\"backColor\", template: new ToolTemplate({template: EditorUtils.colorPickerTemplate, title: \"Background Color\"})}));\n\nregisterTool(\"fontName\", new FontTool({cssAttr:\"font-family\", fontAttr: \"face\", domAttr: \"fontFamily\", name:\"fontName\", defaultValue: [{ text: \"fontNameInherit\",  value: \"inherit\" }], template: new ToolTemplate({template: EditorUtils.comboBoxTemplate, title: \"Font Name\"})}));\n\nregisterTool(\"fontSize\", new FontTool({cssAttr:\"font-size\", fontAttr: \"size\", domAttr:\"fontSize\", name:\"fontSize\", defaultValue: [{ text: \"fontSizeInherit\",  value: \"inherit\" }], template: new ToolTemplate({template: EditorUtils.comboBoxTemplate, title: \"Font Size\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/link',[ \"./inlineformat\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    proxy = $.proxy,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    InlineFormatter = Editor.InlineFormatter,\n    InlineFormatFinder = Editor.InlineFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    editableTextNodes = RangeUtils.editableTextNodes,\n    registerTool = Editor.EditorUtils.registerTool,\n    keys = kendo.keys;\n\nvar HTTP_PROTOCOL = \"http://\";\nvar protocolRegExp = /^\\w*:\\/\\//;\nvar endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\nvar LinkFormatFinder = Class.extend({\n    findSuitable: function (sourceNode) {\n        return dom.parentOfType(sourceNode, [\"a\"]);\n    }\n});\n\nvar LinkFormatter = Class.extend({\n    init: function() {\n        this.finder = new LinkFormatFinder();\n    },\n\n    apply: function (range, attributes) {\n        var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n        var markers, doc, formatter, a, parent;\n\n        if (attributes.innerText) {\n            doc = RangeUtils.documentFromRange(range);\n            markers = RangeUtils.getMarkers(range);\n\n            range.deleteContents();\n            a = dom.create(doc, \"a\", attributes);\n            range.insertNode(a);\n\n            parent = a.parentNode;\n            if (dom.name(parent) == \"a\") {\n                dom.insertAfter(a, parent);\n            }\n\n            if (dom.emptyNode(parent)) {\n                dom.remove(parent);\n            }\n\n            // move range and markers after inserted link\n            var ref = a;\n            for (var i = 0; i < markers.length; i++) {\n                dom.insertAfter(markers[i], ref);\n                ref = markers[i];\n            }\n\n            if (markers.length) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                range.setStartBefore(markers[0]);\n                range.setEndAfter(markers[markers.length-1]);\n            }\n        } else {\n            formatter = new InlineFormatter([{ tags: [\"a\"]}], attributes);\n            formatter.finder = this.finder;\n            formatter.apply(nodes);\n        }\n    }\n});\n\nvar UnlinkCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle : function(range) {\n                var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                new InlineFormatter([{ tags: [\"a\"]}]).remove(nodes);\n            }\n        };\n        this.options = options;\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar LinkCommand = Command.extend({\n    init: function(options) {\n        var that;\n        this.options = options;\n        Command.fn.init.call(this, options);\n        this.formatter = new LinkFormatter();\n\n        if (!options.url) {\n            this.attributes = null;\n            this.async = true;\n        } else {\n            this.exec = function() {\n                this.formatter.immutables = that && that.immutables();\n                this.formatter.apply(options.range, {\n                    href: options.url,\n                    innerText: options.text || options.url,\n                    target: options.target\n                });\n            };\n        }\n    },\n\n    _dialogTemplate: function() {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    \"<div class='k-edit-label'>\" +\n                        \"<label for='k-editor-link-url'>#: messages.linkWebAddress #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-url'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label k-editor-link-text-row'>\" +\n                        \"<label for='k-editor-link-text'>#: messages.linkText #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field k-editor-link-text-row'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-text'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label'>\" +\n                        \"<label for='k-editor-link-title'>#: messages.linkToolTip #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-title'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label'></div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<input type='checkbox' class='k-checkbox k-checkbox-md k-rounded-md' id='k-editor-link-target'>\" +\n                        \"<label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-buttons'>\" +\n                        '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    \"</div>\" +\n                \"</div>\" +\n            \"</div>\"\n        )({\n            messages: this.editor.options.messages\n        });\n    },\n\n    exec: function () {\n        var messages = this.editor.options.messages;\n        this._initialText = \"\";\n        this._range = this.lockRange(true);\n        this.formatter.immutables = this.immutables();\n\n        var nodes = textNodes(this._range);\n        var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n        var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n        var dialog = this.createDialog(this._dialogTemplate(), {\n            title: messages.createLink,\n            close: proxy(this._close, this),\n            visible: false\n        });\n\n        if (a) {\n            this._range.selectNodeContents(a);\n            nodes = textNodes(this._range);\n        }\n\n        this._initialText = this.linkText(nodes);\n\n        dialog\n            .find(\".k-dialog-insert\").on(\"click\", proxy(this._apply, this)).end()\n            .find(\".k-dialog-close\").on(\"click\", proxy(this._close, this)).end()\n            .find(\".k-edit-field input\").on(\"keydown\", proxy(this._keydown, this)).end()\n            .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n            .find(\"#k-editor-link-text\").val(this._initialText).end()\n            .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n            .find(\"#k-editor-link-target\").attr(\"checked\", a ? a.target == \"_blank\" : false).end()\n            .find(\".k-editor-link-text-row\").toggle(!img);\n\n        this._dialog = dialog.data(\"kendoWindow\").center().open();\n\n        $(\"#k-editor-link-url\", dialog).trigger(\"focus\").select();\n    },\n\n    _keydown: function (e) {\n        var keys = kendo.keys;\n\n        if (e.keyCode == keys.ENTER) {\n            this._apply(e);\n        } else if (e.keyCode == keys.ESC) {\n            this._close(e);\n        }\n    },\n\n    _apply: function (e) {\n        var element = this._dialog.element;\n        var href = $(\"#k-editor-link-url\", element).val();\n        var title, text, target;\n        var textInput = $(\"#k-editor-link-text\", element);\n\n        if (href && href != HTTP_PROTOCOL) {\n\n            if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                href = \"mailto:\" + href;\n            }\n\n            this.attributes = { href: href };\n\n            title = $(\"#k-editor-link-title\", element).val();\n            if (title) {\n                this.attributes.title = title;\n            }\n\n            if (textInput.is(\":visible\")) {\n                text = kendo.trim(textInput.val());\n                if (!text && !this._initialText) {\n                    this.attributes.innerText = href;\n                } else if (text && (text !== this._initialText)) {\n                    this.attributes.innerText = dom.stripBom(text);\n                }\n            }\n\n            target = $(\"#k-editor-link-target\", element).is(\":checked\");\n            this.attributes.target = target ? \"_blank\" : null;\n\n            this.formatter.apply(this._range, this.attributes);\n        }\n\n        this._close(e);\n\n        if (this.change) {\n            this.change();\n        }\n    },\n\n    _close: function (e) {\n        e.preventDefault();\n        this._dialog.destroy();\n\n        dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n        this.releaseRange(this._range);\n    },\n\n    linkUrl: function(anchor) {\n        if (anchor) {\n            // IE < 8 returns absolute url if getAttribute is not used\n            return anchor.getAttribute(\"href\", 2);\n        }\n\n        return HTTP_PROTOCOL;\n    },\n\n    linkText: function (nodes) {\n        var text = \"\";\n        var i;\n\n        for (i = 0; i < nodes.length; i++) {\n            text += nodes[i].nodeValue;\n        }\n\n        return dom.stripBom(text || \"\");\n    },\n\n    redo: function () {\n        var range = this.lockRange(true);\n\n        this.formatter.apply(range, this.attributes);\n        this.releaseRange(range);\n    }\n\n});\n\nvar AutoLinkCommand = Command.extend({\n    init: function (options) {\n        Command.fn.init.call(this, options);\n\n        this.formatter = new LinkFormatter();\n    },\n\n    exec: function () {\n        var detectedLink = this.detectLink();\n        if (!detectedLink) {\n            return;\n        }\n\n        var range = this.getRange();\n        var linkMarker = new kendo.ui.editor.Marker();\n        var linkRange = range.cloneRange();\n\n        linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n        linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n        range = this.lockRange();\n        linkMarker.add(linkRange);\n\n        this.formatter.apply(linkRange, {\n            href: this._ensureWebProtocol(detectedLink.text)\n        });\n\n        linkMarker.remove(linkRange);\n        this.releaseRange(range);\n    },\n\n    detectLink: function () {\n        var range = this.getRange();\n        var startNode = range.startContainer;\n        var startOffset = range.startOffset;\n        var prev = startNode.previousSibling;\n        if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n            startNode = startNode.parentNode;\n            startOffset = 0;\n        }\n        var traverser = new LeftDomTextTraverser({\n            node: startNode,\n            offset: startOffset,\n            cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n        });\n\n        var detection = new DomTextLinkDetection(traverser);\n        return detection.detectLink();\n    },\n\n    changesContent: function() {\n        return !!this.detectLink();\n    },\n\n    _ensureWebProtocol: function (linkText) {\n        var hasProtocol = this._hasProtocolPrefix(linkText);\n        return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n    },\n\n    _hasProtocolPrefix: function(linkText) {\n        return protocolRegExp.test(linkText);\n    },\n\n    _prefixWithWebProtocol: function(linkText) {\n        return HTTP_PROTOCOL + linkText;\n    }\n});\n\nvar UnlinkTool = Tool.extend({\n    init: function(options) {\n        this.options = options;\n        this.finder = new InlineFormatFinder([{tags:[\"a\"]}]);\n\n        Tool.fn.init.call(this, $.extend(options, {command:UnlinkCommand}));\n    },\n\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n    },\n\n    update: function (ui, nodes) {\n        ui.toggleClass(\"k-disabled\", !this.finder.isFormatted(nodes))\n          .removeClass(\"k-hover\");\n    }\n});\n\nvar DomTextLinkDetection = Class.extend({\n    init: function (traverser) {\n        this.traverser = traverser;\n        this.start = DomPos();\n        this.end = DomPos();\n        this.text = \"\";\n    },\n\n    detectLink: function () {\n        var node = this.traverser.node;\n        var offset = this.traverser.offset;\n        if (dom.isDataNode(node)) {\n            var text = node.data.substring(0, offset);\n            if (/\\s{2}$/.test(dom.stripBom(text))) {\n                return;\n            }\n        } else if (offset === 0) {//heuristic for new line\n            var p = dom.closestEditableOfType(node, dom.blockElements);\n            if (p && p.previousSibling) {\n                this.traverser.init({\n                    node: p.previousSibling\n                });\n            }\n        }\n\n        this.traverser.traverse($.proxy(this._detectEnd, this));\n        if (!this.end.blank()) {\n            this.traverser = this.traverser.clone(this.end);\n            this.traverser.traverse($.proxy(this._detectStart, this));\n\n            if (!this._isLinkDetected()) {\n                var puntuationOptions = this.traverser.extendOptions(this.start);\n                var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                if (!this._isLinkDetected()) {\n                    this.start = DomPos();\n                }\n            }\n        }\n\n        if (this.start.blank()) {\n            return null;\n        } else {\n            return {\n                start: this.start,\n                end: this.end,\n                text: this.text\n            };\n        }\n    },\n\n    _isLinkDetected: function() {\n        return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n    },\n\n    _detectEnd: function(text, node) {\n        var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n        if (i > -1) {\n            this.end.node = node;\n            this.end.offset = i + 1;\n\n            return false;\n        }\n    },\n\n    _detectStart: function(text, node) {\n        var i = lastIndexOfRegExp(text, /\\s/);\n        var ii = i + 1;\n        this.text = text.substring(ii) + this.text;\n\n        this.start.node = node;\n        this.start.offset = ii;\n\n        if (i > -1) {\n            return false;\n        }\n    },\n\n    _skipStartPuntuation: function(text, node, offset) {\n        var i = indexOfRegExp(text, /\\w/);\n        var ii = i;\n        if (i === -1) {\n            ii = text.length;\n        }\n\n        this.text = this.text.substring(ii);\n        this.start.node = node;\n        this.start.offset = ii + (offset |0);\n\n        if (i > -1) {\n            return false;\n        }\n    }\n});\n\nfunction lastIndexOfRegExp(str, search) {\n    var i = str.length;\n    while (i-- && !search.test(str[i])) {}\n\n    return i;\n}\nfunction indexOfRegExp(str, search) {\n    var r = search.exec(str);\n\n    return r ? r.index : -1;\n}\n\nvar DomPos = function() {\n    return {\n        node: null,\n        offset: null,\n        blank: function() {\n            return this.node === null && this.offset === null;\n        }\n    };\n};\n\nvar DomTextTraverser = Class.extend({\n    init: function (options) {\n        this.node = options.node;\n        this.offset = options.offset === undefined ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n        this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n    },\n\n    traverse: function (callback) {\n        if (!callback) {\n            return;\n        }\n        this.cancel = false;\n        this._traverse(callback, this.node, this.offset);\n    },\n\n    _traverse: function (callback, node, offset) {\n        if (!node || this.cancel) {\n            return;\n        }\n        if (node.nodeType === 3) {\n            var text = node.data;\n            if (offset !== undefined) {\n                text = this.subText(text, offset);\n            }\n            this.cancel = (callback(text, node, offset) === false);\n        }\n        else {\n            var edgeNode = this.edgeNode(node);\n            this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n            return this._traverse(callback, edgeNode);\n        }\n\n        var next = this.next(node);\n        if (!next) {\n            var parent = node.parentNode;\n            while (!next && dom.isInline(parent)) {\n                next = this.next(parent);\n                parent = parent.parentNode;\n            }\n        }\n        this.cancel = this.cancel || this.cancelAtNode(next);\n        this._traverse(callback, next);\n    },\n\n    extendOptions: function(o) {\n        return $.extend({\n            node: this.node,\n            offset: this.offset,\n            cancelAtNode: this.cancelAtNode\n        }, o || {});\n    },\n\n    edgeNode: function(node) {}, //jshint ignore: line\n    next: function(node) {}, //jshint ignore: line\n    subText: function(text, offset) {} //jshint ignore: line\n\n});\n\nvar LeftDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(0, splitIndex);\n    },\n\n    next: function(node) {\n        return node.previousSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.lastChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new LeftDomTextTraverser(o);\n    }\n});\n\nvar RightDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(splitIndex);\n    },\n\n    next: function(node) {\n        return node.nextSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.firstChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new RightDomTextTraverser(o);\n    }\n});\n\nextend(kendo.ui.editor, {\n    LinkFormatFinder: LinkFormatFinder,\n    LinkFormatter: LinkFormatter,\n    UnlinkCommand: UnlinkCommand,\n    LinkCommand: LinkCommand,\n    AutoLinkCommand: AutoLinkCommand,\n    UnlinkTool: UnlinkTool,\n    DomTextLinkDetection: DomTextLinkDetection,\n    LeftDomTextTraverser: LeftDomTextTraverser,\n    RightDomTextTraverser: RightDomTextTraverser\n});\n\nregisterTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Create Link\"})}));\nregisterTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Remove Link\"})}));\nregisterTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/formatblock',[ \"./format\" ], f);\n})(function(){\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    dom = Editor.Dom,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    registerFormat = EditorUtils.registerFormat,\n    RangeUtils = Editor.RangeUtils;\n\nvar BlockFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    contains: function(node, children) {\n        var i, len, child;\n\n        for (i = 0, len = children.length; i < len; i++) {\n            child = children[i];\n            if (!child || !dom.isAncestorOrSelf(node, child)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function (nodes) {\n        var format = this.format,\n            suitable = [],\n            i, len, candidate;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            for (var f = format.length - 1; f >= 0; f--) {\n                candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                if (candidate) {\n                    break;\n                }\n            }\n\n            if (!candidate || candidate.contentEditable === 'true') {\n                return [];\n            }\n\n            if ($.inArray(candidate, suitable) < 0) {\n                suitable.push(candidate);\n            }\n        }\n\n        this._resolveListsItems(suitable);\n\n        for (i = 0, len = suitable.length; i < len; i++) {\n            if (this.contains(suitable[i], suitable)) {\n                return [suitable[i]];\n            }\n        }\n\n        return suitable;\n    },\n    _resolveListsItems: function(nodes){\n        var i, node, wrapper;\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n            wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n            if (dom.is(wrapper, \"li\")) {\n                node = nodes[i] = wrapper;\n            }\n        }\n    },\n\n    findFormat: function (sourceNode, until) {\n        var format = this.format,\n            i, len, node, tags, attributes;\n        var editableParent = dom.editableParent(sourceNode);\n        var immutables = this.options && this.options.immutables;\n        var ImmutablesNS = Editor.Immutables;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (immutables && tags && tags[0] == \"immutable\") {\n                var immutable = ImmutablesNS.immutableParent(node);\n                if (immutable && dom.attrEquals(immutable, attributes)) {\n                    return node;\n                }\n            }\n\n            while (node && dom.isAncestorOf(editableParent, node)) {\n                if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                if(until && until(node)) {\n                    break;\n                }\n\n                node = node.parentNode;\n            }\n        }\n        return null;\n    },\n\n    getFormat: function (nodes) {\n        var that = this,\n            findFormat = function(node) {\n                    return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                },\n            result = findFormat(nodes[0]),\n            i, len;\n\n        if (!result) {\n            return \"\";\n        }\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != findFormat(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result.nodeName.toLowerCase();\n    },\n\n    isFormatted: function (nodes, until) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            if (!this.findFormat(nodes[i], until)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n});\n\nvar BlockFormatter = Class.extend({\n    init: function (format, values) {\n        this.format = format;\n        this.values = values;\n        this.finder = new BlockFormatFinder(format);\n    },\n\n    wrap: function(tag, attributes, nodes) {\n\n        var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n        if (dom.isInline(commonAncestor)) {\n            commonAncestor = dom.blockParentOrBody(commonAncestor);\n        }\n\n        var ancestors = dom.significantChildNodes(commonAncestor),\n            position = dom.findNodeIndex(ancestors[0]),\n            wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n            i, ancestor;\n\n        for (i = 0; i < ancestors.length; i++) {\n            ancestor = ancestors[i];\n            if (dom.isBlock(ancestor)) {\n                dom.attr(ancestor, attributes);\n\n                if (wrapper.childNodes.length) {\n                    dom.insertBefore(wrapper, ancestor);\n                    wrapper = wrapper.cloneNode(false);\n                }\n\n                position = dom.findNodeIndex(ancestor) + 1;\n\n                continue;\n            }\n\n            wrapper.appendChild(ancestor);\n        }\n\n        if (wrapper.firstChild) {\n            dom.insertAt(commonAncestor, wrapper, position);\n        }\n    },\n\n    apply: function (nodes) {\n        var format, values = this.values;\n\n        function attributes(format) {\n            return extend({}, format && format.attr, values);\n        }\n\n        this._handleImmutables(nodes, true);\n\n        var images = dom.filter(\"img\", nodes);\n        var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n        var imageAttributes = attributes(imageFormat);\n        $.each(images, function() {\n            dom.attr(this, imageAttributes);\n        });\n\n        // only images were selected, no need to wrap\n        if (images.length == nodes.length) {\n            return;\n        }\n\n        var nonImages = dom.filter(\"img\", nodes, true);\n        var formatNodes = this.finder.findSuitable(nonImages);\n\n        if (formatNodes.length) {\n            for (var i = 0, len = formatNodes.length; i < len; i++) {\n                format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                dom.attr(formatNodes[i], attributes(format));\n            }\n        } else {\n            format = this.format[0];\n            this.wrap(format.tags[0], attributes(format), nonImages);\n        }\n    },\n\n    _handleImmutables: function (nodes, applyFormatting) {\n        if (!this.immutables()) {\n            return;\n        }\n        var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n        if (!immutableFormat) {\n            return;\n        }\n        var ImmutablesNS = Editor.Immutables;\n        var l = nodes.length - 1;\n        for (var i = l; i >= 0; i--) {\n            var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n            if (!immutableParent) {\n                continue;\n            }\n            if (immutableParent !== nodes[i + 1]) {\n                if (applyFormatting) {\n                    dom.attr(immutableParent, immutableFormat.attr);\n                } else {\n                    dom.unstyle(immutableParent, immutableFormat.attr.style);\n                }\n            }\n            nodes.splice(i, 1);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    remove: function (nodes) {\n        var i, l, formatNode, namedFormat, name;\n\n        this._handleImmutables(nodes, false);\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                name = dom.name(formatNode);\n                namedFormat = EditorUtils.formatByName(name, this.format);\n                if (namedFormat.attr.style) {\n                    dom.unstyle(formatNode, namedFormat.attr.style);\n                }\n                if (namedFormat.attr.className) {\n                    dom.removeClass(formatNode, namedFormat.attr.className);\n                }\n            }\n        }\n    },\n\n    toggle: function (range) {\n        var that = this,\n            nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n        if (that.finder.isFormatted(nodes)) {\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n});\n\nvar GreedyBlockFormatter = Class.extend({\n    init: function (format, values) {\n        var that = this;\n        that.format = format;\n        that.values = values;\n        that.finder = new BlockFormatFinder(format);\n    },\n\n    apply: function (nodes) {\n        var format = this.format;\n        var blocks = dom.blockParents(nodes);\n        var formatTag = format[0].tags[0];\n        var i, len, list, formatter, range;\n        var element;\n        var tagName;\n        var block;\n        var immutalbeParent;\n\n        if (blocks.length) {\n            for (i = 0, len = blocks.length; i < len; i++) {\n                block = blocks[i];\n                immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                if (!immutalbeParent) {\n                    tagName = dom.name(block);\n\n                    if (tagName == \"li\") {\n                        list = block.parentNode;\n                        formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                        range = this.editor.createRange();\n                        range.selectNode(blocks[i]);\n                        formatter.toggle(range);\n                    } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                        new BlockFormatter(format, this.values).apply(block.childNodes);\n                    } else {\n                        element = dom.changeTag(block, formatTag);\n                        dom.attr(element, format[0].attr);\n                    }\n                }\n            }\n        } else {\n            var blockFormatter = new BlockFormatter(format, this.values);\n            blockFormatter.editor = this.editor;\n            blockFormatter.apply(nodes);\n        }\n    },\n\n    toggle: function (range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n\n        this.apply(nodes);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    }\n});\n\nvar BlockFormatTool = FormatTool.extend({ init: function (options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new BlockFormatFinder(options.format),\n            formatter: function () {\n                return new BlockFormatter(options.format);\n            }\n        }));\n    }\n});\n\nextend(Editor, {\n    BlockFormatFinder: BlockFormatFinder,\n    BlockFormatter: BlockFormatter,\n    GreedyBlockFormatter: GreedyBlockFormatter,\n    BlockFormatTool: BlockFormatTool\n});\n\nvar listElements = [\"ul\",\"ol\",\"li\"];\n\nregisterFormat(\"justifyLeft\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" }} },\n    { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" }} },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" }} },\n    { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" }} }\n]);\nregisterTool(\"justifyLeft\", new BlockFormatTool({\n    format: formats.justifyLeft,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Left\"\n    })\n}));\n\nregisterFormat(\"justifyCenter\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" }} },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" }} },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" }} },\n    { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" }} }\n]);\nregisterTool(\"justifyCenter\", new BlockFormatTool({\n    format: formats.justifyCenter,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Center\"\n    })\n}));\n\nregisterFormat(\"justifyRight\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" }} },\n    { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" }} },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" }} },\n    { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" }} }\n]);\nregisterTool(\"justifyRight\", new BlockFormatTool({\n    format: formats.justifyRight,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Right\"\n    })\n}));\n\nregisterFormat(\"justifyFull\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" }} },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" }} },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" }} },\n    { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" }} }\n]);\nregisterTool(\"justifyFull\", new BlockFormatTool({\n    format: formats.justifyFull,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Full\"\n    })\n}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/lists',[ \"./formatblock\" ], f);\n})(function(){\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    registerTool = Editor.EditorUtils.registerTool;\n\nvar ListFormatFinder = BlockFormatFinder.extend({\n    init: function(options) {\n        this.tag = options.tag;\n        this.attr = options.attr;\n        this.altAttr = options.altAttr;\n\n        var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n        var format = [{ tags: tags, attr: this.attr }];\n\n        if (this.altAttr) {\n            format.push({\n                tags: tags,\n                attr: this.altAttr\n            });\n        }\n\n        BlockFormatFinder.fn.init.call(this, format);\n    },\n\n    matchesType: function (node) {\n        return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n    },\n\n    isList: function(node){\n        return dom.list(node);\n    },\n\n    isFormatted: function (nodes) {\n        var formatNodes = [];\n        var formatNode, i;\n\n        for (i = 0; i < nodes.length; i++) {\n            formatNode = this.findFormat(nodes[i], this.isList);\n\n            if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                formatNodes.push(formatNode);\n            }\n        }\n\n        if (formatNodes.length < 1) {\n            return false;\n        }\n\n        if (formatNodes.length != nodes.length) {\n            return false;\n        }\n\n        // check if sequential lists are selected\n        for (i = 0; i < formatNodes.length; i++) {\n            if (formatNodes[i].parentNode != formatNode.parentNode) {\n                break;\n            }\n\n            if (formatNodes[i] != formatNode) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function (nodes) {\n        var candidate = this.findFormat(nodes[0], this.isList);\n\n        if (candidate && dom.name(candidate) == this.tag) {\n            return candidate;\n        }\n\n        return null;\n    }\n\n});\n\nvar ListFormatter = Class.extend({\n    init: function(options, unwrapTag) {\n        var that = this;\n        options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n        that.tag = options.tag;\n        that.attr = options.attr;\n        that.finder = new ListFormatFinder(options);\n        that.unwrapTag = unwrapTag;\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    immutables: function () {\n        return this.editor && !!this.editor.options.immutables;\n    },\n\n    wrap: function(list, nodes) {\n        var li = dom.create(list.ownerDocument, \"li\"),\n            i, node,\n            isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n\n            if (dom.is(node, 'li')) {\n                list.appendChild(node);\n                continue;\n            }\n\n            if (this.isList(node)) {\n                while (node.firstChild) {\n                    list.appendChild(node.firstChild);\n                }\n                continue;\n            }\n\n            if (dom.is(node, \"td\")) {\n                while (node.firstChild) {\n                    li.appendChild(node.firstChild);\n                }\n                list.appendChild(li);\n                node.appendChild(list);\n                list = list.cloneNode(false);\n                li = li.cloneNode(false);\n                continue;\n            }\n\n            li.appendChild(node);\n\n            if (dom.isBlock(node)) {\n                list.appendChild(li);\n                if (!isImmutable(node)) {\n                    dom.unwrap(node);\n                }\n                li = li.cloneNode(false);\n            }\n        }\n\n        if (li.firstChild) {\n            list.appendChild(li);\n        }\n    },\n\n    containsAny: function(parent, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    suitable: function (candidate, nodes) {\n        if (candidate.className == \"k-marker\") {\n            var sibling = candidate.nextSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n\n            sibling = candidate.previousSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n        }\n\n        return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n    },\n\n    _parentLists: function(node) {\n        var editable = dom.closestEditable(node);\n\n        return $(node).parentsUntil(editable, \"ul,ol\");\n    },\n\n    split: function (range) {\n        var nodes = textNodes(range);\n        var start, end, parents;\n\n        if (nodes.length) {\n            start = dom.parentOfType(nodes[0], ['li']);\n            end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n            range.setStartBefore(start);\n            range.setEndAfter(end);\n\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                var formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    parents = this._parentLists(formatNode);\n                    if (parents.length) {\n                        RangeUtils.split(range, parents.last()[0], true);\n                    } else {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        }\n    },\n\n    merge: function(tag, formatNode) {\n        var prev = formatNode.previousSibling, next;\n\n        while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n            prev = prev.previousSibling;\n        }\n\n        // merge with previous list\n        if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n            while(formatNode.firstChild) {\n                prev.appendChild(formatNode.firstChild);\n            }\n            dom.remove(formatNode);\n            formatNode = prev;\n        }\n\n        next = formatNode.nextSibling;\n        while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n            next = next.nextSibling;\n        }\n\n        // merge with next list\n        if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n            while(formatNode.lastChild) {\n                next.insertBefore(formatNode.lastChild, next.firstChild);\n            }\n            dom.remove(formatNode);\n        }\n    },\n\n    breakable: function(node) {\n        return (\n            node != node.ownerDocument.body &&\n            !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n            !node.attributes.contentEditable\n        );\n    },\n\n    findSuitableNode: function (nodes) {\n        var that = this,\n            finder = that.finder,\n            tag = that.tag,\n            formatNode;\n\n        formatNode = finder.findSuitable(nodes);\n\n        if (!formatNode) {\n            // Find the opposite tag\n            finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n            formatNode = finder.findSuitable(nodes);\n        }\n\n        if(!formatNode) {\n            // Find the same tag\n            finder = new ListFormatFinder({ tag: tag });\n            formatNode = finder.findSuitable(nodes);\n            formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n        }\n\n\n        return formatNode;\n    },\n\n    applyOnSection: function (section, nodes) {\n        var tag = this.tag;\n        var attr = this.attr;\n        var commonAncestor = dom.closestSplittableParent(nodes);\n\n        var ancestors = [];\n        var formatNode = this.findSuitableNode(nodes);\n\n        var childNodes;\n\n        if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n            childNodes = $.map(nodes, function(node) {\n                return dom.parentOfType(node, [\"td\"]);\n            });\n        } else {\n            childNodes = dom.significantChildNodes(commonAncestor);\n\n            if ($.grep(childNodes, dom.isBlock).length) {\n                childNodes = $.grep(childNodes, $.proxy(function(node) {\n                    return this.containsAny(node, nodes);\n                }, this));\n            }\n\n            if (!childNodes.length) {\n                childNodes = nodes;\n            }\n        }\n\n        function pushAncestor() {\n            ancestors.push(this);\n        }\n\n        for (var i = 0; i < childNodes.length; i++) {\n            var child = childNodes[i];\n            var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n            if (!suitable) {\n                continue;\n            }\n\n            if (formatNode && this.isList(child)) {\n                // merging lists\n                $.each(child.children, pushAncestor);\n                dom.remove(child);\n            } else {\n                ancestors.push(child);\n            }\n        }\n\n        if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n            ancestors = [commonAncestor];\n        }\n\n        if (!formatNode) {\n            formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n            if(dom.isBlock(ancestors[0])) {\n                dom.mergeAttributes(ancestors[0], formatNode);\n            }\n            dom.insertBefore(formatNode, ancestors[0]);\n        }\n\n        this.wrap(formatNode, ancestors);\n\n        while (dom.isBom(formatNode.nextSibling)) {\n            dom.remove(formatNode.nextSibling);\n        }\n\n        if (!this.finder.matchesType(formatNode)) {\n            formatNode.removeAttribute(\"type\");\n            formatNode.style.listStyleType = \"\";\n            dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n        }\n\n        if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n            formatNode.removeAttribute(\"type\");\n        }\n\n        if (!dom.is(formatNode, tag)) {\n            dom.changeTag(formatNode, tag);\n        }\n\n        this.merge(tag, formatNode);\n    },\n\n    apply: function (nodes) {\n        var i = 0,\n            sections = [],\n            lastSection,\n            lastNodes,\n            section,\n            node,\n            l = nodes.length,\n            immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n        function addLastSection() {\n            if (lastSection) {\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n            }\n        }\n\n        // split nodes into sections that need to be different lists\n        for (i = 0; i < l; i++) {\n            node = immutableParent(nodes[i]) || nodes[i];\n            section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n            if (!lastSection || section != lastSection) {\n                addLastSection();\n                lastNodes = [node];\n                lastSection = section;\n            } else {\n                lastNodes.push(node);\n            }\n        }\n\n        addLastSection();\n\n        for (i = 0; i < sections.length; i++) {\n            this.applyOnSection(sections[i].section, sections[i].nodes);\n        }\n    },\n\n    unwrap: function(ul) {\n        var fragment = ul.ownerDocument.createDocumentFragment(),\n            unwrapTag = this.unwrapTag,\n            parents,\n            li,\n            p,\n            child;\n\n        for (li = ul.firstChild; li; li = li.nextSibling) {\n            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n            while(li.firstChild) {\n                child = li.firstChild;\n\n                if (dom.isBlock(child)) {\n\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                        p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    }\n\n                    fragment.appendChild(child);\n                } else {\n                    p.appendChild(child);\n                }\n            }\n\n            if (p.firstChild) {\n                fragment.appendChild(p);\n            }\n        }\n\n        parents = this._parentLists(ul);\n\n        if (parents[0]) {\n            dom.insertAfter(fragment, parents.last()[0]);\n            parents.last().remove();\n        } else {\n            dom.insertAfter(fragment, ul);\n        }\n\n        dom.remove(ul);\n    },\n\n    remove: function (nodes) {\n        var formatNode;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n\n            if (formatNode) {\n                this.unwrap(formatNode);\n            }\n        }\n    },\n\n    toggle: function (range) {\n        var that = this,\n            nodes = textNodes(range),\n            ancestor = range.commonAncestorContainer;\n\n        if (!nodes.length) {\n            range.selectNodeContents(ancestor);\n            nodes = textNodes(range);\n            if (!nodes.length) {\n                var text = ancestor.ownerDocument.createTextNode(\"\");\n                range.startContainer.appendChild(text);\n                nodes = [text];\n                range.selectNode(text.parentNode);\n            }\n        }\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        if (that.finder.isFormatted(nodes)) {\n            that.split(range);\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n\n});\n\nvar ListCommand = Command.extend({\n    init: function(options) {\n        options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar ListTool = FormatTool.extend({\n    init: function(options) {\n        this.options = options;\n\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new ListFormatFinder(options)\n        }));\n    },\n\n    command: function (commandArguments) {\n        return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n    }\n});\n\nextend(Editor, {\n    ListFormatFinder: ListFormatFinder,\n    ListFormatter: ListFormatter,\n    ListCommand: ListCommand,\n    ListTool: ListTool\n});\n\nregisterTool(\"insertUnorderedList\", new ListTool({tag:'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert unordered list\"})}));\nregisterTool(\"insertOrderedList\", new ListTool({tag:'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert ordered list\"})}));\nregisterTool(\"insertUpperRomanList\", new ListTool({tag:'ol', attr: { style: { listStyleType: \"upper-roman\" }}, altAttr: { type: \"I\" }, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert upper roman list\"})}));\nregisterTool(\"insertLowerRomanList\", new ListTool({tag:'ol', attr: { style: { listStyleType: \"lower-roman\" }}, altAttr: { type: \"i\" }, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert lower roman list\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/formatting',[ \"./inlineformat\" ], f);\n})(function(){\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    DelayedExecutionTool = Editor.DelayedExecutionTool,\n    Command = Editor.Command,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\n\nvar FormattingTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        var that = this;\n        Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n        that.type = \"kendoSelectBox\";\n\n        that.finder = {\n            getFormat: function() { return \"\"; }\n        };\n    },\n\n    options: {\n        items: [\n            { text: \"Paragraph\", value: \"p\" },\n            { text: \"Quotation\", value: \"blockquote\" },\n            { text: \"Heading 1\", value: \"h1\" },\n            { text: \"Heading 2\", value: \"h2\" },\n            { text: \"Heading 3\", value: \"h3\" },\n            { text: \"Heading 4\", value: \"h4\" },\n            { text: \"Heading 5\", value: \"h5\" },\n            { text: \"Heading 6\", value: \"h6\" }\n        ],\n        width: 110\n    },\n\n    toFormattingItem: function(item) {\n        var value = item.value;\n\n        if (!value) {\n            return item;\n        }\n\n        if (item.tag || item.className) {\n            return item;\n        }\n\n        var dot = value.indexOf(\".\");\n\n        if (dot === 0) {\n            item.className = value.substring(1);\n        } else if (dot == -1) {\n            item.tag = value;\n        } else {\n            item.tag = value.substring(0, dot);\n            item.className = value.substring(dot + 1);\n        }\n\n        return item;\n    },\n\n    command: function (args) {\n        var that = this;\n        var item = args.value;\n\n        item = this.toFormattingItem(item);\n\n        return new Editor.FormatCommand({\n            range: args.range,\n            formatter: function () {\n                var formatter,\n                    tags = (item.tag || item.context || \"span\").split(\",\"),\n                    format = [{\n                        tags: tags,\n                        attr: { className: item.className || \"\" }\n                    }];\n\n                if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                    formatter = new Editor.GreedyInlineFormatter(format);\n                } else {\n                    formatter = new Editor.GreedyBlockFormatter(format);\n                }\n\n                formatter.editor = that.editor;\n                return formatter;\n            }\n        });\n    },\n\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor;\n        var options = this.options;\n        var toolName = options.name;\n        var that = this;\n        var selectBox;\n\n        that.editor = editor;\n\n        ui.width(options.width);\n\n        selectBox = ui.kendoSelectBox({\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            dataSource: options.items || editor.options[toolName],\n            title: editor.options.messages[toolName],\n            autoSize: true,\n            change: function () {\n                var dataItem = this.dataItem();\n\n                if (dataItem) {\n                    Tool.exec(editor, toolName, dataItem.toJSON());\n                }\n            },\n            dataBound: function() {\n                var i, items = this.dataSource.data();\n\n                for (i = 0; i < items.length; i++) {\n                    items[i] = that.toFormattingItem(items[i]);\n                }\n            },\n            highlightFirst: false,\n            template: kendo.template(\n                '<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>'\n            )\n        }).data(\"kendoSelectBox\");\n\n        ui.attr(\"title\", initOptions.title);\n        selectBox.wrapper.attr(\"title\", initOptions.title);\n\n        ui.addClass(\"k-decorated\")\n            .closest(\".k-widget\")\n                .removeClass(\"k-\" + toolName)\n                .find(\"*\").addBack()\n                    .attr(\"unselectable\", \"on\");\n    },\n\n    getFormattingValue: function(items, nodes) {\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var tag = item.tag || item.context || \"\";\n            var className = item.className ? \".\"+item.className : \"\";\n            var selector = tag + className;\n\n            var element = $(nodes[0]).closest(selector)[0];\n\n            if (!element) {\n                continue;\n            }\n\n            if (nodes.length == 1) {\n                return item.value;\n            }\n\n            for (var n = 1; n < nodes.length; n++) {\n                if (!$(nodes[n]).closest(selector)[0]) {\n                    break;\n                } else if (n == nodes.length - 1) {\n                    return item.value;\n                }\n            }\n        }\n\n        return \"\";\n    },\n\n    update: function(ui, nodes) {\n        var selectBox = $(ui).data(this.type);\n\n        // necessary until formatBlock is deleted\n        if (!selectBox) {\n            return;\n        }\n\n        var dataSource = selectBox.dataSource,\n            items = dataSource.data(),\n            i, context,\n            ancestor = dom.commonAncestor.apply(null, nodes);\n\n        if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n            return;\n        } else {\n            this._ancestor = ancestor;\n        }\n\n        for (i = 0; i < items.length; i++) {\n            context = items[i].context;\n\n            items[i].visible = !context || !!$(ancestor).closest(context).length;\n        }\n\n        dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n        DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n        selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n        selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nvar CleanFormatCommand = Command.extend({\n    exec: function() {\n        var range = this.lockRange(true);\n        this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n        RangeUtils.wrapSelectedElements(range);\n\n        var nodes = RangeUtils.mapAll(range, function(node) {\n            return node;\n        });\n\n\n        for(var c = nodes.length - 1; c >= 0; c--) {\n            var node = nodes[c];\n            if (!this.immutableParent(node)) {\n                this.clean(node);\n            }\n        }\n\n        this.releaseRange(range);\n    },\n\n    clean: function(node) {\n        if (!node || dom.isMarker(node)) {\n            return;\n        }\n\n        var name = dom.name(node);\n\n        if (name == \"ul\" || name == \"ol\") {\n            var listFormatter = new Editor.ListFormatter(name);\n            var prev = node.previousSibling;\n            var next = node.nextSibling;\n\n            listFormatter.unwrap(node);\n\n            // clean contents\n            for (; prev && prev != next; prev = prev.nextSibling) {\n                this.clean(prev);\n            }\n        } else if (name == \"blockquote\") {\n            dom.changeTag(node, \"p\");\n        } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n            for (var i = node.childNodes.length-1; i >= 0; i--) {\n                this.clean(node.childNodes[i]);\n            }\n\n            node.removeAttribute(\"style\");\n            node.removeAttribute(\"class\");\n        } else {\n            unwrapListItem(node);\n        }\n\n        if ($.inArray(name, this.tagsToClean) > -1) {\n            dom.unwrap(node);\n        }\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\n\nfunction unwrapListItem(node) {\n    var li = dom.closestEditableOfType(node, [\"li\"]);\n    if (li) {\n        var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n        var range = kendo.ui.editor.W3CRange.fromNode(node);\n        range.selectNode(li);\n        listFormatter.toggle(range);\n    }\n}\n\n$.extend(Editor, {\n    FormattingTool: FormattingTool,\n    CleanFormatCommand: CleanFormatCommand\n});\n\nregisterTool(\"formatting\", new FormattingTool({ template: new ToolTemplate({ template: EditorUtils.dropDownListTemplate, title: \"Format\" }) }));\nregisterTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Clean formatting\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/image',[ \"../../kendo.imagebrowser\", \"../command\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    keys = kendo.keys,\n    KEDITORIMAGEURL = \"#k-editor-image-url\",\n    KEDITORIMAGETITLE = \"#k-editor-image-title\",\n    KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n    KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\nvar ImageCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertImage: function(img, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.src && attributes.src != \"http://\") {\n\n            var removeIEAttributes = function() {\n                setTimeout(function(){\n                    if (!attributes.width) {\n                        img.removeAttribute(\"width\");\n                    }\n\n                    if (!attributes.height) {\n                        img.removeAttribute(\"height\");\n                    }\n\n                    img.removeAttribute(\"complete\");\n                });\n            };\n\n            if (!img) {\n                img = dom.create(doc, \"img\", attributes);\n                img.onload = img.onerror = removeIEAttributes;\n\n                range.deleteContents();\n                range.insertNode(img);\n\n                if (!img.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                }\n\n                removeIEAttributes();\n\n                range.setStartAfter(img);\n                range.setEndAfter(img);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                img.onload = img.onerror = removeIEAttributes;\n                dom.attr(img, attributes);\n                removeIEAttributes();\n            }\n        }\n\n        return false;\n    },\n\n    _dialogTemplate: function(showBrowser) {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    '<div class=\"k-edit-form-content\">' +\n                        '# if (showBrowser) { #' +\n                            '<div class=\"k-filebrowser k-imagebrowser\"></div>' +\n                        '# } #' +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-url\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-title\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-width\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-height\"></span>' +\n                        \"</div>\" +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                        '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    '</div>' +\n                '</div>' +\n            '</div>'\n        )({\n            messages: this.editor.options.messages,\n            showBrowser: showBrowser\n        });\n    },\n\n    redo: function () {\n        var that = this,\n            range = that.lockRange();\n\n        if (!that.insertImage(RangeUtils.image(range), range)) {\n            that.releaseRange(range);\n        }\n    },\n\n    exec: function () {\n        var that = this,\n            range = that.lockRange(),\n            applied = false,\n            img = RangeUtils.image(range),\n            imageWidth = img && img.getAttribute(\"width\") || \"\",\n            imageHeight = img && img.getAttribute(\"height\") || \"\",\n            dialog,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            imageBrowser = options.imageBrowser,\n            showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined),\n            dialogOptions = {\n                title: messages.insertImage,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n            that.attributes = {\n                src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                alt: element.find(KEDITORIMAGETITLE).val()\n            };\n\n            that.attributes.width = null;\n            that.attributes.height = null;\n\n            if (!isNaN(w) && w > 0) {\n                that.attributes.width = w;\n            }\n\n            if (!isNaN(h) && h > 0) {\n                that.attributes.height = h;\n            }\n\n            applied = that.insertImage(img, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n\n        dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n            .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n            .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n            .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n            .find(KEDITORIMAGEHEIGHT).val(imageHeight).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        if (showBrowser) {\n            this._imageBrowser = new kendo.ui.ImageBrowser(\n                element.find(\".k-imagebrowser\"),\n                extend({}, imageBrowser)\n            );\n\n            this._imageBrowser.bind(\"change\", function (ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORIMAGEURL).val(this.value());\n                }\n            });\n\n            this._imageBrowser.bind(\"apply\", apply);\n        }\n\n        if(isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n    }\n\n});\n\nkendo.ui.editor.ImageCommand = ImageCommand;\n\nregisterTool(\"insertImage\", new Editor.Tool({ command: ImageCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert Image\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/import',[ \"../main\" ], f);\n})(function(){\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    proxy = $.proxy,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\nvar ImportCommand = Command.extend({\n    exec: function() {\n        (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n    },\n\n    _initializeUploadWidget: function(){\n        var cmd = this;\n        var editor = cmd.editor;\n        var importOptions = editor.options[\"import\"];\n        var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n            success: proxy(cmd._onUploadSuccess, cmd),\n            progress: proxy(cmd._onUploadProgress, cmd),\n            select: proxy(cmd._onUploadSelect, cmd),\n            error: proxy(cmd._onUploadError, cmd),\n            complete: proxy(cmd._onUploadComplete, cmd),\n            showFileList: false,\n            multiple: false,\n            async: {\n                saveUrl:  importOptions.proxyURL,\n                autoUpload: true,\n                saveField: \"file\"\n            },\n            validation: {\n                allowedExtensions: importOptions.allowedExtensions,\n                maxFileSize: importOptions.maxFileSize\n            }\n        }).getKendoUpload();\n\n        editor._uploadWidget = upload;\n\n        return upload;\n    },\n    _onUploadComplete: function(ev){\n        this._trigger(\"complete\", ev);\n        ev.sender.clearAllFiles();\n\n        this._removeLoadingOverlay();\n    },\n    _onUploadSuccess: function(ev){\n        this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n        this._trigger(\"success\", ev);\n    },\n    _onUploadProgress: function(ev){\n        this._trigger(\"progress\", ev);\n    },\n    _onUploadSelect: function(ev){\n        this._trigger(\"select\", ev);\n        if (!ev.files[0].validationErrors) {\n            this._initLoadingOverlay();\n        }\n    },\n    _onUploadError: function(ev){\n        this._trigger(\"error\", ev);\n    },\n\n    _trigger: function(eventType, uploadEvent) {\n        var editor = this.editor;\n        var importOptions = editor.options[\"import\"];\n        if (typeof importOptions[eventType] === \"function\") {\n            importOptions[eventType].call(editor, uploadEvent);\n        }\n    },\n\n    _initLoadingOverlay: function (){\n        var editable = this.editor.body;\n        if (Editor.Dom.is(editable, \"body\")) {\n            this._iframeWrapper = this._container =\n                this.editor.wrapper.find(\"iframe\").parent()\n                .css({position: \"relative\"}).append(loadingOverlay);\n        } else {\n            this._container = $(editable).append(loadingOverlay);\n        }\n\n        kendo.ui.progress(this._container, true);\n    },\n\n    _removeLoadingOverlay: function(){\n        kendo.ui.progress(this._container, false);\n        $(this._iframeWrapper).css({\n            position: \"\"\n        });\n\n        delete this._container;\n        delete this._iframeWrapper;\n    }\n});\n\nextend(Editor, {\n    ImportCommand: ImportCommand\n});\n\nregisterTool(\"import\", new Tool({\n    command: ImportCommand,\n    template: new ToolTemplate({template: EditorUtils.iconTextButtonTemplate, title: \"Import\"})\n}));\n\n}(window.kendo.jQuery));\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/insert',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        GenericCommand = editorNS.GenericCommand,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        RestorePoint = editorNS.RestorePoint,\n        extend = $.extend;\n\nvar InsertHtmlCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n        var options = this.options;\n        var range = options.range;\n        var body = editor.body;\n        var startRestorePoint = new RestorePoint(range, body);\n        var html = options.html || options.value || '';\n\n        editor.selectRange(range);\n\n        editor.clipboard.paste(html, options);\n\n        if (options.postProcess) {\n            options.postProcess(editor, editor.getRange());\n        }\n\n        var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n        genericCommand.editor = editor;\n        editor.undoRedoStack.push(genericCommand);\n\n        editor.focus();\n    }\n});\n\nvar InsertHtmlTool = Tool.extend({\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor,\n            options = this.options,\n            dataSource = options.items ? options.items : editor.options.insertHtml;\n\n        this._selectBox = new editorNS.SelectBox(ui, {\n            dataSource: dataSource,\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            change: function () {\n                Tool.exec(editor, 'insertHtml', this.value());\n            },\n            title: editor.options.messages.insertHtml,\n            highlightFirst: false\n        });\n\n        ui.attr(\"title\", initOptions.title);\n        this._selectBox.wrapper.attr(\"title\", initOptions.title);\n    },\n\n    command: function (commandArguments) {\n        return new InsertHtmlCommand(commandArguments);\n    },\n\n    update: function(ui) {\n        var selectbox = ui.data(\"kendoSelectBox\") || ui.find(\"select\").data(\"kendoSelectBox\");\n        selectbox.close();\n        selectbox.value(selectbox.options.title);\n    }\n});\n\nextend(editorNS, {\n    InsertHtmlCommand: InsertHtmlCommand,\n    InsertHtmlTool: InsertHtmlTool\n});\n\nregisterTool(\"insertHtml\", new InsertHtmlTool({template: new ToolTemplate({template: EditorUtils.dropDownListTemplate, title: \"Insert HTML\", initialValue: \"Insert HTML\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/export',[ \"../main\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    proxy = $.proxy,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    defaultExportAsItems = [\n        { text: 'Docx', value: 'docx' },\n        { text: 'Rtf', value: 'rtf' },\n        { text: 'Pdf', value: 'pdf' },\n        { text: 'Html', value: 'html' },\n        { text: 'Plain Text', value: 'txt' }\n    ];\n\nvar ExportAsCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.exportType = options.exportType;\n    },\n\n    exec: function() {\n        var cmd = this;\n        var range = this.lockRange(true);\n        cmd.postToProxy();\n        cmd.releaseRange(range);\n    },\n\n    postToProxy: function() {\n        this.generateForm().appendTo('body').submit().remove();\n    },\n\n    generateForm: function() {\n        var cmd = this;\n        var exportAsOptions = cmd.editor.options.exportAs;\n        var form = $('<form>').attr({\n            action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n            method: 'POST'\n        });\n\n        form.append([\n            cmd.valueInput(),\n            cmd.exportTypeInput(),\n            cmd.fileNameInput()\n        ]);\n\n        return form;\n    },\n\n    valueInput: function() {\n        var editor = this.editor;\n        return $('<input>').attr({\n            value: editor.encodedValue(),\n            name: 'value',\n            type: 'hidden'\n        });\n    },\n\n    exportTypeInput: function() {\n        var cmd = this;\n        return $('<input>').attr({\n            value: cmd.exportType,\n            name: 'exportType',\n            type: 'hidden'\n        });\n\n    },\n\n    fileNameInput: function() {\n        var editor = this.editor;\n        var exportAsOptions = editor.options.exportAs;\n        var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n        return $('<input>').attr({\n            value: fileName,\n            name: 'fileName',\n            type: 'hidden'\n        });\n    }\n});\n\nvar ExportAsTool = Tool.extend({\n    init: function(options) {\n        var tool = this;\n        Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n        tool.type = 'kendoSelectBox';\n    },\n\n    options: {\n        items: defaultExportAsItems,\n        width: 140\n    },\n\n    command: function(args) {\n        var value = args.value;\n        return new Editor.ExportAsCommand({\n            range: args.range,\n            exportType: value.exportType\n        });\n    },\n\n    initialize: function(ui, initOptions) {\n        var tool = this;\n        var editor = initOptions.editor;\n        var options = tool.options;\n        var toolName = options.name;\n        var changeHandler = proxy(tool.changeHandler, tool);\n        var dataSource = options.items || editor.options[toolName];\n        var displayName = editor.options.messages[toolName];\n        var selectBox;\n\n        dataSource.unshift({\n            text: displayName,\n            value: \"\"\n        });\n        tool.editor = editor;\n        ui.width(options.width);\n        selectBox = ui.kendoSelectBox({\n            dataTextField: 'text',\n            dataValueField: 'value',\n            dataSource: dataSource,\n            autoSize: true,\n            change: changeHandler,\n            open: function(e) {\n                var sender = e.sender;\n                sender.items()[0].style.display = \"none\";\n                sender.unbind(\"open\");\n            },\n            highlightFirst: false,\n            template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>'),\n            valueTemplate: '<span class=\"k-editor-export\"><span class=\"k-icon k-i-export\"></span><span class=\"k-export-tool-text\">' + displayName + '</span></span>'\n        }).data(\"kendoSelectBox\");\n\n        ui.attr(\"title\", initOptions.title);\n        selectBox.wrapper.attr(\"title\", initOptions.title);\n\n        ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n    },\n\n    changeHandler: function(e) {\n        var sender = e.sender;\n        var dataItem = sender.dataItem();\n        var value = dataItem && dataItem.value;\n\n        this._exec(value);\n        sender.value(\"\");\n    },\n\n    _exec: function(value) {\n        if (value) {\n            Tool.exec(this.editor, this.options.name, { exportType: value } );\n        }\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nextend(Editor, {\n    ExportAsTool: ExportAsTool,\n    ExportAsCommand: ExportAsCommand\n});\n\nregisterTool('exportAs', new ExportAsTool({\n    template: new ToolTemplate({\n        template: EditorUtils.dropDownListTemplate,\n        title: 'Export As'\n    })\n}));\n\n}(window.kendo.jQuery));\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/indent',[ \"./formatblock\" ], f);\n})(function(){\n\n(function($, undefined) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    blockElements = dom.blockElements,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatter = Editor.BlockFormatter;\n\nfunction indent(node, value) {\n    var isRtl = $(node).css(\"direction\") == \"rtl\",\n        indentDirection = isRtl ? \"Right\" : \"Left\",\n        property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n    if (value === undefined) {\n        return node.style[property] || 0;\n    } else {\n        if (value > 0) {\n            node.style[property] = value + \"px\";\n        } else {\n            node.style[property] = \"\";\n\n            if (!node.style.cssText) {\n                node.removeAttribute(\"style\");\n            }\n        }\n    }\n}\n\nvar IndentFormatter = Class.extend({\n    init: function() {\n        this.finder = new BlockFormatFinder([{tags:dom.blockElements}]);\n    },\n\n    apply: function (nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targets = [],\n            i, len, formatNode, parentList, sibling;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        if (formatNodes.length) {\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                if (dom.is(formatNodes[i], \"li\")) {\n                    if (!$(formatNodes[i]).index()) {\n                        targets.push(formatNodes[i].parentNode);\n                    } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                        targets.push(formatNodes[i]);\n                    }\n                } else {\n                    targets.push(formatNodes[i]);\n                }\n            }\n\n            while (targets.length) {\n                formatNode = targets.shift();\n                if (dom.is(formatNode, \"li\")) {\n                    parentList = formatNode.parentNode;\n                    sibling = $(formatNode).prev(\"li\");\n                    var siblingList = sibling.find(\"ul,ol\").last();\n\n                    var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                    if (nestedList && sibling[0]) {\n                        if (siblingList[0]) {\n                           siblingList.append(formatNode);\n                           siblingList.append($(nestedList).children());\n                           dom.remove(nestedList);\n                        } else {\n                            sibling.append(nestedList);\n                            nestedList.insertBefore(formatNode, nestedList.firstChild);\n                        }\n                    } else {\n                        nestedList = sibling.children(\"ul,ol\")[0];\n                        if (!nestedList) {\n                            nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                            sibling.append(nestedList);\n                        }\n\n                        while (formatNode && formatNode.parentNode == parentList) {\n                            nestedList.appendChild(formatNode);\n                            formatNode = targets.shift();\n                        }\n                    }\n                } else {\n                    var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                    indent(formatNode, marginLeft);\n\n                    for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                        if ($.contains(formatNode, targets[targetIndex])) {\n                            targets.splice(targetIndex, 1);\n                        }\n                    }\n                }\n            }\n        } else {\n            var formatter = new BlockFormatter([{tags:[\"p\"]}], {style:{marginLeft:30}});\n\n            formatter.apply(nodes);\n        }\n    },\n\n    getListTypeAttr: function (list) {\n        var type = list.getAttribute(\"type\");\n        var styleType = list.style.listStyleType;\n\n        return type ? { type: type } : { style: { listStyleType: styleType } };\n    },\n\n    mapImmutables: function(nodes){\n        if (!this.immutables) {\n            return nodes;\n        } else {\n            var immutables = [];\n            return $.map(nodes, function (node) {\n                var immutable = Editor.Immutables.immutableParent(node);\n                if (immutable) {\n                    if ($.inArray(immutable, immutables) === -1) {\n                        immutables.push(immutable);\n                    } else {\n                        return null;\n                    }\n                }\n                return immutable || node;\n            });\n        }\n    },\n\n    remove: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targetNode, i, len, list, listParent, siblings,\n            formatNode, marginLeft;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        for (i = 0, len = formatNodes.length; i < len; i++) {\n            formatNode = $(formatNodes[i]);\n\n            if (formatNode.is(\"li\")) {\n                list = formatNode.parent();\n                listParent = list.parent();\n                // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                    // skip already processed nodes\n                    if (targetNode && $.contains(targetNode, listParent[0])) {\n                        continue;\n                    }\n\n                    siblings = formatNode.nextAll(\"li\");\n                    if (siblings.length) {\n                        $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                    }\n\n                    if (listParent.is(\"li\")) {\n                        formatNode.insertAfter(listParent);\n                    } else {\n                        formatNode.appendTo(listParent);\n                    }\n\n                    if (!list.children(\"li\").length) {\n                        list.remove();\n                    }\n\n                    continue;\n                } else {\n                    if (targetNode == list[0]) {\n                        // removing format on sibling LI elements\n                        continue;\n                    }\n                    targetNode = list[0];\n                }\n            } else {\n                targetNode = formatNodes[i];\n            }\n\n            marginLeft = parseInt(indent(targetNode), 10) - 30;\n            indent(targetNode, marginLeft);\n        }\n    }\n\n});\n\nvar IndentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle : $.proxy(function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.apply(RangeUtils.nodes(range));\n            }, that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = {\n            toggle : $.proxy(function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.remove(RangeUtils.nodes(range));\n            }, that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.finder = new BlockFormatFinder([{tags:blockElements}]);\n    },\n\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n\n        $.extend(this.options, {\n            immutables: options.editor && options.editor.options.immutables\n        });\n\n        ui.addClass(\"k-disabled\");\n    },\n\n    update: function (ui, nodes) {\n        var suitableNodes = this.finder.findSuitable(nodes),\n            isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n        for (i = 0, len = suitableNodes.length; i < len; i++) {\n            suitable = suitableNodes[i];\n\n            if (this.options.immutables) {\n                immutableParent = Editor.Immutables.immutableParent(suitable);\n                if (immutableParent) {\n                    suitable = immutableParent;\n                }\n            }\n\n            isOutdentable = indent(suitable);\n\n            if (!isOutdentable) {\n                listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n            }\n\n            if (isOutdentable) {\n                ui.removeClass(\"k-disabled\");\n                return;\n            }\n        }\n\n        ui.addClass(\"k-disabled\").removeClass(\"k-hover\");\n    }\n});\n\nextend(Editor, {\n    IndentFormatter: IndentFormatter,\n    IndentCommand: IndentCommand,\n    OutdentCommand: OutdentCommand,\n    OutdentTool: OutdentTool\n});\n\nregisterTool(\"indent\", new Tool({ command: IndentCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Indent\"}) }));\nregisterTool(\"outdent\", new OutdentTool({ command: OutdentCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Outdent\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/linebreak',[ \"./formatblock\" ], f);\n})(function(){\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    extend = $.extend,\n    editorNS = kendo.ui.editor,\n    dom = editorNS.Dom,\n    Command = editorNS.Command,\n    Tool = editorNS.Tool,\n    BlockFormatter = editorNS.BlockFormatter,\n    normalize = dom.normalize,\n    RangeUtils = editorNS.RangeUtils,\n    registerTool = editorNS.EditorUtils.registerTool;\n\nvar ParagraphCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    _insertMarker: function(doc, range) {\n        var marker = dom.create(doc, 'a'), container;\n        marker.className = \"k-marker\";\n\n        range.insertNode(marker);\n\n        if (!marker.parentNode) {\n            // inserting paragraph in Firefox full body range\n            container = range.commonAncestorContainer;\n            container.innerHTML = \"\";\n            container.appendChild(marker);\n        }\n\n        normalize(marker.parentNode);\n\n        return marker;\n    },\n\n    _moveFocus: function(range, candidate) {\n        if (dom.isEmpty(candidate)) {\n            range.setStartBefore(candidate);\n        } else {\n            range.selectNodeContents(candidate);\n\n            var focusNode = RangeUtils.textNodes(range)[0];\n\n            if (!focusNode) {\n                while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                    candidate = candidate.firstChild;\n                }\n\n                focusNode = candidate;\n            }\n\n            if (dom.isEmpty(focusNode)) {\n                range.setStartBefore(focusNode);\n            } else {\n                if (dom.emptyNode(focusNode)) {\n                    focusNode.innerHTML = \"\\ufeff\";\n                }\n                var startNode = focusNode.firstChild || focusNode;\n                if (dom.isDataNode(startNode)) {\n                    range.setStart(startNode, 0);\n                } else {\n                    range.setStartBefore(startNode);\n                }\n            }\n        }\n    },\n\n    shouldTrim: function(range) {\n        var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n            startInBlock = dom.parentOfType(range.startContainer, blocks),\n            endInBlock = dom.parentOfType(range.endContainer, blocks);\n        return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n    },\n\n    _blankAfter: function (node) {\n        while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n            node = node.nextSibling;\n        }\n\n        return !node;\n    },\n\n    exec: function () {\n        var range = this.getRange(),\n            doc = RangeUtils.documentFromRange(range),\n            parent, previous, next,\n            emptyParagraphContent = editorNS.emptyElementContent,\n            paragraph, marker, li, heading, tableNode, rng,\n            shouldTrim;\n\n        this.expandImmutablesIn(range);\n\n        shouldTrim = this.shouldTrim(range);\n\n        range.deleteContents();\n        marker = this._insertMarker(doc, range);\n\n        dom.stripBomNode(marker.previousSibling);\n        dom.stripBomNode(marker.nextSibling);\n\n        li = dom.closestEditableOfType(marker, ['li']);\n        heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n        tableNode = dom.is(marker.parentNode, 'table') &&  marker.parentNode;\n\n        if (li) {\n            // hitting 'enter' in empty li\n            if (dom.emptyNode(li)) {\n                paragraph = dom.create(doc, 'p');\n\n                if (dom.next(li)) {\n                    rng = range.cloneRange();\n                    rng.selectNode(li);\n\n                    RangeUtils.split(rng, li.parentNode);\n                }\n\n                var br = $(\"br\", li);\n                if (br.length == 1) {\n                    br.remove();\n                }\n\n                var parentNode = li.parentNode;\n                var parentChildrenLength = li.parentNode.children.length;\n                var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                dom.insertAfter(paragraph, parentNode);\n                dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                if (firstChild && firstChild !== marker) {\n                    paragraph.appendChild(firstChild);\n                    paragraph.appendChild(marker);\n                } else {\n                    paragraph.innerHTML = emptyParagraphContent;\n                }\n                next = paragraph;\n            }\n        } else if (heading && this._blankAfter(marker)) {\n            paragraph = this._insertParagraphAfter(heading);\n            dom.remove(marker);\n            next = paragraph;\n        } else if (tableNode) {\n            paragraph = this._insertParagraphAfter(tableNode);\n            dom.remove(marker);\n            next = paragraph;\n        }\n\n        if (!next) {\n            if (!(li || heading)) {\n                new BlockFormatter([{ tags: ['p']}]).apply([marker]);\n            }\n\n            range.selectNode(marker);\n\n            parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n            RangeUtils.split(range, parent, shouldTrim);\n\n            previous = parent.previousSibling;\n\n            if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                previous = previous.firstChild;\n            }\n\n            next = parent.nextSibling;\n\n            this.clean(previous, { links: true });\n            this.clean(next, { links: true });\n\n            if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                next = next.firstChild;\n            }\n\n            dom.remove(parent);\n\n            // normalize updates the caret display in Gecko\n            normalize(previous);\n        }\n\n        normalize(next);\n\n        this._moveFocus(range, next);\n\n        range.collapse(true);\n\n        dom.scrollTo(next, true);\n\n        RangeUtils.selectRange(range);\n    },\n\n    _insertParagraphAfter: function (node) {\n        var range = this.getRange();\n        var doc = RangeUtils.documentFromRange(range);\n        var emptyElementContent = editorNS.emptyElementContent;\n        var paragraph = dom.create(doc, 'p');\n\n        dom.insertAfter(paragraph, node);\n        paragraph.innerHTML = emptyElementContent;\n\n        return paragraph;\n    },\n\n    clean: function(node, options) {\n        var root = node;\n\n        if (node.firstChild && dom.is(node.firstChild, 'br')) {\n            dom.remove(node.firstChild);\n        }\n\n        if (dom.isDataNode(node) && !node.nodeValue) {\n            node = node.parentNode;\n        }\n\n        if (node) {\n            var siblings = false;\n            while (node.firstChild && node.firstChild.nodeType == 1) {\n                siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                node = node.firstChild;\n            }\n\n            if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                $(root).find(\".k-br\").remove();\n                node.innerHTML = editorNS.emptyElementContent;\n            }\n\n            if (options && options.links) {\n                while (node != root) {\n                    if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                        dom.unwrap(node);\n                        break;\n                    }\n                    node = node.parentNode;\n                }\n            }\n        }\n    }\n});\n\nvar NewLineCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function () {\n        var range = this.getRange();\n        this.expandImmutablesIn(range);\n\n        var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n        var node = range.startContainer;\n        var filler;\n        var browser = kendo.support.browser;\n        var oldIE = browser.msie && browser.version < 11;\n        var tableNode = dom.is(node, 'table') && node;\n        var kbrParent;\n\n        range.deleteContents();\n        if (tableNode) {\n            dom.insertAfter(br, tableNode);\n        } else {\n            kbrParent =  $(node).closest('.k-br');\n            range.insertNode(br);\n\n            if(kbrParent.length) {\n                // pressing enter in an k-br node\n                dom.unwrap(kbrParent[0]);\n            }\n        }\n\n        normalize(br.parentNode);\n\n        if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n            // Gecko and WebKit cannot put the caret after only one br.\n            if(!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                $(br.nextSibling).remove();\n            }\n            filler = br.cloneNode(true);\n            filler.className = 'k-br';\n            dom.insertAfter(filler, br);\n        }\n\n        range.setStartAfter(br);\n        range.collapse(true);\n\n        dom.scrollTo(br.nextSibling || br, true);\n\n        RangeUtils.selectRange(range);\n    }\n});\n\nextend(editorNS, {\n    ParagraphCommand: ParagraphCommand,\n    NewLineCommand: NewLineCommand\n});\n\nregisterTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\nregisterTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/file',[ \"../../kendo.filebrowser\", \"./link\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    LinkFormatter = Editor.LinkFormatter,\n    textNodes = RangeUtils.textNodes,\n    keys = kendo.keys,\n    KEDITORFILEURL = \"#k-editor-file-url\",\n    KEDITORFILETEXT = \"#k-editor-file-text\",\n    KEDITORFILETITLE = \"#k-editor-file-title\";\n\nvar FileCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.formatter = new LinkFormatter();\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertFile: function(file, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.href && attributes.href != \"http://\") {\n\n            if (!file) {\n                file = dom.create(doc, \"a\", {href: attributes.href});\n                file.innerHTML = attributes.innerHTML;\n                file.title = attributes.title;\n\n                range.deleteContents();\n                range.insertNode(file);\n\n                if (!file.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                }\n\n                range.setStartAfter(file);\n                range.setEndAfter(file);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                dom.attr(file, attributes);\n            }\n        }\n\n        return false;\n    },\n\n    _dialogTemplate: function(showBrowser) {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    '<div class=\"k-edit-form-content\">' +\n                        '# if (showBrowser) { #' +\n                            '<div class=\"k-filebrowser\"></div>' +\n                        '# } #' +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-url\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-text\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-title\"></span>' +\n                        \"</div>\" +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                        '<button class=\"k-dialog-insert k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    '</div>' +\n                '</div>' +\n            '</div>'\n        )({\n            messages: this.editor.options.messages,\n            showBrowser: showBrowser\n        });\n    },\n\n    redo: function () {\n        var that = this,\n            range = that.lockRange();\n\n        this.formatter.apply(range, this.attributes);\n        that.releaseRange(range);\n    },\n\n    exec: function () {\n        var that = this,\n            range = that.lockRange(),\n            nodes = textNodes(range),\n            applied = false,\n            file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n            dialog,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            fileBrowser = options.fileBrowser,\n            showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined),\n            dialogOptions = {\n                title: messages.insertFile,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                innerHTML = element.find(KEDITORFILETEXT).val(),\n                title = element.find(KEDITORFILETITLE).val();\n\n            that.attributes = {\n                href: href,\n                innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                title: title\n            };\n\n            applied = that.insertFile(file, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n\n        dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n            .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n            .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n            .find(KEDITORFILETITLE).val(file ? file.title : \"\").end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        if (showBrowser) {\n            that._fileBrowser = new kendo.ui.FileBrowser(\n                element.find(\".k-filebrowser\"),\n                extend({}, fileBrowser)\n            );\n\n            that._fileBrowser.bind(\"change\", function (ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORFILEURL).val(this.value());\n                }\n            } );\n\n            that._fileBrowser.bind(\"apply\", apply);\n        }\n\n        if(isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORFILEURL).trigger(\"focus\").select();\n    }\n\n});\n\nkendo.ui.editor.FileCommand = FileCommand;\n\nregisterTool(\"insertFile\", new Editor.Tool({ command: FileCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert File\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/tables',[ \"./formatblock\", \"./insert\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    proxy = $.proxy,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n\n    NS = \"kendoEditor\",\n    ACTIVESTATE = \"k-state-active\",\n    SELECTEDSTATE = \"k-state-selected\",\n    SCOPE = \"scope\",\n    ROW = \"row\",\n    COL = \"col\",\n    ROWGROUP = \"rowgroup\",\n    COLGROUP = \"colgroup\",\n    COLSPAN = \"colspan\",\n    ROWSPAN = \"rowspan\",\n    TABLE = \"table\",\n    THEAD = \"thead\",\n    TBODY = \"tbody\",\n    TR = \"tr\",\n    TD = \"td\",\n    TH = \"th\",\n\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    InsertHtmlCommand = Editor.InsertHtmlCommand,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatTool = Editor.BlockFormatTool,\n    FormatCommand = Editor.FormatCommand,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    formats = kendo.ui.Editor.fn.options.formats,\n    getTouches = kendo.getTouches;\nvar template = kendo.template;\n\nvar columnTemplate = \"<td style='width:#=width#%;'>#=content#</td>\";\n\nvar tableFormatFinder = new BlockFormatFinder([{tags:[TABLE]}]);\n\nvar TableCommand = InsertHtmlCommand.extend({\n    init: function(options) {\n        var o = $.extend({\n            postProcess: this.postProcess,\n            skipCleaners: true\n        }, options || {});\n\n        InsertHtmlCommand.fn.init.call(this, o);\n    },\n    _tableHtml: function(rows, columns) {\n        rows = rows || 1;\n        columns = columns || 1;\n        var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n        var rowHeight = 100 / rows;\n\n        return \"<table class='k-table' data-last>\" +\n                    new Array(rows + 1).join(\n                    \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                        new Array(columns + 1).join(columnHtml) +\n                    \"</tr>\") +\n               \"</table>\";\n    },\n\n    postProcess: function(editor, range) {\n        var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n        range.setStart(insertedTable.find(TD)[0], 0);\n        range.collapse(true);\n\n        editor.selectRange(range);\n    },\n\n    exec: function() {\n        var options = this.options;\n        options.html = this._tableHtml(options.rows, options.columns);\n\n        InsertHtmlCommand.fn.exec.call(this);\n    }\n});\n\nvar PopupTool = Tool.extend({\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n\n        var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n            anchor: ui,\n            copyAnchorStyles: false,\n            open: proxy(this._open, this),\n            activate: proxy(this._activate, this),\n            close: proxy(this._close, this)\n        }).data(\"kendoPopup\");\n\n        ui.on(\"click\", proxy(this._toggle, this))\n          .on(\"keydown\", proxy(this._keydown, this));\n\n        var editor = this._editor = options.editor;\n        this._popup = popup;\n\n        var tableWizard = new Editor.TableWizardTool({\n            template: new ToolTemplate({ template: EditorUtils.tableWizardButtonTemplate, title: editor.options.messages.tableWizard }),\n            command: Editor.TableWizardCommand,\n            insertNewTable: true\n        });\n\n        registerTool(\"tableWizardInsert\", tableWizard);\n\n        var twTool = $(\"<div>\" + tableWizard.options.template.getHtml() + \"</div>\");\n        twTool.appendTo(popup.element);\n\n        if (editor.toolbar) {\n            editor.toolbar.attachToolsEvents(twTool);\n        }\n    },\n\n    popup: function() {\n        return this._popup;\n    },\n\n    _activate: $.noop,\n\n    _open: function() {\n        this._popup.options.anchor.addClass(ACTIVESTATE);\n    },\n\n    _close: function() {\n        this._popup.options.anchor.removeClass(ACTIVESTATE);\n    },\n\n    _keydown: function(e) {\n        var keys = kendo.keys;\n        var key = e.keyCode;\n\n        if (key == keys.DOWN && e.altKey) {\n            this._popup.open();\n        } else if (key == keys.ESC) {\n            this._popup.close();\n        }\n    },\n\n    _toggle: function(e) {\n        var button = $(e.target).closest(\".k-tool\");\n\n        if (!button.hasClass(\"k-disabled\")) {\n            this.popup().toggle();\n        }\n    },\n\n    update: function(ui) {\n        var popup = this.popup();\n\n        if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n            popup.close();\n        }\n\n        ui.removeClass(\"k-hover\");\n    },\n\n    destroy: function() {\n        this._popup.destroy();\n    }\n});\n\nvar InsertTableTool = PopupTool.extend({\n    init: function(options) {\n        this.cols = 8;\n        this.rows = 6;\n\n        PopupTool.fn.init.call(this, $.extend(options, {\n            command: TableCommand,\n            popupTemplate:\n                \"<div class='k-ct-popup'>\" +\n                    \"<div>\" +\n                        new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-state-disabled'></span>\") +\n                    \"</div>\" +\n                    \"<div class='k-status'></div>\" +\n                \"</div>\"\n        }));\n    },\n\n    _activate: function() {\n        var that = this,\n            element = that._popup.element,\n            cells = element.find(\".k-ct-cell\"),\n            firstCell = cells.eq(0),\n            lastCell = cells.eq(cells.length - 1),\n            start = kendo.getOffset(firstCell),\n            end = kendo.getOffset(lastCell),\n            cols = that.cols,\n            rows = that.rows,\n            cellWidth, cellHeight;\n\n        element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        end.left += lastCell[0].offsetWidth;\n        end.top += lastCell[0].offsetHeight;\n\n        cellWidth = (end.left - start.left) / cols;\n        cellHeight = (end.top - start.top) / rows;\n\n        function tableFromLocation(e) {\n            var w = $(window);\n            return {\n                row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n            };\n        }\n\n        element.autoApplyNS(NS)\n            .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                that._setTableSize(tableFromLocation(e));\n            })\n            .on(\"mouseleave\", \".k-ct-cell\", function() {\n                that._setTableSize();\n            })\n            .on(\"down\", \".k-ct-cell\", function(e) {\n                e.preventDefault();\n                var touch = getTouches(e)[0];\n                that._exec(tableFromLocation(touch.location));\n            });\n    },\n\n    _valid: function(size) {\n        return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n    },\n\n    _exec: function(size) {\n        if (this._valid(size)) {\n            this._editor.exec(\"createTable\", {\n                rows: size.row,\n                columns: size.col\n            });\n            this._popup.close();\n        }\n    },\n\n    _setTableSize: function(size) {\n        var element = this._popup.element;\n        var status = element.find(\".k-status\");\n        var cells = element.find(\".k-ct-cell\");\n        var cols = this.cols;\n        var messages = this._editor.options.messages;\n\n        if (this._valid(size)) {\n            status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n            cells.each(function(i) {\n                $(this).toggleClass(\n                    SELECTEDSTATE,\n                    i % cols < size.col && i / cols < size.row\n                );\n            });\n        } else {\n            status.text(messages.createTable);\n            cells.removeClass(SELECTEDSTATE);\n        }\n    },\n\n    _keydown: function(e) {\n        PopupTool.fn._keydown.call(this, e);\n\n        if (!this._popup.visible()) {\n            return;\n        }\n\n        var keys = kendo.keys;\n        var key = e.keyCode;\n        var cells = this._popup.element.find(\".k-ct-cell\");\n        var focus = Math.max(cells.filter(\".k-state-selected\").last().index(), 0);\n        var selectedRows = Math.floor(focus / this.cols);\n        var selectedColumns = focus % this.cols;\n\n        var changed = false;\n\n        if (key == keys.DOWN && !e.altKey) {\n            changed = true;\n            selectedRows++;\n        } else if (key == keys.UP) {\n            changed = true;\n            selectedRows--;\n        } else if (key == keys.RIGHT) {\n            changed = true;\n            selectedColumns++;\n        } else if (key == keys.LEFT) {\n            changed = true;\n            selectedColumns--;\n        }\n\n        var tableSize = {\n            row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n            col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n        };\n\n        if (key == keys.ENTER) {\n            this._exec(tableSize);\n        } else {\n            this._setTableSize(tableSize);\n        }\n\n        if (changed) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    },\n\n    _open: function() {\n        var messages = this._editor.options.messages;\n\n        PopupTool.fn._open.call(this);\n\n        this.popup().element\n            .find(\".k-status\").text(messages.createTable).end()\n            .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n    },\n\n    _close: function() {\n        PopupTool.fn._close.call(this);\n        this.popup().element.off(\".\" + NS);\n    }\n});\n\nvar TableModificationCommand = Command.extend({\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n\n        $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n            .each(function(index,el){\n                el.remove();\n            });\n\n        this.editor.selectRange(point.toRange());\n    },\n    _clearColIndexAttr: function (table) {\n        dom.clearTableMappings(table, \"col-index\");\n    },\n    _mapColIndices: function (table) {\n        dom.reMapTableColumns(table, \"col-index\");\n    },\n    _findRowSpanCell: function(parent, rowIndex, colIndex) {\n        var row, cell;\n\n        for (var i = rowIndex; i >= 0; i--) {\n            row = parent.rows[i];\n            cell = $(row).find(\"[col-index=\" + colIndex +\"]\");\n\n            if(cell.length) {\n                return cell;\n            }\n        }\n    },\n    _resetElementResizing: function (editor) {\n        editor._destroyResizings();\n        editor._initializeColumnResizing();\n        editor._initializeRowResizing();\n        editor._initializeElementResizing();\n    },\n    _findNextTdInRow: function (row, colIndex){\n        var lastTd = row.find(\"td:last-child\"),\n            lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n            td;\n\n        for (var i = colIndex; i <= lastIndex; i++) {\n            td = row.find(\"[col-index=\" + i  +\"]\");\n            if(td.length) {\n                return td;\n            }\n        }\n    },\n    _adjustColgroups: function(row, table) {\n        var colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            cells = row.cells,\n            numberOfCells = cells.length,\n            i, colgroup, cell;\n\n        while(colElements.length > 0) {\n            colElements[0].remove();\n        }\n        while(colgroupElements.length > 0) {\n            colgroupElements[0].remove();\n        }\n\n        for(i = numberOfCells - 1; i >= 0; i--) {\n            cell = cells[i];\n            if(cell.getAttribute(SCOPE) === COLGROUP) {\n                colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                table.prepend(colgroup);\n            } else {\n                table.prepend(dom.createEmptyNode(this.editor.document, COL));\n            }\n        }\n    },\n    _associateHeaderIds: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n        dom.reMapTableColumns(table, \"col-index\");\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n        dom.associateWithIds(table);\n    },\n    _getNumberOfColumns: function(table) {\n        return dom._getNumberOfColumns(table, \"td, th\");\n    }\n});\n\nvar InsertRowCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            position = this.options.position || \"after\",\n            cellCount, row, cell,\n            newRow, rowIndex, rowSpanIndex, createdCell;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        row = td.parentNode;\n        rowIndex = dom.findNodeIndex(row, true);\n\n        if(td.rowSpan > 1 && position === \"after\") {\n            row = table.rows[rowIndex + td.rowSpan - 1];\n        }\n\n        cellCount = this._getNumberOfColumns(table);\n        newRow = row.cloneNode(true);\n        $(newRow).empty();\n\n        for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + i +\"]\");\n\n            if (cell.length) {\n                if(cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                } else {\n                    this._appendCell(newRow, cell);\n                }\n            } else {\n                rowIndex = dom.findNodeIndex(row, true);\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                rowSpanIndex = cell.closest(TR).index();\n\n                if(rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                    this._appendCell(newRow, cell);\n                } else {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                }\n            }\n\n            createdCell = $(newRow).find(\"[col-index=\" + i +\"]\");\n            if(createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                createdCell.attr(SCOPE, ROW);\n            }\n        }\n\n        if (position == \"before\") {\n            dom.insertBefore(newRow, row);\n        } else {\n            dom.insertAfter(newRow, row);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _appendCell: function(row, cell){\n        var newCell;\n\n        newCell = cell.clone();\n        newCell.html(Editor.emptyTableCellContent);\n        newCell.removeAttr(ROWSPAN);\n        newCell.appendTo(row);\n    }\n});\n\nvar InsertColumnCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            columnIndex,\n            i,\n            rows = table && table.rows,\n            cell,\n            newCell,\n            position = this.options.position || \"after\";\n\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n        if (td.colSpan > 1 && position === \"after\") {\n            td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n            columnIndex = columnIndex + td.colSpan - 1;\n        }\n\n        for (i = 0; i < rows.length; i++) {\n            cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n            if (!cell){\n                continue;\n            }\n\n            newCell = cell.cloneNode();\n            newCell.innerHTML = Editor.emptyTableCellContent;\n            newCell.removeAttribute(COLSPAN);\n\n            if(newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                newCell.setAttribute(SCOPE, COL);\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newCell, cell);\n            } else {\n                dom.insertAfter(newCell, cell);\n            }\n\n            this._resizeCells(newCell, cell);\n        }\n\n        if(colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _processForColSpan: function (row, columnIndex, position, selectedCell) {\n        var cell,\n            colSpanEffect,\n            index = columnIndex - 1;\n\n        cell = $(row).find(\"[col-index=\" + columnIndex +\"]\")[0];\n\n        if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n            cell.colSpan += 1;\n            return;\n        }\n\n        if (cell) {\n            return cell;\n        }\n\n        for (index; index >= 0; index--) {\n            cell = $(row).find(\"[col-index=\" + index +\"]\")[0];\n\n            if(cell && cell.colSpan > 1) {\n                break;\n            }\n        }\n\n        if(!cell) {\n            return;\n        }\n\n        colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n        if(colSpanEffect === columnIndex && position === \"after\") {\n            return cell;\n        } else if (columnIndex <= colSpanEffect){\n            cell.setAttribute(COLSPAN, cell.colSpan + 1);\n        }\n    },\n    _resizeCells: function(newCell, cell) {\n        var width = newCell.style.width,\n        parsedWidth, unit, calculatedWidth;\n\n        if(!width) {\n            return;\n        }\n\n        parsedWidth = parseFloat(width);\n        unit = width.slice(parsedWidth.toString().length);\n        calculatedWidth = (parsedWidth / 2) + unit;\n\n        newCell.style.width = calculatedWidth;\n        cell.style.width = calculatedWidth;\n    }\n});\n\nvar DeleteRowCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange();\n        var rows = RangeUtils.mapAll(range, function(node) {\n            return $(node).closest(TR)[0];\n        });\n        var td = dom.closest(range.endContainer, [TD, TH]);\n        var row = rows[0];\n        var rowSpan = td ? td.rowSpan : 1;\n        var rowIndex = $(rows[0]).index();\n        var table = dom.closest(row, TABLE);\n        var rowParent = row.parentElement;\n        var focusElement;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        for (var x = 0; x < rowSpan; x++) {\n            if(rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                rows.push(rowParent.rows[rowIndex + x]);\n            }\n        }\n\n        if (table.rows.length <= rows.length) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else if(rowParent.rows.length <= rows.length) {\n            focusElement = rowParent.nextSibling;\n\n            if(!focusElement) {\n                focusElement = rowParent.previousSibling;\n            }\n\n            dom.remove(rowParent);\n        } else {\n            this._mapColIndices(table);\n\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                dom.removeTextSiblings(row);\n                focusElement = dom.next(row) || dom.prev(row);\n                focusElement = focusElement.cells[0];\n\n                // IE needs to focus the new row before removing the old one\n                this._focusElement(range, focusElement);\n                focusElement = null;\n\n                this._handleRowSpanCells(table, row);\n\n                dom.remove(row);\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n            this._adjustColgroups(rowParent.rows[0], table);\n        }\n\n        if (focusElement) {\n            this._focusElement(range, focusElement);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _focusElement: function (range, node) {\n        range.setStart(node, 0);\n        range.collapse(true);\n        this.editor.selectRange(range);\n    },\n    _handleRowSpanCells: function (table, row) {\n        var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n            firstRow = table.rows[0],\n            lastCell = firstRow.cells[firstRow.cells.length - 1],\n            lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n        for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n            if(cell.length && cell.prop(\"rowSpan\") > 1) {\n                nextRow = table.rows[rowIndex+1];\n                adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                if(adjacentCell.length) {\n                    adjacentCell.before(cell);\n                } else {\n                    $(nextRow).append(cell);\n                }\n                this._reduceRowSpan(cell);\n            }\n\n            if(!cell.length) {\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                this._reduceRowSpan(cell);\n            }\n        }\n    },\n    _reduceRowSpan: function (td) {\n        var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n        if(rowSpanValue <= 1) {\n            td.removeAttr(ROWSPAN);\n            if(td.attr(SCOPE) === ROWGROUP) {\n                td.attr(SCOPE, ROW);\n            }\n        } else {\n            td.attr(ROWSPAN, rowSpanValue);\n        }\n    }\n});\n\nvar DeleteColumnCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            rows = table && table.rows,\n            columnIndex = dom.findNodeIndex(td, true),\n            columnCount = rows && rows[0].cells.length,\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            focusElement, i, cell, x;\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        if (columnCount == 1 || td.colSpan == columnCount) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else {\n            dom.removeTextSiblings(td);\n\n            focusElement = dom.next(td) || dom.prev(td);\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n            for (x = 0; x < td.colSpan; x++) {\n                for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                    cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                    if(cell.length && cell.prop(\"colSpan\") <= 1) {\n                        cell.remove();\n                    } else {\n                        this._handleColSpanCells(rows[i], columnIndex + x);\n                    }\n                }\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if(colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        if (focusElement) {\n            range.setStart(focusElement, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _handleColSpanCells: function (row, colIndex) {\n        var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n        if(cell.length && cell.prop(\"colSpan\") > 1) {\n            var clone = cell.clone(true);\n            cell.after(clone);\n            this._reduceColSpan(clone);\n            clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n            cell.remove();\n            return;\n        }\n\n        for (var i = colIndex; i >= 0; i--) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if(cell.length) {\n                this._reduceColSpan(cell);\n                cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                return;\n            }\n        }\n    },\n    _reduceColSpan: function (td) {\n        var colSpanValue = td.prop(\"colSpan\") - 1;\n\n        if(colSpanValue <= 1) {\n            td.removeAttr(COLSPAN);\n            if(td.attr(SCOPE) === COLGROUP) {\n                td.attr(SCOPE, COL);\n            }\n        } else {\n            td.attr(COLSPAN, colSpanValue);\n        }\n    }\n});\n\nvar MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table, row, columnIndex, nextTd, colspan;\n\n            if(!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            table = dom.closest(td, TABLE);\n            row = td.parentNode;\n            columnIndex = dom.findNodeIndex(td, true);\n            nextTd = row.children[columnIndex + 1];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n            nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n            if(!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n            $(td).prop(COLSPAN, colspan)\n                 .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n            $(td).width(td.offsetWidth);\n            $(nextTd).remove();\n\n            if(td.getAttribute(SCOPE) === COL) {\n                td.setAttribute(SCOPE, COLGROUP);\n            }\n            if(td.getAttribute(SCOPE) === COLGROUP) {\n                this._adjustColgroups(row, table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n            this._resetElementResizing(this.editor);\n    },\n    _getColspan: function (td) {\n        return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n    }\n});\n\nvar MergeCellsVerticallyCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            tr, parent, table, columnIndex, rowIndex, targetRow,  bottomTd;\n\n            if(!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            tr = dom.closest(td, TR);\n            parent = dom.closest(td, [THEAD, TBODY]);\n            table = dom.closest(td, TABLE);\n            columnIndex = dom.findNodeIndex(td, true);\n            rowIndex = dom.findNodeIndex(tr, true);\n\n            if (rowIndex + 1 === parent.rows.length) {\n                this.releaseRange(range);\n                return;\n            }\n\n            targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n            bottomTd = targetRow && targetRow.children[columnIndex];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = $(td).attr(\"col-index\");\n            bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n            if(!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                 .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n            if(td.getAttribute(SCOPE) === ROW) {\n                td.setAttribute(SCOPE, ROWGROUP);\n            }\n\n            $(bottomTd).remove();\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n    },\n    _getRowspan: function (td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n    }\n});\n\nvar SplitCellCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(),\n            type = this.options.type,\n            attr = type === \"row\" ? COLSPAN : ROWSPAN,\n            td = dom.closest(range.endContainer, [TD, TH]),\n            parent = dom.closest(td, [THEAD, TBODY]),\n            table = dom.closest(td, TABLE),\n            emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        if(type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellHorizontally(td, parent, attr, emptyTd);\n        } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")){\n            this._splitCellVertically(td, parent, attr, emptyTd);\n        }\n\n        if($(td).prop(attr.toLowerCase()) <= 1) {\n            $(td).removeAttr(attr);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n    },\n    _getRowspanValue: function (td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10);\n    },\n    _getColspanValue: function (td) {\n        return parseInt(td.getAttribute(COLSPAN), 10);\n    },\n    _splitCellHorizontally: function (td, parent, attr, emptyTd) {\n        var rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            tdToAdd = $(emptyTd),\n            colSpanResult = Math.floor(colSpan/2);\n\n            if(colSpanResult > 1) {\n                tdToAdd.attr(COLSPAN, colSpanResult);\n            }\n\n            if(rowSpan > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpan);\n            }\n\n            $(td).prop(attr, colSpan - colSpanResult)\n                .after(tdToAdd);\n\n            $(td).width(td.offsetWidth);\n            tdToAdd.width(tdToAdd[0].offsetWidth);\n\n            if(td.hasAttribute(SCOPE)) {\n                if(td.getAttribute(SCOPE) === COLGROUP) {\n                    tdToAdd.attr(SCOPE, COL);\n                    if(!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, COL);\n                    }\n\n                    this._adjustColgroups(td.parentNode, parent.parentNode);\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    },\n    _splitCellVertically: function (td, parent, attr, emptyTd) {\n        var tr = dom.closest(td,TR),\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n            rowIndex = dom.findNodeIndex(tr, true),\n            rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            rowSpanResult = Math.floor(rowSpan/2),\n            targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n            nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n            tdToAdd = $(emptyTd);\n\n            if(rowSpanResult > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpanResult);\n            }\n            if(colSpan > 1) {\n                tdToAdd.attr(COLSPAN, colSpan);\n            }\n\n            if(nextTd && nextTd.length) {\n                nextTd.before(tdToAdd);\n            } else {\n                targetRow.append(tdToAdd);\n            }\n\n            $(td).prop(attr, rowSpan - rowSpanResult);\n\n            if(td.hasAttribute(SCOPE)) {\n                if(td.getAttribute(SCOPE) === ROWGROUP) {\n                    tdToAdd.attr(SCOPE, ROW);\n                    if(!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\"){\n                        td.setAttribute(SCOPE, ROW);\n                    }\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    }\n});\n\nvar TableModificationTool = Tool.extend({\n    command: function (options) {\n        var commandsMap = {\n            row: {\n                insert: InsertRowCommand,\n                \"delete\": DeleteRowCommand,\n                merge: MergeCellsHorizontallyCommand,\n                split: SplitCellCommand\n            },\n            column: {\n                insert: InsertColumnCommand,\n                \"delete\": DeleteColumnCommand,\n                merge: MergeCellsVerticallyCommand,\n                split: SplitCellCommand\n            }\n        };\n\n        options = extend(options, this.options);\n        options.action = options.action || \"insert\";\n\n        return new commandsMap[options.type][options.action](options);\n    },\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n        ui.attr(\"disabled\", \"disabled\");\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n        if (isFormatted === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n    }\n});\n\nvar TableFormatCommand = FormatCommand.extend({\n    exec: function () {\n        var that = this;\n        var editor = that.editor;\n\n        FormatCommand.fn.exec.call(this);\n\n        if(editor.elementResizing) {\n            editor.elementResizing._showResizeHandles();\n        }\n    }\n});\n\n// var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n// });\n\nvar TableFormatTool = BlockFormatTool.extend({\n    initialize: function(ui, options) {\n        BlockFormatTool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n        ui.attr(\"disabled\", \"disabled\");\n    },\n    update: function(ui, nodes) {\n        var isTable = !tableFormatFinder.isFormatted(nodes);\n        var isFormatted = this.options.finder.isFormatted(nodes, this.isTable);\n\n        if (isTable === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n\n        ui.toggleClass(\"k-selected\", isFormatted);\n        ui.attr(\"aria-pressed\", isFormatted);\n    },\n    command: function(commandArguments) {\n        var that = this;\n\n        return new TableFormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n    isTable: function(node){\n        return dom.is(node, \"table\");\n    }\n});\n\nextend(kendo.ui.editor, {\n    PopupTool: PopupTool,\n    TableCommand: TableCommand,\n    InsertTableTool: InsertTableTool,\n    TableFormatTool: TableFormatTool,\n    TableFormatCommand: TableFormatCommand,\n    TableModificationTool: TableModificationTool,\n    InsertRowCommand: InsertRowCommand,\n    InsertColumnCommand: InsertColumnCommand,\n    DeleteRowCommand: DeleteRowCommand,\n    DeleteColumnCommand: DeleteColumnCommand,\n    MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n    MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n    SplitCellCommand: SplitCellCommand\n});\n\nregisterTool(\"createTable\", new InsertTableTool({ template: new ToolTemplate({template: EditorUtils.buttonTemplate, popup: true, title: \"Create table\"})}));\n\nregisterTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Add column on the left\"})}));\nregisterTool(\"addColumnRight\", new TableModificationTool({ type: \"column\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Add column on the right\"})}));\nregisterTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Add row above\"})}));\nregisterTool(\"addRowBelow\", new TableModificationTool({ type: \"row\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Add row below\"})}));\nregisterTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Delete row\"})}));\nregisterTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Delete column\"})}));\nregisterTool(\"mergeCellsHorizontally\", new TableModificationTool({type: \"row\", action: \"merge\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Merge Cell Right\"})}));\nregisterTool(\"mergeCellsVertically\", new TableModificationTool({type: \"column\", action: \"merge\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Merge Cell Down\"})}));\nregisterTool(\"splitCellHorizontally\", new TableModificationTool({type: \"row\", action: \"split\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Split Cell\"})}));\nregisterTool(\"splitCellVertically\", new TableModificationTool({type: \"column\", action: \"split\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Split Cell\"})}));\n\nregisterFormat(\"tableAlignLeft\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" }} },\n    { tags: [\"table\"], attr: { align: \"left\" } }\n]);\nregisterTool(\"tableAlignLeft\", new TableFormatTool({\n    format: formats.tableAlignLeft,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Left\"\n    })\n}));\n\nregisterFormat(\"tableAlignCenter\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" }} },\n    { tags: [\"table\"], attr: { align: \"center\" } }\n]);\nregisterTool(\"tableAlignCenter\", new TableFormatTool({\n    format: formats.tableAlignCenter,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Center\"\n    })\n}));\n\nregisterFormat(\"tableAlignRight\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" }} },\n    { tags: [\"table\"], attr: { align: \"right\" } }\n]);\nregisterTool(\"tableAlignRight\", new TableFormatTool({\n    format: formats.tableAlignRight,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Left\"\n    })\n}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/clipboard',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        extend = $.extend;\n\nvar Clipboard = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        var pasteCleanup = editor.options.pasteCleanup;\n        this.cleaners = [\n            new ScriptCleaner(pasteCleanup),\n            new TabCleaner(pasteCleanup),\n            new MSWordFormatCleaner(pasteCleanup),\n            new WebkitFormatCleaner(pasteCleanup),\n            new HtmlTagsCleaner(pasteCleanup),\n            new HtmlAttrCleaner(pasteCleanup),\n            new HtmlContentCleaner(pasteCleanup),\n            new CustomCleaner(pasteCleanup) //always keep at end\n        ];\n    },\n\n    htmlToFragment: function(html) {\n        var editor = this.editor,\n            doc = editor.document,\n            container = dom.create(doc, 'div'),\n            fragment = doc.createDocumentFragment();\n\n        container.innerHTML = html;\n\n        while (container.firstChild) {\n            fragment.appendChild(container.firstChild);\n        }\n\n        return fragment;\n    },\n\n    isBlock: function(html) {\n        return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n    },\n\n    _startModification: function() {\n        var range;\n        var restorePoint;\n        var editor = this.editor;\n\n        if (this._inProgress) {\n            return;\n        }\n\n        this._inProgress = true;\n\n        range = editor.getRange();\n        restorePoint = new RestorePoint(range, editor.body);\n\n        dom.persistScrollTop(editor.document);\n\n        return { range: range, restorePoint: restorePoint };\n    },\n\n    _endModification: function(modificationInfo) {\n        editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n        this.editor._selectionChange();\n\n        this._inProgress = false;\n    },\n\n    _contentModification: function(before, after) {\n        var that = this;\n        var editor = that.editor;\n        var modificationInfo = that._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        before.call(that, editor, modificationInfo.range);\n\n        setTimeout(function() {\n            after.call(that, editor, modificationInfo.range);\n\n            that._endModification(modificationInfo);\n        });\n    },\n\n    _removeBomNodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n        }\n    },\n\n    _onBeforeCopy: function(range) {\n        var marker = new Marker();\n        marker.add(range);\n\n        this._removeBomNodes(range);\n\n        marker.remove(range);\n\n        this.editor.selectRange(range);\n    },\n\n    oncopy: function() {\n        this._onBeforeCopy(this.editor.getRange());\n    },\n\n    oncut: function() {\n        this._onBeforeCopy(this.editor.getRange());\n        this._contentModification($.noop, $.noop);\n    },\n\n    _fileToDataURL: function(blob) {\n        var deferred = $.Deferred();\n\n        var reader = new FileReader();\n\n        if (!(blob instanceof window.File) && blob.getAsFile) {\n            blob = blob.getAsFile();\n        }\n\n        reader.onload = $.proxy(deferred.resolve, deferred);\n\n        reader.readAsDataURL(blob);\n\n        return deferred.promise();\n    },\n\n    _triggerPaste: function(html, options) {\n        var args = { html: html || \"\" };\n\n        args.html = args.html.replace(/\\ufeff/g, \"\");\n\n        this.editor.trigger(\"paste\", args);\n\n        this.paste(args.html, options || {});\n    },\n\n    _handleImagePaste: function(e) {\n        if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n            return;\n        }\n\n        var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                    window.clipboardData || {};\n\n        var items = clipboardData.items || clipboardData.files;\n\n        return this._insertImages(items);\n    },\n\n    _insertImages: function(items){\n        if (!items) {\n            return;\n        }\n\n        var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n        var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n        if (html.length || !images.length) {\n            return;\n        }\n\n        var modificationInfo = this._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        $.when.apply($, $.map(images, this._fileToDataURL))\n            .done($.proxy(function() {\n                var results = Array.prototype.slice.call(arguments);\n                var html = $.map(results, function(e) {\n                    return '<img src=\"' + e.target.result + '\" />';\n                }).join(\"\");\n\n                this._triggerPaste(html);\n\n                this._endModification(modificationInfo);\n            }, this));\n\n        return true;\n    },\n\n    onpaste: function(e) {\n        if (this.editor.body.contentEditable === \"false\") {\n            return;\n        }\n\n        if (this._handleImagePaste(e)) {\n            e.preventDefault();\n            return;\n        }\n\n        this.expandImmutablesIn();\n\n        this._contentModification(\n            function beforePaste(editor, range) {\n                var clipboardNode = dom.create(editor.document, 'div', {\n                        className:'k-paste-container',\n                        innerHTML: \"\\ufeff\"\n                    });\n                var browser = kendo.support.browser;\n                var body = editor.body;\n\n                this._decoreateClipboardNode(clipboardNode, body);\n\n                body.appendChild(clipboardNode);\n\n                //Browser scrolls to clipboardNode\n                if (browser.webkit) {\n                    this._moveToCaretPosition(clipboardNode, range);\n                }\n\n                // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                if (browser.msie && browser.version < 11) {\n                    e.preventDefault();\n                    var r = editor.createRange();\n                    r.selectNodeContents(clipboardNode);\n                    editor.selectRange(r);\n                    var textRange = editor.document.body.createTextRange();\n                    textRange.moveToElementText(clipboardNode);\n                    $(body).off('paste');\n                    textRange.execCommand('Paste');\n                    $(body).on('paste', $.proxy(this.onpaste, this));\n                } else {\n                    var clipboardRange = editor.createRange();\n                    clipboardRange.selectNodeContents(clipboardNode);\n                    editor.selectRange(clipboardRange);\n                }\n\n                range.deleteContents();\n            },\n            function afterPaste(editor, range) {\n                var html = \"\", containers;\n\n                editor.selectRange(range);\n\n                containers = $(editor.body).children(\".k-paste-container\");\n\n                containers.each(function() {\n                    var lastChild = this.lastChild;\n\n                    if (lastChild && dom.is(lastChild, 'br')) {\n                        dom.remove(lastChild);\n                    }\n\n                    html += this.innerHTML;\n                });\n\n                containers.remove();\n\n                this._triggerPaste(html, { clean: true });\n            }\n        );\n    },\n    ondragover: function(e){\n        if (browser.msie || browser.edge) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    },\n    ondrop: function(e){\n        if (!('FileReader' in window)) {\n            return;\n        }\n\n        var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n        var items = dataTransfer.items || dataTransfer.files;\n\n        if (this._insertImages(items)) {\n            e.preventDefault();\n        }\n    },\n    _decoreateClipboardNode: function(node, body) {\n        if (!browser.msie && !browser.webkit) {\n            return;\n        }\n\n        node = $(node);\n        node.css({\n            borderWidth : \"0px\",\n            width : \"0px\",\n            height : \"0px\",\n            overflow: \"hidden\",\n            margin : \"0\",\n            padding : \"0\"\n        });\n\n        if (browser.msie) {\n            //node inherits BODY styles and this causes the browser to add additional\n            var documentElement = $(body.ownerDocument.documentElement);\n\n            node.css({\n                fontVariant : \"normal\",\n                fontWeight : \"normal\",\n                lineSpacing : \"normal\",\n                lineHeight : \"normal\",\n                textDecoration : \"none\"\n            });\n            var color = documentElement.css(\"color\");\n            if (color) {\n                node.css(\"color\", color);\n            }\n            var fontFamily = documentElement.css(\"fontFamily\");\n            if (fontFamily) {\n                node.css(\"fontFamily\", fontFamily);\n            }\n            var fontSize = documentElement.css(\"fontSize\");\n            if (fontSize) {\n                node.css(\"fontSize\", fontSize);\n            }\n        }\n    },\n    _moveToCaretPosition: function(node, range) {\n        var that = this;\n        var body = that.editor.body;\n        var nodeOffset = dom.offset(node, body);\n        var caretOffset = that._caretOffset(range, body);\n        var translateX = caretOffset.left - nodeOffset.left;\n        var translateY = caretOffset.top - nodeOffset.top;\n        var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n        $(node).css({\n            \"-webkit-transform\": translate,\n            \"transform\" : translate\n        });\n    },\n    _caretOffset: function (range, body) {\n        var editor = this.editor;\n        var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n        var startContainer = range.startContainer;\n        var rangeChanged;\n\n        if (range.collapsed) {\n            var isStartTextNode = dom.isDataNode(startContainer);\n            if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                dom.insertBefore(caret, startContainer);\n            } else if(isStartTextNode && range.startOffset === startContainer.length) {\n                dom.insertAfter(caret, startContainer);\n            } else {\n                range.insertNode(caret);\n                rangeChanged = true;\n            }\n        } else {\n            startContainer = startContainer === body ?\n                startContainer.childNodes[range.startOffset] : startContainer;\n            dom.insertBefore(caret, startContainer);\n        }\n\n        var offset = dom.offset(caret, body);\n        var prev = caret.previousSibling;\n        var next = caret.nextSibling;\n\n        dom.remove(caret);\n\n        if(rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n            var prevLength = prev.length;\n            next.data = prev.data + next.data;\n            range.setStart(next, prevLength);\n            dom.remove(prev);\n\n            range.collapse(true);\n            editor.selectRange(range);\n        }\n\n        return offset;\n    },\n\n    expandImmutablesIn: function(range){\n        var editor = this.editor;\n        if (editor && editor.options.immutables) {\n            var body = editor.body;\n            range = range || editor.getRange();\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            if (range.startContainer === body && range.startOffset === 0) {\n                var doc = body.ownerDocument;\n                var bomNode = doc.createTextNode(\"\\ufeff\");\n                body.insertBefore(bomNode, body.childNodes[0]);\n                range.setStartBefore(bomNode);\n            }\n            editor.selectRange(range);\n        }\n    },\n\n    splittableParent: function(block, node) {\n        var parentNode, body;\n\n        if (block) {\n            return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n        }\n\n        parentNode = node.parentNode;\n        body = node.ownerDocument.body;\n\n        if (dom.isInline(parentNode)) {\n            while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                parentNode = parentNode.parentNode;\n            }\n        }\n\n        return parentNode;\n    },\n\n    paste: function (html, options) {\n        var editor = this.editor,\n            i, l, childNodes;\n\n        this.expandImmutablesIn();\n\n        options = extend({ clean: false, split: true }, options);\n\n        if(!options.skipCleaners) {\n            for (i = 0, l = this.cleaners.length; i < l; i++) {\n                if (this.cleaners[i].applicable(html)) {\n                    html = this.cleaners[i].clean(html);\n                }\n            }\n        }\n\n        if (options.clean) {\n            // remove br elements which immediately precede block elements\n            html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n            // remove empty inline elements\n            html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n        }\n\n        html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n        // It is possible in IE to copy just <li> tags\n        html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n        var block = this.isBlock(html);\n\n        editor.focus();\n        var range = editor.getRange();\n        range.deleteContents();\n\n        if (range.startContainer == editor.document) {\n            range.selectNodeContents(editor.body);\n        }\n\n        var marker = new Marker();\n        var caret = marker.addCaret(range);\n\n        var parent = this.splittableParent(block, caret);\n        var unwrap = false;\n        var splittable = parent != editor.body && !dom.is(parent, \"td\");\n\n        if (options.split && splittable && (block || dom.isInline(parent))) {\n            range.selectNode(caret);\n            RangeUtils.split(range, parent, true);\n            unwrap = true;\n        }\n\n        var fragment = this.htmlToFragment(html);\n\n        if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n            var fragmentsHtml = [];\n            for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n            }\n\n            fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n        }\n\n        childNodes = fragment.childNodes;\n\n        $(childNodes)\n            .filter(\"table\").addClass(\"k-table\").end()\n            .find(\"table\").addClass(\"k-table\");\n\n        $(childNodes).each(function(index, elm){\n           if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n           }\n        });\n\n        range.insertNode(fragment);\n\n        parent = this.splittableParent(block, caret);\n        if (unwrap) {\n            while (caret.parentNode != parent) {\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.unwrap(caret.parentNode);\n        }\n\n        dom.normalize(range.commonAncestorContainer);\n        caret.style.display = 'inline';\n        dom.restoreScrollTop(editor.document);\n        dom.scrollTo(caret);\n        marker.removeCaret(range);\n\n        var rangeEnd = range.commonAncestorContainer.parentNode;\n        if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n            range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n            range.collapse(true);\n        }\n\n        var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n        if(focusedTable.get(0)) {\n            var siblingNodes = focusedTable.parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while(lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if(lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n            }\n        }\n\n        editor.selectRange(range);\n    }\n});\n\nvar Cleaner = Class.extend({\n    init: function(options) {\n        this.options = options || {};\n        this.replacements = [];\n    },\n\n    clean: function(html, customReplacements) {\n        var that = this,\n            replacements = customReplacements || that.replacements,\n            i, l;\n\n        for (i = 0, l = replacements.length; i < l; i += 2) {\n            html = html.replace(replacements[i], replacements[i+1]);\n        }\n\n        return html;\n    }\n});\n\nvar ScriptCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n        ];\n    },\n\n    applicable: function(html) {\n        return !this.options.none && (/<script[^>]*>/i).test(html);\n    }\n});\n\nvar TabCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        var replacement = ' ';\n        this.replacements = [\n            /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n            /\\t/gi, replacement,\n            /&nbsp;&nbsp; &nbsp;/gi, replacement\n        ];\n    },\n\n    applicable: function(html) {\n        return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n    }\n});\n\nvar MSWordFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.junkReplacements = [\n            /<\\?xml[^>]*>/gi, '',\n            /<!--(.|\\n)*?-->/g, '', /* comments */\n            /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n            /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n            /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n            /<\\/o>/g, ''\n        ];\n        this.replacements = this.junkReplacements.concat([\n            /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n            /<br><br>/g, '<BR><BR>',\n            /<br>\\n/g, '<br/>',\n            /<br>(?!\\n)/g, ' ',\n            /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n            /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n            /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n            /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n            /<BR><BR>/g, '<br>',\n            /^\\s*(&nbsp;)+/gi, '',\n            /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n            /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n            /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n            /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n            /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n            /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n            /(<br[^>]*>)?\\n/g, function ($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n        ]);\n    },\n\n    convertFontMatch: function(match, closing, args) {\n        var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n        var face = faceRe.exec(args);\n        var family = args && face && face[1];\n\n        if (closing) {\n            return '</span>';\n        } else if (family) {\n            return '<span style=\"font-family:' + family + '\">';\n        } else {\n            return '<span>';\n        }\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Mso/i).test(html) ||\n               (/style=\"[^\"]*mso-/i).test(html) ||\n               (/urn:schemas-microsoft-com:office/).test(html);\n    },\n\n    stripEmptyAnchors: function(html) {\n        return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n            if (!attributes || attributes.indexOf(\"href\") < 0) {\n                return \"\";\n            }\n\n            return a;\n        });\n    },\n\n    listType: function(p, listData) {\n        var html = p.innerHTML;\n        var text = dom.innerText(p);\n\n        var startingSymbol;\n        var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n        var symbol = matchSymbol && matchSymbol[1];\n        var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n        var trimStartText = function(text) {\n            return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n        };\n\n        if (matchSymbol) {\n            startingSymbol = true;\n        }\n\n        html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n        if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n            (startingSymbol && /^.\\u00a0+/.test(html)) ||\n            (symbol && !isNumber && listData)) {\n            return {\n                tag: 'ul',\n                style: this._guessUnorderedListStyle(trimStartText(text))\n            };\n        }\n\n        if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n            return {\n                tag: 'ol',\n                style: this._guessOrderedListStyle(trimStartText(text))\n            };\n        }\n    },\n\n    _convertToLi: function(p) {\n        var content;\n\n        if (p.childNodes.length == 1) {\n            content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n            content = this._checkForBullet(content);\n        } else {\n            content = this._getHtmlNoBullet(p);\n        }\n\n        dom.remove(p);\n\n        return dom.create(document, 'li', { innerHTML: content });\n    },\n\n    _checkForBullet: function (html) {\n        var p = dom.create(document, 'p', { innerHTML: html });\n        var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n        if(bulletRgx.test(p.innerText)) {\n            return this._getHtmlNoBullet(p);\n        }\n\n        return html;\n    },\n\n    _getHtmlNoBullet: function (element) {\n        var content,\n            name = dom.name(element);\n\n        dom.remove(element.firstChild);\n\n        // check for roman numerals\n        if (element.firstChild.nodeType == 3) {\n            if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                dom.remove(element.firstChild);\n            }\n        }\n\n        if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n            dom.remove(element.firstChild);\n        }\n\n        if (name != \"p\") {\n            content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n        } else {\n            content = element.innerHTML;\n        }\n\n        return content;\n    },\n\n    _guessUnorderedListStyle: function(symbol) {\n        if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n            return null;//return \"disc\"; //default CSS value\n        } else if (/^o/.test(symbol)) {\n            return \"circle\";\n        } else {\n            return \"square\";\n        }\n    },\n    _guessOrderedListStyle: function(symbol) {\n        var listType = null;\n        if (!/^\\d/.test(symbol)) {\n            listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                       (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n        }\n\n        return listType;\n    },\n\n    extractListLevels: function(html) {\n        var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n        html = html.replace(msoListRegExp, function(match, list, level) {\n            return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n        });\n\n        return html;\n    },\n\n    _createList: function(type, styleType) {\n        return dom.create(document, type, {\n            style: { listStyleType: styleType }\n        });\n    },\n\n    lists: function(placeholder) {\n        var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n            lastMargin = -1,\n            name,\n            levels = {},\n            li,\n            rootMargin,\n            rootIndex,\n            lastRootLi,\n            isLastRootLi,\n            rootList,\n            i, p, type, margin, list, listData,\n            acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n            isParentTable = false;\n\n        for (i = 0; i < blockChildren.length; i++) {\n            p = blockChildren[i];\n            listData = $(p).data();\n            var listIndex = listData.list;\n            name = dom.name(p);\n            isParentTable = !!$(p).parents(\"table\").length;\n\n            if (isParentTable) {\n                continue;\n            }\n\n            var listType = this.listType(p, listData);\n            type = listType && listType.tag;\n\n            if (!type || acceptedNameTags.indexOf(name) < 0) {\n                if (!p.innerHTML) {\n                    dom.remove(p);\n                } else if (li && !isLastRootLi) {\n                    li.appendChild(p);\n                }\n                continue;\n            }\n\n            // not supported list levels in ie\n            if (browser.msie) {\n                continue;\n            }\n\n            margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n            var levelType = type + listIndex;\n            if (!levels[margin]) {\n                levels[margin] = {};\n            }\n\n            if (!rootMargin || rootMargin < 0) {\n                rootMargin = margin;\n                rootIndex = listIndex;\n                lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                rootList = this._createList(type, listType.style);\n                dom.insertBefore(rootList, p);\n                lastMargin = margin;\n                levels[margin][levelType] = rootList;\n            }\n\n            isLastRootLi = lastRootLi === p;\n\n            list = levels[margin][levelType];\n\n            if (margin > lastMargin || !list) {\n                list = this._createList(type, listType.style);\n                levels[margin][levelType] = list;\n                li.appendChild(list);\n            }\n\n            li = this._convertToLi(p);\n            list.appendChild(li);\n\n            if (isLastRootLi) {\n                rootMargin = lastMargin = -1;\n            } else {\n                lastMargin = margin;\n            }\n        }\n    },\n\n    removeAttributes: function(element) {\n        var attributes = element.attributes,\n            i = attributes.length,\n            borderStyles = [],\n            addBorderStyles = function(val) {\n                if (val.trim().indexOf(\"border\") === 0) {\n                    borderStyles.push(val.trim());\n                }\n            },\n            attr, attributeName, attributeValues;\n\n        while (i--) {\n            if (dom.name(attributes[i]) != \"colspan\") {\n                attr = attributes[i];\n                attributeName = attr.name;\n\n                if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                    attributeValues = attr.value.split(\";\");\n\n                    attributeValues.forEach(addBorderStyles);\n                }\n\n                element.removeAttributeNode(attributes[i]);\n            }\n        }\n\n        if (borderStyles.length > 0) {\n            element.setAttribute(\"style\", borderStyles.join(\";\"));\n        }\n    },\n\n    createColGroup: function(row) {\n        var cells = row.cells;\n        var table = $(row).closest(\"table\");\n        var colgroup = table.children(\"colgroup\");\n\n        if (cells.length < 2) {\n            return;\n        } else if (colgroup.length) {\n            cells = colgroup.children();\n            colgroup[0].parentNode.removeChild(colgroup[0]);\n        }\n\n        colgroup = $($.map(cells, function(cell) {\n                var width = cell.width;\n                if (width && parseInt(width, 10) !== 0) {\n                    return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                }\n\n                return \"<col />\";\n            }).join(\"\"));\n\n        // jquery 1.9/2.0 discrepancy\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        colgroup.prependTo(table);\n    },\n\n    convertHeaders: function(row) {\n        var cells = row.cells,\n            i,\n            boldedCells = $.map(cells, function(cell) {\n                var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                if (child && dom.name(child) == \"strong\") {\n                    return child;\n                }\n            });\n\n        if (boldedCells.length == cells.length) {\n            for (i = 0; i < boldedCells.length; i++) {\n                dom.unwrap(boldedCells[i]);\n            }\n\n            $(row).closest(\"table\")\n                .find(\"colgroup\").after(\"<thead></thead>\").end()\n                .find(\"thead\").append(row);\n\n            for (i = 0; i < cells.length; i++) {\n                dom.changeTag(cells[i], \"th\");\n            }\n        }\n    },\n\n    removeParagraphs: function(cells) {\n        var i, j, len, cell, paragraphs;\n\n        for (i = 0; i < cells.length; i++) {\n            this.removeAttributes(cells[i]);\n\n            // remove paragraphs and insert line breaks between them\n            cell = $(cells[i]);\n            paragraphs = cell.children(\"p\");\n\n            for (j = 0, len = paragraphs.length; j < len; j++) {\n                if (j < len - 1) {\n                    dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                }\n\n                dom.unwrap(paragraphs[j]);\n            }\n        }\n    },\n\n    removeDefaultColors: function(spans) {\n        for (var i = 0; i < spans.length; i++) {\n            if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                dom.unwrap(spans[i]);\n            }\n        }\n    },\n\n    removeTextNodes: function(trs) {\n        var i, j, childNodes, currentNode, row;\n\n        for(i = 0; i < trs.length; i++) {\n            row = trs[i];\n            childNodes = row.childNodes;\n\n            for(j = 0; j < childNodes.length; j++) {\n                currentNode = childNodes[j];\n\n                if(currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                    row.removeChild(currentNode);\n                }\n            }\n        }\n    },\n\n    tables: function(placeholder) {\n        var tables = $(placeholder).find(\"table\"),\n            that = this,\n            rows,\n            firstRow, longestRow, i, j;\n\n        for (i = 0; i < tables.length; i++) {\n            rows = tables[i].rows;\n            longestRow = firstRow = rows[0];\n\n            for (j = 1; j < rows.length; j++) {\n                if (rows[j].cells.length > longestRow.cells.length) {\n                    longestRow = rows[j];\n                }\n            }\n\n            that.createColGroup(longestRow);\n            that.convertHeaders(firstRow);\n\n            that.removeAttributes(tables[i]);\n\n            that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n            that.removeDefaultColors(tables.eq(i).find(\"span\"));\n\n            that.removeTextNodes(tables.eq(i).find(\"tr\"));\n        }\n    },\n\n    headers: function(placeholder) {\n        var titles = $(placeholder).find(\"p.MsoTitle\");\n\n        for (var i = 0; i < titles.length; i++) {\n            dom.changeTag(titles[i], \"h1\");\n        }\n    },\n\n    removeFormatting: function (placeholder) {\n        $(placeholder).find(\"*\").each(function() {\n            $(this).css({\n                fontSize: \"\",\n                fontFamily: \"\"\n            });\n\n            if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                this.removeAttribute(\"style\");\n            }\n        });\n    },\n\n    clean: function(html) {\n        var that = this, placeholder;\n        var filters = this.options;\n\n        if (filters.none) {\n            html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n            html = that.stripEmptyAnchors(html);\n        } else {\n\n            html = filters.msConvertLists ? this.extractListLevels(html) : html;\n            html = Cleaner.fn.clean.call(that, html);\n            html = that.stripEmptyAnchors(html);\n\n            placeholder = dom.create(document, 'div', {innerHTML: html});\n            that.headers(placeholder);\n\n            if (filters.msConvertLists) {\n                that.lists(placeholder);\n            }\n            that.tables(placeholder);\n\n            if (filters.msAllFormatting) {\n                that.removeFormatting(placeholder);\n            }\n\n            html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n        }\n\n        return html;\n    }\n});\n\nvar WebkitFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n            /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n            /^<div>(.*)<\\/div>$/, '$1'\n        ];\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n    }\n});\n\nvar DomCleaner = Cleaner.extend({\n    clean: function(html) {\n        var container = dom.create(document, 'div', {innerHTML: html});\n        container = this.cleanDom(container);\n        return container.innerHTML;\n    },\n\n    cleanDom: function(container) {\n        return container;\n    }\n});\n\nvar HtmlTagsCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var tags = this.collectTags();\n\n        $(container).find(tags).each(function() {\n            dom.unwrap(this);\n        });\n\n        return container;\n    },\n\n    collectTags: function() {\n        if (this.options.span) {\n            return \"span\";\n        }\n    },\n\n    applicable: function() {\n        return this.options.span;\n    }\n});\n\nvar HtmlAttrCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var attributes = this.collectAttr();\n        var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n        nodes.removeAttr(attributes.join(\" \"));\n\n        return container;\n    },\n\n    collectAttr: function() {\n        if (this.options.css) {\n            return [\"class\", \"style\"];\n        }\n\n        return [];\n    },\n\n    applicable: function() {\n        return this.options.css;\n    }\n});\n\nvar TextContainer = function() {\n    this.text = \"\";\n    this.add = function(text) {\n        this.text += text;\n    };\n};\n\nvar HtmlTextLines = Class.extend({\n    init: function(separators) {\n        this.separators = separators || {\n                text: \" \",\n                line: \"<br/>\"\n            };\n        this.lines = [];\n        this.inlineBlockText = [];\n        this.resetLine();\n    },\n\n    appendText: function(text) {\n        if (text.nodeType === 3) {\n            text = text.nodeValue;\n        }\n\n        this.textContainer.add(text);\n    },\n\n    appendInlineBlockText: function(text) {\n        this.inlineBlockText.push(text);\n    },\n\n    flashInlineBlockText: function() {\n        if (this.inlineBlockText.length) {\n            this.appendText(this.inlineBlockText.join(\" \"));\n            this.inlineBlockText = [];\n        }\n    },\n\n    endLine: function() {\n        this.flashInlineBlockText();\n        this.resetLine();\n    },\n\n    html: function() {\n        var separators = this.separators;\n        var result = \"\";\n        var lines = this.lines;\n\n        this.flashInlineBlockText();\n\n        for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n            var line = lines[i];\n            for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                var text = line[j].text;\n                result += text;\n                if (j !== jl1) {\n                    result += separators.text;\n                }\n            }\n            if (i !== il1) {\n                result += separators.line;\n            }\n        }\n\n        return result;\n    },\n\n    resetLine: function() {\n        this.textContainer = new TextContainer();\n        this.line = [];\n        this.line.push(this.textContainer);\n        this.lines.push(this.line);\n    }\n});\n\nvar DomEnumerator = Class.extend({\n    init: function(callback) {\n        this.callback = callback;\n    },\n    enumerate: function(node) {\n        if (!node) {\n            return;\n        }\n\n        var preventDown = this.callback(node);\n\n        var child = node.firstChild;\n        if (!preventDown && child) {\n            this.enumerate(child);\n        }\n\n        this.enumerate(node.nextSibling);\n    }\n});\n\nvar HtmlContentCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n        this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n        this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n    },\n\n    clean: function(html) {\n        var container = dom.create(document, 'div', {innerHTML: html});\n\n        return this.cleanDom(container);\n    },\n\n    cleanDom: function(container) {\n        this.separators = this.getDefaultSeparators();\n        this.htmlLines = new HtmlTextLines(this.separators);\n        this.enumerator.enumerate(container.firstChild);\n        this.hasText = false;\n\n        return this.htmlLines.html();\n    },\n\n    buildText: function(node) {\n        if (dom.isDataNode(node)) {\n            if (dom.isEmptyspace(node)) {\n                return;\n            }\n            this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n            this.hasText = true;\n        } else if (dom.isBlock(node) && this.hasText) {\n            var action = this.actions[dom.name(node)] || this.actions.block;\n            return action(this, node);\n        } else if (dom.isBr(node)) {\n            this.htmlLines.appendText(this.separators.line);\n        }\n    },\n\n    applicable: function() {\n        var o = this.options;\n        return o.all || o.keepNewLines;\n    },\n\n    getDefaultSeparators: function() {\n        if (this.options.all) {\n            return {text: \" \", line: \" \"};\n        } else {\n            return {text: \" \", line: \"<br/>\"};\n        }\n    },\n\n    actions: {\n        ul: $.noop,\n        ol: $.noop,\n        table: $.noop,\n        thead: $.noop,\n        tbody: $.noop,\n        td: function(cleaner, node) {\n            var tdCleaner = new HtmlContentCleaner({all: true});\n\n            var cellText = tdCleaner.cleanDom(node);\n            cleaner.htmlLines.appendInlineBlockText(cellText);\n\n            return true;\n        },\n\n        block: function(cleaner) {\n            cleaner.htmlLines.endLine();\n        }\n    }\n});\n\nvar CustomCleaner = Cleaner.extend({\n    clean: function(html) {\n        return this.options.custom(html);\n    },\n\n    applicable: function() {\n        return typeof(this.options.custom) === \"function\";\n    }\n});\n\nextend(editorNS, {\n    Clipboard: Clipboard,\n    Cleaner: Cleaner,\n    ScriptCleaner: ScriptCleaner,\n    TabCleaner: TabCleaner,\n    MSWordFormatCleaner: MSWordFormatCleaner,\n    WebkitFormatCleaner: WebkitFormatCleaner,\n    HtmlTagsCleaner: HtmlTagsCleaner,\n    HtmlAttrCleaner: HtmlAttrCleaner,\n    HtmlContentCleaner: HtmlContentCleaner,\n    HtmlTextLines: HtmlTextLines,\n    CustomCleaner: CustomCleaner\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/keyboard',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    editorNS = kendo.ui.editor,\n    RangeUtils = editorNS.RangeUtils,\n    dom = editorNS.Dom,\n    RestorePoint = editorNS.RestorePoint,\n    Marker = editorNS.Marker,\n    browser = kendo.support.browser,\n    bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n    extend = $.extend;\nvar nodeTypes = dom.nodeTypes;\nvar PREVIOUS_SIBLING = \"previousSibling\";\n\nfunction selected(node, range) {\n    return range.startContainer === node && range.endContainer === node &&\n        range.startOffset === 0 && range.endOffset == node.childNodes.length;\n}\n\nfunction getSibling(node, direction, condition) {\n    var sibling = node ? node[direction] : null;\n\n    while (sibling && !condition(sibling)) {\n        sibling = sibling[direction];\n    }\n\n    return sibling;\n}\n\nvar tableCells = \"td,th,caption\";\nvar tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\nvar tableElements = tableCellsWrappers + \",\" + tableCells;\nvar inTable = function (range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\nvar RemoveTableContent = Class.extend({\n    remove: function(range) {\n        var that = this;\n        var marker = new Marker();\n        marker.add(range, false);\n\n        var nodes = RangeUtils.getAll(range, function (node) { return $(node).is(tableElements); });\n        var doc = RangeUtils.documentFromRange(range);\n        var start = marker.start;\n        var end = marker.end;\n        var cellsTypes = tableCells.split(\",\");\n        var startCell = dom.parentOfType(start, cellsTypes);\n        var endCell = dom.parentOfType(end, cellsTypes);\n        that._removeContent(start, startCell, true);\n        that._removeContent(end, endCell, false);\n        $(nodes).each(function(i, node) {\n            node = $(node);\n            (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                cell.innerHTML = \"&#65279;\";\n            });\n        });\n        if (startCell && !start.previousSibling) {\n            dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n        }\n        if (endCell && !end.nextSibling) {\n            dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n        }\n        if (startCell) {\n            range.setStartBefore(start);\n        } else if (nodes[0]) {\n            startCell = $(nodes[0]);\n            startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n            if (startCell.length) {\n                range.setStart(startCell.get(0), 0);\n            }\n        }\n\n        range.collapse(true);\n\n        dom.remove(start);\n        dom.remove(end);\n    },\n    _removeContent: function (start, top, forwards) {\n        if (top) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                next,\n                getNext = function (node) {\n                    while (node && !node[sibling]) {\n                        node = node.parentNode;\n                    }\n                    return node && $.contains(top, node) ? node[sibling] : null;\n                };\n            start = getNext(start);\n            while (start) {\n                next = getNext(start);\n                dom.remove(start);\n                start = next;\n            }\n        }\n    }\n});\n\nvar TypingHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function (e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard,\n            isTypingKey = keyboard.isTypingKey(e),\n            evt = extend($.Event(), e);\n\n        that.editor.trigger(\"keydown\", evt);\n\n        if (evt.isDefaultPrevented()) {\n            e.preventDefault();\n            return true;\n        }\n\n        if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n            var range = editor.getRange();\n            var body = editor.body;\n            that.startRestorePoint = new RestorePoint(range, body);\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n            }\n\n            if (browser.webkit && !range.collapsed && selected(body, range)) {\n                body.innerHTML = \"\";\n            }\n\n            if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                backspaceHandler.deleteSelection(range);\n            }\n\n            keyboard.startTyping(function () {\n                that._removeBomSpan();\n                that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n            });\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function (e) {\n        var keyboard = this.editor.keyboard;\n\n        this.editor.trigger(\"keyup\", e);\n\n        if (keyboard.isTypingInProgress()) {\n            keyboard.endTyping();\n            return true;\n        }\n\n        return false;\n    },\n\n    _removeBomSpan: function () {\n        var node = this.editor.getRange().commonAncestorContainer;\n\n        if(!dom.emptyNode(node)) {\n            if(node.nodeType === 3) {\n                node = node.parentNode;\n            }\n\n            if(dom.insignificant(node)) {\n                // typing in an insignificant node\n                // make it significant\n                node.textContent = dom.stripBom(node.textContent);\n                dom.unwrap(node);\n            }\n        }\n    }\n});\n\nvar BackspaceHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n    _addCaret: function(container) {\n        var caret = dom.create(this.editor.document, \"a\");\n\n        // Only if not Chrome: Make sure to include cared in the formatted inline node\n        if (!kendo.support.browser.chrome && container.firstChild &&\n            container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n            container = container.firstChild;\n        }\n\n        dom.insertAt(container, caret, 0);\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n        return caret;\n    },\n    _restoreCaret: function(caret) {\n        var range = this.editor.createRange();\n\n        if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n            range.setStart(caret.previousSibling, caret.previousSibling.length);\n        } else {\n            range.setStartAfter(caret);\n        }\n\n        range.collapse(true);\n        this.editor.selectRange(range);\n        dom.remove(caret);\n    },\n    _handleDelete: function(range) {\n        var node = range.endContainer;\n        var block = dom.closestEditableOfType(node, dom.blockElements);\n\n        if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n            // join with next sibling\n            var next = dom.next(block);\n            if (!next || dom.name(next) != \"p\") {\n                return false;\n            }\n\n            var caretPlaceholder = dom.significantChildNodes(next)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n            var caret = this._addCaret(caretPlaceholder);\n\n            this._merge(block, next);\n\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        return false;\n    },\n    _cleanBomBefore: function(range) {\n        var offset = range.startOffset;\n        var node = range.startContainer;\n        var text = node.nodeValue;\n        var count = 0;\n        while (offset-count >= 0 && text[offset-count-1] == \"\\ufeff\") {\n            count++;\n        }\n\n        if (count > 0) {\n            node.deleteData(offset-count, count);\n\n            range.setStart(node, Math.max(0, offset-count));\n            range.collapse(true);\n\n            this.editor.selectRange(range);\n        }\n    },\n    _handleBackspace: function(range) {\n        var node = range.startContainer;\n        var li = dom.closestEditableOfType(node, ['li']);\n        var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n        var editor = this.editor;\n        var previousSibling;\n\n        if (dom.isDataNode(node)) {\n            if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                range.setStart(node, 0);\n                range.setEnd(node, node.length);\n                editor.selectRange(range);\n                return false;\n            }\n            this._cleanBomBefore(range);\n        }\n\n        previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.htmlIndentSpace(sibling);\n        });\n\n        //deleting the first list item with empty content in IE results in invalid range\n        if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n            range.startOffset = 0;\n            range.endOffset = 0;\n            editor.selectRange(range);\n        }\n\n        var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n        var liIndex = li && $(li).index();\n        var startAtNonFirstLi = startAtLi && liIndex > 0;\n        if (startAtNonFirstLi) {\n            block = li;\n            previousSibling = dom.prev(li);\n        }\n\n        if(block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n            if(block.innerText === ''){\n                block.innerHTML = '\\ufeff';\n            }\n            return true;\n        }\n\n        // outdent\n        if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n            editor.exec(\"outdent\");\n            return true;\n        }\n\n        // unwrap block\n        if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n            var caretPlaceholder = dom.significantChildNodes(block)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : block;\n            var caret = this._addCaret(caretPlaceholder);\n            this._merge(previousSibling, block);\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        // unwrap li element\n        if (startAtLi && liIndex === 0) {\n            var child = li.firstChild;\n            if (!child) {\n                li.innerHTML = editorNS.emptyElementContent;\n                child = li.firstChild;\n            }\n\n            var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n            range.selectNodeContents(li);\n            formatter.toggle(range);\n\n            if (dom.insignificant(child)) {\n                range.setStartBefore(child);\n            } else {\n                range.setStart(child, 0);\n            }\n\n            editor.selectRange(range);\n\n            return true;\n        }\n\n        var rangeStartNode = node.childNodes[range.startOffset - 1];\n        var linkRange = range;\n        var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n        var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n        });\n        if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n            anchor = anchor || previousNode;\n            linkRange = editor.createRange();\n            linkRange.setStart(anchor, anchor.childNodes.length);\n            linkRange.collapse(true);\n        }\n\n        anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n        var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n        if (isEndOfLink) {\n            var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n            editor.execCommand(command);\n            editor._selectionChange();\n        }\n        return false;\n    },\n    _handleSelection: function(range) {\n        var ancestor = range.commonAncestorContainer;\n        var table = dom.closest(ancestor, \"table\");\n        var emptyParagraphContent = editorNS.emptyElementContent;\n        var editor = this.editor;\n        var parentElementOrNode;\n\n        if (inTable(range)) {\n            var removeTableContent = new RemoveTableContent(editor);\n            removeTableContent.remove(range);\n            editor.selectRange(range);\n            return true;\n        }\n\n        var marker = new Marker();\n        marker.add(range, false);\n\n        if(range.commonAncestorContainer === editor.body) {\n            this._surroundFullyContent(marker, range);\n        }\n\n        if (editor.immutables) {\n            this._handleImmutables(marker);\n        }\n\n        this._surroundFullySelectedAnchor(marker, range);\n\n        range.setStartAfter(marker.start);\n        range.setEndBefore(marker.end);\n\n        var start = range.startContainer;\n        var end = range.endContainer;\n\n        range.deleteContents();\n\n        if(end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n            range.selectNode(end);\n            range.deleteContents();\n        }\n\n        if (table && $(table).text() === \"\") {\n            range.selectNode(table);\n            range.deleteContents();\n        }\n\n        ancestor = range.commonAncestorContainer;\n\n        if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n            ancestor.innerHTML = emptyParagraphContent;\n            range.setStart(ancestor, 0);\n        }\n\n        this._join(start, end);\n\n        dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n        marker.remove(range);\n\n        start = range.startContainer;\n        if (dom.name(start) == \"tr\") {\n            start = start.childNodes[Math.max(0, range.startOffset-1)];\n            range.setStart(start, dom.getNodeLength(start));\n        }\n\n        range.collapse(true);\n\n        editor.selectRange(range);\n\n        parentElementOrNode = start.parentElement || start.parentNode;\n\n        if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n            this._cleanBomBefore(range);\n        }\n\n        return true;\n    },\n    _handleImmutables: function (marker) {\n        var immutableParent = editorNS.Immutables.immutableParent;\n        var startImmutable = immutableParent(marker.start);\n        var endImmutable = immutableParent(marker.start);\n        if (startImmutable) {\n            dom.insertBefore(marker.start, startImmutable);\n        }\n        if (endImmutable) {\n            dom.insertAfter(marker.end, endImmutable);\n        }\n        if (startImmutable) {\n            dom.remove(startImmutable);\n        }\n        if (endImmutable && endImmutable.parentNode) {\n            dom.remove(endImmutable);\n        }\n    },\n    _surroundFullyContent: function(marker, range) {\n        var children = range.commonAncestorContainer.children,\n            startParent = children[0],\n            endParent = children[children.length - 1];\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _surroundFullySelectedAnchor: function(marker, range) {\n        var start = marker.start,\n            startParent = $(start).closest(\"a\").get(0),\n            end = marker.end,\n            endParent = $(end).closest(\"a\").get(0);\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _moveMarker: function(marker, range, startParent, endParent) {\n        var start = marker.start,\n            end = marker.end;\n\n        if(startParent && RangeUtils.isStartOf(range, startParent)){\n            dom.insertBefore(start, startParent);\n        }\n\n        if(endParent && RangeUtils.isEndOf(range, endParent)){\n            dom.insertAfter(end, endParent);\n        }\n    },\n    _root: function(node) {\n        while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n    _join: function(start, end) {\n        start = this._root(start);\n        end = this._root(end);\n\n        if (start != end && dom.is(end, \"p\")) {\n            this._merge(start, end);\n        }\n    },\n    _merge: function(dest, src) {\n        dom.removeTrailingBreak(dest);\n\n        while (dest && src.firstChild) {\n            if (dest.nodeType == 1) {\n                dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                if (dest) {\n                    dest.appendChild(src.firstChild);\n                }\n            } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                this._mergeWithTextNode(dest, src.firstChild);\n            } else {\n                dest.parentNode.appendChild(src.firstChild);\n            }\n        }\n\n        dom.remove(src);\n    },\n\n    _mergeWithTextNode: function(textNode, appendedNode) {\n        if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n            if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                dom.insertAfter(appendedNode, textNode.nextSibling);\n            }\n            else {\n                dom.insertAfter(appendedNode, textNode);\n            }\n        }\n    },\n\n    _isCaret: function(element) {\n        return $(element).is(\"a\");\n    },\n\n    keydown: function(e) {\n        var method, startRestorePoint;\n        var editor = this.editor;\n        var range = editor.getRange();\n        var keyCode = e.keyCode;\n        var keys = kendo.keys;\n        var backspace = keyCode === keys.BACKSPACE;\n        var del = keyCode == keys.DELETE;\n\n        if (editor.immutables && editor.immutables.keydown(e, range)) {\n            return;\n        }\n\n        if ((backspace || del) && !range.collapsed) {\n            method = \"_handleSelection\";\n        } else if (backspace) {\n            method = \"_handleBackspace\";\n        } else if (del) {\n            method = \"_handleDelete\";\n        }\n\n        if (!method) {\n            return;\n        }\n\n        startRestorePoint = new RestorePoint(range, editor.body);\n\n        if (this[method](range)) {\n            e.preventDefault();\n\n            editorNS._finishUpdate(editor, startRestorePoint);\n        }\n    },\n    deleteSelection: function (range) {\n        this._handleSelection(range);\n    },\n    keyup: $.noop\n});\n\nvar SystemHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        this.systemCommandIsInProgress = false;\n    },\n\n    createUndoCommand: function () {\n        this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n    },\n\n    changed: function () {\n        if (this.startRestorePoint) {\n            return this.startRestorePoint.html != this.editor.body.innerHTML;\n        }\n\n        return false;\n    },\n\n    keydown: function (e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard;\n\n        if (keyboard.isModifierKey(e)) {\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping(true);\n            }\n\n            that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            return true;\n        }\n\n        if (keyboard.isSystem(e)) {\n            that.systemCommandIsInProgress = true;\n\n            if (that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n            }\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function () {\n        var that = this;\n\n        if (that.systemCommandIsInProgress && that.changed()) {\n            that.systemCommandIsInProgress = false;\n            that.createUndoCommand();\n            return true;\n        }\n\n        return false;\n    }\n});\n\nvar SelectAllHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function (e) {\n        if (!browser.webkit || e.isDefaultPrevented() ||\n            !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n            return;\n        }\n        if (this.editor.options.immutables) {\n            this._toSelectableImmutables();\n        }\n        this._selectEditorBody();\n    },\n\n    _selectEditorBody: function() {\n        var editor = this.editor;\n        var range = editor.getRange();\n        range.selectNodeContents(editor.body);\n\n        setTimeout(function() {\n            editor.selectRange(range);\n        });\n    },\n\n    _toSelectableImmutables: function() {\n        var editor = this.editor,\n            body = editor.body,\n            immutable = editorNS.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)){\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)){\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    keyup: $.noop\n});\n\nvar Keyboard = Class.extend({\n    init: function(handlers) {\n        this.handlers = handlers;\n        this.typingInProgress = false;\n    },\n\n    isCharacter: function(keyCode) {\n        return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n               (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n               keyCode == 229;\n    },\n\n    toolFromShortcut: function (tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            toolOptions,\n            modifier = this._getShortcutModifier(e, navigator.platform);\n\n        for (toolName in tools) {\n            toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                toolOptions.ctrl == modifier &&\n                toolOptions.alt == e.altKey &&\n                toolOptions.shift == e.shiftKey) {\n                return toolName;\n            }\n        }\n    },\n\n    _getShortcutModifier: function (e, platform) {\n        var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n        return mac ? e.metaKey : e.ctrlKey;\n    },\n\n    toolsFromShortcut: function (tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            o,\n            matchesKey,\n            found = [];\n        var matchKey = function (toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n        for (toolName in tools) {\n            o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n            if (matchesKey &&\n                o.ctrl == e.ctrlKey &&\n                o.alt == e.altKey &&\n                o.shift == e.shiftKey) {\n                found.push(tools[toolName]);\n            }\n        }\n\n        return found;\n    },\n\n    isTypingKey: function (e) {\n        var keyCode = e.keyCode;\n        return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n               keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n               (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n    },\n\n    isModifierKey: function (e) {\n        var keyCode = e.keyCode;\n        return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n               (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n               (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n    },\n\n    isSystem: function (e) {\n        return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n    },\n\n    startTyping: function (callback) {\n        this.onEndTyping = callback;\n        this.typingInProgress = true;\n    },\n\n    stopTyping: function() {\n        if (this.typingInProgress && this.onEndTyping) {\n            this.onEndTyping();\n        }\n        this.typingInProgress = false;\n    },\n\n    endTyping: function (force) {\n        var that = this;\n        that.clearTimeout();\n        if (force) {\n            that.stopTyping();\n        } else {\n            that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n        }\n    },\n\n    isTypingInProgress: function () {\n        return this.typingInProgress;\n    },\n\n    clearTimeout: function () {\n        window.clearTimeout(this.timeout);\n    },\n\n    notify: function(e, what) {\n        var i, handlers = this.handlers;\n\n        for (i = 0; i < handlers.length; i++) {\n            if (handlers[i][what](e)) {\n                break;\n            }\n        }\n    },\n\n    keydown: function (e) {\n        this.notify(e, 'keydown');\n    },\n\n    keyup: function (e) {\n        this.notify(e, 'keyup');\n    }\n});\n\nextend(editorNS, {\n    TypingHandler: TypingHandler,\n    SystemHandler: SystemHandler,\n    BackspaceHandler: BackspaceHandler,\n    SelectAllHandler: SelectAllHandler,\n    Keyboard: Keyboard\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/exportpdf',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        extend = $.extend;\n\nvar ExportPdfCommand = Command.extend({\n    init: function(options) {\n        this.async = true;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var that = this;\n        var range = that.lockRange(true);\n        var editor = that.editor;\n\n        editor._destroyResizings();\n\n        editor.saveAsPDF().then(function() {\n            that.releaseRange(range);\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        });\n    }\n});\n\nextend(editorNS, {\n    ExportPdfCommand: ExportPdfCommand\n});\n\nregisterTool(\"pdf\", new Tool({ command: ExportPdfCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Export PDF\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\r\n    define('editor/plugins/print',[ \"../command\" ], f);\r\n})(function(){\r\n\r\n(function($) {\r\n\r\n    // Imports ================================================================\r\n    var kendo = window.kendo,\r\n        editorNS = kendo.ui.editor,\r\n        Command = editorNS.Command,\r\n        EditorUtils = editorNS.EditorUtils,\r\n        registerTool = EditorUtils.registerTool,\r\n        Tool = editorNS.Tool,\r\n        ToolTemplate = editorNS.ToolTemplate,\r\n        extend = $.extend;\r\n\r\nvar PrintCommand = Command.extend({\r\n    init: function(options) {\r\n        Command.fn.init.call(this, options);\r\n\r\n        this.managesUndoRedo = true;\r\n    },\r\n\r\n    exec: function() {\r\n        var editor = this.editor;\r\n\r\n        if (kendo.support.browser.msie) {\r\n            editor.document.execCommand(\"print\", false, null);\r\n        } else if (editor.window.print) {\r\n            editor.window.print();\r\n        }\r\n    }\r\n});\r\n\r\nextend(editorNS, {\r\n    PrintCommand: PrintCommand\r\n});\r\n\r\nregisterTool(\"print\", new Tool({ command: PrintCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Print\"})}));\r\n\r\n})(window.kendo.jQuery);\r\n\r\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\r\n\n(function(f, define){\n    define('editor/plugins/formatpainter',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    ToolTemplate = Editor.ToolTemplate,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\nvar CopyFormatCommand = Command.extend({\n    init: function (options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function(){\n        var range = this.lockRange(true);\n        this.inlineStyles = [];\n        this.blockStyles = [];\n        this.collectStyles(range);\n        this.editor.inlineStyles = this.inlineStyles;\n        this.editor.blockStyles = this.blockStyles;\n        this.releaseRange(range);\n    },\n\n    collectStyles: function(range) {\n        var rangeNodes = RangeUtils.nodes(range);\n        var node;\n\n        if(rangeNodes.length === 1) {\n            node = rangeNodes[0].parentNode;\n        } else {\n            node = range.startContainer;\n        }\n\n        while(node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n            if(dom.isBlock(node)) {\n                this.populateStyles(node, \"blockStyles\");\n                if (dom.is(node, \"li\")) {\n                    node = node.parentNode;\n                } else {\n                    node = null;\n                }\n            } else {\n                this.populateStyles(node, \"inlineStyles\");\n                node = node.parentNode;\n            }\n        }\n    },\n\n    populateStyles: function(node, destination) {\n        var styles = node.style;\n        var attributes = node.attributes;\n        var nodeStyles = {\n            tags: [ node.tagName ],\n            attr: {\n                style: {}\n            }\n        };\n        var styleValue, styleKey, attributeKey, attributeValue, i;\n\n        for(i = 0; styles && i < styles.length; i++) {\n            styleKey = styles[i];\n            styleValue = styles[styleKey];\n            nodeStyles.attr.style[styleKey] = styleValue;\n        }\n\n        for(i = 0; attributes && i < attributes.length; i++) {\n            attributeKey = attributes[i].nodeName;\n            attributeValue = attributes[i].nodeValue;\n            if(attributeKey === \"style\") {\n                continue;\n            } else if(attributeKey === \"class\") {\n                nodeStyles.attr.className = attributeValue;\n            } else {\n                nodeStyles.attr[attributeKey] = attributeValue;\n            }\n        }\n\n        this[destination].push(nodeStyles);\n    }\n});\n\nvar ApplyFormatCommand = Command.extend({\n    init: function (options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function(){\n        var range = this.lockRange(true);\n        var markers = RangeUtils.getMarkers(range);\n        var editor = this.editor;\n        var inlineStyles = editor.inlineStyles;\n        var blockStyles = editor.blockStyles;\n        var nodes;\n\n        if((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n            return;\n        }\n\n        if(markers.length === 3) {\n            this.marker.removeCaret(range);\n            this.marker.caret = null;\n        }\n\n        this.removeEmptyElementsFromRange(range);\n        nodes = RangeUtils.nodes(range);\n        this.cleanInlineParents(nodes);\n        dom.normalize(range.commonAncestorContainer);\n\n        if(markers.length === 2) {\n            range.setStartAfter(markers[0]);\n            range.setEndBefore(markers[1]);\n        } else {\n            range.setStartBefore(nodes[0]);\n            range.setEndAfter(nodes[0]);\n        }\n\n        nodes = RangeUtils.nodes(range);\n\n        if(nodes && blockStyles && blockStyles.length) {\n            this.applyBlockStyles(nodes, blockStyles);\n        }\n\n        if(nodes && inlineStyles && inlineStyles.length) {\n            this.applyInlineStyles(nodes, inlineStyles);\n        }\n\n        this.releaseRange(range);\n    },\n\n    removeEmptyElementsFromRange: function(range) {\n        var isEmptyInline = function(node) {\n            return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n        };\n        var emptyElements, i;\n\n        emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n        if (emptyElements && emptyElements.length > 0) {\n            for(i = 0; i < emptyElements.length; i++) {\n                emptyElements[i].parentNode.removeChild(emptyElements[i]);\n            }\n        }\n    },\n\n    cleanInlineParents: function(nodes) {\n        var i, node, parent, children, j, child, newNode;\n\n        for(i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            parent = node.parentNode;\n\n            if(this.immutableParent(node)) {\n                continue;\n            }\n\n            while(parent && dom.isInline(parent)) {\n                children = parent.childNodes;\n\n                for(j = 0; j < children.length; j++) {\n                    child = children[j];\n\n                    if(!dom.isMarker(child) && child !== node) {\n                        newNode = parent.cloneNode(true);\n                        newNode.innerHTML = \"\";\n                        dom.wrap(child, newNode);\n                    }\n                }\n\n                dom.unwrap(parent);\n                parent = node.parentNode;\n            }\n        }\n    },\n\n    applyBlockStyles: function(nodes, blockStyles) {\n        var formatTag = blockStyles[0].tags[0];\n        var attr = blockStyles[0].attr;\n        var document = this.editor.document;\n        var i, len, node, wrapper, blockParent, outerWrapper;\n        var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            node = nodes[i];\n\n            if(dom.isWhitespace(node) || this.immutableParent(node)) {\n                continue;\n            }\n\n            blockParent = dom.blockParentOrBody(node);\n\n            if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                if(blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                    previousNodes = [];\n                    nextNodes = [];\n                    previous = node.previousSibling;\n                    next = node.nextSibling;\n\n                    while(previous) {\n                        if(!dom.isMarker(previous)) {\n                            previousNodes.push(previous);\n                        }\n\n                        previous = previous.previousSibling;\n                    }\n\n                    if(previousNodes.length) {\n                        prevWrapper = blockParent.cloneNode(true);\n                        prevWrapper.innerHTML = \"\";\n                        dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                        for(j = 0; j < previousNodes.length; j++) {\n                            child = previousNodes[j];\n                            dom.insertAt(prevWrapper, child, 0);\n                        }\n                    }\n\n                    while(next) {\n                        if(!dom.isMarker(next)) {\n                            nextNodes.push(next);\n                        }\n\n                        next = next.nextSibling;\n                    }\n\n                    if(nextNodes.length) {\n                        nextWrapper = blockParent.cloneNode(true);\n                        nextWrapper.innerHTML = \"\";\n                        dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                        for(j = 0; j < nextNodes.length; j++) {\n                            child = nextNodes[j];\n                            nextWrapper.appendChild(child);\n                        }\n                    }\n\n                    dom.unwrap(blockParent);\n                }\n\n                wrapper = dom.create(document, formatTag, attr);\n                dom.wrap(node, wrapper);\n            } else if (blockParent.tagName === formatTag) {\n                dom.attr(blockParent, attr);\n            }\n        }\n\n        if(blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n            listItems = [];\n\n            while(dom.is(wrapper, \"li\")) {\n                listItems.push(wrapper);\n                wrapper = dom.prev(wrapper);\n            }\n\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n            outerWrapper.appendChild(listItems[0]);\n\n            for (i = 1, len = listItems.length; i < len; i++) {\n                dom.insertBefore(listItems[i], outerWrapper.firstChild);\n            }\n        } else if(blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.wrap(wrapper, outerWrapper);\n        }\n    },\n\n    applyInlineStyles: function(nodes, inlineStyles) {\n        var document = this.editor.document;\n        var currentStyle, createdNode, topNode, i, newNode, node;\n\n        for(i = 0; i < inlineStyles.length; i++) {\n            currentStyle = inlineStyles[i];\n            createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n            if(topNode) {\n                createdNode.appendChild(topNode);\n            }\n\n            topNode = createdNode;\n        }\n\n        if(topNode) {\n            for(i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                if(dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n                newNode = topNode.cloneNode(true);\n                dom.insertBefore(newNode, node);\n\n                while(newNode.children && newNode.children.length) {\n                    newNode = newNode.children[0];\n                }\n\n                newNode.appendChild(node);\n            }\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\nvar CopyFormatTool = Tool.extend({\n    init: function (options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function (commandArguments) {\n        return new CopyFormatCommand(commandArguments);\n    }\n});\n\nvar ApplyFormatTool = Tool.extend({\n    init: function (options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function (commandArguments) {\n        return new ApplyFormatCommand(commandArguments);\n    }\n});\n\n$.extend(Editor, {\n    CopyFormatCommand: CopyFormatCommand,\n    ApplyFormatCommand: ApplyFormatCommand,\n    CopyFormatTool: CopyFormatTool,\n    ApplyFormatTool: ApplyFormatTool\n});\n\nregisterTool(\"copyFormat\", new CopyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Copy format\" }) }));\nregisterTool(\"applyFormat\", new ApplyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Apply format\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\r\n    define('editor/resizing/resizing-utils',[\"../main\"], f);\r\n})(function() {\r\n\r\n(function(kendo, undefined) {\r\n    var global = window;\r\n    var math = global.Math;\r\n    var min = math.min;\r\n    var max = math.max;\r\n    var parseFloat = global.parseFloat;\r\n\r\n    var $ = kendo.jQuery;\r\n    var extend = $.extend;\r\n\r\n    var Editor = kendo.ui.editor;\r\n\r\n    var PERCENTAGE = \"%\";\r\n    var PIXEL = \"px\";\r\n    var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\r\n    var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\r\n    var STRING = \"string\";\r\n\r\n    function constrain(options) {\r\n        var value = options.value;\n        var lowerBound = options.min;\n        var upperBound = options.max;\n\n        return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\r\n    }\r\n\r\n    function getScrollBarWidth(element) {\r\n        if  (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\r\n            return kendo.support.scrollbar();\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    function calculatePercentageRatio(value, total) {\r\n        if (inPercentages(value)) {\r\n            return parseFloat(value);\r\n        }\r\n        else {\r\n            return ((parseFloat(value) / total) * 100);\r\n        }\r\n    }\r\n\r\n    function inPercentages(value) {\r\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\r\n    }\r\n\r\n    function inPixels(value) {\r\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\r\n    }\r\n\r\n    function toPercentages(value) {\r\n        return (parseFloat(value) + PERCENTAGE);\r\n    }\r\n\r\n    function toPixels(value) {\r\n        return (parseFloat(value) + PIXEL);\r\n    }\r\n\r\n    var ResizingUtils = {\r\n        constrain: constrain,\r\n        getScrollBarWidth: getScrollBarWidth,\r\n        calculatePercentageRatio: calculatePercentageRatio,\r\n        inPercentages: inPercentages,\r\n        inPixels: inPixels,\r\n        toPercentages: toPercentages,\r\n        toPixels: toPixels\r\n    };\r\n\r\n    extend(Editor, {\r\n        ResizingUtils: ResizingUtils\r\n    });\r\n})(window.kendo);\r\n\r\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\r\n\n(function(f, define) {\n    define('editor/resizing/table-element-resizing',[\"../main\", \"../../kendo.resizable\", \"./resizing-utils\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n    var proxy = $.proxy;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_ENTER = \"mouseenter\";\n    var MOUSE_LEAVE = \"mouseleave\";\n    var MOUSE_MOVE = \"mousemove\";\n    var MOUSE_UP = \"mouseup\";\n\n    var COMMA = \",\";\n    var DOT = \".\";\n    var LAST_CHILD = \":last-child\";\n\n    var TABLE = \"table\";\n\n    var TableElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n            if ($(element).is(TABLE)) {\n                that.element = element;\n                that._attachEventHandlers();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            var eventNamespace = that.options.eventNamespace;\n\n            if (that.element) {\n                $(that.element).off(eventNamespace);\n                that.element = null;\n            }\n\n            $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n            that._destroyResizeHandle();\n        },\n\n        options: {\n            tags: [],\n            min: 0,\n            rootElement: null,\n            eventNamespace: \"\",\n            rtl: false,\n            handle: {\n                dataAttribute: \"\",\n                height: 0,\n                width: 0,\n                classNames: {},\n                template: \"\"\n            }\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n\n            $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n        },\n\n        resizingInProgress: function() {\n            var that = this;\n            var resizable = that._resizable;\n\n            if (resizable) {\n                return !!resizable.resizing;\n            }\n\n            return false;\n        },\n\n        resize: noop,\n\n        detectElementBorderHovering: function(e) {\n            var that = this;\n            var options = that.options;\n            var handleOptions = options.handle;\n            var tableElement = $(e.currentTarget);\n            var resizeHandle = that.resizeHandle;\n            var dataAttribute = handleOptions.dataAttribute;\n\n            if (!that.resizingInProgress()) {\n                if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                    if (resizeHandle) {\n                        if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        that.showResizeHandle(tableElement, e);\n                    }\n                }\n                else {\n                    if (resizeHandle) {\n                        that._destroyResizeHandle();\n                    }\n                }\n            }\n        },\n\n        elementBorderHovered: noop,\n\n        showResizeHandle: function(tableElement, e) {\n            var that = this;\n\n            if (e.buttons !== 0) {\n                //prevent showing when a mouse button is still being pressed\n                return;\n            }\n\n            that._initResizeHandle();\n            that.setResizeHandlePosition(tableElement);\n            that.setResizeHandleDimensions();\n            that.setResizeHandleDataAttributes(tableElement[0]);\n            that._attachResizeHandleEventHandlers();\n\n            that._initResizable(tableElement);\n\n            that._hideResizeMarker();\n            that.resizeHandle.show();\n        },\n\n        _initResizeHandle: function() {\n            var that = this;\n            var options = that.options;\n\n            that._destroyResizeHandle();\n\n            that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n        },\n\n        setResizeHandlePosition: noop,\n\n        setResizeHandleDimensions: noop,\n\n        setResizeHandleDataAttributes: function(tableElement) {\n            var that = this;\n\n            that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n        },\n\n        _attachResizeHandleEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n            var eventNamespace = options.eventNamespace;\n            var markerClass = options.handle.classNames.marker;\n            var resizeHandle = that.resizeHandle;\n\n            that.resizeHandle\n                .on(MOUSE_DOWN + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).show();\n                })\n                .on(MOUSE_UP + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n        },\n\n        _hideResizeMarker: function() {\n            var that = this;\n\n            that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n        },\n\n        _destroyResizeHandle: function() {\n            var that = this;\n\n            if (that.resizeHandle) {\n                that._destroyResizable();\n                that.resizeHandle.off(that.options.eventNamespace).remove();\n                that.resizeHandle = null;\n            }\n        },\n\n        _initResizable: function(tableElement) {\n            var that = this;\n\n            if (!that.resizeHandle) {\n                return;\n            }\n\n            that._destroyResizable();\n\n            that._resizable = new kendo.ui.Resizable(tableElement, {\n                draggableElement: that.resizeHandle[0],\n                start: proxy(that.onResizeStart, that),\n                resize: proxy(that.onResize, that),\n                resizeend: proxy(that.onResizeEnd, that)\n            });\n        },\n\n        _destroyResizable: function() {\n            var that = this;\n\n            if (that._resizable) {\n                that._resizable.destroy();\n                that._resizable = null;\n            }\n        },\n\n        onResizeStart: function() {\n            this._disableKeyboard();\n        },\n\n        onResize: function(e) {\n            this.setResizeHandleDragPosition(e);\n        },\n\n        setResizeHandleDragPosition: noop,\n\n        onResizeEnd: function(e) {\n            var that = this;\n\n            that.resize(e);\n            that._destroyResizeHandle();\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n        },\n\n        _disableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                e.preventDefault();\n            });\n        },\n\n        _forceResizing: function(e) {\n            var resizable = this._resizable;\n\n            if (resizable && resizable.userEvents) {\n                resizable.userEvents._end(e);\n            }\n        }\n    });\n\n    var ResizingFactory = Class.extend({\n        create: function(editor, options) {\n            var that = this;\n            var resizingName = options.name;\n            var NS = options.eventNamespace;\n\n            $(editor.body)\n                .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    }\n                    else {\n                        that._initResizing(editor, table, options);\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, function() {\n                    var resizing = editor[resizingName];\n\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                })\n                .on(MOUSE_UP + NS, function(e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n        },\n\n        dispose: function(editor, options) {\n            $(editor.body).off(options.eventNamespace);\n        },\n\n        _initResizing: function(editor, tableElement, options) {\n            var resizingName = options.name;\n            var resizingType = options.type;\n\n            editor[resizingName] = new resizingType(tableElement, {\n                rtl: kendo.support.isRtl(editor.element),\n                rootElement: editor.body\n            });\n        },\n\n        _destroyResizing: function(editor, options) {\n            var resizingName = options.name;\n\n            if (editor[resizingName]) {\n                editor[resizingName].destroy();\n                editor[resizingName] = null;\n            }\n        }\n    });\n    ResizingFactory.current = new ResizingFactory();\n\n    TableElementResizing.create = function(editor, options) {\n        ResizingFactory.current.create(editor, options);\n    };\n\n    TableElementResizing.dispose = function(editor, options) {\n        ResizingFactory.current.dispose(editor, options);\n    };\n\n    extend(Editor, {\n        TableElementResizing: TableElementResizing\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/column-resizing',[\"../main\", \"./resizing-utils\", \"./table-element-resizing\", \"../dom\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var global = window;\n    var math = global.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n\n    var NS = \".kendoEditorColumnResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n    var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n    var BODY = \"body\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TD = \"td\";\n    var TH = \"th\";\n    var TR = \"tr\";\n\n    var COLATTR = \"col-index\";\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n\n    var ColumnResizing = TableElementResizing.extend({\n        options: {\n            tags: [TD, TH],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"column\",\n                width: 10,\n                height: 0,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(column, e) {\n            var that = this;\n            var options = that.options;\n            var handleWidth = options.handle.width;\n            var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n            var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n            if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(column) {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var options = that.options;\n            var rtl = options.rtl;\n            var handleWidth = options.handle.width;\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var columnWidthOffset = rtl ? 0 : outerWidth(column);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var columnOffsetLeft = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var innerElementOffsetTop = tableInnerElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(tableInnerElement.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if(rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: innerElementOffsetTop + scrollTopOffset,\n                left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n            that.resizeHandle.css({\n                width: that.options.handle.width,\n                height: fullHeight\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rootElement = $(options.rootElement);\n            var handleWidth = options.handle ? options.handle.width : 0;\n            var min = options.min;\n            var rtl = options.rtl;\n            var columnWidth = outerWidth(column);\n            var columnLeftOffset = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var adjacentColumnWidth = outerWidth(column.next());\n            var resizeHandle = $(that.resizeHandle);\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                            (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                            parseFloat(resizeHandle.css(\"marginLeft\"));\n            var browser = kendo.support.browser;\n\n            if(rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n            });\n\n            resizeHandle.css({ left: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rtlModifier = options.rtl ? (-1) : 1;\n            var min = options.min;\n            var initialDeltaX = rtlModifier * e.x.initialDelta;\n            var newWidth;\n            var initialAdjacentColumnWidth;\n            var initialColumnWidth;\n            var colIndex;\n            var nextColumn;\n\n            dom.reMapTableColumns(that.element, COLATTR);\n\n            colIndex = parseInt(column.attr(COLATTR), 10);\n\n            if(column.prop(\"colSpan\") > 1) {\n                column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n            }\n\n            nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n            that._setTableComputedWidth();\n            that._setColumnsComputedWidth();\n\n            initialColumnWidth = outerWidth(column);\n            initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n            newWidth = constrain({\n                value: initialColumnWidth + initialDeltaX,\n                min: min,\n                max: initialColumnWidth + initialAdjacentColumnWidth - min\n            });\n\n            that._resizeColumn(column[0], newWidth);\n            that._resizeTopAndBottomColumns(column[0], newWidth);\n            that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n            dom.clearTableMappings(that.element, COLATTR);\n        },\n\n        _setTableComputedWidth: function() {\n            var element = this.element;\n\n            if (element.style[WIDTH] === \"\") {\n                element.style[WIDTH] = toPixels(outerWidth($(element)));\n            }\n        },\n\n        _setColumnsComputedWidth: function() {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var innerElementWidth = outerWidth(tableInnerElement);\n            var columns = tableInnerElement.children(TR).children(TD);\n            var length = columns.length;\n            var currentColumnsWidths = columns.map(function() {\n                return outerWidth($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                if (inPercentages(columns[i].style[WIDTH])) {\n                    columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                }\n                else {\n                    columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                }\n            }\n        },\n\n        _resizeTopAndBottomColumns: function(column, newWidth) {\n            var that = this;\n            var columnIndex = $(column).attr(COLATTR);\n            var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    var cell = this;\n                    return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                });\n            var length = topAndBottomColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeColumn(topAndBottomColumns[i], newWidth);\n            }\n        },\n\n        _resizeColumn: function(column, newWidth) {\n            var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n            if (inPercentages(column.style[WIDTH])) {\n                column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n            }\n            else {\n                column.style[WIDTH] = toPixels(newWidth);\n            }\n        },\n\n        _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                });\n            var length = adjacentColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n            }\n        },\n\n        _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var min = that.options.min;\n            var newWidth;\n\n            newWidth = constrain({\n                value: initialAdjacentColumnWidth + deltaWidth,\n                min: min,\n                max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n            });\n\n            that._resizeColumn(adjacentColumn, newWidth);\n        }\n    });\n\n    ColumnResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"columnResizing\",\n            type: ColumnResizing,\n            eventNamespace: NS\n        });\n    };\n\n    ColumnResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        ColumnResizing: ColumnResizing\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/row-resizing',[\"../main\", \"./resizing-utils\", \"./table-element-resizing\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var math = window.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorRowResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n    var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n    var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n    var BODY = \"body\";\n    var TR = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n\n    var COMMA = \",\";\n    var HEIGHT = \"height\";\n\n    var RowResizing = TableElementResizing.extend({\n        options: {\n            tags: [TR],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"row\",\n                width: 0,\n                height: 10,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>'+\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(tableElement, e) {\n            var that = this;\n            var handleHeight = that.options.handle[HEIGHT];\n            var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n            var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n            if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(row) {\n            var that = this;\n            var options = that.options;\n            var handleHeight = options.handle[HEIGHT];\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n            var rowOffsetLeft = row.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(row.css(\"marginLeft\"));\n            var rowOffsetTop = row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(row.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if(options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n            that.resizeHandle.css({\n                width: innerTableElement.width(),\n                height: that.options.handle[HEIGHT]\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var tableHead =  $(that.element).children(THEAD);\n            var tableBody =  $(that.element).children(TBODY);\n            var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n            var resizeHandle = $(that.resizeHandle);\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var $row = $(row);\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var tableTopOffset = topInnerTableElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n            var rowOffsetTop = $row.offset().top -\n                                (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat($row.css(\"marginTop\"));\n\n            var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat(resizeHandle.css(\"marginTop\"));\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                min: rowOffsetTop + scrollTopOffset + min,\n                max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n            });\n\n            resizeHandle.css({ top: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var options = that.options;\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var currentRowHeight = outerHeight($(row));\n            var element = $(that.element);\n            var initialTableHeight = outerHeight(element);\n            var tableHead = element.children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = element.children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var initialStyleHeight = row.style[HEIGHT];\n            var newRowHeight = constrain({\n                value: currentRowHeight + e.y.initialDelta,\n                min: options.min,\n                max: abs(tableHeadHeight + tableBodyHeight - options.min)\n            });\n\n            that._setRowsHeightInPixels();\n            row.style[HEIGHT] = toPixels(newRowHeight);\n            that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n            if (inPercentages(initialStyleHeight)) {\n                //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                that._setRowsHeightInPercentages();\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setTableHeight: function(newHeight) {\n            var element = this.element;\n\n            if (inPercentages(element.style[HEIGHT])) {\n                element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n            }\n            else {\n                element.style[HEIGHT] = toPixels(newHeight);\n            }\n        }\n    });\n\n    RowResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"rowResizing\",\n            type: RowResizing,\n            eventNamespace: NS\n        });\n    };\n\n    RowResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        RowResizing: RowResizing\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/element-resize-handle',[\"../main\",  \"../../kendo.draganddrop\", \"./resizing-utils\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n    var proxy = $.proxy;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var Draggable = kendo.ui.Draggable;\n    var Observable = kendo.Observable;\n    var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorElementResizeHandle\";\n    var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var HALF_INSIDE = \"halfInside\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n\n    var BODY = \"body\";\n    var TABLE = \"table\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    var ElementResizeHandle = Observable.extend({\n        init: function(options) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.options = extend({}, that.options, options);\n            that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n            that._attachEventHandlers();\n            that._addStyles();\n            that._initDraggable();\n            that._initPositioningStrategy();\n            that._initDraggingStrategy();\n\n            $(that.element).data(TABLE, that.options.resizableElement);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS).remove();\n            that.element = null;\n\n            that._destroyDraggable();\n\n            that.unbind();\n        },\n\n        options: {\n            appendTo: null,\n            direction: SOUTHEAST,\n            resizableElement: null,\n            rtl: false,\n            template:\n                \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\"+\n                    \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                \"</div>\"\n        },\n\n        events: [\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            MOUSE_OVER,\n            MOUSE_OUT\n        ],\n\n        show: function() {\n            this._setPosition();\n        },\n\n        _setPosition: function() {\n            var that = this;\n            var position = that._positioningStrategy.getPosition();\n\n            $(that.element).css({\n                top: position.top,\n                left: position.left,\n                position: \"absolute\"\n            });\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n\n            $(that.element)\n                .on(MOUSE_OVER + NS, proxy(that._onMouseOver, that))\n                .on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n        },\n\n        _onMouseOver: function() {\n            this.trigger(MOUSE_OVER);\n        },\n\n        _onMouseOut: function() {\n            this.trigger(MOUSE_OUT);\n        },\n\n        _addStyles: function() {\n            var that = this;\n            $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n        },\n\n        _initPositioningStrategy: function() {\n            var that = this;\n            var options = that.options;\n\n            that._positioningStrategy = HandlePositioningStrategy.create({\n                name: options.direction,\n                handle: that.element,\n                resizableElement: options.resizableElement,\n                rootElement: options.rootElement,\n                rtl: options.rtl\n            });\n        },\n\n        _initDraggable: function() {\n            var that = this;\n            var element = that.element;\n\n            if (that._draggable || !element) {\n                return;\n            }\n\n            that._draggable = new Draggable(element, {\n                dragstart: proxy(that._onDragStart, that),\n                drag: proxy(that._onDrag, that),\n                dragend: proxy(that._onDragEnd, that)\n            });\n        },\n\n        _onDragStart: function() {\n            this.trigger(DRAG_START);\n        },\n\n        _onDrag: function(e) {\n            var that = this;\n\n            that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                deltaX: e.x.delta,\n                deltaY: e.y.delta,\n                initialDeltaX: e.x.initialDelta,\n                initialDeltaY: e.y.initialDelta\n            }));\n        },\n\n        _onDragEnd: function() {\n            this.trigger(DRAG_END);\n        },\n\n        _destroyDraggable : function() {\n            var that = this;\n\n            if (that._draggable) {\n                that._draggable.destroy();\n                that._draggable = null;\n            }\n        },\n\n        _initDraggingStrategy: function() {\n            var that = this;\n\n            that._draggingStrategy = HandleDraggingStrategy.create({\n                name: that.options.direction\n            });\n        }\n    });\n\n    var StrategyFactory = Class.extend({\n        init: function() {\n            this._items = [];\n        },\n\n        register: function(name, type) {\n            this._items.push({\n                name: name,\n                type: type\n            });\n        },\n\n        create: function(options) {\n            var items = this._items;\n            var itemsLength = items.length;\n            var name = options.name ? options.name.toLowerCase() : \"\";\n            var match;\n            var item;\n            var i;\n\n            for (i = 0; i < itemsLength; i++) {\n                item = items[i];\n\n                if (item.name.toLowerCase() === name) {\n                    match = item;\n                    break;\n                }\n            }\n\n            if (match) {\n                return new match.type(options);\n            }\n        }\n    });\n\n    var PositioningStrategyFactory = StrategyFactory.extend({});\n    PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n    var HandlePositioningStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            handle: null,\n            offset: HALF_INSIDE,\n            resizableElement: null,\n            rootElement: null,\n            rtl: false\n        },\n\n        getPosition: function() {\n            var that = this;\n\n            var position = that.calculatePosition();\n            var handleOffsetPosition = that.applyHandleOffset(position);\n            var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n            return scrollOffsetPosition;\n        },\n\n        calculatePosition: noop,\n\n        applyHandleOffset: function(position) {\n            var options = this.options;\n            var handle = $(options.handle);\n\n            if (options.offset === HALF_INSIDE) {\n                return {\n                    top: position.top - (outerHeight(handle) / 2),\n                    left: position.left - (outerWidth(handle) / 2)\n                };\n            }\n\n            return position;\n        },\n\n        applyScrollOffset: function(position) {\n            var options = this.options;\n            var rootElement = $(options.rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var browser = kendo.support.browser;\n            var rootLeft;\n\n            if (!rootElement.is(BODY)) {\n                rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                if(options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    rootLeft = rootLeft * -1;\n                }\n\n                return {\n                    top: position.top + (rootElement.scrollTop() || 0),\n                    left: position.left + rootLeft - scrollBarWidth\n                };\n            }\n\n            return position;\n        }\n    });\n\n    HandlePositioningStrategy.create = function(options) {\n        return PositioningStrategyFactory.current.create(options);\n    };\n\n    var EastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n    var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n    var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n    var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n    var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n    var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n    var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n    var WestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n    var DraggingStrategyFactory = StrategyFactory.extend({});\n    DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n    var HandleDraggingStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            deltaX: {\n                adjustment: null,\n                modifier: null\n            },\n            deltaY: {\n                adjustment: null,\n                modifier: null\n            }\n        },\n\n        adjustDragDelta: function(deltas) {\n            var options = this.options;\n            var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n            var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n            return {\n                deltaX: deltas.deltaX * xAxisAdjustment,\n                deltaY: deltas.deltaY * yAxisAdjustment,\n                initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n            };\n        }\n    });\n\n    HandleDraggingStrategy.create = function(options) {\n        return DraggingStrategyFactory.current.create(options);\n    };\n\n    var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 0,\n                modifier: 0\n            }\n        }\n    });\n\n    var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n    var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n    var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 0,\n                modifier: 0\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n    var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n    var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n    var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n    var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n    var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n    extend(Editor, {\n        ElementResizeHandle: ElementResizeHandle\n    });\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/element-resizing',[\"../main\", \"./element-resize-handle\", \"./resizing-utils\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n\n    var $ = kendo.jQuery;\n    var contains = $.contains;\n    var extend = $.extend;\n    var proxy = $.proxy;\n\n    var browser = kendo.support.browser;\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var ElementResizeHandle = Editor.ElementResizeHandle;\n    var ResizingUtils = Editor.ResizingUtils;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var constrain = ResizingUtils.constrain;\n    var inPercentages = ResizingUtils.inPercentages;\n    var inPixels = ResizingUtils.inPixels;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var RangeUtils = Editor.RangeUtils;\n\n    var NS = \".kendoEditorElementResizing\";\n    var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n    var TABLE_CLASS = \"k-table\";\n    var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n    var SELECT = \"select\";\n    var DROP = \"drop\";\n\n    var COLUMN = \"td\";\n    var ROW = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TABLE = \"table\";\n    var IMG = \"img\";\n    var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n    var HEIGHT = \"height\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    function isUndefined(value) {\n        return typeof(value) === \"undefined\";\n    }\n\n    var ElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n            that.handles = [];\n\n            // Check whether the element is TABLE or IMG\n            if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                that.element = element;\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS);\n            that.element = null;\n\n            $(that.options.rootElement).off(KEY_DOWN + NS);\n\n            that._destroyResizeHandles();\n        },\n\n        options: {\n            appendHandlesTo: null,\n            rtl: false,\n            rootElement: null,\n            minWidth: 10,\n            minHeight: 10,\n            handles: [{\n                direction: NORTHWEST\n            }, {\n                direction: NORTH\n            }, {\n                direction: NORTHEAST\n            }, {\n                direction: EAST\n            }, {\n                direction: SOUTHEAST\n            }, {\n                direction: SOUTH\n            }, {\n                direction: SOUTHWEST\n            }, {\n                direction: WEST\n            }]\n        },\n\n        resize: function(args) {\n            var that = this;\n            var deltas = extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n\n            that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            that.showResizeHandles();\n        },\n\n        _resizeWidth: function() {\n            return false;\n        },\n\n        _resizeHeight: function() {\n            return false;\n        },\n\n        _getMaxDimensionValue: function(dimension) {\n            var that = this;\n            var element = $(that.element);\n            var dimensionLowercase = dimension.toLowerCase();\n            var rtlModifier = that.options.rtl ? (-1) : 1;\n            var parent = $(that.element).parent();\n            var parentElement = parent[0];\n            var parentDimension = parent[dimensionLowercase]();\n            var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n            if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                    return Infinity;\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            }\n            else {\n                return (parentDimension + parentScrollOffset);\n            }\n        },\n\n        showResizeHandles: function() {\n            var that = this;\n\n            that._initResizeHandles();\n            that._showResizeHandles();\n        },\n\n        _initResizeHandles: function() {\n            var that = this;\n            var handles = that.handles;\n            var options = that.options;\n            var handleOptions = that.options.handles;\n            var length = handleOptions.length;\n            var i;\n\n            if (handles && handles.length > 0) {\n                return;\n            }\n\n            for (i = 0; i < length; i++) {\n                that.handles.push(new ElementResizeHandle(extend({\n                    appendTo: options.appendHandlesTo,\n                    resizableElement: that.element,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                }, handleOptions[i])));\n            }\n\n            that._bindToResizeHandlesEvents();\n        },\n\n        _destroyResizeHandles: function() {\n            var that = this;\n            var length = that.handles ? that.handles.length : 0;\n\n            for (var i = 0; i < length; i++) {\n                that.handles[i].destroy();\n            }\n\n            that.handles = [];\n        },\n\n        _showResizeHandles: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that.handles[i].show();\n            }\n        },\n\n        _bindToResizeHandlesEvents: function() {\n            return false;\n        },\n\n        _onResizeHandleDragStart: function() {\n            var that = this;\n            var element = $(that.element);\n\n            element.addClass(ELEMENT_RESIZING_CLASS);\n\n            that._initialElementHeight = outerHeight(element);\n            that._initialElementWidth = outerWidth(element);\n            that._disableKeyboard();\n        },\n\n        _onResizeHandleDrag: function(e) {\n            this.resize(e);\n        },\n\n        _onResizeHandleDragEnd: function() {\n            var that = this;\n            $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            $(this.options.rootElement).off(KEY_DOWN + NS);\n        },\n\n        _disableKeyboard: function() {\n            $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                e.preventDefault();\n            });\n        }\n    });\n\n    var TableResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n            }\n        },\n\n        _hasRowsInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleWidth = element[0].style[WIDTH];\n            var currentWidth = outerWidth(element);\n            var parentWidth = element.parent().width();\n            var maxWidth = that._getMaxDimensionValue(WIDTH);\n            var newWidth;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: maxWidth\n            });\n\n            if (inPercentages(styleWidth)) {\n                //detect resizing greater than 100%\n                if (currentWidth + delta > parentWidth) {\n                    ratioValue = max(constrainedWidth, parentWidth);\n                    ratioTotalValue = min(constrainedWidth, parentWidth);\n                }\n                else {\n                    ratioValue = min(constrainedWidth, parentWidth);\n                    ratioTotalValue = max(constrainedWidth, parentWidth);\n                }\n\n                newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newWidth = toPixels(constrainedWidth);\n            }\n\n            that._setColumnsWidth();\n\n            element[0].style[WIDTH] = newWidth;\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleHeight = element[0].style[HEIGHT];\n            var currentHeight = outerHeight(element);\n            var parent = element.parent();\n            var parentHeight = parent.height();\n            var maxHeight = that._getMaxDimensionValue(HEIGHT);\n            var newHeight;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedHeight;\n            var minHeight = that.options.minHeight;\n            var hasRowsInPixels = that._hasRowsInPixels();\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: minHeight,\n                max: maxHeight\n            });\n\n            if (hasRowsInPixels && delta < 0) {\n                //decreasing table height when rows are sized in pixels is not possible\n                that._setRowsHeightInPercentages();\n            }\n\n            if (inPercentages(styleHeight)) {\n                //detect resizing greater than 100%\n                if (currentHeight + delta > parentHeight) {\n                    ratioValue = max(constrainedHeight, parentHeight);\n                    ratioTotalValue = min(constrainedHeight, parentHeight);\n                }\n                else {\n                    ratioValue = min(constrainedHeight, parentHeight);\n                    ratioTotalValue = max(constrainedHeight, parentHeight);\n                }\n\n                newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newHeight = toPixels(constrainedHeight);\n            }\n\n            element[0].style[HEIGHT] = newHeight;\n\n            if (hasRowsInPixels && delta < 0) {\n                //restore original rows height unit\n                that._setRowsHeightInPixels();\n            }\n        },\n\n        _setColumnsWidth: function() {\n            var that = this;\n            var element = $(that.element);\n            var parentElement = element.parent()[0];\n            var parentColumn = element.closest(COLUMN);\n            var columns = parentColumn.closest(ROW).children();\n            var columnsLength = columns.length;\n            var i;\n\n            function isWidthInPercentages(element) {\n                var styleWidth = element.style.width;\n\n                if (styleWidth !== \"\") {\n                    return inPercentages(styleWidth) ? true : false;\n                }\n                else {\n                    return $(element).hasClass(TABLE_CLASS) ? true : false;\n                }\n            }\n\n            if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                for (i = 0; i < columnsLength; i++) {\n                    columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                }\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        }\n    });\n\n    var ImageResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n\n                if(handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                    handle.bind(DRAG, proxy(that._onResizeHandleDragVertical, that));\n                } else if(handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                    handle.bind(DRAG, proxy(that._onResizeHandleDragHorizontal, that));\n                } else {\n                    handle.bind(DRAG, proxy(that._onResizeHandleDragLocked, that));\n                }\n\n                handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n            }\n        },\n\n        _getDeltas: function(args) {\n            return extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n        },\n\n        _onResizeHandleDragVertical: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragHorizontal: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragLocked: function(args) {\n            var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                initialWidth = this._initialElementWidth,\n                initialHeight = this._initialElementHeight,\n                deltas;\n\n            if(min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                args.deltaY = args.deltaX;\n            } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                args.deltaX = args.deltaY;\n            }\n\n            deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            this.showResizeHandles();\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentWidth = outerWidth(element);\n            var newWidth;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: that._getMaxDimensionValue(WIDTH)\n            });\n\n            newWidth = toPixels(constrainedWidth);\n            element[0].style[WIDTH] = newWidth;\n            element.attr(WIDTH, Math.floor(constrainedWidth));\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentHeight = outerHeight(element);\n            var newHeight;\n            var constrainedHeight;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: that.options.minHeight,\n                max: Number.MAX_SAFE_INTEGER\n            });\n\n            newHeight = toPixels(constrainedHeight);\n            element[0].style[HEIGHT] = newHeight;\n            element.attr(HEIGHT, Math.floor(constrainedHeight));\n        }\n    });\n\n    var ElementResizingFactory = Class.extend({\n        create: function(editor) {\n            var factory = this;\n\n            $(editor.body)\n                .on(\"dragstart\" + NS, function() {\n                    var nodes = RangeUtils.nodes(editor.getRange()),\n                        hasImg = false;\n\n                    nodes.forEach(function(node) {\n                        if(node.nodeName === \"IMG\") {\n                            hasImg = true;\n                        }\n                    });\n\n                    if(hasImg && nodes.length > 1) {\n                        editor.elementResizing._destroyResizeHandles();\n                    }\n                })\n                .on(DROP + NS, function() {\n                    setTimeout(function() {\n                        var image = RangeUtils.image(editor.getRange());\n\n                        if(image) {\n                            editor.elementResizing._destroyResizeHandles();\n                            editor.elementResizing.element = image;\n                            editor.elementResizing.showResizeHandles();\n                        }\n                    });\n                })\n                .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n\n                    if (elementResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                //instead of stopping event propagation\n                                return;\n                            }\n                            else {\n                                if (element !== eventTarget) {\n                                    editor._destroyElementResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n\n                    editor._showElementResizeHandles();\n                })\n                .on(MOUSE_DOWN + NS, function(e) {\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                    if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyElementResizing();\n                    }\n                });\n        },\n\n        dispose: function(editor) {\n            $(editor.body).off(NS);\n        },\n\n        _initResizing: function(editor, element) {\n            // table and image resizing is natively supported in IE\n            // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n            // Enable custom resize handlers for FF too\n            if (!browser.msie) {\n                if($(element).is(TABLE)) {\n                    editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                } else if($(element).is(IMG)) {\n                    editor.elementResizing = new ImageResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                    editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            }\n        }\n    });\n\n    ElementResizingFactory.current = new ElementResizingFactory();\n\n    extend(Editor, {\n        TableResizing: TableResizing,\n        ImageResizing: ImageResizing,\n        ElementResizing: ElementResizing,\n        ElementResizingFactory: ElementResizingFactory\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n   define('editor/table-wizard/table-wizard-command',[\"./../plugins/tables\"], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    Command = Editor.Command;\n\nvar tableFormatFinder = new Editor.BlockFormatFinder([{tags:[\"table\"]}]);\nvar cellsFormatFinder = new Editor.BlockFormatFinder([{tags:[\"td\",\"th\"]}]);\nvar reUnit = /([a-z]+|%)$/i;\n\nvar COL = \"col\";\nvar ROW = \"row\";\nvar COLGROUP = \"colgroup\";\nvar SCOPE = \"scope\";\nvar COL_INDEX = \"col-index\";\nvar TH = \"th\";\nvar TD = \"td\";\nvar THEAD = \"thead\";\nvar HEADERS = \"headers\";\nvar TABLE = \"table\";\n\nvar TableWizardCommand = Command.extend({\n    exec: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var range = cmd.range = cmd.lockRange();\n        var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n        var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n        var options = {\n            visible: false,\n            messages: editor.options.messages,\n            closeCallback: $.proxy(cmd.onDialogClose, cmd),\n            table: cmd.parseTable(selectedTable, selectedCells),\n            dialogOptions: editor.options.dialogOptions,\n            isRtl: kendo.support.isRtl(editor.wrapper)\n        };\n\n        var dialog = new Editor.TableWizardDialog(options);\n        dialog.open();\n    },\n\n    onDialogClose: function(data) {\n        var cmd = this;\n        cmd.releaseRange(cmd.range);\n\n        if (data) { //Ok button pressed\n            if (cmd.options.insertNewTable) {\n                cmd.insertTable(cmd.createNewTable(data));\n            } else {\n                cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n            }\n        }\n    },\n    releaseRange: function(range) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        dom.windowFromDocument(doc).focus();\n        Command.fn.releaseRange.call(cmd, range);\n    },\n    insertTable: function(table) {\n        var range = this.range;\n\n        range.insertNode(table);\n        range.collapse(true);\n        this.editor.selectRange(range);\n\n        this._ensureFocusableAfterTable(table);\n    },\n    _ensureFocusableAfterTable: function (table) {\n        var siblingNodes = $(table).parent().contents();\n        var lastSiblingIndex = siblingNodes.length - 1;\n        var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n        while(lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n            lastSiblingIndex -= 1;\n            lastSibling = siblingNodes.get(lastSiblingIndex);\n        }\n\n        if(lastSibling === table) {\n            dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n        }\n    },\n    updateTable: function(data, table, selectedCells) {\n        var cmd = this;\n        var tableRows = $(table.rows).toArray();\n        var tableProp = data.tableProperties;\n        var rows = tableProp.rows;\n        var tHead = table.tHead;\n        var last = cmd._lastInCollection;\n        var lastSelectedRow, cellProp;\n\n        //Leave only first selected cell\n        while (selectedCells.length > 1) {\n            selectedCells.pop();\n        }\n\n        lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n        cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n        if (tableRows.length < rows) {\n            cmd._addRows(lastSelectedRow, rows, tableRows);\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n        cmd._updateTableProperties(table, tableProp);\n\n        cellProp = data.cellProperties;\n        if (selectedCells[0]) {\n            dom.attr(selectedCells[0], {id: cellProp.id || null});\n        }\n        (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell){\n            cmd._updateCellProperties(cell, cellProp);\n        });\n\n        cmd._updateCaption(table, tableProp);\n\n        if(tHead) {\n            cmd._updateHeadersWithThead(table, data);\n        } else {\n            cmd._updateHeadersNoThead(table, data);\n        }\n\n        cmd._updateHeaderAssociates(table, tableProp);\n        dom.clearTableMappings(table, COL_INDEX);\n    },\n    _isHeadingRow: function(row) {\n        return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n    },\n    _isHeadingCell: function(cell) {\n        return dom.is(cell, TH);\n    },\n    cellsWithHeadersAssociated: function(table) {\n        var cells = $(table.rows).children();\n        var headingIds = [];\n        var checkHeader = function(header){\n            return headingIds.indexOf(header) > -1;\n        };\n\n        cells.each(function(c, cell) {\n            if (cell.id && dom.is(cell, TH)) {\n                headingIds.push(cell.id);\n            }\n        });\n\n        var associatedCells = cells.filter(function(c, cell) {\n            var headersAttr = cell.getAttribute(HEADERS);\n            var headersArray;\n\n            if(headersAttr && !dom.is(cell, TH)) {\n                headersArray = headersAttr.split(\" \");\n\n                if(headersArray && headersArray.length > 0) {\n                    return headersArray.some(checkHeader);\n                }\n            }\n\n            return false;\n        });\n\n        return !!associatedCells.length;\n    },\n    _insertCells: function(count, row, index) {\n        index = isNaN(index) ? -1 : index;\n        for (var i = 0, cell; i < count; i++) {\n            cell = row.insertCell(index);\n            cell.innerHTML = \"&nbsp;\";\n        }\n    },\n    _deleteTableRows: function(rows, count){\n        for (var i = 0, row, rowParent; i < count; i++) {\n            row = rows.pop();\n            rowParent = row.parentNode;\n            rowParent.removeChild(row);\n            if (!rowParent.rows.length) {\n                dom.remove(rowParent);\n            }\n        }\n    },\n    createNewTable: function(data) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        var tableProp = data.tableProperties;\n        var table = dom.create(doc, TABLE);\n        var rowIndex = 0;\n        var thead;\n\n        cmd._updateTableProperties(table, tableProp);\n        cmd._updateCaption(table, tableProp);\n\n        if(tableProp.headerRows && tableProp.headerRows > 0) {\n            thead = table.createTHead();\n            cmd._createTableRows(data, thead, rowIndex, true);\n            rowIndex += tableProp.headerRows;\n        }\n\n        var tbody = table.createTBody();\n        cmd._createTableRows(data, tbody, rowIndex, false);\n\n        dom.reMapTableColumns(table, COL_INDEX);\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            dom.associateWithIds(table);\n        } else if(tableProp.cellsWithHeaders === \"scope\") {\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        }\n\n        dom.clearTableMappings(table, COL_INDEX);\n\n        return table;\n    },\n    _createTableRows: function(data, container, initialIndex, headerRows) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var cellProp = data.cellProperties;\n        var columns = tableProp.columns;\n        var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n        var cellPropToAll = cellProp.selectAllCells;\n        var headerColumns = tableProp.headerColumns;\n\n        for (var r = initialIndex, row; r < rows; r++) {\n            row = container.insertRow();\n\n            for (var c = 0, cell; c < columns; c++) {\n                if(headerRows || headerColumns > c) {\n                    cell = document.createElement(TH);\n                } else {\n                    cell = document.createElement(TD);\n                }\n\n                row.appendChild(cell);\n                cell.innerHTML = \"&nbsp;\";\n                if (r === 0 && c === 0 && cellProp.id) {\n                    cell.id = cellProp.id;\n                }\n                cmd._updateCellProperties(cell, (cellPropToAll || (r === 0 && c === 0)) ? cellProp : {});\n            }\n        }\n    },\n    _addRows: function(lastSelectedRow, rows, tableRows) {\n        var cmd = this;\n        var rowIndex = $(lastSelectedRow).index();\n        var cellsLength = lastSelectedRow.cells.length;\n        var newRowsCount = rows - tableRows.length;\n        var parent = lastSelectedRow.parentNode;\n        var row;\n\n        while (newRowsCount) {\n            row = parent.insertRow(rowIndex + 1);\n            cmd._insertCells(cellsLength - row.cells.length, row);\n            newRowsCount--;\n        }\n    },\n    _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n        var cmd = this;\n        var last = cmd._lastInCollection;\n        var firstRowLastCell = last(tableRows[0].cells);\n        var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n        if (numberOfColumns > columns) {\n            $(tableRows).each(function(i, row){\n                var lastCurrentCell = last(row.cells);\n                var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                while(rowColumns > columns) {\n                    if(lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                        lastCurrentCell.colSpan -= 1;\n                    } else {\n                        row.deleteCell(-1);\n                    }\n\n                    lastCurrentCell = last(row.cells);\n                    rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                }\n            });\n        }\n\n        if (numberOfColumns < columns) {\n            var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n            });\n        }\n    },\n    _updateTableProperties: function(table, data){\n        var style = this._getStylesData(data);\n        dom.attr(table, {\n            cellSpacing: data.cellSpacing || null,\n            cellPadding: data.cellPadding || null,\n            className: data.className || null,\n            id: data.id || null,\n            summary: data.summary || null,\n            style: style || null\n        });\n        $(table).addClass(\"k-table\");\n    },\n    _updateCellProperties: function(cell, data) {\n        var style = this._getStylesData(data);\n        style.padding = data.cellPadding || null;\n        style.margin = data.cellMargin || null;\n        dom.attr(cell, {\n            style: style || null,\n            className: data.className || null\n        });\n    },\n    _updateCaption: function(table, data){\n        if (table.caption && !data.captionContent) {\n            table.deleteCaption();\n        } else if (data.captionContent) {\n            var caption = table.createCaption();\n            caption.innerHTML = data.captionContent;\n            var alignment = this._getAlignmentData(data.captionAlignment);\n            dom.attr(caption, {\n                style: {\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign\n                }\n            });\n        }\n    },\n    _updateHeadersNoThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var rows = table.rows;\n        var row, cells, cell, i, j;\n\n        for(i = 0; i < rows.length; i++) {\n            row = rows[i];\n            cells = row.cells;\n\n            for(j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                if(!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                    dom.changeTag(cell, TH, false);\n                } else if(cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                }\n            }\n        }\n    },\n    _updateHeadersWithThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var thead = table.tHead;\n        var rowIndex = 0;\n        var tbody = table.tBodies[0];\n        var row, cell, i;\n\n        if (!tbody) {\n            tbody = table.createTBody();\n        }\n\n        if(tableProp.headerRows && tableProp.headerRows > 0) {\n            if (!thead) {\n                thead = table.createTHead();\n            }\n\n            while(thead.rows.length < tableProp.headerRows) {\n                thead.appendChild(tbody.rows[0]);\n            }\n\n            while(thead.rows.length > tableProp.headerRows) {\n                tbody.appendChild(thead.rows[0]);\n            }\n\n            cmd._swapToHeaderCells(thead);\n        } else if(thead) {\n            while(thead.rows.length > 0) {\n                tbody.appendChild(thead.rows[thead.rows.length - 1]);\n            }\n\n            table.deleteTHead();\n        }\n\n        while(tbody.rows.length > rowIndex) {\n            row = tbody.rows[rowIndex];\n            for(i = 0; i < row.cells.length; i++) {\n                cell = row.cells[i];\n                if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                } else if(!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TH, false);\n                }\n            }\n            rowIndex += 1;\n        }\n    },\n    _updateHeaderAssociates: function(table, tableProp) {\n        var cmd = this;\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            if(!cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeScopes(table);\n            }\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            if(cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            }\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        } else {\n            if(cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            } else {\n                cmd._removeScopes(table);\n            }\n        }\n    },\n    _addScopes: function(table, headerRows, headerCols) {\n        var rows = table.rows;\n        var i, j, row, cell;\n\n        for(i = 0; i < rows.length; i++) {\n            row = rows[i];\n\n            for(j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (i < headerRows) {\n                    cell.setAttribute(SCOPE, COL);\n                } else if(cell.getAttribute(COL_INDEX) < headerCols) {\n                    cell.setAttribute(SCOPE, ROW);\n                }\n            }\n        }\n    },\n    _removeScopes: function(table) {\n        $(table).find(TH).removeAttr(SCOPE);\n        $(table).find(COL).remove();\n        $(table).find(COLGROUP).remove();\n    },\n    _removeAssociates: function(table) {\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n    },\n    _swapToHeaderCells: function(thead) {\n        var tds = $(thead).find(\"td\");\n        var swapCell = function(index, cell) {\n            dom.changeTag(cell, TH, false);\n        };\n        tds.each(swapCell);\n    },\n    _getStylesData: function(data) {\n        var alignment = this._getAlignmentData(data.alignment);\n        var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n        return {\n            width: data.width ? data.width + data.widthUnit : null,\n            height: data.height ? data.height + data.heightUnit : null,\n            textAlign: alignment.textAlign,\n            verticalAlign: alignment.verticalAlign,\n            backgroundColor: data.bgColor || \"\",\n            borderWidth: data.borderWidth,\n            borderStyle: data.borderStyle,\n            borderColor: data.borderColor || \"\",\n            borderCollapse: data.collapseBorders ? \"collapse\" : null,\n            whiteSpace: whiteSpace\n        };\n    },\n    _getAlignmentData: function(alignment) {\n        var textAlign = \"\";\n        var verticalAlign = textAlign;\n\n        if (alignment) {\n            if (alignment.indexOf(\" \") != -1) {\n                var align = alignment.split(\" \");\n                textAlign = align[0];\n                verticalAlign = align[1];\n            } else {\n                textAlign = alignment;\n            }\n        }\n        return {textAlign: textAlign, verticalAlign: verticalAlign};\n    },\n    parseTable: function(table, selectedCells) {\n        if (!table) {\n            return { tableProperties: {}, selectedCells: [] };\n        }\n\n        var cmd = this;\n        var tStyle = table.style;\n        var rows = table.rows;\n        var caption = table.caption;\n        var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n        captionClone.find(\".k-marker\").remove();\n\n        var cssClass = table.className;\n        cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n        cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n        cssClass = cssClass.replace(/^k-table$/, \"\");\n\n        var tableAlignment = cmd._getAlignment(table, true);\n        var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n        var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n        var cellsWithHeaders;\n        if(cmd.cellsWithHeadersAssociated(table)) {\n            cellsWithHeaders = \"ids\";\n        } else if ($(table).find(\"th[scope]\").length > 0) {\n            cellsWithHeaders = \"scope\";\n        } else {\n            cellsWithHeaders = \"none\";\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        var numberOfColumns = dom._getNumberOfColumns(table);\n        var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n        dom.clearTableMappings(table, COL_INDEX);\n\n        var tableJson = {\n            tableProperties: {\n                width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                columns: numberOfColumns,\n                rows: rows.length,\n                widthUnit: cmd._getUnit(tStyle.width),\n                heightUnit: cmd._getUnit(tStyle.height),\n                cellSpacing: table.cellSpacing,\n                cellPadding: table.cellPadding,\n                alignment: tableAlignment.textAlign,\n                bgColor: tStyle.backgroundColor || table.bgColor,\n                className: cssClass,\n                id: table.id,\n                borderWidth: tStyle.borderWidth || table.border,\n                borderColor: tStyle.borderColor,\n                borderStyle: tStyle.borderStyle || \"\",\n                collapseBorders: !!tStyle.borderCollapse,\n                summary: table.summary,\n                captionContent: caption ? captionClone.html() : \"\",\n                captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                headerRows: numberOfHeaderRows,\n                headerColumns: numberOfHeaderColumns,\n                cellsWithHeaders: cellsWithHeaders\n            },\n            selectedCells: []\n        };\n\n        tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n        return tableJson;\n    },\n    parseTableRows: function(rows, selectedCells, tableJson) {\n        var cmd = this;\n        var data = [], row, rowData, cells, cell, cellData;\n        for (var i = 0; i < rows.length; i++) {\n            row = rows[i];\n            rowData = {cells: []};\n            cells = row.cells;\n            data.push(rowData);\n            for (var j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                cellData = cmd.parseCell(cell);\n                if ($.inArray(cell, selectedCells) != -1) {\n                    tableJson.selectedCells.push(cellData);\n                }\n                rowData.cells.push(cellData);\n            }\n        }\n        return data;\n    },\n    parseCell: function(cell) {\n        var cmd = this;\n        var cStyle = cell.style;\n        var alignment = cmd._getAlignment(cell);\n        alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n        var data = {\n            width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n            height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n            widthUnit: cmd._getUnit(cStyle.width),\n            heightUnit: cmd._getUnit(cStyle.height),\n            cellMargin: cStyle.margin,\n            cellPadding: cStyle.padding,\n            alignment: alignment,\n            bgColor: cStyle.backgroundColor || cell.bgColor,\n            className: cell.className,\n            id: cell.id,\n            borderWidth: cStyle.borderWidth || cell.border,\n            borderColor: cStyle.borderColor,\n            borderStyle: cStyle.borderStyle,\n            wrapText: cStyle.whiteSpace != \"nowrap\"\n        };\n\n        return data;\n    },\n    _getAlignment: function(element, horizontalOnly) {\n        var style = element.style;\n        var hAlign = style.textAlign || element.align || \"\";\n        if (horizontalOnly) {\n            return {textAlign: hAlign};\n        }\n        var vAlign = style.verticalAlign || element.vAlign || \"\";\n        if(hAlign && vAlign) {\n            return {textAlign: hAlign, verticalAlign: vAlign};\n        }\n        if(!hAlign && vAlign) {\n            return {textAlign: \"left\", verticalAlign: vAlign};\n        }\n        if(hAlign && !vAlign) {\n            return {textAlign: hAlign, verticalAlign: \"top\"};\n        }\n        return {textAlign: \"\", verticalAlign: \"\"};\n    },\n    _getUnit: function(value) {\n        var unit = (value || \"\").match(reUnit);\n        return unit ? unit[0] : \"px\";\n    },\n    _selectedTable: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return tableFormatFinder.findSuitable(nodes)[0];\n    },\n    _selectedCells: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return cellsFormatFinder.findSuitable(nodes);\n    },\n    _lastInCollection: function(collection) {\n        return collection[collection.length - 1];\n    }\n});\n\nvar TableWizardTool = Editor.Tool.extend({\n    command: function (options) {\n        options.insertNewTable = this.options.insertNewTable;\n        return new TableWizardCommand(options);\n    }\n});\n\nvar TableWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n        if (isFormatted === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n    }\n});\n\nkendo.ui.editor.TableWizardTool = TableWizardTool;\nkendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\nregisterTool(\"tableWizard\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Table Wizard\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) {\n    (a3 || a2)(); });\n(function(f, define) {\n   define('editor/table-wizard/table-wizard-dialog',[\"./table-wizard-command\", \"../../kendo.tabstrip\"], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    numericTextBoxSettings = { format: \"0\", min: 0 },\n    units = [\"px\", \"em\"],\n    borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\nvar DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\nvar tableAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-middle-left\",\n        value: \"left\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-center\",\n        value: \"center\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-right\",\n        value: \"right\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar cellAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-left\",\n        value: \"left middle\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-center\",\n        value: \"center middle\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-right\",\n        value: \"right middle\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar accessibilityAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar dialogTemplate =\n    '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' +\n        '<div class=\"k-edit-form-container\">' +\n            '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n                '<ul>' +\n                    '<li class=\"k-state-active\">#= messages.tableTab #</li>' +\n                    '<li>#= messages.cellTab #</li>' +\n                    '<li>#= messages.accessibilityTab #</li>' +\n                '</ul>' +\n                '<div id=\"k-table-properties\">' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-width\">#= messages.width #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-width\" />' +\n                        '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-height\">#= messages.height #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-height\" />' +\n                        '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-columns\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-rows\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-bg\">#= messages.background #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-table-bg\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-id\">#= messages.id #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-border-width\">#= messages.border #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-border-width\" />' +\n                        '<input id=\"k-editor-border-color\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-border-style\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">&nbsp;</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' +\n                    '</div>' +\n                '</div>' +\n\n                '<div id=\"k-cell-properties\">' +\n\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-width\">#= messages.width #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-width\" />' +\n                        '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-height\">#= messages.height #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-height\" />' +\n                        '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-bg\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-id\">#= messages.id #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' +\n                        '<input id=\"k-editor-cell-border-color\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-border-style\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">&nbsp;</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' +\n                    '</div>' +\n                '</div>' +\n\n                '<div id=\"k-accessibility-properties\">' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-header-rows\">#= messages.headerRows #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-header-rows\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-header-columns\">#= messages.headerColumns #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-header-columns\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-table-caption\" class=\"k-input-inner\" type=\"text\"/></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"><textarea id=\"k-editor-accessibility-summary\" rows=\"5\" class=\"k-input-inner k-editor-accessibility-summary\" placeholder=\"#= messages.tableSummaryPlaceholder #\"></textarea></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cells-headers\">#= messages.associateCellsWithHeaders #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<select id=\"k-editor-cells-headers\">' +\n                            '<option value=\"none\">#= messages.associateNone #</option>' +\n                            '<option value=\"scope\">#= messages.associateScope #</option>' +\n                            '<option value=\"ids\">#= messages.associateIds #</option>' +\n                        '</select>' +\n                    '</div>' +\n                '</div>' +\n                '</div>' +\n                '<div class=\"k-edit-buttons\">' +\n                '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-dialog-ok\"><span class=\"k-button-text\">#= messages.dialogOk #</span></button>' +\n                '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-dialog-close\"><span class=\"k-button-text\">#= messages.dialogCancel #</span></button>' +\n            '</div>' +\n        '</div>' +\n    '</div>';\n\nvar TableWizardDialog = kendo.Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n    open: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.title = messages.tableWizard;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        that._initTabStripComponent(element);\n        that._initTableViewComponents(element, tableData);\n        that._initCellViewComponents(element, tableData);\n        that._initAccessibilityViewComponents(element, tableData);\n\n        dialog.center();\n        dialog.open();\n\n        if(isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n\n    _initTabStripComponent: function(element){\n        var components = this.components = {};\n        components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n            animation: false\n        }).data(\"kendoTabStrip\");\n    },\n\n    collectDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectTableViewValues(data);\n        that._collectCellViewValues(data);\n        that._collectAccessibilityViewValues(data);\n    },\n\n    _collectTableViewValues: function(tableData) {\n        var tableView = this.components.tableView;\n        var tableProperties = tableData.tableProperties;\n        tableProperties.width = tableView.width.value();\n        tableProperties.widthUnit = tableView.widthUnit.value();\n        tableProperties.height = tableView.height.value();\n        tableProperties.columns = tableView.columns.value();\n        tableProperties.rows = tableView.rows.value();\n        tableProperties.heightUnit = tableView.heightUnit.value();\n        tableProperties.cellSpacing = tableView.cellSpacing.value();\n        tableProperties.cellPadding = tableView.cellPadding.value();\n        tableProperties.alignment = tableView.alignment.value();\n        tableProperties.bgColor = tableView.bgColor.value();\n        tableProperties.className = tableView.className.value;\n        tableProperties.id = tableView.id.value;\n        tableProperties.borderWidth = tableView.borderWidth.value();\n        tableProperties.borderColor = tableView.borderColor.value();\n        tableProperties.borderStyle = tableView.borderStyle.value();\n        tableProperties.collapseBorders = tableView.collapseBorders.checked;\n    },\n\n    _collectCellViewValues: function(table) {\n        var cellData = table.cellProperties = {};\n        var cellView = this.components.cellView;\n\n        cellData.selectAllCells = cellView.selectAllCells.checked;\n        cellData.width = cellView.width.value();\n        cellData.widthUnit = cellView.widthUnit.value();\n        cellData.height = cellView.height.value();\n        cellData.heightUnit = cellView.heightUnit.value();\n        cellData.cellMargin = cellView.cellMargin.value();\n        cellData.cellPadding = cellView.cellPadding.value();\n        cellData.alignment = cellView.alignment.value();\n        cellData.bgColor = cellView.bgColor.value();\n        cellData.className = cellView.className.value;\n        cellData.id = cellView.id.value;\n        cellData.borderWidth = cellView.borderWidth.value();\n        cellData.borderColor = cellView.borderColor.value();\n        cellData.borderStyle = cellView.borderStyle.value();\n        cellData.wrapText = cellView.wrapText.checked;\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / table.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n   _collectAccessibilityViewValues: function(table) {\n        var tableProperties = table.tableProperties;\n        var accessibilityView = this.components.accessibilityView;\n        tableProperties.captionContent = accessibilityView.captionContent.value;\n        tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n        tableProperties.summary = accessibilityView.summary.value;\n        tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n\n        tableProperties.headerRows = accessibilityView.headerRows.value();\n        tableProperties.headerColumns = accessibilityView.headerColumns.value();\n    },\n    _addUnit: function(units, value){\n        if (value && $.inArray(value, units) == -1) {\n            units.push(value);\n        }\n    },\n    _initTableViewComponents: function(element, table) {\n        var that = this;\n        var components = that.components;\n        var tableView = components.tableView = {};\n        var tableProperties = table.tableProperties = table.tableProperties || {};\n        tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n\n        var onColumnsNumberChange = function(args) {\n            var accessibilityView = that.components.accessibilityView;\n            var headerColumnsNumeric = accessibilityView.headerColumns;\n            var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n            var numberOfColumns = args.sender.value();\n\n            if(numberOfColumns < currentNumberOfColumnsHeaders) {\n                headerColumnsNumeric.value(numberOfColumns);\n            }\n\n            headerColumnsNumeric.max(numberOfColumns);\n        };\n\n        var onRowsNumberChange = function(args) {\n            var accessibilityView = that.components.accessibilityView;\n            var headerRowsNumeric = accessibilityView.headerRows;\n            var currentNumberOfRowHeaders = headerRowsNumeric.value();\n            var numberOfRows = args.sender.value();\n\n            if(numberOfRows < currentNumberOfRowHeaders) {\n                headerRowsNumeric.value(numberOfRows);\n            }\n\n            headerRowsNumeric.max(numberOfRows);\n        };\n\n        that._addUnit(units, tableProperties.widthUnit);\n        that._addUnit(units, tableProperties.heightUnit);\n\n        that._initNumericTextbox(element.find(\"#k-editor-table-width\"), \"width\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-height\"), \"height\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-columns\"), \"columns\", tableProperties, tableView, {min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onColumnsNumberChange});\n        that._initNumericTextbox(element.find(\"#k-editor-table-rows\"), \"rows\", tableProperties, tableView, {min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onRowsNumberChange});\n        that._initDropDownList(element.find(\"#k-editor-table-width-type\"), \"widthUnit\", tableProperties, tableView, units);\n        that._initDropDownList(element.find(\"#k-editor-table-height-type\"), \"heightUnit\", tableProperties, tableView, units);\n        that._initNumericTextbox(element.find(\"#k-editor-table-cell-spacing\"), \"cellSpacing\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-cell-padding\"), \"cellPadding\", tableProperties, tableView);\n        that._initTableAlignmentDropDown(element.find(\"#k-editor-table-alignment\"), tableProperties);\n        that._initColorPicker(element.find(\"#k-editor-table-bg\"), \"bgColor\", tableProperties, tableView);\n        that._initInput(element.find(\"#k-editor-css-class\"), \"className\", tableProperties, tableView);\n        that._initInput(element.find(\"#k-editor-id\"), \"id\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-border-width\"), \"borderWidth\", tableProperties, tableView);\n        that._initColorPicker(element.find(\"#k-editor-border-color\"), \"borderColor\", tableProperties, tableView);\n        that._initBorderStyleDropDown(element.find(\"#k-editor-border-style\"), \"borderStyle\", tableProperties, tableView, borderStyles);\n        that._initCheckbox(element.find(\"#k-editor-collapse-borders\"), \"collapseBorders\", tableProperties, tableView);\n    },\n\n    _initCellViewComponents: function(element, table) {\n        var components = this.components;\n        var cellView = components.cellView = {};\n        table.selectedCells = table.selectedCells = table.selectedCells || [];\n        var cellProperties = table.selectedCells[0] || {borderStyle: \"\", wrapText: true};\n        this._addUnit(units, cellProperties.widthUnit);\n        this._addUnit(units, cellProperties.heightUnit);\n\n        this._initCheckbox(element.find(\"#k-editor-selectAllCells\"), \"selectAllCells\", table.tableProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-width\"), \"width\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-height\"), \"height\", cellProperties, cellView);\n        this._initDropDownList(element.find(\"#k-editor-cell-width-type\"), \"widthUnit\", cellProperties, cellView, units);\n        this._initDropDownList(element.find(\"#k-editor-cell-height-type\"), \"heightUnit\", cellProperties, cellView, units);\n        this._initNumericTextbox(element.find(\"#k-editor-table-cell-margin\"), \"cellMargin\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-table-cells-padding\"), \"cellPadding\", cellProperties, cellView);\n        this._initCellAlignmentDropDown(element.find(\"#k-editor-cell-alignment\"), cellProperties);\n        this._initColorPicker(element.find(\"#k-editor-cell-bg\"), \"bgColor\", cellProperties, cellView);\n        this._initInput(element.find(\"#k-editor-cell-css-class\"), \"className\", cellProperties, cellView);\n        this._initInput(element.find(\"#k-editor-cell-id\"), \"id\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-border-width\"), \"borderWidth\", cellProperties, cellView);\n        this._initColorPicker(element.find(\"#k-editor-cell-border-color\"), \"borderColor\", cellProperties, cellView);\n        this._initBorderStyleDropDown(element.find(\"#k-editor-cell-border-style\"), \"borderStyle\", cellProperties, cellView, borderStyles);\n        this._initCheckbox(element.find(\"#k-editor-wrap-text\"), \"wrapText\", cellProperties, cellView);\n    },\n\n    _initAccessibilityViewComponents: function(element, table) {\n        var components = this.components;\n        var accessibilityView = components.accessibilityView = {};\n        var tableProperties = table.tableProperties;\n\n        this._initInput(element.find(\"#k-editor-table-caption\"), \"captionContent\", tableProperties, accessibilityView);\n        this._initAccessibilityAlignmentDropDown(element.find(\"#k-editor-accessibility-alignment\"), tableProperties);\n        this._initInput(element.find(\"#k-editor-accessibility-summary\"), \"summary\", tableProperties, accessibilityView);\n        this._initAssociationDropDown(element.find(\"#k-editor-cells-headers\"), \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n        this._initNumericTextbox(element.find(\"#k-editor-table-header-rows\"), \"headerRows\", tableProperties, accessibilityView, { max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n        this._initNumericTextbox(element.find(\"#k-editor-table-header-columns\"), \"headerColumns\", tableProperties, accessibilityView, { max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n    },\n\n    _initNumericTextbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoNumericTextBox(\n                settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n            ).data(\"kendoNumericTextBox\");\n        if (property in data) {\n            component.value(parseInt(data[property], 10));\n        }\n    },\n\n    _initDropDownList: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource,\n            optionLabel: this.options.messages.borderNone\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initTableAlignmentDropDown: function (element, data) {\n        var messages = this.options.messages;\n        var tableView =  this.components.tableView;\n        var dataSource = tableAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeft;\n        dataSource[1].tooltip = messages.alignCenter;\n        dataSource[2].tooltip = messages.alignRight;\n        dataSource[3].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n    },\n\n    _initCellAlignmentDropDown: function (element, data) {\n        var messages = this.options.messages;\n        var cellView =  this.components.cellView;\n        var dataSource = cellAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftMiddle;\n        dataSource[4].tooltip = messages.alignCenterMiddle;\n        dataSource[5].tooltip = messages.alignRightMiddle;\n        dataSource[6].tooltip = messages.alignLeftBottom;\n        dataSource[7].tooltip = messages.alignCenterBottom;\n        dataSource[8].tooltip = messages.alignRightBottom;\n        dataSource[9].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n    },\n\n    _initAccessibilityAlignmentDropDown: function (element, data) {\n        var messages = this.options.messages;\n        var accessibilityView =  this.components.accessibilityView;\n        var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftBottom;\n        dataSource[4].tooltip = messages.alignCenterBottom;\n        dataSource[5].tooltip = messages.alignRightBottom;\n        dataSource[6].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n    },\n    _initAlignmentDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-align').css('width', '110px');\n        this._setComponentValue(component, data, name);\n    },\n    _initAssociationDropDown: function(element, name, settings, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        this._setComponentValue(component, data, name);\n    },\n    _setComponentValue: function(component, data, property){\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initColorPicker: function(element, property, data, storage) {\n        var component = storage[property] =\n            element.kendoColorPicker({buttons: false, clearButton: true}).data(\"kendoColorPicker\");\n\n        if (data[property]) {\n            component.value(data[property]);\n        }\n    },\n    _initInput: function(element, property, data, storage) {\n        var component = storage[property] = element.get(0);\n        if (property in data) {\n            component.value = data[property];\n        }\n    },\n\n    _initCheckbox: function(element, property, data, storage) {\n        var component = storage[property] = element.get(0);\n        if (property in data) {\n            component.checked = data[property];\n        }\n    },\n\n    destroy: function() {\n        this._destroyComponents(this.components.tableView);\n        this._destroyComponents(this.components.cellView);\n        this._destroyComponents(this.components.accessibilityView);\n        this._destroyComponents(this.components);\n\n        delete this.components;\n    },\n    _destroyComponents: function(components) {\n        for (var widget in components) {\n            if (components[widget].destroy) {\n                components[widget].destroy();\n            }\n            delete components[widget];\n        }\n    },\n\n    _dialogTemplate: function(messages) {\n        return kendo.template(dialogTemplate)({ messages: messages });\n    }\n});\n\nkendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) {\n    (a3 || a2)(); });\n(function(f, define){\n    define('kendo.editor',[\n        \"./kendo.combobox\", \"./kendo.dropdownlist\", \"./kendo.resizable\", \"./kendo.window\", \"./kendo.colorpicker\", \"./kendo.imagebrowser\", \"./kendo.numerictextbox\",\n\n        \"./util/undoredostack\",\n        \"./editor/main\",\n        \"./editor/dom\",\n        \"./editor/serializer\",\n        \"./editor/range\",\n        \"./editor/command\",\n        \"./editor/components\",\n        \"./editor/toolbar\",\n        \"./editor/immutables\",\n\n        \"./editor/plugins/viewhtml\",\n        \"./editor/plugins/link\",\n        \"./editor/plugins/lists\",\n        \"./editor/plugins/formatting\",\n        \"./editor/plugins/image\",\n        \"./editor/plugins/import\",\n        \"./editor/plugins/insert\",\n        \"./editor/plugins/export\",\n        \"./editor/plugins/indent\",\n        \"./editor/plugins/linebreak\",\n        \"./editor/plugins/format\",\n        \"./editor/plugins/inlineformat\",\n        \"./editor/plugins/formatblock\",\n        \"./editor/plugins/file\",\n        \"./editor/plugins/tables\",\n        \"./editor/plugins/clipboard\",\n        \"./editor/plugins/keyboard\",\n        \"./editor/plugins/exportpdf\",\n        \"./editor/plugins/print\",\n        \"./editor/plugins/formatpainter\",\n\n        \"./editor/resizing/column-resizing\",\n        \"./editor/resizing/row-resizing\",\n        \"./editor/resizing/element-resizing\",\n        \"./editor/resizing/element-resize-handle\",\n        \"./editor/table-wizard/table-wizard-command\",\n        \"./editor/table-wizard/table-wizard-dialog\"\n    ], f);\n})(function(){\n\n    var __meta__ = { // jshint ignore:line\n        id: \"editor\",\n        name: \"Editor\",\n        category: \"web\",\n        description: \"Rich text editor component\",\n        depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\" ],\n        features: [ {\n            id: \"editor-imagebrowser\",\n            name: \"Image Browser\",\n            description: \"Support for uploading and inserting images\",\n            depends: [ \"imagebrowser\" ]\n        }, {\n            id: \"editor-resizable\",\n            name: \"Resize handle\",\n            description: \"Support for resizing the content area via a resize handle\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"editor-tablewizard\",\n            name: \"Table wizard dialog\",\n            description: \"Support for table properties configuration\",\n            depends: [ \"tabstrip\", \"button\", \"numerictextbox\" ]\n        }, {\n            id: \"editor-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Editor content as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }]\n    };\n\n\treturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","window","jQuery","undefined","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","REFRESH_INTERVAL","DEFAULT_LANGUAGE","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","iconTextButtonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","replace","retrieveComments","messages","supportedBrowser","ios","flatVersion","document","documentElement","toolGroups","basic","alignment","lists","indenting","formatPainter","links","tables","element","that","value","editorNS","editor","toolbarContainer","toolbarOptions","type","domElement","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","id","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","style","height","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","defaultValue","trim","deserializedRoot","Serializer","htmlToDom","deserialization","getAllComments","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","resize","notify","setOptions","_initializePlaceholder","_togglePlaceholder","show","body","$body","placeholder","toggleClass","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","resizable","isResizable","isPlainObject","draggableElement","insertAfter","kendoResizable","start","currentTarget","initialSize","last","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","resizableWidget","getKendoResizable","draggable","ignore","_initializeElementResizing","ElementResizingFactory","current","create","_showElementResizeHandlesProxy","_showElementResizeHandles","bind","_destroyElementResizing","elementResizing","destroy","unbind","parentNode","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","width","h","editorWrap","editArea","css","appendTo","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","lang","hide","title","editAreaTitle","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","getElementsByTagName","getAttribute","open","write","isRtl","edge","chrome","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","NS","eventNames","_handlers","t","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","mouseover dragenter","htmlHeight","parentElement","target","nodeName","_cachedHeight","mouseout dragleave drop contextmenu","restoreHeight","range","keyCode","BACKSPACE","DELETE","F10","preventPopupHide","preventDefault","LEFT","RIGHT","left","container","offset","direction","next","nextChar","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","createRange","selectNode","cut copy paste drop dragover","focusin","hasAttribute","focusout","active","toolbarContainerElement","get","contains","focused","removeClass","$head","head","immutables","Immutables","parents","stopPropagation","gecko","which","is","tagName","toolsFromShortcut","o","cmd","changesContent","refresh","_destroyResizings","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","emptyFolder","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","units","cellSpacing","cellPadding","cellMargin","background","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","msie","tempInput","_uploadWidget","state","finder","RangeUtils","textNodes","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","domToXhtml","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","activeElement","scrollTop","scrollHeight","clientHeight","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","async","change","managesUndoRedo","Tool","plugin","initialize","unselectable","aria-label","commandArguments","noop","UndoTool","nodes","emptyElementContent","key","ctrl","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","items","obj","len","empty","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","normalize","node","version","parent","firstChild","prev","nextSibling","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","newNode","cloneNode","denormalizedText","temp","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","el","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","windowHeight","innerHeight","elementTop","elementHeight","marker","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","wrap","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","each","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","count","arguments","paths","minPathLength","output","ancestors","first","j","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","removeAttr","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","theadRows","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","timestamp","Date","getTime","row","col","colspan","rowspan","k","l","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","numberOfCols","currentIndex","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","thead","number","self","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","TD","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ols","ol","originalStart","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tag","tagMap","end","k:script","skipEncoding","specifiedAttributes","semanticAttributes","textDecoration","font","fontFamily","size","strong","em","b","u","item","styleObj","splice","face","script","cssProperties","property","properties","lastIndex","styleAttr","$node","htmlEncode","skip","childNode","isEmptyBomNode","mapper","previous","jqNode","serialize","hasClass","textOnly","childrenCount","textChild","runCustom","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","selectBox","view","dataSource","select","decorate","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","compareBoundaries","startAncestor","endAncestor","isInvalidRange","ex","fromNode","_current","_next","_end","hasNext","traverse","callback","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","duplicate","right","textOffset","isData","anchorNode","anchorParent","cursor","cursorNode","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","editableTextNodes","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","toolsToBeUpdated","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","expandImmutablesIn","startImmutableParent","endImmutableParent","immutablesContext","editableNodes","randomId","chars","round","random","serialized","replaceWith","deletingKey","updateToolOptions","_initOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","finishUpdate","endRestorePoint","GenericCommand","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-list-roman-upper","k-i-list-roman-lower","k-i-import","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-table-position-left","k-i-table-position-center","k-i-table-position-right","k-i-clear-css","k-i-cells-merge-horizontally","k-i-cells-merge-vertically","k-i-cell-split-horizontally","k-i-cell-split-vertically","k-i-copy-format","k-i-apply-format",".k-i-undo","k-i-redo","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","anchor","copyAnchorStyles","activate","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","initializeTool","_toolName","description","tooltip","inheritText","_appendShortcutSequence","editorOptions","editorElement","editorOffset","_getWindowWidth","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","toolElement","groupName","newGroupName","toolConfig","group","groupPosition","endGroup","startGroup","not","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","focusableItems","focusElement","currentContainer","move","constrain","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","uiElement","trackImmutables","display","uiData","widget","groupUi","_resize","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","groupWidth","ViewHtmlCommand","dialog","center","FormatCommand","FormatTool","MOUSEDOWN_NS","KEYDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","formatNodes","formatNode","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","newRange","ColorTool","palette","_widget","ColorPicker","closeOnSelect","views","preview","toolIcon","storedRange","_inputFocused","picker","sender","_popup","_value","toCssRgba","fontWeight","fontStyle","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","_initialText","img","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","detection","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","puntuationTraverser","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","indexOfRegExp","str","r","DomTextTraverser","cancel","_traverse","subText","edgeNode","splitIndex","BlockFormatFinder","suitable","candidate","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageFormat","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","immutalbeParent","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","sections","lastSection","lastNodes","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","isIE","ImageBrowser","transport","read","keyDown","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","InsertHtmlTool","_selectBox","selectbox","initialValue","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","displayName","unshift","valueTemplate","_exec","indentDirection","IndentFormatter","targets","parentList","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","suitableNodes","isOutdentable","listParentsCount","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","emptyParagraphContent","paragraph","heading","tableNode","rng","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","oldIE","kbrParent","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","twTool","InsertTableTool","cols","firstCell","lastCell","getOffset","cellWidth","cellHeight","offsetWidth","tableFromLocation","floor","clientY","clientX","scrollLeft","autoApplyNS","_setTableSize","_valid","status","selectedRows","selectedColumns","changed","tableSize","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","lastTd","prop","td","_adjustColgroups","colElements","colgroupElements","numberOfCells","colgroup","_associateHeaderIds","InsertRowCommand","cellCount","newRow","rowSpanIndex","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","after","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","beforePaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","afterPaste","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","applicable","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","bulletRgx","extractListLevels","msoListRegExp","level","_createList","blockChildren","lastMargin","levels","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","acceptedNameTags","isParentTable","listIndex","levelType","removeAttributes","borderStyles","addBorderStyles","attributeName","attributeValues","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","removeTextNodes","trs","currentNode","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","tbody","cleaner","tdCleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","removeTableContent","backspaceHandler","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","isEndOfLink","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","inlineStyles","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styles","nodeStyles","styleValue","styleKey","attributeKey","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","isEmptyInline","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","global","math","PERCENTAGE","PIXEL","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","ResizingUtils","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","total","inPercentages","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","rtlModifier","initialDeltaX","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","ELEMENT_RESIZING_CLASS","DROP","COLUMN","IMG","ELEMENT_TYPES","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_onResizeHandleMouseOver","_onResizeHandleMouseOut","_hasRowsInPixels","styleWidth","currentWidth","parentWidth","maxWidth","ratioValue","ratioTotalValue","constrainedWidth","_setColumnsWidth","styleHeight","currentHeight","parentHeight","maxHeight","constrainedHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","factory","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","HEADERS","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","tableProp","tableProperties","_lastInCollection","lastSelectedRow","cellProp","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","associatedCells","headersAttr","headersArray","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","cellPropToAll","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","tds","swapCell","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","tStyle","captionClone","tableAlignment","_getAlignment","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","numericTextBoxSettings","DEFAULT_NUMBER_OF_COLS_AND_ROWS","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","tableData","okHandler","collectDialogValues","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initBorderStyleDropDown","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","valuePrimitive","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","optionLabel","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents","__meta__","category","depends","features"],"mappings":"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,UAAW,mCACXlzB,MAAO,aACR,CACCkzB,UAAW,qCACXlzB,MAAO,eACR,CACCkzB,UAAW,uCACXlzB,MAAO,iBACR,CACCkzB,UAAW,sCACXlzB,MAAO,gBACR,CACCkzB,UAAW,qCACXlzB,MAAO,eACR,CACCkzB,UAAW,uCACXlzB,MAAO,iBACR,CACCkzB,UAAW,sCACXlzB,MAAO,gBACR,CACCkzB,UAAW,0BACXlzB,MAAO,KAEXi7C,cAAe,YACfC,eAAgB,QAChB9gD,SAAU,4DACV6uD,cAAe,2EAGfizB,EAAyC,CACzCn6C,WAAY,CAAC,CACT7O,UAAW,kCACXlzB,MAAO,YACR,CACCkzB,UAAW,oCACXlzB,MAAO,cACR,CACCkzB,UAAW,mCACXlzB,MAAO,aACR,CACCkzB,UAAW,qCACXlzB,MAAO,eACR,CACCkzB,UAAW,uCACXlzB,MAAO,iBACR,CACCkzB,UAAW,sCACXlzB,MAAO,gBACR,CACCkzB,UAAW,0BACXlzB,MAAO,KAEXi7C,cAAe,YACfC,eAAgB,QAChB9gD,SAAU,4DACV6uD,cAAe,2EAGfkzB,EACA,+FACI,sCACI,qDACI,OACI,yDACA,iCACA,0CACJ,QACA,gCACI,6BACI,gEACJ,SACA,6BACI,qDACA,4EACJ,SACA,6BACI,kEACJ,SACA,6BACI,sDACA,6EACJ,SAEA,6BACI,oEACJ,SACA,6BACI,uDACJ,SAEA,6BACI,8DACJ,SACA,6BACI,oDACJ,SAEA,6BACI,6EACJ,SACA,6BACI,4DACJ,SACA,6BACI,6EACJ,SACA,6BACI,4DACJ,SACA,6BACI,wEACJ,SACA,6BACI,0DACJ,SACA,6BACI,kEACJ,SACA,6BACI,mCACJ,SACA,6BACI,iEACJ,SACA,6BACI,mJACJ,SACA,6BACI,oDACJ,SACA,6BACI,4IACJ,SACA,6BACI,kEACJ,SACA,6BACI,sDACA,uCACJ,SACA,6BACI,uEACJ,SACA,6BACI,uCACJ,SACA,yCACA,6BACI,yGACA,wGACJ,SACJ,SAEA,+BAEI,6BACI,uGACA,qGACJ,SAEA,6BACI,+DACJ,SACA,6BACI,oDACA,2EACJ,SA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"}