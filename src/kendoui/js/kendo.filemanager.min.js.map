{"version":3,"file":"kendo.filemanager.min.js","sources":["kendo.filemanager.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('filemanager/commands',[\"../kendo.core\"], f);\n})(function () {\n\n    (function ($, undefined) {\n        var kendo = window.kendo,\n            extend = $.extend,\n            deferred = $.Deferred,\n            proxy = $.proxy,\n            Class = kendo.Class;\n\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.filemanager = options.filemanager;\n            }\n        });\n\n        var CreateFolderCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this,\n                    filemanager = that.filemanager,\n                    commandStack = filemanager._commandStack,\n                    dataSource = filemanager._viewDataSource || filemanager.dataSource,\n                    removeProxy = proxy(that._remove, that);\n\n                that._item = dataSource._createNewModel();\n\n                commandStack.push({ item: that._item.toJSON() }).fail(removeProxy);\n                dataSource.add(that._item);\n            },\n            _remove: function () {\n                var that = this,\n                    filemanager = that.filemanager,\n                    dataSource = filemanager._viewDataSource || filemanager.dataSource;\n\n                dataSource.pushDestroy(that._item);\n            }\n        });\n\n        var RenameCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this,\n                    target = that.options.target,\n                    filemanager = that.filemanager,\n                    commandStack = filemanager._commandStack,\n                    viewItem = filemanager._view.widgetComponent.dataItem(target);\n\n                if(target && viewItem){\n                    commandStack.push({ target: target, item: viewItem });\n                    that.filemanager._view.edit(target);\n                } else {\n                    that._renameTreeViewItem(target);\n                }\n            },\n            _renameTreeViewItem: function(target){\n                var that = this,\n                    filemanager = that.filemanager,\n                    commandStack = filemanager._commandStack,\n                    uid = target.data(\"uid\"),\n                    item = that.filemanager.treeView.widgetComponent.dataSource.getByUid(uid),\n                    realItem = that.filemanager.dataSource.get(item.id);\n\n                that.filemanager._prompt({\n                    type: \"rename\",\n                    defaultInput: realItem.name,\n                    target: target\n                }).done(function(newName){\n                    commandStack.push({ target: target, item: realItem });\n                    realItem.set(\"name\", newName);\n                });\n            }\n        });\n\n        var DeleteCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this,\n                    target = that.options.target,\n                    filemanager = that.filemanager,\n                    items = filemanager.getSelected(),\n                    viewItem = that.filemanager._view.widgetComponent.dataItem(target),\n                    itemsToRemove;\n\n                if(target && target.is(\".k-state-selected\") && items && items.length) {\n                    itemsToRemove = items;\n                } else if(target && viewItem) {\n                    itemsToRemove = viewItem;\n                } else if(target) {\n                    var uid = target.data(\"uid\");\n                    var item = that.filemanager.treeView.widgetComponent.dataSource.getByUid(uid);\n                    var realItem = that.filemanager.dataSource.get(item.id);\n\n                    itemsToRemove = realItem;\n                }\n\n                filemanager._confirm({\n                    type: \"delete\",\n                    target: target\n                })\n                .done(function () {\n                    that.removeItems(itemsToRemove);\n                });\n            },\n            removeItems: function(items) {\n                var that = this;\n\n                that._itemsToRemove = Array.isArray(items) ? items : [items];\n\n                that._removeItem();\n            },\n            _removeItem: function(){\n                var that = this,\n                    filemanager = that.filemanager,\n                    commandStack = filemanager._commandStack,\n                    dataSource = filemanager.dataSource,\n                    itemToRemove = !!that._itemsToRemove.length && that._itemsToRemove.splice(0,1)[0];\n\n                if (itemToRemove) {\n                    commandStack.push({ item: itemToRemove })\n                        .then(proxy(that._removeItem, that), proxy(that._removeItem, that));\n\n                    dataSource.remove(itemToRemove);\n                }\n            }\n        });\n\n        var CopyCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this,\n                filemanager = that.filemanager,\n                dataSource = filemanager.dataSource,\n                commandStack = filemanager._commandStack,\n                items = that.options.items,\n                target = dataSource.get(that.options.target),\n                targetDataSource = target.children;\n\n                for (var i = 0; i < items.length; i++) {\n                    var item = dataSource.get(items[i]).toJSON();\n                    item.fileManagerNewItem = true;\n                    commandStack.push({ item: item, target: target });\n                    targetDataSource.add(item);\n                }\n            }\n        });\n\n        var MoveCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that._itemsToRemove = [];\n            },\n            exec: function () {\n                var that = this,\n                    filemanager = that.filemanager,\n                    commandStack = filemanager._commandStack,\n                    dataSource = filemanager.dataSource,\n                    items = that.options.items,\n                    target = dataSource.get(that.options.target),\n                    targetDataSource = target.children,\n                    promises = [];\n\n                for (var i = 0; i < items.length; i++) {\n                    var item = dataSource.get(items[i]);\n                    var cloning = item.toJSON();\n                    cloning.fileManagerNewItem = true;\n\n                    var promise = commandStack.push({ item: item, target: target })\n                        .then(proxy(that._delete, that));\n\n                        promises.push(promise);\n                        targetDataSource.add(cloning);\n                }\n\n                kendo.whenAll(promises).always(proxy(that._removeItem, that));\n            },\n            _delete: function(data){\n                var that = this;\n                that._itemsToRemove.push(data.item);\n            },\n            _removeItem: function(){\n                var that = this,\n                    filemanager = that.filemanager,\n                    commandStack = filemanager._commandStack,\n                    dataSource = filemanager.dataSource,\n                    itemToRemove = !!that._itemsToRemove.length && that._itemsToRemove.splice(0,1)[0];\n\n                if (itemToRemove) {\n                    commandStack.push({ item: itemToRemove })\n                        .then(proxy(that._removeItem, that), proxy(that._removeItem, that));\n\n                    dataSource.remove(itemToRemove);\n                }\n            }\n        });\n\n        var SortCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this,\n                    options = that.options,\n                    filemanager = that.filemanager,\n                    sortOptions = filemanager.defaultSortOption;\n\n                extend(sortOptions, {\n                    dir: options.dir,\n                    field: options.field\n                });\n\n                filemanager._view.widgetComponent.dataSource.sort([ filemanager.folderSortOption, sortOptions ]);\n            }\n        });\n\n        var SearchCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this,\n                    options = that.options,\n                    filemanager = that.filemanager,\n                    filter = {\n                        field: options.field,\n                        operator: options.operator,\n                        value: options.value\n                    };\n\n                filemanager._view.widgetComponent.dataSource.filter(filter);\n            }\n        });\n\n        var ChangeViewCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this,\n                    options = that.options,\n                    filemanager = that.filemanager;\n\n                filemanager.view(options.value);\n                filemanager.resize(true);\n            }\n        });\n\n        var OpenDialogCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this,\n                    filemanager = that.filemanager,\n                    dialog = filemanager[that.options.type];\n\n                if (dialog) {\n                    dialog.open();\n                } else {\n                    window.console.warn(kendo.format(\"The {0} dialog is not available!\", that.options.type));\n                }\n            }\n        });\n\n        var TogglePaneCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function() {\n                var that = this,\n                    filemanager = that.filemanager,\n                    pane = filemanager[that.options.type],\n                    resizable = that.getResizable();\n\n                if (pane) {\n                    pane.toggle();\n\n                    if (resizable) {\n                        filemanager.wrapper\n                            .find(resizable.options.handle)\n                            .toggle();\n                    }\n                }\n            },\n            getResizable: function() {\n                var that = this,\n                    filemanager = that.filemanager,\n                    type = that.options.type;\n\n                if (!filemanager._resizeDraggable) {\n                    return;\n                }\n\n                return filemanager._resizeDraggable[type];\n            }\n        });\n\n        var CommandStack = Class.extend({\n            init: function(){\n                var that = this;\n\n                that._stack = {};\n                that._keys = [];\n            },\n            push: function(data){\n                var that = this,\n                    guid = kendo.guid();\n\n                that._keys.push(guid);\n                that._stack[guid] = {\n                    guid: guid,\n                    data: data,\n                    deferred: deferred()\n                };\n\n                return that._stack[guid].deferred;\n            },\n            next: function () {\n                var that = this,\n                    key = that.keys().splice(0,1),\n                    nextCommand = that._stack[key];\n\n                return nextCommand;\n            },\n            resolve: function(command){\n                var that = this;\n                delete that._stack[command.guid];\n                command.deferred.resolve(command.data);\n            },\n            reject: function(command){\n                var that = this;\n                delete that._stack[command.guid];\n                command.deferred.reject(command.data);\n            },\n            keys: function () {\n                return this._keys;\n            },\n            empty: function(){\n                return this.keys().length === 0;\n            }\n        });\n\n        extend(kendo.ui, {\n            filemanager: {\n                FileManagerCommand: Command,\n                CommandStack: CommandStack,\n                commands: {\n                    CreateFolderCommand: CreateFolderCommand,\n                    RenameCommand: RenameCommand,\n                    DeleteCommand: DeleteCommand,\n                    MoveCommand: MoveCommand,\n                    CopyCommand: CopyCommand,\n                    SortCommand: SortCommand,\n                    SearchCommand: SearchCommand,\n                    ChangeViewCommand: ChangeViewCommand,\n                    OpenDialogCommand: OpenDialogCommand,\n                    TogglePaneCommand: TogglePaneCommand\n                }\n            }\n        });\n\n    })(window.kendo.jQuery);\n\n    return window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) { (a3 || a2)(); });\n(function(f, define){\n    define('filemanager/view',[\"../kendo.listview\", \"../kendo.treeview\"], f);\n})(function(){\n\n(function($, undefined) {\n\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Observable = kendo.Observable,\n        extend = $.extend,\n        proxy = $.proxy,\n        keys = kendo.keys,\n\n        NAVIGATE = \"navigate\",\n        SELECT = \"select\",\n        EXPAND = \"expand\",\n        CHANGE = \"change\",\n        OPEN = \"open\",\n        LOAD = \"load\",\n        KEYDOWN = \"keydown\",\n        KEYDOWNACTION = \"keydownAction\",\n\n        NS = \".kendoFileManagerViewComponent\",\n\n        fileManagerDraggables = [],\n        fileManagerDragOrigin = null;\n\n    var registerViewComponent = function(componentName, component) {\n        ui.filemanager.ViewComponents[componentName] = component;\n    };\n\n    var getViewComponent = function(componentName) {\n        return ui.filemanager.ViewComponents[componentName] || null;\n    };\n\n    var Component = Observable.extend({\n        init: function(widget, element, options) {\n            var that = this;\n\n            that.element = element;\n            that.options = options;\n\n            if(widget) {\n                that.widgetComponent = new widget(element, options);\n            } else {\n                throw new Error(\"The widget for the ViewComponent is not available! Please add the corresponding scripts!\");\n            }\n\n            Observable.fn.init.call(that);\n        },\n\n        _bindEvents: function(){\n            this.widgetComponent.bind(\"dataBinding\", proxy(this._binding, this));\n            this.widgetComponent.bind(\"dataBound\", proxy(this._bound, this));\n        },\n\n        _binding: function(ev){\n            if(this.trigger(\"dataBinding\", ev)) {\n                ev.preventDefault();\n            }\n        },\n\n        _bound: function(){\n            this.trigger(\"dataBound\");\n        },\n\n        _setDSOptions: function (options, dataSourceOptions) {\n            if(!options.dataSource && dataSourceOptions) {\n                options.dataSource = dataSourceOptions;\n            }\n        },\n\n        _initDragAndDrop: function (element, filter) {\n            var that = this;\n\n            filter = filter || that.options.dropFilter;\n            element = element || that.element;\n\n            that.draggable = element.kendoDraggable({\n                filter: filter,\n                hint: proxy(that._hint, that),\n                cursorOffset: { top: -10, left: -50 },\n                holdToDrag: true,\n                ignore: \"input, .k-focusable\",\n                hold: proxy(that._hold, that)\n            }).data(\"kendoDraggable\");\n\n            that.draggable.userEvents.minHold = 150;\n\n            that.droptarget = element.kendoDropTargetArea({\n                filter: filter,\n                drop: proxy(that._onDrop, that),\n                dragenter: function(ev){\n                    ev.dropTarget.addClass(\"k-filemanager-drop-target\");\n                },\n                dragleave: function(ev){\n                    ev.dropTarget.removeClass(\"k-filemanager-drop-target\");\n                }\n            }).data(\"kendoDraggable\");\n        },\n\n        _hold: function (ev){\n            var that = this,\n                target = ev.currentTarget;\n\n            if(!target.is(\".k-state-selected\")) {\n                if(that.widgetComponent.selectable) {\n                    that.widgetComponent.selectable.clear();\n                }\n                that.widgetComponent.select(target);\n            }\n\n            if(that.widgetComponent.selectable) {\n                that.widgetComponent.selectable.userEvents.cancel();\n            }\n        },\n\n        _hint: function(target){\n            var that = this,\n                item = that.widgetComponent.dataItem(target),\n                selectedItems = that.widgetComponent.select();\n\n            fileManagerDragOrigin = that.widgetComponent;\n            fileManagerDraggables = selectedItems;\n\n            if(selectedItems.length > 1) {\n                return kendo.format(\"<div class='k-filemanager-drag-hint'><span class='k-icon k-i-{0}'></span> <span>{1} {2}</span></div>\", \"file\", selectedItems.length, that.options.messages.items);\n            }\n\n            return kendo.format(\"<div class='k-filemanager-drag-hint'><span class='k-icon k-i-{0}'></span> <span>{1}</span></div>\", (item.isDirectory ? \"folder\" : \"file\"), item.name);\n        },\n\n        _onDrop: function (ev){\n            var that = this,\n                target = that.widgetComponent.dataItem(ev.dropTarget),\n                targetId = target.id,\n                itemIds = [];\n\n            if(!target.isDirectory) {\n                return;\n            }\n\n            for (var i = 0; i < fileManagerDraggables.length; i++) {\n                var id = fileManagerDragOrigin.dataItem(fileManagerDraggables[i]).id;\n                itemIds.push(id);\n            }\n\n            this.trigger(\"drop\",{target: targetId, items: itemIds});\n        },\n\n        getSelected: function(){\n            throw new Error(\"Not Implemented!\");\n        },\n\n        refresh: function (dataSource) {\n            this.widgetComponent.setDataSource(dataSource);\n        },\n\n        destroy: function() {\n            kendo.destroy(this.element);\n        }\n    });\n\n    extend(kendo.ui.filemanager, {\n            ViewComponent: Component,\n            ViewComponents: {},\n            registerViewComponent: registerViewComponent,\n            getViewComponent: getViewComponent\n        }\n    );\n\n    var ListView = Component.extend({\n        init: function(element, options, explicitOptions) {\n            var that = this,\n                dataSourceOptions = explicitOptions.dataSource,\n                messages = explicitOptions.messages; // jshint ignore:line\n\n            options = extend({}, that.defaultOptions, options, {\n                messages: messages\n            });\n\n            that._setDSOptions(options, dataSourceOptions);\n            options.kendoKeydown = options.kendoKeydown || proxy(that._kendoKeydown , that);\n\n            Component.fn.init.call(this, ui.ListView, element, options);\n\n            that.listView = that.widgetComponent;\n            that._bindEvents();\n\n            if(explicitOptions.draggable !== false && !dataSourceOptions.isLocalBinding) {\n                that._initDragAndDrop();\n            }\n        },\n\n        defaultOptions: {\n            layout: \"flex\",\n            flex: {\n                direction: \"row\",\n                wrap: \"wrap\"\n            },\n            selectable: kendo.support.mobileOS ? \"row\" : \"multiple\",\n            template: \"<div class='k-listview-item' title='#:name##:extension#'>\" +\n                            \"<div class='k-file-preview'><span class='k-file-icon k-icon k-i-#= !isDirectory ? kendo.getFileGroup(extension, true) : 'folder' #'></span></div>\" +\n                            \"<div class='k-file-name file-name'>#:name##:extension#</div>\" +\n                      \"</div>\",\n            editTemplate: \"<div class='k-listview-item'>\" +\n                                \"<div class='k-file-preview'><span class='k-file-icon k-icon k-i-#= !isDirectory ? kendo.getFileGroup(extension, true) : 'folder' #'></span></div>\" +\n                                \"<div class='k-file-name'><span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input type='text' class='k-input-inner' data-bind='value:name' name='name' required='required' /><span></div>\" +\n                          \"</div>\",\n            dropFilter: \".k-listview-item\",\n            navigatable: true\n        },\n\n        _bindEvents: function (){\n            var that = this,\n                listView = that.listView;\n\n            listView.bind(CHANGE, proxy(that._select, that));\n            listView.element.on(\"dblclick\" + NS, proxy(that._dblClick, that));\n            listView.element.on(\"mousedown\" + NS, \".k-listview-item:not(.k-edit-item)\", proxy(that._mousedown, that));\n            listView.element.on(KEYDOWN + NS, \".k-edit-item\", proxy(that._keydown, that));\n            listView.element.on(KEYDOWN + NS, proxy(that._keydownAction, that));\n\n            listView.bind(\"edit\", function(ev){\n                var sender = ev.sender;\n                var input = ev.item.find(\"input\");\n\n                input.on(\"blur\", function(){\n                    var isDirty = sender._modelFromElement(sender.editable.element).dirty;\n                    sender._closeEditable();\n                    if(!isDirty) {\n                        that.trigger(\"cancel\");\n                    }\n                });\n            });\n\n            listView.bind(\"cancel\", function(){\n                that.trigger(\"cancel\");\n            });\n\n            Component.fn._bindEvents.call(this);\n        },\n\n        _select: function () {\n            var that = this,\n                dataItems = that.getSelected();\n\n            that.trigger(SELECT, {entries: dataItems});\n        },\n\n        _keydown: function(ev){\n            var that = this;\n            if (ev.keyCode === kendo.keys.ESC) {\n                that.listView._closeEditable();\n                that.trigger(\"cancel\");\n            }\n        },\n\n        _keydownAction: function(ev) {\n            var that = this,\n                target = $(ev.target).find(\".k-state-focused\");\n\n            if(target.length && !target.is(\".k-edit-item\")) {\n                that.trigger(KEYDOWNACTION, { target: target, keyCode: ev.keyCode });\n            }\n        },\n\n        _mousedown: function(ev){\n            var that = this,\n                node = $(ev.target).closest(\".k-listview-item\");\n\n            if(ev.which === 3 && !node.is(\".k-state-selected\")) {\n                that.listView.selectable.clear();\n                that.listView.select(node);\n            }\n        },\n\n        _kendoKeydown : function (ev) {\n            var that = this;\n\n            if(ev.keyCode === keys.ENTER && !ev.preventKendoKeydown){\n                that._handleEnterKey(ev);\n            }\n        },\n\n        _handleEnterKey: function(ev){\n            var that = this,\n                target = $(ev.target),\n                node = that.listView.current();\n\n            if (that.widgetComponent.editable && target.is(\"input\")) {\n                // Force blur to update item and close editable (cross browser)\n                target.trigger(\"blur\");\n            } else if(!that.widgetComponent.editable) {\n                that._triggerOpen(node);\n            }\n\n            ev.preventKendoKeydown = true;\n        },\n\n        _dblClick: function(ev){\n            var that = this,\n                node = $(ev.target).closest(\".k-listview-item\");\n\n            that._triggerOpen(node);\n        },\n\n        _triggerOpen: function (node){\n            var that = this;\n\n            if(node.is(\".k-edit-item\")) {\n                return;\n            }\n\n            var item = that.listView.dataItem(node);\n\n            if(item) {\n                that.trigger(OPEN, { entry: item });\n            }\n        },\n\n        addFolder: function () {\n            this.listView.add();\n        },\n\n        edit: function (target) {\n            var that = this,\n                selected = that.listView.select();\n\n            that.listView.edit(target || selected);\n        },\n\n        getSelected: function(){\n            var that = this,\n            items = that.listView.select(),\n            dataItems = [];\n\n            for (var i = 0; i < items.length; i++) {\n                var item = that.listView.dataItem(items[i]);\n\n                if (item) {\n                    dataItems.push(item);\n                }\n            }\n\n            return dataItems;\n        },\n\n        destroy: function() {\n            this.listView.element.off(NS);\n            Component.fn.destroy.call(this);\n        }\n    });\n\n    ui.filemanager.registerViewComponent(\"list\", ListView);\n\n    var TreeView = Component.extend({\n        init: function(element, options, explicitOptions) {\n            var that = this,\n                messages = explicitOptions.messages; // jshint ignore:line\n\n            options = extend({}, that.defaultOptions, options, {\n                messages: messages\n            });\n\n            Component.fn.init.call(this, ui.TreeView, element, options);\n\n            that.treeView = that.widgetComponent;\n            that._bindEvents();\n\n            if(explicitOptions.draggable !== false && !explicitOptions.isLocalBinding) {\n                that._initDragAndDrop();\n            }\n        },\n\n        defaultOptions: {\n            dataTextField: \"name\",\n            dropFilter: \".k-item\"\n        },\n\n        _refreshDataSource: function(ev){\n            var that = this,\n                treeView = that.treeView,\n                action = ev.action,\n                node = ev.node,\n                parentNode = null,\n                items = ev.items.filter(function(item){\n                    return item.isDirectory;\n                }).map(function(item){\n                    return extend({}, item.toJSON(), {\n                        id: item.id || kendo.guid(),\n                        hasChildren: item.hasChildren,\n                        items: []\n                    });\n                });\n\n            if (node) {\n                parentNode = treeView.findByUid(treeView.dataSource.get(node.id).uid);\n                treeView._progress(parentNode, false);\n            }\n\n            if(!items.length) {\n                return;\n            }\n\n            if (action == \"itemloaded\" || (parentNode && action === \"sync\")) {\n                parentNode.find(\".k-item\").each(function(index, item){\n                    treeView.remove(item);\n                });\n                treeView.append(items, parentNode);\n\n                if (that._shouldFocus) {\n                    treeView.current(parentNode);\n                    treeView.focus();\n                }\n            } else if (action == \"remove\") {\n                this._remove(items[0].id);\n            } else if (action == \"itemchange\") {\n                var existingItem = treeView.dataSource.get(items[0].id);\n\n                if(existingItem) {\n                    existingItem.set(ev.field, items[0][ev.field]);\n                } else {\n                    treeView.append(items[0], parentNode);\n                }\n            } else if (!treeView.dataSource.data().length) {\n                treeView.append(items);\n            } else if (action === \"sync\" || (action === undefined && !parentNode)) {\n                treeView.items().each(function(index, item){\n                    treeView.remove(item);\n                });\n                treeView.append(items);\n\n                if (that._shouldFocus) {\n                    treeView.current(treeView._nextVisible($()));\n                    treeView.focus();\n                }\n            }\n\n        },\n\n        _remove: function(id){\n            var that = this,\n                treeView = that.treeView,\n                dataSource = treeView.dataSource,\n                item = dataSource.get(id),\n                node;\n\n            if(item) {\n                node = treeView.findByUid(item.uid);\n                treeView.remove(node);\n            }\n        },\n\n        _bindEvents: function () {\n            var that = this;\n\n            that.treeView.bind(SELECT, proxy(that._navigate, that));\n            that.treeView.bind(EXPAND, proxy(that._expand, that));\n            that.treeView.element.on(KEYDOWN, proxy(that._keydownAction, that));\n        },\n\n        _keydownAction: function (ev) {\n            var that = this,\n                target = $(ev.target).find(\".k-focus\").closest(\".k-item\");\n\n            that.trigger(KEYDOWNACTION, { target: target, keyCode: ev.keyCode });\n        },\n\n        _expand: function (ev) {\n            var that = this,\n                treeView = that.treeView,\n                entry = treeView.dataItem(ev.node);\n\n            ev.preventDefault();\n            that.trigger(LOAD, { entryId: entry.id });\n        },\n\n        _navigate: function (ev) {\n            var that= this,\n                node = ev.node,\n                entry = that.treeView.dataItem(node),\n                path = entry.id;\n\n            ev.preventDefault();\n\n            that.trigger(NAVIGATE, {path: path, entry: entry.toJSON()});\n        },\n\n        _hold: $.noop,\n\n        getSelected: function () {\n            var that = this,\n                selectedItem = that.treeView.element.find(\".k-selected\").closest(\".k-item\"),\n                item = that.treeView.dataItem(selectedItem);\n\n            return item;\n        },\n\n        refresh: function (id) {\n            var that = this,\n                treeView = that.treeView,\n                entry = treeView.dataSource.get(id),\n                node = entry && treeView.findByUid(entry.uid);\n\n            if(entry && node) {\n                treeView.element.find(\".k-selected\").removeClass(\"k-selected\");\n                node.find(\"> div .k-in\").removeClass(\"k-hover\").addClass(\"k-selected\");\n            }\n        },\n\n        reload: function () {\n            this.treeView.dataSource.read();\n        }\n    });\n\n    ui.filemanager.registerViewComponent(\"tree\", TreeView);\n\n    if(kendo.ui.Grid) {\n        var Grid = Component.extend({\n            init: function(element, options, explicitOptions) {\n                var that = this,\n                    dataSourceOptions = explicitOptions.dataSource,\n                    messages = explicitOptions.messages;\n\n                options = extend({}, that.defaultOptions, options, {\n                    messages: messages\n                });\n\n                that._setDSOptions(options, dataSourceOptions);\n                that._setupColumns(options, messages);\n                options.kendoKeydown = options.kendoKeydown || proxy(that._kendoKeydown , that);\n\n                Component.fn.init.call(this, ui.Grid, element, options);\n\n                that.grid = that.widgetComponent;\n                that._bindEvents();\n\n                if(explicitOptions.draggable !== false && !dataSourceOptions.isLocalBinding) {\n                    that._initDragAndDrop();\n                }\n            },\n\n            defaultOptions: {\n                selectable: kendo.support.mobileOS ? \"row\" : \"multiple\",\n                editable: {\n                    mode: \"inline\",\n                    confirmation: false\n                },\n                sortable: true,\n                dropFilter: \"tr:not(.k-grid-edit-row)\",\n                navigatable: true\n            },\n\n            _setupColumns: function (options, messages) {\n                if(!options.columns) {\n                    options.columns = [\n                        { field: \"name\", title: messages.nameField || \"Name\", template: function(item) {\n                            var icon = !item.isDirectory ? kendo.getFileGroup(item.extension, true) : \"folder\";\n\n                            var template = \"<div class='file-group-icon'>\" +\n                                                \"<span class='k-icon k-i-\" + icon + \"'></span>\" +\n                                            \"</div>\" +\n                                            \"<div class='file-name'>\" + kendo.htmlEncode(item.name + item.extension) + \"<div>\";\n\n                            return template;\n                        }},\n                        { field: \"created\", title: messages.dateCreatedField , format: \"{0:G}\" },\n                        { field: \"size\", title: messages.sizeField, template: function(item){\n                            if(item.size > 0) {\n                                return kendo.getFileSizeMessage(item.size);\n                            } else {\n                                return \"\";\n                            }\n                        } }\n                    ];\n                }\n            },\n\n            _bindEvents: function (){\n                var that = this,\n                    grid = that.grid;\n\n                grid.bind(CHANGE, proxy(that._select, that));\n                grid.table.on(\"dblclick\" + NS, proxy(that._dblClick, that));\n                grid.table.on(\"mousedown\" + NS, \"tr:not(.k-grid-edit-row)\", proxy(that._mousedown, that));\n                grid.table.on(KEYDOWN + NS, \".k-grid-edit-row\", proxy(that._keydown, that));\n                grid.table.on(KEYDOWN + NS, proxy(that._keydownAction, that));\n\n                grid.bind(\"edit\", function(){\n                    that._toggleFocusable(true);\n                });\n\n                grid.bind(\"cancel\", function(){\n                    that.trigger(\"cancel\");\n                });\n\n                grid.saveRow = $.noop;\n\n                Component.fn._bindEvents.call(this);\n            },\n\n            _kendoKeydown : function(ev){\n                var that = this,\n                    current = that.grid.current(),\n                    node = current ? current.closest(\"tr[data-uid]\") : null;\n\n                if(node && ev.keyCode === keys.ENTER && !ev.preventKendoKeydown){\n                    that._triggerOpen(node);\n                    ev.preventKendoKeydown = true;\n                }\n\n                if(ev.keyCode === keys.F2) {\n                    ev.preventKendoKeydown = true;\n                }\n            },\n\n            _keydownAction: function(ev) {\n                var that = this,\n                    target = $(ev.target).find(\".k-state-focused\").closest(\"tr\");\n\n                if(target.length && !target.is(\".k-grid-edit-row\")) {\n                    that.trigger(KEYDOWNACTION, { target: target, keyCode: ev.keyCode });\n                }\n            },\n\n            _keydown: function(ev){\n                var that = this,\n                    grid = that.grid;\n\n                if (!$(ev.target).closest(\".k-grid-edit-row\").length) {\n                    return;\n                }\n\n                if(ev.keyCode === kendo.keys.ENTER) {\n                    setTimeout(function(){\n                        var editorContainer = that.grid._editContainer || $();\n\n                        // force blur event for inputs\n                        editorContainer.find(\"input\").trigger(\"blur\");\n\n                        that._closeEditable();\n                    });\n\n                    that._tryCancel();\n                }\n\n                if (ev.keyCode === kendo.keys.ESC) {\n                    grid.cancelChanges();\n                    that.trigger(\"cancel\");\n                }\n            },\n\n            _mousedown: function(ev){\n                var that = this,\n                    node = $(ev.target).closest(\"tr[data-uid]\");\n\n                if(ev.which === 1 && that.grid.editable) {\n                    setTimeout(function(){\n                        that._closeEditable();\n                    });\n\n                    that._tryCancel();\n                }\n\n                if(ev.which === 3 && !node.is(\".k-state-selected\")) {\n                    that.grid.selectable.clear();\n                    that.grid.select(node);\n                }\n            },\n\n            _tryCancel: function() {\n                var that = this,\n                    grid = that.grid,\n                    container;\n\n                if (grid.editable) {\n                    container = grid._editContainer;\n                    if (!container.find(\"input\").val()) {\n                        grid.cancelChanges();\n                    }\n                }\n\n                setTimeout(function() {\n                    that._toggleFocusable(false);\n                });\n\n            },\n\n            _toggleFocusable: function(state) {\n                var that = this,\n                    grid = that.grid;\n\n                grid.table.find(\"tr,td\").children().addBack().toggleClass(\"k-focusable\", state);\n            },\n\n            _closeEditable: function(){\n                var that = this,\n                    container;\n\n                if(that.grid.editable && !that.grid.editable.options.model.dirty){\n                    container = that.grid._editContainer;\n                    that.grid._destroyEditable();\n                    that.grid._displayRow(container);\n                    that.trigger(\"cancel\");\n                }\n            },\n\n            _select: function () {\n                var that = this,\n                    dataItems = that.getSelected();\n\n                that.trigger(SELECT, {entries: dataItems});\n            },\n\n            _dblClick: function(ev){\n                var that = this,\n                    node = $(ev.target).closest(\"tr[data-uid]\");\n\n                that._triggerOpen(node);\n            },\n\n            _triggerOpen: function (node) {\n                var that = this;\n\n                if(node.is(\".k-grid-edit-row\")) {\n                    return;\n                }\n\n                var item = that.grid.dataItem(node);\n\n                if(item) {\n                    that.trigger(OPEN, { entry: item });\n                }\n            },\n\n            getSelected: function(){\n                var that = this,\n                items = that.grid.select(),\n                dataItems = [];\n\n                for (var i = 0; i < items.length; i++) {\n                    dataItems.push(that.grid.dataItem(items[i]));\n                }\n\n                return dataItems;\n            },\n\n            addFolder: function () {\n                this.grid.addRow();\n            },\n\n            edit: function (target) {\n                var that = this,\n                    selected = that.grid.select();\n\n                that.grid.editRow(target || selected);\n            },\n\n            destroy: function(){\n                this.grid.table.off(NS);\n                this.grid.element.off(NS);\n                Component.fn.destroy.call(this);\n            }\n        });\n\n        ui.filemanager.registerViewComponent(\"grid\", Grid);\n    }\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('filemanager/toolbar',[\"../kendo.toolbar\", \"../kendo.switch\"], f);\n})(function(){\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        proxy = $.proxy,\n        ToolBar = kendo.ui.ToolBar,\n        Item = kendo.toolbar.Item,\n\n        CLICK = \"click\",\n        TOGGLE = \"toggle\",\n        CLOSE = \"close\",\n        ACTION = \"action\",\n        CHANGE = \"change\",\n        NS = \".fileManagerToolbar\";\n\n    var FileManagerToolBar = ToolBar.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that._extendOptions(options);\n\n            ToolBar.fn.init.call(that, element, options);\n\n            that._attachEvents();\n        },\n\n        events: ToolBar.fn.events.concat([\n            ACTION\n        ]),\n\n        defaultTools: {\n            createFolder: { type: \"button\", text: \"New Folder\", name: \"createFolder\", command: \"CreateFolderCommand\", rules: \"{ \\\"remote\\\": true }\" },\n            upload: { type: \"button\",  text: \"Upload\", name: \"upload\", command: \"OpenDialogCommand\", options: \"{ \\\"type\\\": \\\"uploadDialog\\\" }\", rules: \"{ \\\"remote\\\": true }\" },\n            sortDirection: { type: \"buttonGroup\", text: \"Sort Direction\", name:\"sortDirection\",\n                buttons: [\n                    { name: \"sortDirectionAsc\", icon: \"sort-asc-sm\", togglable: true, group: \"sortDirection\", command: \"SortCommand\", options: \"{ \\\"dir\\\": \\\"asc\\\" }\", selected: true },\n                    { name: \"sortDirectionDesc\", icon: \"sort-desc-sm\", togglable: true, group: \"sortDirection\", command: \"SortCommand\", options: \"{ \\\"dir\\\": \\\"desc\\\" }\" }\n                ]\n            },\n            sortField: { type: \"splitButton\", text: \"Sort By\", name: \"sortField\", command: \"SortCommand\", menuButtons: [\n                { name: \"nameField\", text: \"Name\", options: \"{\\\"field\\\": \\\"name\\\"}\", command: \"SortCommand\" },\n                { name: \"typeField\", text: \"Type\", options: \"{\\\"field\\\": \\\"extension\\\"}\", command: \"SortCommand\" },\n                { name: \"sizeField\", text: \"Size\", options: \"{\\\"field\\\": \\\"size\\\"}\", command: \"SortCommand\" },\n                { name: \"dateCreatedField\", text: \"Date created\", options: \"{\\\"field\\\": \\\"createdUtc\\\"}\", command: \"SortCommand\" },\n                { name: \"dateModifiedField\", text: \"Date modified\", options: \"{\\\"field\\\": \\\"modifiedUtc\\\"}\", command: \"SortCommand\" }\n            ] },\n            changeView: { type: \"buttonGroup\", text: \"Change View\", name:\"changeView\",\n                buttons: [\n                    { name: \"gridView\", icon: \"grid-layout\", togglable: true, group: \"changeView\", command: \"ChangeViewCommand\", options: \"grid\" },\n                    { name: \"listView\", icon: \"grid\", togglable: true, group: \"changeView\", command: \"ChangeViewCommand\", options: \"list\" }\n                ]\n            },\n            spacer: { type: \"spacer\" },\n            details: { type: \"fileManagerDetailsToggle\", text: \"View Details\", name: \"details\", overflow: \"never\", command: \"TogglePaneCommand\", options: \"{ \\\"type\\\": \\\"preview\\\" }\"},\n            search: { type: \"fileManagerSearch\", text: \"Search\", name: \"search\", command: \"SearchCommand\", icon: \"search\", overflow: \"never\", options: \"{ \\\"field\\\": \\\"name\\\", \\\"operator\\\": \\\"startswith\\\" }\" }\n        },\n\n        _attachEvents: function() {\n            var that = this;\n\n            that.bind(TOGGLE, proxy(that._click, that));\n            that.bind(CLOSE, proxy(that._click, that));\n            that.bind(CLICK, proxy(that._click, that));\n            that.bind(CHANGE, proxy(that._change, that));\n        },\n\n        _extendOptions: function(options) {\n            var that = this,\n                tools = options.items ? options.items : Object.keys(that.defaultTools);\n\n            that.options = options;\n\n            that.options.items = that._extendToolsOptions(tools);\n        },\n\n        _extendToolsOptions: function(tools) {\n            var that = this,\n                messages = that.options.messages;\n\n            if (!tools.length) {\n                return;\n            }\n\n            return tools.map(function (tool) {\n                var isBuiltInTool =  $.isPlainObject(tool) && Object.keys(tool).length === 1 && tool.name,\n                    toolOptions, toolRules, attributes;\n\n                tool = isBuiltInTool ? tool.name : tool;\n                toolOptions = $.isPlainObject(tool) ? tool : extend({}, that.defaultTools[tool]);\n                toolRules = toolOptions.rules ? JSON.parse(toolOptions.rules) : {};\n                attributes = {\n                    \"aria-label\": messages[toolOptions.name],\n                    \"title\": messages[toolOptions.name],\n                    \"data-command\": toolOptions.command,\n                    \"data-options\": toolOptions.options\n                };\n\n                if (toolOptions.type === \"fileManagerDetailsToggle\") {\n                    delete attributes[\"aria-label\"];\n                }\n\n                kendo.deepExtend(toolOptions, {\n                    id: toolOptions.name + \"-\" + kendo.guid(),\n                    name: toolOptions.name,\n                    text: messages[toolOptions.name],\n                    attributes: attributes,\n                    overflow: toolOptions.overflow\n                });\n\n                if(toolOptions.type === \"buttonGroup\") {\n                    delete toolOptions.attributes[\"aria-label\"];\n                    toolOptions.buttons = toolOptions.buttons.map(proxy(that._mapButtonGroups, that));\n                }\n\n                if(toolOptions.type === \"splitButton\") {\n                    toolOptions.menuButtons = toolOptions.menuButtons.map(proxy(that._mapMenuButtons, that));\n                }\n\n                if (toolRules.remote && that.options.filemanager.dataSource.isLocalBinding) {\n                    toolOptions.hidden = true;\n                }\n\n                return toolOptions;\n            }, that);\n        },\n\n        _mapButtonGroups: function(button) {\n            var that = this,\n                messages = that.options.messages;\n\n            if(button.group === \"changeView\" && button.options === that.options.filemanager.options.initialView) {\n                button.selected = true;\n            }\n\n            return kendo.deepExtend(button,{\n                attributes: extend({}, button.attributes, {\n                    \"aria-label\": messages[button.name],\n                    \"title\": messages[button.name],\n                    \"data-command\": button.command,\n                    \"data-options\": button.options\n                })\n            });\n        },\n\n        _mapMenuButtons: function(button) {\n            var that = this,\n                messages = that.options.messages;\n\n            return kendo.deepExtend(button,{\n                text: messages[button.name],\n                attributes: extend({}, button.attributes, {\n                    \"aria-label\": messages[button.name],\n                    \"title\": messages[button.name],\n                    \"data-command\": button.command,\n                    \"data-options\": button.options\n                })\n            });\n        },\n\n        _click: function(ev) {\n            var command = $(ev.target).data(\"command\"),\n                options = $(ev.target).data(\"options\");\n\n            if (!command) {\n                return;\n            }\n\n            this.action({\n                command: command,\n                options: options\n            });\n        },\n\n        _change: function (ev) {\n            var command = $(ev.target).data(\"command\"),\n                options = $(ev.target).data(\"options\");\n\n            options = extend({}, options, { value: $(ev.target).val() });\n\n            if (!command) {\n                return;\n            }\n\n            this.action({\n                command: command,\n                options: options\n            });\n        },\n\n        isToolEnabled: function(toolName) {\n            var that = this,\n                options = that.options,\n                found = false;\n\n            for(var i = 0; i < options.items.length; i++) {\n                if (options.items[i].name == toolName) {\n                    found = true;\n                    break;\n                }\n            }\n\n            return options.items[toolName] || found;\n        },\n\n        action: function (args) {\n            this.trigger(ACTION, args);\n        },\n\n        destroy: function () {\n            if(this.fileManagerSearch) {\n                this.fileManagerSearch.destroy();\n            }\n\n            ToolBar.fn.destroy.call(this);\n        }\n    });\n\n    var SearchTool = Item.extend({\n        init: function(options, toolbar) {\n            var that = this,\n                element = $(\"<div class='k-filemanager-search-tool'></div>\"),\n                input = $(\"<input class='k-input-inner' autocomplete='off' />\"),\n                icon = $(\"<span class='k-input-icon k-icon k-i-search'/>\"),\n                inputWrapper = $('<span class=\"k-searchbox k-input k-input-md k-rounded-md k-input-solid\"></span>');\n\n\n            that.element = element;\n            that.input = input;\n            that.icon = icon;\n            that.options = options;\n            that.options.type = \"fileManagerSearch\";\n            that.toolbar = toolbar;\n\n            that.attributes();\n            that.renderIcon();\n            that.addUidAttr();\n            that.addIdAttr();\n            that.addOverflowAttr();\n\n            that.input.attr({\n                placeholder: that.options.text,\n                title: that.options.text\n            });\n\n            inputWrapper.append(icon).append(that.input);\n            that.element.append(inputWrapper);\n\n            that._bindEvents();\n            that.toolbar.fileManagerSearch = that;\n        },\n        attributes: function () {\n            if (this.options.attributes) {\n                this.input.attr(this.options.attributes);\n            }\n        },\n        renderIcon: function() {\n            if (this.options.icon) {\n                this.icon.addClass(\"k-icon k-i-\" + this.options.icon);\n            }\n        },\n        _bindEvents: function(){\n            this._inputHandler = proxy(this._input, this);\n            this.input.on(\"input\" + NS, this._inputHandler);\n        },\n        _input: function (ev) {\n            this.toolbar.trigger(CHANGE, {target: ev.target});\n        },\n        destroy: function(){\n            this.element.off(NS);\n        }\n    });\n\n    kendo.toolbar.registerComponent(\"fileManagerSearch\", SearchTool);\n\n    var FileManagerDetailsToggle = Item.extend({\n        init: function(options, toolbar) {\n            var that = this,\n                element = $(\"<div class='k-filemanager-details-toggle'></div>\"),\n                label = $(\"<label>\" + options.text + \"</label>\"),\n                switchElement = $(\"<input title='\"+ options.text +\"' />\");\n\n            that.element = element;\n            that.input = switchElement;\n            that.label = label;\n            that.options = options;\n            that.toolbar = toolbar;\n\n            that.attributes();\n            that.addUidAttr();\n            that.addIdAttr();\n            that.addOverflowAttr();\n\n            that.element.append(that.label);\n            that.element.append(that.input);\n\n            that.input.attr(\"aria-label\", options.text);\n\n            that.switchInstance = new kendo.ui.Switch(that.input, {\n                change: proxy(that._change, that),\n                messages: {\n                    checked: toolbar.options.messages.detailsChecked,\n                    unchecked: toolbar.options.messages.detailsUnchecked\n                }\n            });\n\n            that.label.on(CLICK + NS, proxy(that._click, that));\n\n            that.toolbar.fileManagerDetailsToggle = that;\n        },\n        _change: function (ev) {\n            this.toolbar.trigger(CHANGE, { target: ev.sender.wrapper.parent() });\n        },\n        _click: function(ev) {\n            this.switchInstance.toggle();\n\n            this.toolbar.trigger(CHANGE, { target: $(ev.target).parent() });\n        },\n        destroy: function() {\n            this.element.off(NS);\n        }\n    });\n\n    kendo.toolbar.registerComponent(\"fileManagerDetailsToggle\", FileManagerDetailsToggle);\n\n    extend(kendo.ui.filemanager, {\n        ToolBar: FileManagerToolBar\n    });\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n    define('filemanager/data',[\"../kendo.data\"], f);\n})(function(){\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        data = kendo.data,\n        Node = data.Node,\n        HierarchicalDataSource = data.HierarchicalDataSource,\n        DataSource = data.DataSource;\n\n    extend(true, kendo.data, {\n        schemas: {\n            \"filemanager\": {\n                data: function(data) {\n                    return data.items || data || [];\n                },\n                model: {\n                    id: \"path\",\n                    hasChildren: \"hasDirectories\",\n                    fields: {\n                        name: {editable: true, type: \"string\", defaultValue: \"New Folder\" },\n                        size: {editable: false, type: \"number\"},\n                        path: {editable: false, type: \"string\"},\n                        extension: {editable: false, type: \"string\"},\n                        isDirectory: {editable: false, defaultValue: true, type: \"boolean\"},\n                        hasDirectories: {editable: false, defaultValue: false, type: \"boolean\"},\n                        created: { type: \"date\", editable: false},\n                        createdUtc: { type: \"date\", editable: false },\n                        modified: { type: \"date\", editable: false},\n                        modifiedUtc: { type: \"date\", editable: false }\n                    }\n                }\n            }\n        }\n    });\n\n    var FileEntry = Node.define({\n        init: function(value){\n            var that = this,\n                isDirectory = this.isDirectory;\n\n            Node.fn.init.call(this, value);\n\n            if(typeof isDirectory === \"string\"){\n            isDirectory = kendo.getter(isDirectory);\n            }\n\n            if (kendo.isFunction(isDirectory)) {\n                var isDirectoryObject = isDirectory.call(that, that);\n\n                if(isDirectoryObject && isDirectoryObject.length === 0){\n                    that.isDirectory = false;\n                } else{\n                    that.isDirectory = !!isDirectoryObject;\n                }\n            }\n\n            if (that.isDirectory) {\n                that._initChildren();\n            }\n        },\n        _initChildren: function() {\n            var that = this;\n            var children, transport, parameterMap;\n\n            if (!(that.children instanceof kendo.data.FileManagerDataSource)) {\n                children = that.children = new kendo.data.FileManagerDataSource(that._childrenOptions);\n\n                transport = children.transport;\n                parameterMap = transport.parameterMap;\n\n                transport.parameterMap = function(data, type) {\n                    if(type === \"read\" || type === \"create\") {\n                        data.target = that.id;\n                    }\n\n                    if (parameterMap) {\n                        data = parameterMap.call(that, data, type);\n                    }\n\n                    return data;\n                };\n\n                children.parent = function(){\n                    return that;\n                };\n\n                children.bind(\"change\", function(e){\n                    e.node = e.node || that;\n                    that.trigger(\"change\", e);\n                });\n\n                children.bind(\"error\", function(e){\n                    var collection = that.parent();\n\n                    if (collection) {\n                        e.node = e.node || that;\n                        collection.trigger(\"error\", e);\n                    }\n                });\n\n                that._updateChildrenField();\n            }\n        },\n        isNew: function() {\n            if(this.fileManagerNewItem) {\n                delete this.fileManagerNewItem;\n                return true;\n            }\n\n            return this.id === this._defaultId;\n        }\n    });\n\n\n    var FileManagerDataSource = HierarchicalDataSource.extend({\n        init: function(options) {\n            var fileEntry = FileEntry.define({\n                children: options\n            });\n\n            if(options.filter && !options.serverFiltering){\n                this._hierarchicalFilter = options.filter;\n                options.filter = null;\n            }\n\n            DataSource.fn.init.call(this, $.extend(true, {}, { schema: { modelBase: fileEntry, model: fileEntry } }, options));\n\n            this.isLocalBinding = this.transport instanceof kendo.data.LocalTransport;\n\n            this._attachBubbleHandlers();\n        },\n        insert: function(index, model) {\n            var parentNode = this.parent();\n\n            if (parentNode && parentNode._initChildren) {\n                if(model && model.isDirectory) {\n                    parentNode.hasDirectories = true;\n                }\n                parentNode.hasChildren = true;\n                parentNode._initChildren();\n            }\n\n            return DataSource.fn.insert.call(this, index, model);\n        },\n        remove: function(node){\n            var that = this,\n                parentNode = node.parentNode(),\n                dataSource = that,\n                result;\n\n            if (parentNode && parentNode._initChildren) {\n                dataSource = parentNode.children;\n            }\n\n            that._cleanDestroyed(node);\n\n            result = DataSource.fn.remove.call(dataSource, node);\n\n            if (parentNode && (dataSource.data() && !dataSource.data().length)) {\n                parentNode.hasChildren = false;\n            } else if(parentNode && !this._hasDirectories(parentNode)) {\n                parentNode.hasDirectories = false;\n            }\n\n            return result;\n        },\n        _cleanDestroyed: function(node){\n            var that = this,\n                dataSource = that;\n\n            if (node.parentNode && node.parentNode()) {\n                node = node.parentNode();\n                dataSource = node.children;\n                dataSource._destroyed = [];\n                that._cleanDestroyed(node);\n            } else {\n                dataSource._destroyed = [];\n            }\n        },\n        _hasDirectories: function(node){\n            var result;\n\n            if(!node.children.data()) {\n                return false;\n            }\n\n            result = node.children.data().filter(function(item){\n                return item.isDirectory;\n            });\n\n            return !!result.length;\n        }\n    });\n\n    FileManagerDataSource.create = function(options) {\n        options = options && options.push ? { data: options } : options;\n\n        var dataSource = options || {},\n            data = dataSource.data;\n\n        if (data && data._dataSource) {\n            return data._dataSource;\n        }\n\n        dataSource.data = data;\n\n        return dataSource instanceof FileManagerDataSource ? dataSource : new FileManagerDataSource(dataSource);\n    };\n\n    kendo.observableFileManagerData = function(array) {\n        var dataSource = FileManagerDataSource.create({\n            data: array,\n            schema: kendo.data.schemas.filemanager\n        });\n\n        dataSource.fetch();\n\n        dataSource._data._dataSource = dataSource;\n\n        return dataSource._data;\n    };\n\n    extend(kendo.data, {\n        FileManagerDataSource: FileManagerDataSource,\n        FileEntry: FileEntry\n    });\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n    define('filemanager/contextmenu',[\"../kendo.menu\"], f);\n})(function(){\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        proxy = $.proxy,\n        template = kendo.template,\n        ContextMenu = kendo.ui.ContextMenu,\n\n        ACTION = \"action\";\n\n    var FileManagerContextMenu = ContextMenu.extend({\n        init: function(element, options) {\n            var that = this;\n\n            ContextMenu.fn.init.call(that, element, options);\n\n            that._overrideTemplates();\n            that._restrictDefaultItems();\n            that._extendItems();\n\n            that.bind(\"select\", proxy(that._onSelect, that));\n            that.bind(\"open\", proxy(that._onOpen, that));\n        },\n\n        _overrideTemplates: function(){\n            this.templates.sprite = template(\"#if(spriteCssClass) {#<span class='#= spriteCssClass #'></span>#}#\");\n        },\n\n        _restrictDefaultItems: function() {\n            var that = this;\n\n            if (that.options.isLocalBinding) {\n                that.defaultItems = {};\n            }\n        },\n\n        defaultItems: {\n            \"rename\": { text: \"Rename\", spriteCssClass: \"k-icon k-i-edit\", command: \"RenameCommand\" },\n            \"delete\": { text: \"Delete\", spriteCssClass: \"k-icon k-i-delete\", command: \"DeleteCommand\" }\n        },\n\n        events: ContextMenu.fn.events.concat([\n            ACTION\n        ]),\n\n        _extendItems: function(){\n            var that = this,\n                items = that.options.items,\n                item, isBuiltInTool;\n\n            if(items && items.length){\n                for (var i = 0; i < items.length; i++) {\n                    item = items[i];\n                    isBuiltInTool =  $.isPlainObject(item) && Object.keys(item).length === 1 && item.name;\n\n                    if(isBuiltInTool){\n                        item = item.name;\n                    }\n\n                    if($.isPlainObject(item) ) {\n                        that._extendItem(item);\n                        that.append(item);\n                    } else if (that.defaultItems[item]){\n                        item = that.defaultItems[item];\n                        that._extendItem(item);\n                        that.append(item);\n                    }\n                }\n            } else {\n                for (var key in that.defaultItems) {\n                    item = that.defaultItems[key];\n                    that._extendItem(item);\n                    that.append(item);\n                }\n            }\n        },\n\n        _extendItem: function(item) {\n            var that = this,\n                messages = that.options.messages;\n\n            extend(item, {\n                text: messages[item.text],\n                spriteCssClass: item.spriteCssClass || \"\",\n                attr: {\n                    \"data-command\": item.command\n                }\n            });\n        },\n\n        _onSelect: function(ev) {\n            var command = $(ev.item).data(\"command\");\n            var target = $(ev.target);\n\n            if (!command) {\n                return;\n            }\n\n            this.action({\n                command: command,\n                options: { target: target }\n            });\n        },\n\n        _onOpen: function(ev) {\n            var menu = ev.sender,\n                items = menu.options.items;\n\n            if (!items && $.isEmptyObject(this.defaultItems)) {\n                ev.preventDefault();\n            }\n        },\n\n        action: function (args) {\n            this.trigger(ACTION, args);\n        }\n    });\n\n    extend(kendo.ui.filemanager, {\n        ContextMenu: FileManagerContextMenu\n    });\n\n    })(window.kendo.jQuery);\n\n    return window.kendo;\n\n    }, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n    define('kendo.filemanager',[\n        \"./filemanager/commands\",\n        \"./filemanager/view\",\n        \"./filemanager/toolbar\",\n        \"./filemanager/data\",\n        \"./filemanager/contextmenu\",\n\n        \"./kendo.breadcrumb\",\n        \"./kendo.upload\",\n        \"./kendo.dialog\",\n        \"./kendo.resizable\"\n    ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"filemanager\",\n    name: \"FileManager\",\n    category: \"web\",\n    description: \"The FileManager widget displays offers file management functionality.\",\n    depends: [ \"core\", \"data\", \"listview\", \"toolbar\", \"breadcrumb\", \"menu\", \"treeview\", \"upload\", \"dialog\", \"switch\", \"resizable\", \"selectable\", \"editable\" ],\n    features: [{\n        id: \"filemanager-grid-view\",\n        name: \"GridView\",\n        description: \"Support for GridView\",\n        depends: [ \"grid\" ]\n    }]\n};\n\n(function($, undefined) {\n    var ui = kendo.ui,\n        extend = $.extend,\n        isPlainObject = $.isPlainObject,\n        isArray = Array.isArray,\n        DataBoundWidget = ui.DataBoundWidget,\n        proxy = $.proxy,\n        template = kendo.template,\n        outerHeight = kendo._outerHeight,\n\n        NAVIGATE = \"navigate\",\n        SELECT = \"select\",\n        OPEN = \"open\",\n        ERROR = \"error\",\n        CHANGE = \"change\",\n        UPLOAD = \"upload\",\n        SUCCESS = \"success\",\n        CLOSE = \"close\",\n        HIDE = \"hide\",\n        LOAD = \"load\",\n        DATABINDING = \"dataBinding\",\n        DATABOUND = \"dataBound\",\n        DROP = \"drop\",\n        EXECUTE = \"execute\",\n        COMMAND = \"command\",\n        KEYDOWNACTION = \"keydownAction\",\n        CANCEL = \"cancel\",\n\n        TREE_TYPE = \"tree\",\n        DOT = \".\";\n\n    var fileManagerStyles = {\n        wrapper: \"k-widget k-filemanager\",\n        header: \"k-filemanager-header\",\n        navigation: \"k-filemanager-navigation\",\n        contentContainer: \"k-filemanager-content-container\",\n        content: \"k-filemanager-content\",\n        preview: \"k-filemanager-preview\",\n        toolbar: \"k-filemanager-toolbar\",\n        treeview: \"k-filemanager-treeview\",\n        breadcrumb: \"k-filemanager-breadcrumb\",\n        view: \"k-filemanager-view\",\n        grid: \"k-filemanager-grid\",\n        list: \"k-filemanager-listview\",\n        upload: \"k-filemanager-upload\",\n        uploadDialog: \"k-filemanager-upload-dialog\",\n        splitBar: \"k-splitbar\",\n        splitBarHorizontal: \"k-splitbar-horizontal k-splitbar-draggable-horizontal\",\n        splitBarHover: \"k-splitbar-horizontal-hover\",\n        splitBarIcon: \"k-icon k-resize-handle\",\n        splitBarNavigation: \"k-filemanager-splitbar-navigation\",\n        splitBarPreview: \"k-filemanager-splitbar-preview\",\n        resizable: \"k-filemanager-resizable\"\n    };\n\n    var fileManagerTemplateStyles = {\n        filePreview: \"k-file-preview\",\n        fileInfo: \"k-file-info\",\n        fileName: \"k-file-name\",\n        fileMeta: \"k-file-meta\",\n        metaLabel: \"k-file-meta-label\",\n        metaValue: \"k-file-meta-value\",\n        extension: \"k-file-type\",\n        size: \"k-file-size\",\n        created: \"k-file-created\",\n        modified: \"k-file-modified\"\n    };\n\n    var viewTypes = {\n        grid: \"grid\",\n        list: \"list\"\n    };\n\n    var NO_FILE_PREVIEW_TEMPLATE = '' +\n        '<div class=\"#:styles.fileInfo#\">' +\n            '<div class=\"#:styles.filePreview#\">' +\n                '<span class=\"k-file-icon k-icon k-i-none\"></span>' +\n            '</div>' +\n            '<span class=\"#:styles.fileName#\" k-no-file-selected>#: messages.noFileSelected #</span>' +\n        '</div>';\n\n    var SINGLE_FILES_PREVIEW_TEMPLATE = '' +\n        '<div class=\"#:styles.fileInfo#\">' +\n            '<div class=\"#:styles.filePreview#\">' +\n                '<span class=\"k-file-icon k-icon k-i-#: !selection[0].isDirectory ? kendo.getFileGroup(selection[0].extension, true) : \"folder\" #\"></span>' +\n            '</div>' +\n            '<span class=\"#:styles.fileName#\">#:selection[0].name#</span>' +\n            '#if(metaFields){#' +\n                '<dl class=\"#:styles.fileMeta#\">'+\n                    '#for(var i = 0; i < metaFields.length; i+=1){#' +\n                        '#var field = metaFields[i]#' +\n                        '<dt class=\"#:styles.metaLabel#\">#:messages[field]#: </dt>' +\n                        '<dd class=\"#:styles.metaValue# #:styles[field]#\">' +\n                            '#if(field == \"size\"){#' +\n                                ' #:kendo.getFileSizeMessage(selection[0][field])#' +\n                            '#} else if(selection[0][field] instanceof Date) {#' +\n                                ' #:kendo.toString(selection[0][field], \"G\")#' +\n                            '#} else if(field == \"extension\") {#' +\n                                ' #: !selection[0].isDirectory ? kendo.getFileGroup(selection[0].extension) : \"folder\"#' +\n                            '#} else {#' +\n                                ' #:selection[0][field]#' +\n                            '#}#' +\n                        '</dd>'+\n                        '<dd class=\"k-line-break\"></dd>' +\n                    '# } #' +\n                '</dl>' +\n            '#}#' +\n        '</div>';\n\n    var MULTIPLE_FILES_PREVIEW_TEMPLATE = '' +\n        '<div class=\"#:styles.fileInfo#\">' +\n            '<div class=\"#:styles.filePreview#\">' +\n                '<span class=\"k-file-icon k-icon k-i-file\"></span>' +\n            '</div>' +\n            '<span class=\"#:styles.fileName#\">' +\n                '#:selection.length# ' +\n                '#:messages.items#' +\n            '</span>' +\n        '</div>';\n\n    var FileManager = DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            DataBoundWidget.fn.init.call(that, element, options);\n\n            that.options = kendo.deepExtend({}, that.options, options);\n\n            that.defaultSortOption = { field: \"name\", dir: \"asc\" };\n            that.folderSortOption = { field: \"isDirectory\", dir: \"desc\" };\n\n            that._commandStack = new ui.filemanager.CommandStack();\n\n            that._dataSource();\n\n            that._wrapper();\n\n            that._renderHeader();\n\n            that._renderContentContainer();\n\n            that._initContextMenu();\n\n            that._renderNavigation();\n\n            that._renderContent();\n\n            that._renderPreview();\n\n            that._initUploadDialog();\n\n            that._resizable();\n\n            that.resize();\n\n            kendo.notify(that, kendo.ui);\n        },\n\n        options: {\n            name: \"FileManager\",\n            height: 500,\n            resizable: true,\n            initialView: viewTypes.list,\n            toolbar: {\n                resizable: true\n            },\n            contextMenu: {},\n            upload: {},\n            uploadUrl: \"\",\n            views: {},\n            breadcrumb: {},\n            draggable: true,\n            dialogs: {\n                upload: {\n                    width: 530\n                },\n                moveConfirm: {\n                    width: 350,\n                    closable: true\n                },\n                deleteConfirm: {\n                    width: 360,\n                    closable: true\n                },\n                renamePrompt: {\n                    width: 350,\n                    closable: true\n                }\n            },\n            previewPane: {\n                metaFields: [\"extension\", \"size\", \"created\", \"modified\"],\n                noFileTemplate: NO_FILE_PREVIEW_TEMPLATE,\n                singleFileTemplate: SINGLE_FILES_PREVIEW_TEMPLATE,\n                multipleFilesTemplate: MULTIPLE_FILES_PREVIEW_TEMPLATE\n            },\n            messages: {\n                toolbar: {\n                    createFolder: \"New Folder\",\n                    upload: \"Upload\",\n                    sortDirection: \"Sort Direction\",\n                    sortDirectionAsc: \"Sort Direction Ascending\",\n                    sortDirectionDesc: \"Sort Direction Descending\",\n                    sortField: \"Sort By\",\n                    nameField: \"Name\",\n                    sizeField: \"File Size\",\n                    typeField: \"Type\",\n                    dateModifiedField: \"Date Modified\",\n                    dateCreatedField: \"Date Created\",\n                    listView: \"List View\",\n                    gridView: \"Grid View\",\n                    search: \"Search\",\n                    details: \"View Details\",\n                    detailsChecked: \"On\",\n                    detailsUnchecked: \"Off\",\n                    \"delete\": \"Delete\",\n                    rename: \"Rename\"\n                },\n                views: {\n                    nameField: \"Name\",\n                    sizeField: \"File Size\",\n                    typeField: \"Type\",\n                    dateModifiedField: \"Date Modified\",\n                    dateCreatedField: \"Date Created\",\n                    items: \"items\",\n                    listLabel: \"FileManager ListView\",\n                    gridLabel: \"FileManager Grid\",\n                    treeLabel: \"FileManager TreeView\"\n                },\n                dialogs: {\n                    upload: {\n                        title: \"Upload Files\",\n                        clear: \"Clear List\",\n                        done: \"Done\"\n                    },\n                    moveConfirm: {\n                        title: \"Confirm\",\n                        content: \"<p style='text-align: center;'>Do you want to move or copy?</p>\",\n                        okText: \"Copy\",\n                        cancel: \"Move\",\n                        close: \"close\"\n                    },\n                    deleteConfirm: {\n                        title: \"Confirm\",\n                        content: \"<p style='text-align: center;'>Are you sure you want to delete the selected file(s)?</br>You cannot undo this action.</p>\",\n                        okText: \"Delete\",\n                        cancel: \"Cancel\",\n                        close: \"close\"\n                    },\n                    renamePrompt: {\n                        title: \"Prompt\",\n                        content: \"<p style='text-align: center;'>Enter new name for the file.</p>\",\n                        okText: \"Rename\",\n                        cancel: \"Cancel\",\n                        close: \"close\"\n                    }\n                },\n                previewPane: {\n                    noFileSelected: \"No File Selected\",\n                    extension: \"Type\",\n                    size: \"Size\",\n                    created: \"Date Created\",\n                    createdUtc: \"Date Created UTC\",\n                    modified: \"Date Modified\",\n                    modifiedUtc: \"Date Modified UTC\",\n                    items: \"items\"\n                }\n            }\n        },\n\n        events: [\n            NAVIGATE,\n            SELECT,\n            OPEN,\n            DATABINDING,\n            DATABOUND,\n            ERROR,\n            DROP,\n            EXECUTE,\n            COMMAND\n        ],\n\n        _dataSource: function () {\n            var that = this,\n                options = that.options,\n                dataSourceOptions = options.dataSource || {},\n                typeSortOrder = that.folderSortOption,\n                nameSortOrder = that.defaultSortOption,\n                dataSource;\n\n            if (!(dataSourceOptions instanceof kendo.data.FileManagerDataSource)) {\n                if(isArray(dataSourceOptions)){\n                    dataSource = {\n                        data: dataSourceOptions,\n                        autoSync: false,\n                        sort: [typeSortOrder, nameSortOrder]\n                     };\n                } else {\n                    dataSource = extend(true, dataSourceOptions, {\n                        autoSync: false,\n                        sort: [typeSortOrder, nameSortOrder]\n                    });\n                }\n\n                if (dataSourceOptions && isPlainObject(dataSourceOptions.schema)) {\n                    dataSource.schema = dataSourceOptions.schema;\n                } else if (isPlainObject(kendo.data.schemas.filemanager)) {\n                    dataSource.schema = kendo.data.schemas.filemanager;\n                }\n            } else {\n                dataSource = dataSourceOptions;\n            }\n\n            if (that.dataSource && that._errorHandler) {\n                that.dataSource.unbind(ERROR, that._errorHandler);\n                that.dataSource.unbind(CHANGE, that._changeHandler);\n            } else {\n                that._errorHandler = proxy(that._error, that);\n                that._changeHandler = proxy(that._change, that);\n            }\n\n            that.dataSource = kendo.data.FileManagerDataSource.create(dataSource)\n                .bind(ERROR, that._errorHandler)\n                .bind(CHANGE, that._changeHandler);\n        },\n\n        _error: function (ev) {\n            if(!this.trigger(ERROR, ev)) {\n                window.console.warn('Error! The requested URL returned ' + ev.xhr.status + ' - ' + ev.xhr.statusText);\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                options = that.options,\n                width = options.width,\n                height = options.height;\n\n            that.wrapper = that.element\n                .addClass(fileManagerStyles.wrapper);\n\n            if (width) {\n                that.wrapper.width(width);\n            }\n\n            if (height) {\n                that.wrapper.height(height);\n            }\n\n            that._resizeHandler = kendo.onResize(function() {\n                that.resize(true);\n            });\n        },\n\n        _renderHeader: function () {\n            var that = this,\n                options = that.options;\n\n            if (options.toolbar) {\n                that.header = $(\"<div />\").addClass(fileManagerStyles.header);\n                that.header.append(that._initToolbar().element);\n            }\n\n            that.wrapper.append(that.header);\n        },\n\n        _renderContentContainer: function() {\n            var that = this,\n                container = $(\"<div />\").addClass(fileManagerStyles.contentContainer);\n\n            that.contentContainer = container;\n\n            that.wrapper.append(that.contentContainer);\n        },\n\n        _initContextMenu: function(){\n            var that = this,\n                options = that.options,\n                menuOptions = extend({}, options.contextMenu, {\n                    filemanager: that,\n                    messages: options.messages.toolbar,\n                    target: that.contentContainer,\n                    filter: \"[data-uid]\",\n                    action: that.executeCommand.bind(that),\n                    isLocalBinding: that.dataSource.isLocalBinding\n                });\n\n            if(options.contextMenu === false) {\n                return;\n            }\n\n            that.contextMenu = new ui.filemanager.ContextMenu(\"<ul></ul>\", menuOptions);\n\n            that.contextMenu.bind(OPEN, proxy(that._cacheFocus, that));\n        },\n\n        _renderNavigation: function() {\n            var that = this;\n\n            that.navigation = $(\"<div />\").addClass(fileManagerStyles.navigation);\n            that.navigation.append(that._initTreeView().element);\n\n            that.contentContainer.append(that.navigation);\n        },\n\n        _renderContent: function() {\n            var that = this,\n                options = that.options,\n                toolbar = that.toolbar;\n\n            that.content = $(\"<div />\").addClass(fileManagerStyles.content);\n\n            if (options.breadcrumb) {\n                that.content.append(that._initBreadcrumb().element);\n            }\n\n            that.content.append(that._initView());\n\n            if (!toolbar || !toolbar.isToolEnabled(toolbar.defaultTools.upload.name)) {\n                that.content.append(that._initUpload().wrapper.hide());\n            }\n\n            that.contentContainer.append(that.content);\n        },\n\n        _renderPreview: function() {\n            var that = this,\n                enablePreview = that.options.previewPane;\n\n            if (!enablePreview) {\n               return;\n            }\n\n            that.preview = $(\"<div />\").addClass(fileManagerStyles.preview);\n            that.previewContainer = $(\"<div />\").addClass(fileManagerStyles.previewContainer);\n            that.preview.append(that.previewContainer);\n\n            that._setPreviewPaneContent();\n\n            that.contentContainer.append(that.preview.hide());\n        },\n\n        _setPreviewPaneContent: function() {\n            var that = this,\n                options = that.options,\n                previewPaneMessages = options.messages.previewPane,\n                previewPaneOptions = options.previewPane,\n                selection = that.getSelected(),\n                previewTemplate;\n\n            if (!selection) {\n                previewTemplate = template(previewPaneOptions.noFileTemplate)({\n                    styles: fileManagerTemplateStyles,\n                    messages: previewPaneMessages\n                });\n\n                that.previewContainer.html(previewTemplate);\n                return;\n            }\n\n            previewTemplate = selection.length === 1 ?\n                previewPaneOptions.singleFileTemplate :\n                previewPaneOptions.multipleFilesTemplate;\n\n            previewTemplate = template(previewTemplate)({\n                styles: fileManagerTemplateStyles,\n                messages: previewPaneMessages,\n                selection: selection,\n                metaFields: previewPaneOptions.metaFields\n            });\n\n            that.previewContainer.html(previewTemplate);\n        },\n\n        _initToolbar: function () {\n            var that = this,\n                options = that.options,\n                toolbarElement = $(\"<div />\").addClass(fileManagerStyles.toolbar),\n                toolbarOptions = extend({}, options.toolbar, {\n                    filemanager: this,\n                    messages: options.messages.toolbar,\n                    action: that.executeCommand.bind(that)\n                });\n\n            that.toolbar = new ui.filemanager.ToolBar(toolbarElement, toolbarOptions);\n\n            return that.toolbar;\n        },\n\n        _initTreeView: function() {\n            var that = this,\n                treeViewElement = $(\"<div />\").addClass(fileManagerStyles.treeview),\n                options = that.options.views[TREE_TYPE],\n                explicitOptions = extend(true, {}, {\n                    dataSource: that.options.dataSource,\n                    messages: that.options.messages.views,\n                    draggable: that.options.draggable,\n                    isLocalBinding: that.dataSource.isLocalBinding\n                });\n\n            that.treeView = new ui.filemanager.ViewComponents[TREE_TYPE](treeViewElement, options, explicitOptions);\n\n            that.treeView.bind(NAVIGATE, proxy(that._navigate, that))\n                         .bind(LOAD, proxy(that._load, that))\n                         .bind(DROP, proxy(that._drop, that))\n                         .bind(KEYDOWNACTION, proxy(that._keydownAction, that));\n\n            return that.treeView;\n        },\n\n        _drop: function (ev) {\n            var that = this;\n\n            if(!that.trigger(DROP, ev) && ev.items.indexOf(ev.target) < 0) {\n                that._confirm({\n                    type: \"move\",\n                    target: ev.target\n                }).done(function(){\n                    that.executeCommand({command: \"CopyCommand\", options: ev});\n                }).fail(function(){\n                    that.executeCommand({command: \"MoveCommand\", options: ev});\n                });\n            }\n        },\n\n        _keydownAction: function (ev) {\n            var that = this,\n                keyCode = ev.keyCode,\n                keys = kendo.keys;\n\n            if (keyCode === keys.DELETE) {\n                that.executeCommand({command: \"DeleteCommand\", options: { target: ev.target } });\n            }\n\n            if (keyCode === keys.F2) {\n                that.executeCommand({command: \"RenameCommand\", options: { target: ev.target } });\n            }\n        },\n\n        _confirm: function(options){\n            var that = this,\n                messages = that.options.messages.dialogs[options.type + \"Confirm\"];\n\n            var confirm = $(\"<div></div>\").kendoConfirm(extend({}, {\n                title: messages.title,\n                content: messages.content,\n                messages: messages\n            }, that.options.dialogs[options.type + \"Confirm\"])).data(\"kendoConfirm\");\n\n            confirm.bind(OPEN, proxy(that._cacheFocus, that));\n            confirm.bind(HIDE, proxy(that._restoreFocus, that, options.target));\n\n            confirm.open();\n\n            confirm.wrapper.removeClass(\"k-confirm\");\n\n            return confirm.result;\n        },\n\n        _prompt: function(options){\n            var that = this,\n                messages = this.options.messages.dialogs[options.type + \"Prompt\"];\n\n            var prompt = $(\"<div></div>\").kendoPrompt(extend({}, {\n                title: messages.title,\n                content: messages.content,\n                messages: messages,\n                value: options.defaultInput\n            },this.options.dialogs[options.type + \"Prompt\"])).data(\"kendoPrompt\");\n\n            prompt.bind(OPEN, proxy(that._cacheFocus, that));\n            prompt.bind(CLOSE, proxy(that._restoreFocus, that, options.target));\n\n            prompt.open();\n\n            prompt.wrapper.removeClass(\"k-prompt\");\n\n            return prompt.result;\n        },\n\n        _cacheFocus: function() {\n            var that = this,\n                activeElement = $(document.activeElement),\n                view = that.view(),\n                treeView = that.treeView.widgetComponent;\n\n            if (that.contextMenu && that.contextMenu.popup.visible()) {\n                return;\n            }\n\n            that.treeView._shouldFocus = false;\n\n            if ((treeView.current() && treeView.current().find(\".k-state-focused\").length) ||\n                activeElement.hasClass(fileManagerStyles.treeview)){\n                that.treeView._shouldFocus = true;\n                view._focusElement = activeElement;\n                return;\n            }\n\n            view._focusElement = activeElement.hasClass(fileManagerStyles[that._viewType]) ?\n                activeElement :\n                null;\n        },\n\n        _restoreFocus: function(target) {\n            var that = this,\n                view = that.view();\n\n            if (!target) {\n                return;\n            }\n\n            if (view._focusElement) {\n                view._focusElement.trigger(\"focus\");\n            } else if (target.closest && target.closest(\":kendoFocusable\").length) {\n                target.closest(\":kendoFocusable\").trigger(\"focus\");\n            }\n        },\n\n        _initView: function() {\n            var that = this,\n                viewWrapper = $(\"<div />\").addClass(fileManagerStyles.view),\n                initialView = that.options.initialView;\n\n            that.viewWrapper = viewWrapper;\n            that.viewWrapper.append(that.view(initialView));\n\n            return viewWrapper;\n        },\n\n        _initBreadcrumb: function() {\n            var that = this,\n                options = that.options,\n                breadcrumbElement = $(\"<nav />\").addClass(fileManagerStyles.breadcrumb),\n                breadcrumbOptions = extend({}, {\n                    items: [\n                        {type:\"rootitem\", text: \"\" }\n                    ],\n                    change: proxy(that._breadcrumbChange, that)\n                }, options.breadcrumb);\n\n            that.breadcrumb = new ui.Breadcrumb(breadcrumbElement, breadcrumbOptions);\n\n            return that.breadcrumb;\n        },\n\n        _breadcrumbChange: function(ev){\n            var entry = ev.sender.items().filter(function(item) {\n                return item.path === ev.value.substring(1);\n            }).shift();\n\n            this._navigate({ path: entry ? entry.id : \"\" });\n        },\n\n        _initUploadDialog: function() {\n            var that = this,\n                options = that.options,\n                dialogMessages = options.messages.dialogs.upload,\n                dialogElement = $(\"<div />\"),\n                dialogOptions = extend({}, {\n                    title: dialogMessages.title,\n                    modal: true,\n                    visible: false,\n                    width: 500,\n                    actions: [\n                        { text: dialogMessages.clear, action: proxy(that._clearUploadFilesList, that) },\n                        { text: dialogMessages.done, primary: true }\n                    ],\n                    messages: dialogMessages\n                }, options.dialogs.upload),\n                uploadInstance;\n\n            if (!that._shouldInitUpload()) {\n                return;\n            }\n\n            uploadInstance = that._initUpload();\n\n            that.uploadDialog = new ui.Dialog(dialogElement, dialogOptions);\n            that.uploadDialog.wrapper.addClass(fileManagerStyles.uploadDialog);\n            that.uploadDialog.element.append(uploadInstance.wrapper);\n\n            that.uploadDialog.bind(OPEN, proxy(that._toggleUploadDropZone, that, \"\"));\n            that.uploadDialog.bind(CLOSE, proxy(that._toggleUploadDropZone, that, that.viewWrapper));\n\n            return that.uploadDialog;\n        },\n\n        _shouldInitUpload: function() {\n            var that = this,\n                options = that.options,\n                shouldInit = false;\n\n            if ((options.uploadUrl || (options.upload.async && options.upload.async.saveUrl)) &&\n                options.upload !== false) {\n                    shouldInit = true;\n            }\n\n            return shouldInit;\n        },\n\n        _initUpload: function() {\n            var that = this,\n                options = that.options,\n                uploadElement = $(\"<input type='file' name='file'/>\").addClass(fileManagerStyles.upload),\n                uploadOptions = extend(true, {\n                    async: {\n                         autoUpload: true,\n                         saveUrl: options.uploadUrl\n                    },\n                    dropZone: that.viewWrapper\n                }, options.upload);\n\n            that.upload = new ui.Upload(uploadElement[0], uploadOptions);\n\n            that.upload.bind(UPLOAD, proxy(that._sendUploadPathParameter, that));\n            that.upload.bind(SUCCESS, proxy(that._success, that));\n\n            return that.upload;\n        },\n\n        _sendUploadPathParameter: function(ev) {\n            ev.data = extend(ev.data, { path: this.path() });\n        },\n\n        _success: function(){\n            this._view.widgetComponent.dataSource.read();\n        },\n\n        _clearUploadFilesList: function() {\n            var that = this,\n                upload = that.upload;\n\n            if (upload) {\n                upload.clearAllFiles();\n            }\n        },\n\n        _toggleUploadDropZone: function(zone) {\n            var that = this,\n                upload = that.upload;\n\n            if (upload) {\n                upload.setOptions({ dropZone: zone});\n            }\n        },\n\n        _binding: function (ev){\n            if(this.trigger(DATABINDING, { source: \"view\", action: ev.action, items: ev.items, index: ev.index })){\n                ev.preventDefault();\n            }\n        },\n\n        _bound: function (){\n            if (this.options.previewPane) {\n                this._setPreviewPaneContent();\n            }\n            this.trigger(DATABOUND);\n        },\n\n        _createResizableSplitBar: function(cssClass) {\n            var splitBar = $(\"<div />\")\n                    .addClass(fileManagerStyles.splitBar)\n                    .addClass(fileManagerStyles.splitBarHorizontal)\n                    .addClass(cssClass),\n                icon = $(\"<span />\").addClass(fileManagerStyles.splitBarIcon);\n\n            splitBar.append(icon);\n\n            splitBar.hover(function () {\n                $(this).toggleClass(fileManagerStyles.splitBarHover);\n            });\n\n            return splitBar;\n        },\n\n        _initResizableNavigation: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                splitBar = that._createResizableSplitBar(fileManagerStyles.splitBarNavigation),\n                contentWrapper = wrapper.find(DOT + fileManagerStyles.content),\n                navigationWrapper = wrapper.find(DOT + fileManagerStyles.navigation),\n                contentWrapperWidth,\n                navigationWrapperWidth;\n\n            splitBar.insertAfter(navigationWrapper);\n\n            that._resizeDraggable.navigation = that.wrapper.find(splitBar)\n                .end()\n                .kendoResizable({\n                    handle: DOT + fileManagerStyles.splitBarNavigation,\n                    start: function () {\n                        contentWrapperWidth = contentWrapper.width();\n                        navigationWrapperWidth = navigationWrapper.width();\n                    },\n                    resize: function(e) {\n                        var delta = e.x.initialDelta;\n\n                        if (kendo.support.isRtl(wrapper)) {\n                            delta *= -1;\n                        }\n\n                        if (navigationWrapperWidth + delta < -2 || contentWrapperWidth - delta < -2) {\n                            return;\n                        }\n\n                        navigationWrapper.width(navigationWrapperWidth + delta);\n                    }\n                }).getKendoResizable();\n        },\n\n        _initResizablePreview: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                splitBar = that._createResizableSplitBar(fileManagerStyles.splitBarPreview),\n                contentWrapper = wrapper.find(DOT + fileManagerStyles.content),\n                previewWrapper = wrapper.find(DOT + fileManagerStyles.preview),\n                contentWrapperWidth,\n                previewWrapperWidth;\n\n            if (!that.options.previewPane) {\n                return;\n            }\n\n            splitBar.insertBefore(previewWrapper).hide();\n\n            that._resizeDraggable.preview = wrapper.find(splitBar)\n                .end()\n                .kendoResizable({\n                    handle: DOT + fileManagerStyles.splitBarPreview,\n                    start: function () {\n                        contentWrapperWidth = contentWrapper.width();\n                        previewWrapperWidth = previewWrapper.width();\n                    },\n                    resize: function(e) {\n                        var delta = e.x.initialDelta;\n\n                        if (kendo.support.isRtl(wrapper)) {\n                            delta *= -1;\n                        }\n\n                        if (previewWrapperWidth - delta < -2 || contentWrapperWidth + delta < -2) {\n                            return;\n                        }\n\n                        previewWrapper.width(previewWrapperWidth - delta);\n                    }\n                }).getKendoResizable();\n        },\n\n        _resizable: function() {\n            var that = this,\n                options = that.options;\n\n            that._resizeDraggable = {};\n\n            if (!options.resizable) {\n                return;\n            }\n\n            that.wrapper.addClass(fileManagerStyles.resizable);\n\n            that._initResizableNavigation();\n\n            that._initResizablePreview();\n        },\n\n        view: function(type) {\n            var that = this,\n                element = $('<div aria-label=\"' + that.options.messages.views[type + \"Label\"] + '\"></div>'),\n                options = that.options.views[type],\n                explicitOptions = extend(true, {}, {\n                    dataSource: that._viewDataSource || that.dataSource,\n                    messages: that.options.messages.views,\n                    draggable: that.options.draggable\n                });\n\n            if(type === undefined) {\n                return that._view;\n            }\n\n            if(!ui.filemanager.ViewComponents[type]) {\n                throw new Error(kendo.format(\"There is no {0} ViewComponent registered!\", type));\n            }\n\n            if(that._view && that._view.destroy) {\n                that._view.destroy();\n                that.viewWrapper.empty();\n            }\n\n            that._viewType = type;\n            that._view = new ui.filemanager.ViewComponents[type](element, options, explicitOptions);\n\n            that._view.bind(SELECT, proxy(that._select, that));\n            that._view.bind(OPEN, proxy(that._open, that));\n            that._view.bind(DATABINDING, proxy(that._binding, that));\n            that._view.bind(DATABOUND, proxy(that._bound, that));\n            that._view.bind(DROP, proxy(that._drop, that));\n            that._view.bind(KEYDOWNACTION, proxy(that._keydownAction, that));\n            that._view.bind(CANCEL, proxy(that._cancel, that));\n\n            that._view.element.addClass(fileManagerStyles[type]);\n\n            that.viewWrapper\n                .removeClass(\n                    Object.keys(ui.filemanager.ViewComponents).map(function(el) {\n                        return fileManagerStyles.view + \"-\" + el;\n                    }).join(\" \")\n                )\n                .addClass(fileManagerStyles.view + \"-\" + type);\n\n            that.viewWrapper.append(that._view.element);\n        },\n\n        executeCommand: function(args) {\n            var commandName = args.command,\n                commandOptions = extend({ filemanager: this }, isPlainObject(args.options) ? args.options : {value: args.options}),\n                command = new ui.filemanager.commands[commandName](commandOptions);\n\n            if(!this.trigger(EXECUTE, args)) {\n                return command.exec();\n            }\n        },\n\n        _navigate: function(ev){\n            var that = this,\n                path = ev.path;\n\n            if(!that.trigger(NAVIGATE, { path: path })) {\n                that.navigate(path);\n            }\n        },\n\n        _load: function(ev){\n            var entry = this.dataSource.get(ev.entryId);\n            entry.load();\n        },\n\n        _select: function (ev) {\n            if (this.options.previewPane) {\n                this._setPreviewPaneContent();\n            }\n\n            this.trigger(SELECT, { entries: ev.entries });\n        },\n\n        _open: function (ev) {\n            var that = this,\n                entry = ev.entry;\n\n            that.trigger(OPEN, { entry: entry });\n\n            if(entry.isDirectory) {\n                that._navigate({ path: entry.id });\n            }\n        },\n\n        _cancel: function () {\n            var that = this,\n                commandStack = that._commandStack,\n                command = commandStack.next();\n\n            commandStack.reject(command);\n            that.trigger(COMMAND, { status: \"cancel\", action: \"itemchange\", data: command.data });\n        },\n\n        _change: function (ev) {\n            var that = this,\n                commandStack = that._commandStack,\n                targetDataSource = ev.node ? ev.node.children : that.dataSource;\n\n            if(that.trigger(DATABINDING, { source: \"tree\", action: ev.action, items: ev.items, index: ev.index })){\n                return;\n            }\n\n            that.treeView._refreshDataSource(ev);\n\n            if(ev.action === \"remove\" || ev.action === \"itemchange\" || ev.action === \"add\") {\n                if (commandStack.empty()) {\n                    targetDataSource.sync();\n                } else {\n                    var command = commandStack.next();\n\n                    targetDataSource.sync().then(function(res){\n                        commandStack.resolve(command);\n                        that.trigger(COMMAND, { status: \"success\", action: ev.action, data: command.data, response: res });\n                    }).fail(function(res){\n                        commandStack.reject(command);\n                        that.trigger(COMMAND, { status: \"fail\", action: ev.action, data: command.data, response: res });\n                    });\n                }\n            }\n\n            if(ev.action === \"remove\" && that._viewDataSource && that._viewDataSource.parent() && ev.items[0] === that._viewDataSource.parent()) {\n                that._navigateToParent(ev.items[0]);\n            }\n\n            if(ev.action == \"itemchange\" && that._viewDataSource && that._viewDataSource.parent() && that.path().indexOf(ev.items[0].id) >= 0) {\n                that._navigateToParent(ev.items[0]);\n            }\n\n            if(ev.action === \"itemchange\") {\n                ev.items[0].loaded(false);\n            }\n        },\n\n        _navigateToParent: function(item){\n            var that = this;\n            var parent = item.parentNode();\n            var parentNodePath = parent ? parent.id : \"\";\n            that._navigate({path: parentNodePath});\n        },\n\n        _buildBreadcrumbPath: function (entry){\n            var that = this,\n                breadcrumb = that.breadcrumb,\n                items = [];\n\n            while(entry) {\n                items.push({\n                    id: entry.id,\n                    text: entry.name,\n                    path: entry.path\n                });\n\n                entry = entry.parentNode && entry.parentNode();\n            }\n\n            items.push({ type: \"rootItem\", id: \"\", text: \"\"  });\n\n            breadcrumb.items(items.reverse());\n        },\n\n        _adjustDimensions: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                gridSelector = DOT + fileManagerStyles.grid,\n                listViewSelector = DOT + fileManagerStyles.list,\n                contentContainer = DOT + fileManagerStyles.contentContainer,\n                totalHeight = wrapper.height(),\n                toolbarHeight = 0,\n                breadcrumbHeight = 0;\n\n            if (that.toolbar) {\n                toolbarHeight = outerHeight(that.toolbar.wrapper);\n            }\n\n            if (that.breadcrumb) {\n                breadcrumbHeight = outerHeight(that.breadcrumb.wrapper);\n            }\n\n            if (that.options.height !== \"auto\") {\n                wrapper\n                    .find([gridSelector].join(\",\"))\n                    .height(totalHeight - (toolbarHeight + breadcrumbHeight + 1));\n\n                wrapper\n                    .find(listViewSelector)\n                    .parent()\n                    .height(totalHeight - (toolbarHeight + breadcrumbHeight + 1));\n\n                wrapper\n                    .find(contentContainer)\n                    .height(totalHeight - toolbarHeight);\n            }\n        },\n\n        _resize: function() {\n            this._adjustDimensions();\n            kendo.resize(this.element.children());\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n\n            that.options.dataSource = dataSource;\n            that._dataSource();\n\n            if(that.toolbar) {\n                that.toolbar.destroy();\n                that.header.empty();\n                that.header.append(that._initToolbar().element);\n            }\n\n            if(that.treeView){\n                that.treeView.destroy();\n                that.navigation.empty();\n                that.navigation.append(that._initTreeView().element);\n            }\n\n            if(that._view) {\n                that.view(that._viewType|| that.options.initialView);\n            }\n\n            that._initContextMenu();\n\n        },\n\n        refresh: function (){\n            var that = this,\n                dataSource = that._viewDataSource || that.dataSource;\n\n            dataSource.read();\n        },\n\n        getSize: function() {\n            return kendo.dimensions(this.wrapper);\n        },\n\n        getSelected: function(){\n            var that = this,\n                items = that._view.getSelected(),\n                treeView = that.treeView;\n\n            if(items && items.length) {\n                return items;\n            }\n\n            var item = treeView.getSelected();\n\n            if(item) {\n                return [ that.dataSource.get(item.id) ];\n            }\n        },\n\n        path: function () {\n            return this._path || \"\";\n        },\n\n        navigate: function (path) {\n            var that = this,\n                dataSource = that.dataSource,\n                entry = dataSource.get(path.replace(/^\\//, \"\")),\n                view = that._view,\n                treeView = that.treeView,\n                breadcrumb = that.breadcrumb,\n                isRoot = path === \"\" || path === \"/\";\n\n            if(!entry && !isRoot) {\n                window.console.warn('Error! Could not navigate to the folder at the requested path(' + path + '). Make sure that the parent folder of the target folder has already been loaded.');\n                return;\n            }\n\n            that._path = path;\n\n            if(that.trigger(DATABINDING, { source: \"navigation\", action: \"rebind\", items: [entry] })){\n                return;\n            }\n\n            if(breadcrumb) {\n                that._buildBreadcrumbPath(entry);\n            }\n\n            if(isRoot) {\n                dataSource.sort([ that.folderSortOption, that.defaultSortOption ]);\n                that._viewDataSource = dataSource;\n                view.refresh(that._viewDataSource);\n                treeView.treeView.select($());\n\n                if (that.options.previewPane) {\n                    that._setPreviewPaneContent();\n                }\n\n                return;\n            }\n\n            if(entry.loaded && !entry.loaded()) {\n                entry.load();\n            }\n\n            if(view) {\n                that._viewDataSource = entry.children;\n                that._viewDataSource._sort = [ that.folderSortOption, that.defaultSortOption ];\n                view.refresh(that._viewDataSource);\n            }\n\n            if(treeView) {\n                treeView.refresh(entry.id);\n            }\n\n            if (that.options.previewPane) {\n                that._setPreviewPaneContent();\n            }\n        },\n\n        items: function () {\n            var that = this;\n\n            return that.treeView.widgetComponent.items().add(that._view.widgetComponent.items());\n        },\n\n        destroy: function() {\n            var that = this;\n\n            DataBoundWidget.fn.destroy.call(that);\n\n            that.dataSource\n                .unbind(ERROR, that._errorHandler)\n                .unbind(CHANGE, that._changeHandler);\n\n            if (that._resizeDraggable.navigation) {\n                that._resizeDraggable.navigation.destroy();\n                that._resizeDraggable.navigation = null;\n            }\n\n            if (that._resizeDraggable.preview) {\n                that._resizeDraggable.preview.destroy();\n                that._resizeDraggable.preview = null;\n            }\n\n            if (that.uploadDialog) {\n                that.uploadDialog.destroy();\n                that.uploadDialog = null;\n            }\n\n            if (that.upload) {\n                that.upload.destroy();\n                that.upload = null;\n            }\n\n            if (that.contextMenu) {\n                that.contextMenu.destroy();\n                that.contextMenu = null;\n            }\n\n            kendo.unbindResize(that._resizeHandler);\n\n            that.dataSource = null;\n            that._viewDataSource = null;\n\n            kendo.destroy(that.element);\n        }\n    });\n\n    ui.plugin(FileManager);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n"],"names":["define","$","window","kendo","jQuery","undefined","extend","deferred","Deferred","proxy","Class","Command","init","options","this","filemanager","CreateFolderCommand","fn","call","exec","that","commandStack","_commandStack","dataSource","_viewDataSource","removeProxy","_remove","_item","_createNewModel","push","item","toJSON","fail","add","pushDestroy","RenameCommand","target","viewItem","_view","widgetComponent","dataItem","edit","_renameTreeViewItem","uid","data","treeView","getByUid","realItem","get","id","_prompt","type","defaultInput","name","done","newName","set","DeleteCommand","items","getSelected","itemsToRemove","is","length","_confirm","removeItems","_itemsToRemove","Array","isArray","_removeItem","itemToRemove","splice","then","remove","CopyCommand","targetDataSource","children","i","fileManagerNewItem","MoveCommand","promises","cloning","promise","_delete","whenAll","always","SortCommand","sortOptions","defaultSortOption","dir","field","sort","folderSortOption","SearchCommand","filter","operator","value","ChangeViewCommand","view","resize","OpenDialogCommand","dialog","open","console","warn","format","TogglePaneCommand","pane","resizable","getResizable","toggle","wrapper","find","handle","_resizeDraggable","CommandStack","_stack","_keys","guid","next","key","keys","nextCommand","resolve","command","reject","empty","ui","FileManagerCommand","commands","amd","a1","a2","a3","Observable","NAVIGATE","SELECT","EXPAND","CHANGE","OPEN","LOAD","KEYDOWN","KEYDOWNACTION","NS","fileManagerDraggables","fileManagerDragOrigin","registerViewComponent","componentName","component","ViewComponents","getViewComponent","Component","widget","element","Error","_bindEvents","bind","_binding","_bound","ev","trigger","preventDefault","_setDSOptions","dataSourceOptions","_initDragAndDrop","dropFilter","draggable","kendoDraggable","hint","_hint","cursorOffset","top","left","holdToDrag","ignore","hold","_hold","userEvents","minHold","droptarget","kendoDropTargetArea","drop","_onDrop","dragenter","dropTarget","addClass","dragleave","removeClass","currentTarget","selectable","clear","select","cancel","selectedItems","messages","isDirectory","targetId","itemIds","refresh","setDataSource","destroy","ListView","ViewComponent","explicitOptions","defaultOptions","kendoKeydown","_kendoKeydown","listView","isLocalBinding","layout","flex","direction","wrap","support","mobileOS","template","editTemplate","navigatable","_select","on","_dblClick","_mousedown","_keydown","_keydownAction","sender","input","isDirty","_modelFromElement","editable","dirty","_closeEditable","dataItems","entries","keyCode","ESC","node","closest","which","ENTER","preventKendoKeydown","_handleEnterKey","current","_triggerOpen","entry","addFolder","selected","off","TreeView","dataTextField","_refreshDataSource","action","parentNode","map","hasChildren","findByUid","_progress","each","index","append","_shouldFocus","focus","existingItem","_nextVisible","_navigate","_expand","entryId","path","noop","selectedItem","reload","read","Grid","_setupColumns","grid","mode","confirmation","sortable","columns","title","nameField","icon","getFileGroup","extension","htmlEncode","dateCreatedField","sizeField","size","getFileSizeMessage","table","_toggleFocusable","saveRow","F2","setTimeout","editorContainer","_editContainer","_tryCancel","cancelChanges","container","val","state","addBack","toggleClass","model","_destroyEditable","_displayRow","addRow","editRow","ToolBar","Item","toolbar","CLICK","TOGGLE","CLOSE","ACTION","FileManagerToolBar","_extendOptions","_attachEvents","events","concat","defaultTools","createFolder","text","rules","upload","sortDirection","buttons","togglable","group","sortField","menuButtons","changeView","spacer","details","overflow","search","_click","_change","tools","Object","_extendToolsOptions","tool","isBuiltInTool","isPlainObject","toolOptions","toolRules","attributes","JSON","parse","aria-label","data-command","data-options","deepExtend","_mapButtonGroups","_mapMenuButtons","remote","hidden","button","initialView","isToolEnabled","toolName","found","args","fileManagerSearch","SearchTool","inputWrapper","renderIcon","addUidAttr","addIdAttr","addOverflowAttr","attr","placeholder","_inputHandler","_input","FileManagerDetailsToggle","registerComponent","label","switchElement","switchInstance","Switch","change","checked","detailsChecked","unchecked","detailsUnchecked","fileManagerDetailsToggle","parent","Node","HierarchicalDataSource","DataSource","FileEntry","schemas","fields","defaultValue","hasDirectories","created","createdUtc","modified","modifiedUtc","getter","isFunction","isDirectoryObject","_initChildren","transport","parameterMap","FileManagerDataSource","_childrenOptions","e","collection","_updateChildrenField","isNew","_defaultId","fileEntry","serverFiltering","_hierarchicalFilter","schema","modelBase","LocalTransport","_attachBubbleHandlers","insert","result","_cleanDestroyed","_hasDirectories","_destroyed","create","_dataSource","observableFileManagerData","array","fetch","_data","ContextMenu","FileManagerContextMenu","_overrideTemplates","_restrictDefaultItems","_extendItems","_onSelect","_onOpen","templates","sprite","defaultItems","rename","spriteCssClass","delete","_extendItem","menu","isEmptyObject","__meta__","category","description","depends","features","DataBoundWidget","outerHeight","_outerHeight","ERROR","UPLOAD","SUCCESS","HIDE","DATABINDING","DATABOUND","DROP","EXECUTE","COMMAND","CANCEL","TREE_TYPE","DOT","fileManagerStyles","header","navigation","contentContainer","content","preview","treeview","breadcrumb","list","uploadDialog","splitBar","splitBarHorizontal","splitBarHover","splitBarIcon","splitBarNavigation","splitBarPreview","fileManagerTemplateStyles","filePreview","fileInfo","fileName","fileMeta","metaLabel","metaValue","viewTypes","NO_FILE_PREVIEW_TEMPLATE","SINGLE_FILES_PREVIEW_TEMPLATE","MULTIPLE_FILES_PREVIEW_TEMPLATE","FileManager","_wrapper","_renderHeader","_renderContentContainer","_initContextMenu","_renderNavigation","_renderContent","_renderPreview","_initUploadDialog","_resizable","notify","height","contextMenu","uploadUrl","views","dialogs","width","moveConfirm","closable","deleteConfirm","renamePrompt","previewPane","metaFields","noFileTemplate","singleFileTemplate","multipleFilesTemplate","sortDirectionAsc","sortDirectionDesc","typeField","dateModifiedField","gridView","listLabel","gridLabel","treeLabel","okText","close","noFileSelected","typeSortOrder","nameSortOrder","autoSync","_errorHandler","unbind","_changeHandler","_error","xhr","status","statusText","_resizeHandler","onResize","_initToolbar","menuOptions","executeCommand","_cacheFocus","_initTreeView","_initBreadcrumb","_initView","_initUpload","hide","enablePreview","previewContainer","_setPreviewPaneContent","previewPaneMessages","previewPaneOptions","selection","previewTemplate","styles","html","toolbarElement","toolbarOptions","treeViewElement","_load","_drop","indexOf","DELETE","confirm","kendoConfirm","_restoreFocus","prompt","kendoPrompt","activeElement","document","popup","visible","hasClass","_focusElement","_viewType","viewWrapper","breadcrumbElement","breadcrumbOptions","_breadcrumbChange","Breadcrumb","substring","shift","dialogMessages","dialogElement","dialogOptions","modal","actions","_clearUploadFilesList","primary","uploadInstance","_shouldInitUpload","Dialog","_toggleUploadDropZone","shouldInit","async","saveUrl","uploadElement","uploadOptions","autoUpload","dropZone","Upload","_sendUploadPathParameter","_success","clearAllFiles","zone","setOptions","source","_createResizableSplitBar","cssClass","hover","_initResizableNavigation","contentWrapper","navigationWrapper","contentWrapperWidth","navigationWrapperWidth","insertAfter","end","kendoResizable","start","delta","x","initialDelta","isRtl","getKendoResizable","_initResizablePreview","previewWrapper","previewWrapperWidth","insertBefore","_open","_cancel","el","join","commandName","commandOptions","navigate","load","sync","res","response","_navigateToParent","loaded","parentNodePath","_buildBreadcrumbPath","reverse","_adjustDimensions","gridSelector","listViewSelector","totalHeight","toolbarHeight","breadcrumbHeight","_resize","getSize","dimensions","_path","replace","isRoot","_sort","unbindResize","plugin"],"mappings":"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"}