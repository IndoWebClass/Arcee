{"version":3,"file":"kendo.gantt.timeline.min.js","sources":["kendo.gantt.timeline.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.gantt.timeline',[ \"./kendo.dom\", \"./kendo.touch\", \"./kendo.draganddrop\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"gantt.timeline\",\n    name: \"Gantt Timeline\",\n    category: \"web\",\n    description: \"The Gantt Timeline\",\n    depends: [ \"dom\", \"touch\", \"draganddrop\" ],\n    hidden: true\n};\n\n(function($) {\n\n    var Widget = kendo.ui.Widget;\n    var kendoDomElement = kendo.dom.element;\n    var kendoTextElement = kendo.dom.text;\n    var kendoHtmlElement = kendo.dom.html;\n    var isPlainObject = $.isPlainObject;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var extend = $.extend;\n    var proxy = $.proxy;\n    var isRtl = false;\n    var keys = kendo.keys;\n    var Query = kendo.data.Query;\n    var STRING = \"string\";\n    var NS = \".kendoGanttTimeline\";\n    var CLICK = \"click\";\n    var DBLCLICK = \"dblclick\";\n    var MOUSEMOVE = \"mousemove\";\n    var MOUSEENTER = \"mouseenter\";\n    var MOUSELEAVE = \"mouseleave\";\n    var KEYDOWN = \"keydown\";\n    var DOT = \".\";\n    var TIME_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 't')#\");\n    var DAY_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'ddd M/dd')#\");\n    var WEEK_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#\");\n    var MONTH_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'MMM')#\");\n    var YEAR_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'yyyy')#\");\n    var RESIZE_HINT = kendo.template('<div class=\"#=styles.marquee#\">' +\n                           '<div class=\"#=styles.marqueeColor#\"></div>' +\n                       '</div>');\n    var RESIZE_TOOLTIP_TEMPLATE = kendo.template('<div style=\"z-index: 100002;\" class=\"#=styles.tooltipWrapper# k-gantt-resize-hint\">' +\n                                   '<div class=\"#=styles.tooltipContent#\">' +\n                                        '<div>#=messages.start#: #=kendo.toString(start, format)#</div>' +\n                                        '<div>#=messages.end#: #=kendo.toString(end, format)#</div>' +\n                                   '</div>' +\n                              '</div>');\n    var PERCENT_RESIZE_TOOLTIP_TEMPLATE = kendo.template('<div style=\"z-index: 100002;\" class=\"#=styles.tooltipWrapper#\" >' +\n                                   '<div class=\"#=styles.tooltipContent#\">#=text#%</div>' +\n                                   '<div class=\"#=styles.tooltipCallout#\" style=\"left:13px;\"></div>' +\n                              '</div>');\n    var TASK_TOOLTIP_TEMPLATE = kendo.template('<div class=\"#=kendo.htmlEncode(styles.taskDetails)#\">' +\n                                    '<strong>#=kendo.htmlEncode(task.title)#</strong>' +\n                                    '<div class=\"#=styles.taskDetailsPercent#\">#=kendo.toString(task.percentComplete, \"p0\")#</div>' +\n                                    '<ul class=\"#=styles.reset#\">' +\n                                        '<li>#=messages.start#: #=kendo.toString(task.start, \"h:mm tt ddd, MMM d\")#</li>' +\n                                        '<li>#=messages.end#: #=kendo.toString(task.end, \"h:mm tt ddd, MMM d\")#</li>' +\n                                    '</ul>' +\n                                '</div>');\n    var OFFSET_TOOLTIP_TEMPLATE = kendo.template('<span>#=offsetPrefix#: #=offsetText#</span>');\n    var PLANNED_TOOLTIP_TEMPLATE = kendo.template('<div class=\"k-task-content\">' +\n            '<div>#=plannedStart#: #=startDate#</div>' +\n            '<div>#=plannedEnd#: #=endDate#</div>' +\n        '</div>');\n    var SIZE_CALCULATION_TEMPLATE = \"<table style='visibility: hidden;'>\" +\n        \"<tbody>\" +\n            \"<tr style='height:{0}'>\" +\n                \"<td>&nbsp;</td>\" +\n            \"</tr>\" +\n        \"</tbody>\" +\n    \"</table>\";\n\n    var defaultViews = {\n        day: {\n            type: \"kendo.ui.GanttDayView\"\n        },\n        week: {\n            type: \"kendo.ui.GanttWeekView\"\n        },\n        month: {\n            type: \"kendo.ui.GanttMonthView\"\n        },\n        year: {\n            type: \"kendo.ui.GanttYearView\"\n        }\n    };\n\n    function trimOptions(options) {\n        delete options.name;\n        delete options.prefix;\n        delete options.views;\n\n        return options;\n    }\n\n    function getWorkDays(options) {\n        var workDays = [];\n        var dayIndex = options.workWeekStart;\n\n        workDays.push(dayIndex);\n\n        while (options.workWeekEnd != dayIndex) {\n            if (dayIndex > 6) {\n                dayIndex -= 7;\n            } else {\n                dayIndex++;\n            }\n            workDays.push(dayIndex);\n        }\n        return workDays;\n    }\n\n    function blurActiveElement() {\n        var activeElement = kendo._activeElement();\n\n        if (activeElement && activeElement.nodeName.toLowerCase() !== \"body\") {\n            $(activeElement).trigger(\"blur\");\n        }\n    }\n\n    var viewStyles = {\n        alt: \"k-alt\",\n        reset: \"k-reset\",\n        nonWorking: \"k-nonwork-hour\",\n        header: \"k-header\",\n        gridHeader: \"k-grid-header\",\n        gridHeaderWrap: \"k-grid-header-wrap\",\n        gridContent: \"k-grid-content\",\n        tasksWrapper: \"k-gantt-tables\",\n        rowsTable: \"k-gantt-rows\",\n        columnsTable: \"k-gantt-columns\",\n        tasksTable: \"k-gantt-tasks\",\n        dependenciesWrapper: \"k-gantt-dependencies\",\n        resource: \"k-resource\",\n        resourceAlt: \"k-resource k-alt\",\n        task: \"k-task\",\n        taskSingle: \"k-task-single\",\n        taskMilestone: \"k-task-milestone\",\n        taskSummary: \"k-task-summary\",\n        taskWrap: \"k-task-wrap\",\n        taskMilestoneWrap: \"k-milestone-wrap\",\n        taskSummaryWrap: \"k-summary-wrap\",\n        taskPlanned: \"k-task-planned\",\n        taskPlannedMoment: \"k-task-moment\",\n        taskPlannedDuration: \"k-task-duration\",\n        taskPlannedMomentLeft: \"k-moment-left\",\n        taskAdvanced: \"k-task-advanced\",\n        taskDelayed: \"k-task-delayed\",\n        taskOffset: \"k-task-offset\",\n        taskOffsetWrap: \"k-task-offset-wrap\",\n        taskInnerWrap: \"k-task-inner-wrap\",\n        resourcesWrap: \"k-resources-wrap\",\n        taskDot: \"k-task-dot\",\n        taskDotStart: \"k-task-start\",\n        taskDotEnd: \"k-task-end\",\n        taskDragHandle: \"k-task-draghandle\",\n        taskContent: \"k-task-content\",\n        taskTemplate: \"k-task-template\",\n        taskActions: \"k-task-actions\",\n        taskDelete: \"k-task-delete\",\n        taskComplete: \"k-task-complete\",\n        taskDetails: \"k-task-details\",\n        taskDetailsPercent: \"k-task-pct\",\n        link: \"k-link\",\n        icon: \"k-icon\",\n        iconDelete: \"k-i-close\",\n        taskResizeHandle: \"k-resize-handle\",\n        taskResizeHandleWest: \"k-resize-w\",\n        taskResizeHandleEast: \"k-resize-e\",\n        taskSummaryProgress: \"k-task-summary-progress\",\n        taskSummaryComplete: \"k-task-summary-complete\",\n        line: \"k-gantt-line\",\n        lineHorizontal: \"k-gantt-line-h\",\n        lineVertical: \"k-gantt-line-v\",\n        arrowWest: \"k-arrow-w\",\n        arrowEast: \"k-arrow-e\",\n        dragHint: \"k-drag-hint\",\n        dependencyHint: \"k-gantt-dependency-hint\",\n        tooltipWrapper: \"k-tooltip\",\n        tooltipContent: \"k-tooltip-content\",\n        tooltipCallout: \"k-callout k-callout-s\",\n        callout: \"k-callout\",\n        marquee: \"k-marquee k-gantt-marquee\",\n        marqueeColor: \"k-marquee-color\",\n        offsetTooltipAdvanced: \"k-offset-tooltip-advanced\",\n        offsetTooltipDelay: \"k-offset-tooltip-delayed\",\n        plannedTooltip: \"k-planned-tooltip\"\n    };\n\n    var GanttView = kendo.ui.GanttView = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            this.title = this.options.title || this.options.name;\n\n            this.header = this.element.find(DOT + GanttView.styles.gridHeader);\n\n            this.content = this.element.find(DOT + GanttView.styles.gridContent);\n\n            this.contentWidth = this.content.width();\n\n            this._workDays = getWorkDays(this.options);\n\n            this._headerTree = options.headerTree;\n\n            this._taskTree = options.taskTree;\n\n            this._taskTemplate = options.taskTemplate ?\n                kendo.template(options.taskTemplate, extend({}, kendo.Template, options.templateSettings)) :\n                null;\n\n            this._dependencyTree = options.dependencyTree;\n\n            this._taskCoordinates = {};\n\n            this._currentTime();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            clearTimeout(this._tooltipTimeout);\n\n            this.headerRow = null;\n            this.header = null;\n            this.content = null;\n\n            this._dragHint = null;\n            this._resizeHint = null;\n            this._resizeTooltip = null;\n            this._taskTooltip = null;\n            this._percentCompleteResizeTooltip = null;\n\n            this._headerTree = null;\n            this._taskTree = null;\n            this._dependencyTree = null;\n        },\n\n        options: {\n            showWorkHours: false,\n            showWorkDays: false,\n            workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n            workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            hourSpan: 1,\n            slotSize: 100,\n            currentTimeMarker: {\n                updateInterval: 10000\n            }\n        },\n\n        renderLayout: function() {\n            this._slots = this._createSlots();\n\n            this._tableWidth = this._calculateTableWidth();\n\n            this.createLayout(this._layout());\n\n            this._slotDimensions();\n\n            this._adjustHeight();\n\n            this.content.find(DOT + GanttView.styles.dependenciesWrapper).width(this._tableWidth);\n        },\n\n        _adjustHeight: function() {\n            if(this.content){\n                this.content.height(this.element.height() - outerHeight(this.header));\n            }\n        },\n\n        createLayout: function(rows) {\n            var headers = this._headers(rows);\n            var colgroup = this._colgroup();\n            var tree = this._headerTree;\n            var header = kendoDomElement(\"tbody\", null, headers);\n            var table = kendoDomElement(\"table\", { style: { width: this._tableWidth + \"px\"}, role: \"presentation\" }, [colgroup, header]);\n\n            tree.render([table]);\n\n            this.headerRow = this.header.find(\"table\").first().find(\"tr\").last();\n        },\n\n        _slotDimensions: function() {\n            var headers = this.headerRow[0].children;\n            var slots = this._timeSlots();\n            var slot;\n            var header;\n\n            for (var i = 0, length = headers.length; i < length; i++) {\n                header = headers[i];\n                slot = slots[i];\n\n                slot.offsetLeft = header.offsetLeft;\n                slot.offsetWidth = header.offsetWidth;\n            }\n        },\n\n        render: function(tasks) {\n            var taskCount = tasks.length;\n            var styles = GanttView.styles;\n            var contentTable;\n            var rowsTable = this._rowsTable(taskCount);\n            var columnsTable = this._columnsTable(taskCount);\n            var tasksTable = this._tasksTable(tasks);\n            var currentTimeMarker = this.options.currentTimeMarker;\n            var calculatedSize = this.options.calculatedSize;\n            var totalHeight;\n\n            this._taskTree.render([rowsTable, columnsTable, tasksTable]);\n\n            contentTable = this.content.find(DOT + styles.rowsTable);\n\n            if (calculatedSize) {\n                totalHeight = calculatedSize.row * tasks.length;\n                this.content.find(DOT + styles.tasksTable).height(totalHeight);\n                contentTable.height(totalHeight);\n            }\n\n            this._contentHeight = contentTable.height();\n            this._rowHeight = calculatedSize ? calculatedSize.row : this._contentHeight / contentTable.find(\"tr\").length;\n\n            this.content.find(DOT + styles.columnsTable).height(this._contentHeight);\n\n            if (currentTimeMarker !== false && currentTimeMarker.updateInterval !== undefined) {\n                this._renderCurrentTime();\n            }\n        },\n\n        _rowsTable: function(rowCount) {\n            var rows = [];\n            var row;\n            var styles = GanttView.styles;\n            var attributes = [null, { className: styles.alt }];\n\n            for (var i = 0; i < rowCount; i++) {\n                row = kendoDomElement(\"tr\", attributes[i % 2], [\n                    kendoDomElement(\"td\", null, [\n                        kendoTextElement(\"\\u00a0\")\n                    ])\n                ]);\n\n                rows.push(row);\n            }\n\n            return this._createTable(1, rows, { className: styles.rowsTable });\n        },\n\n        _columnsTable: function() {\n            var cells = [];\n            var row;\n            var styles = GanttView.styles;\n            var slots = this._timeSlots();\n            var slotsCount = slots.length;\n            var slot;\n            var slotSpan;\n            var totalSpan = 0;\n            var attributes;\n\n            for (var i = 0; i < slotsCount; i++) {\n                slot = slots[i];\n\n                attributes = {};\n\n                slotSpan = slot.span;\n\n                totalSpan += slotSpan;\n\n                if (slotSpan !== 1) {\n                    attributes.colspan = slotSpan;\n                }\n\n                if (slot.isNonWorking) {\n                    attributes.className = styles.nonWorking;\n                }\n\n                cells.push(kendoDomElement(\"td\", attributes, [\n                    kendoTextElement(\"\\u00a0\")\n                ]));\n            }\n\n            row = kendoDomElement(\"tr\", null, cells);\n\n            return this._createTable(totalSpan, [row], { className: styles.columnsTable});\n        },\n\n        _tasksTable: function(tasks) {\n            var rows = [];\n            var row;\n            var cell;\n            var position;\n            var plannedPosition;\n            var task;\n            var styles = GanttView.styles;\n            var coordinates = this._taskCoordinates = {};\n            var size = this._calculateMilestoneWidth();\n            var milestoneWidth = Math.round(size.width);\n            var resourcesField = this.options.resourcesField;\n            var className = [styles.resource, styles.resourceAlt];\n            var calculatedSize = this.options.calculatedSize;\n            var resourcesPosition;\n            var resourcesMargin = this._calculateResourcesMargin();\n            var taskBorderWidth = this._calculateTaskBorderWidth();\n            var resourceStyle;\n            var showPlannedTasks = this.options.showPlannedTasks;\n\n            var addCoordinates = function(rowIndex) {\n                var taskLeft;\n                var taskRight;\n\n                taskLeft = position.left;\n                taskRight = taskLeft + position.width;\n\n                if (task.isMilestone()) {\n                    taskLeft -= milestoneWidth / 2;\n                    taskRight = taskLeft + milestoneWidth;\n                }\n\n                coordinates[task.id] = {\n                    start: taskLeft,\n                    end: taskRight,\n                    rowIndex: rowIndex\n                };\n            };\n\n            for (var i = 0, l = tasks.length; i < l; i++) {\n                task = tasks[i];\n\n                position = this._taskPosition(task);\n\n                if(showPlannedTasks) {\n                    plannedPosition = this._taskPositionPlanned(task);\n                    plannedPosition.borderWidth = taskBorderWidth;\n                }\n                position.borderWidth = taskBorderWidth;\n\n                row = kendoDomElement(\"tr\", null);\n                cell = kendoDomElement(\"td\");\n\n                if (task.start <= this.end && task.end >= this.start) {\n                    cell.children.push(this._renderTask(tasks[i], position, plannedPosition));\n\n                    if (task[resourcesField] && task[resourcesField].length) {\n                        if (isRtl) {\n                            resourcesPosition = this._tableWidth - position.left;\n                        } else {\n                            resourcesPosition = Math.max((position.width || size.clientWidth), 0) + position.left;\n                        }\n\n                        resourceStyle = {\n                            width: (this._tableWidth - (resourcesPosition + resourcesMargin)) + \"px\"\n                        };\n\n                        resourceStyle[isRtl ? \"right\" : \"left\"] = resourcesPosition + \"px\";\n\n                        if (calculatedSize) {\n                            resourceStyle.height = calculatedSize.cell + \"px\";\n                        }\n\n                        cell.children.push(kendoDomElement(\"div\",\n                            {\n                                className: styles.resourcesWrap,\n                                style: resourceStyle\n                            },\n                            this._renderResources(task[resourcesField], className[i % 2]))\n                        );\n                    }\n\n                    addCoordinates(i);\n                }\n                row.children.push(cell);\n                rows.push(row);\n            }\n\n            return this._createTable(1, rows, { className: GanttView.styles.tasksTable });\n        },\n\n        _createTable: function(colspan, rows, styles) {\n            var cols = [];\n            var colgroup;\n            var tbody;\n\n            for (var i = 0; i < colspan; i++) {\n                cols.push(kendoDomElement(\"col\"));\n            }\n\n            colgroup = kendoDomElement(\"colgroup\", null, cols);\n\n            tbody = kendoDomElement(\"tbody\", null, rows);\n\n            if (!styles.style) {\n                styles.style = {};\n            }\n\n            styles.style.width = this._tableWidth + \"px\";\n            styles.role = \"presentation\";\n\n            return kendoDomElement(\"table\", styles, [colgroup, tbody]);\n        },\n\n        _calculateTableWidth: function() {\n            var slots = this._timeSlots();\n            var maxSpan = 0;\n            var totalSpan = 0;\n            var currentSpan;\n            var tableWidth;\n\n            for (var i = 0, length = slots.length; i < length; i++) {\n                currentSpan = slots[i].span;\n\n                totalSpan += currentSpan;\n\n                if (currentSpan > maxSpan) {\n                    maxSpan = currentSpan;\n                }\n            }\n\n            tableWidth = Math.round((totalSpan * this.options.slotSize) / maxSpan);\n\n            return tableWidth;\n        },\n\n        _calculateMilestoneWidth: function() {\n            var size;\n            var className = GanttView.styles.task + \" \" + GanttView.styles.taskMilestone;\n            var milestone = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n            var boundingClientRect;\n\n            this.content.append(milestone);\n\n            boundingClientRect = milestone[0].getBoundingClientRect();\n\n            size = {\n                \"width\": boundingClientRect.right - boundingClientRect.left,\n                \"clientWidth\": milestone[0].clientWidth\n            };\n\n            milestone.remove();\n\n            return size;\n        },\n\n        _calculateResourcesMargin: function() {\n            var margin;\n            var wrapper = $(\"<div class='\" + GanttView.styles.resourcesWrap + \"' style='visibility: hidden; position: absolute'>\");\n\n            this.content.append(wrapper);\n\n            margin = parseInt(wrapper.css(isRtl ? \"margin-right\" : \"margin-left\"), 10);\n\n            wrapper.remove();\n\n            return margin;\n        },\n\n        _calculateTaskBorderWidth: function() {\n            var width;\n            var className = GanttView.styles.task + \" \" + GanttView.styles.taskSingle;\n            var task = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n            var computedStyle;\n\n            this.content.append(task);\n\n            computedStyle = kendo.getComputedStyles(task[0], [\"border-left-width\"]);\n\n            width = parseFloat(computedStyle[\"border-left-width\"], 10);\n\n            task.remove();\n\n            return width;\n        },\n\n        _renderTask: function(task, position, plannedPosition) {\n            var editable = this.options.editable;\n            var taskLeft = position.left;\n            var styles = GanttView.styles;\n            var wrapClassName = styles.taskWrap;\n            var calculatedSize = this.options.calculatedSize;\n            var dragHandleStyle = {};\n            var taskWrapAttr = {\n                className: wrapClassName,\n                style: { left: taskLeft + \"px\" }\n            };\n            var children = [];\n            var endTaskDotRight = 0;\n            var taskFullWidth = position.width;\n            var taskWrapper, taskElement, progressHandleOffset, plannedElement;\n            var endTaskDotLeft, taskOffsetWrap, offsetElement, offsetWidth;\n\n            if (calculatedSize) {\n                taskWrapAttr.style.height = calculatedSize.cell + \"px\";\n            }\n\n            if(plannedPosition) {\n                if (task.isMilestone()) {\n                    plannedElement = this._renderPlannedMilestone(position, plannedPosition);\n                } else {\n                    plannedElement = this._renderPlannedSingleTask(position, plannedPosition, task);\n                }\n\n                children.push(plannedElement);\n\n                if(isRtl && plannedPosition.left <= position.left) {\n                    taskWrapAttr.style.left = plannedPosition.left + \"px\";\n                }\n            }\n\n            if (task.summary) {\n                taskElement = this._renderSummary(task, position, plannedPosition);\n                taskWrapAttr.className += \" \" + styles.taskSummaryWrap;\n            } else if (task.isMilestone()) {\n                taskElement = this._renderMilestone(task, position);\n                taskWrapAttr.className += \" \" + styles.taskMilestoneWrap;\n            } else {\n                taskElement = this._renderSingleTask(task, position, plannedPosition);\n            }\n\n            if(plannedPosition && !task.isMilestone() && task.plannedStart < task.end && task.plannedEnd > task.start && task.plannedEnd < task.end) {\n                if(isRtl){\n                    taskFullWidth = position.left + position.width - plannedPosition.left;\n                } else {\n                    taskFullWidth = plannedPosition.left + plannedPosition.width - position.left;\n                }\n\n                if(isRtl) {\n                    offsetWidth = plannedPosition.left - position.left;\n                } else {\n                    offsetWidth = position.left + position.width - (plannedPosition.left + plannedPosition.width);\n                }\n\n                offsetElement = kendoDomElement(\"div\", {\n                    className: styles.taskOffset,\n                    style: { width: offsetWidth - 2 * plannedPosition.borderWidth + \"px\" }\n                });\n\n                if(editable && editable.resize !== false && editable.update !== false && !task.summary) {\n                    if(editable.destroy !== false) {\n                        offsetElement.children.push(kendoDomElement(\"span\", { className: styles.taskActions }, [\n                            kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                                kendoDomElement(\"span\", { className: styles.icon + \" \" + styles.iconDelete })\n                            ])\n                        ]));\n                    }\n\n                    if(isRtl) {\n                        offsetElement.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest,\n                            style: {\n                                right: position.width - 5 + \"px\"\n                            }\n                        }));\n                    } else {\n                        offsetElement.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                        }));\n                    }\n                }\n\n                taskOffsetWrap = kendoDomElement(\"div\", {\n                    className: styles.taskOffsetWrap + \" \" + styles.taskInnerWrap\n                }, [ taskElement, offsetElement ]);\n\n                children.push(taskOffsetWrap);\n            } else if(plannedPosition) {\n                children.push(kendoDomElement(\"div\", {\n                    className: styles.taskInnerWrap\n                }, [ taskElement ]));\n            } else {\n                children.push(taskElement);\n            }\n\n            taskWrapper = kendoDomElement(\"div\", taskWrapAttr, children);\n\n            if (editable && editable.dependencyCreate !== false) {\n                if(plannedPosition && task.plannedEnd > task.end) {\n                    endTaskDotRight = plannedPosition.left + plannedPosition.width - position.left - position.width - 3 + \"px\";\n                }\n\n                taskWrapper.children.push(kendoDomElement(\"div\", {\n                    className: styles.taskDot + \" \" + styles.taskDotStart\n                }));\n\n                if(isRtl) {\n                    endTaskDotRight = \"auto\";\n                    if(plannedPosition && task.plannedEnd > task.end) {\n                        endTaskDotLeft = position.left - plannedPosition.left + \"px\";\n                    }\n                }\n\n                taskWrapper.children.push(kendoDomElement(\"div\", {\n                    className: styles.taskDot + \" \" + styles.taskDotEnd,\n                    style: { right: endTaskDotRight, left: endTaskDotLeft }\n                }));\n            }\n\n            if (!task.summary && !task.isMilestone() && editable && editable.dragPercentComplete !== false && editable.update !== false && this._taskTemplate === null) {\n                progressHandleOffset = Math.round(taskFullWidth * task.percentComplete);\n\n                dragHandleStyle[isRtl ? \"right\" : \"left\"] = progressHandleOffset + \"px\";\n                taskWrapper.children.push(kendoDomElement(\"div\", { className: styles.taskDragHandle, style: dragHandleStyle }));\n            }\n\n            return taskWrapper;\n        },\n\n        _renderSingleTask: function(task, position, plannedPosition) {\n            var styles = GanttView.styles;\n            var progressWidth;\n            var taskChildren = [];\n            var taskContent;\n            var editable = this.options.editable;\n            var classes = styles.task + \" \" + styles.taskSingle;\n            var widthExceptDelay = position.width;\n\n            if(plannedPosition) {\n                if(task.plannedEnd && task.plannedEnd <= task.start) {\n                    classes += \" \" + styles.taskDelayed;\n                } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                    classes += \" \" + styles.taskAdvanced;\n                } else if(task.plannedEnd && task.plannedEnd < task.end) {\n                    if(!isRtl){\n                        widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                    } else {\n                        widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                    }\n                }\n            }\n\n            progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n            if (this._taskTemplate !== null) {\n                taskContent = kendoHtmlElement(this._taskTemplate(task));\n            } else {\n                taskContent = kendoTextElement(task.title);\n                taskChildren.push(kendoDomElement(\"div\", { className: styles.taskComplete, style: { width: progressWidth + \"px\" } }));\n            }\n\n            var content = kendoDomElement(\"div\", { className: styles.taskContent }, [\n                kendoDomElement(\"div\", { className: styles.taskTemplate }, [\n                    taskContent\n                ])\n            ]);\n\n            taskChildren.push(content);\n\n            if (editable) {\n                if (editable.destroy !== false && (!plannedPosition || !task.plannedEnd || (task.end <= task.plannedEnd || task.start >= task.plannedEnd))) {\n                    content.children.push(kendoDomElement(\"span\", { className: styles.taskActions }, [\n                        kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                            kendoDomElement(\"span\", { className: styles.icon + \" \" + styles.iconDelete })\n                        ])\n                    ]));\n                }\n\n                if (editable.resize !== false && editable.update !== false) {\n                    content.children.push(kendoDomElement(\"span\", {\n                        className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest\n                    }));\n                    content.children.push(kendoDomElement(\"span\", {\n                        className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                    }));\n                }\n            }\n\n            var element = kendoDomElement(\"div\", {\n                className: classes, \"data-uid\": task.uid, style:\n                    { width: Math.max((widthExceptDelay - position.borderWidth * 2), 0) + \"px\" }\n            }, taskChildren);\n\n            return element;\n        },\n\n        _renderMilestone: function(task) {\n            var styles = GanttView.styles;\n            var classes = styles.task + \" \" + styles.taskMilestone;\n            var showPlanned = this.options.showPlannedTasks;\n\n            if(showPlanned && task.plannedEnd && task.plannedEnd < task.start) {\n                classes += \" \" + styles.taskDelayed;\n            } else if (task.plannedStart && task.plannedStart > task.end) {\n                classes += \" \" + styles.taskAdvanced;\n            }\n\n            return kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid });\n        },\n\n        _renderSummary: function(task, position, plannedPosition) {\n            var styles = GanttView.styles;\n            var widthExceptDelay = position.width;\n            var progressWidth;\n            var classes = styles.task + \" \" + styles.taskSummary;\n\n            if(plannedPosition) {\n                if(task.plannedEnd && task.plannedEnd <= task.start) {\n                    classes += \" \" + styles.taskDelayed;\n                } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                    classes += \" \" + styles.taskAdvanced;\n                } else if(task.plannedEnd && task.plannedEnd < task.end) {\n                    if(!isRtl){\n                        widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                    } else {\n                        widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                    }\n                }\n            }\n\n            progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n            var element = kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid, style: { width: widthExceptDelay + \"px\" } }, [\n                kendoDomElement(\"div\", { className: styles.taskSummaryProgress, style: { width: progressWidth + \"px\" } }, [\n                    kendoDomElement(\"div\", { className: styles.taskSummaryComplete, style: { width: position.width + \"px\" } })\n                ])\n            ]);\n\n            return element;\n        },\n\n        _renderPlannedSingleTask: function(position, plannedPosition, task) {\n            var styles = GanttView.styles;\n            var children = [];\n            var style = {};\n\n            if(task.plannedStart && task.plannedEnd) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n                children.push(kendoDomElement(\"div\", {\n                    className: styles.taskPlannedDuration, style:\n                        { width: Math.max((plannedPosition.width - plannedPosition.borderWidth * 2 - 16), 0) + \"px\" }\n                }));\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment }));\n            } else if (task.plannedStart) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n            } else if (task.plannedEnd) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment, style: { \"margin-left\": Math.max(plannedPosition.width - 5, 0) + \"px\" } }));\n            }\n\n            if(isRtl) {\n                style = {\n                    \"margin-right\": position.left - plannedPosition.left + position.width - plannedPosition.width + \"px\"\n                };\n            } else {\n                style = {\n                    \"margin-left\": plannedPosition.left - position.left + \"px\"\n                };\n            }\n\n            var element = kendoDomElement(\"div\", {\n                className: styles.taskPlanned,\n                style: style\n            }, children);\n\n            return element;\n        },\n\n        _renderPlannedMilestone: function(position, plannedPosition) {\n            var styles = GanttView.styles;\n            var style = {};\n            var element;\n\n            if(isRtl) {\n                style = {\n                    \"margin-right\": position.left - plannedPosition.left + \"px\"\n                };\n            } else {\n                style = {\n                    \"margin-left\": plannedPosition.left - position.left + \"px\"\n                };\n            }\n\n            element = kendoDomElement(\"div\", {\n                className: styles.taskPlanned,\n                style: style\n            }, [\n                kendoDomElement(\"div\", { className: styles.taskPlannedMoment })\n            ]);\n\n            return element;\n        },\n\n        _renderResources: function(resources, className) {\n            var children = [];\n            var resource;\n\n            for (var i = 0, length = resources.length; i < length; i++) {\n                resource = resources[i];\n                children.push(kendoDomElement(\"span\", {\n                    className: className,\n                    style: {\n                        \"color\": resource.get(\"color\")\n                    }\n                }, [kendoTextElement(resource.get(\"name\"))]));\n            }\n\n            if (isRtl) {\n                children.reverse();\n            }\n\n            return children;\n        },\n\n        _taskPosition: function(task) {\n            var round = Math.round;\n\n            var startLeft = round(this._offset(isRtl ? task.end : task.start));\n            var endLeft = round(this._offset(isRtl ? task.start : task.end));\n\n            return { left: startLeft, width: endLeft - startLeft };\n        },\n\n        _taskPositionPlanned: function(task) {\n            var round = Math.round;\n\n            var startLeft = round(this._offset(isRtl ? task.plannedEnd : task.plannedStart));\n            var endLeft = round(this._offset(isRtl ? task.plannedStart : task.plannedEnd));\n\n            return { left: startLeft, width: endLeft - startLeft };\n        },\n\n        _offset: function(date) {\n            var slots = this._timeSlots();\n            var slot;\n            var startOffset;\n            var slotDuration;\n            var slotOffset = 0;\n            var startIndex;\n\n            if (!slots.length) {\n                return 0;\n            }\n\n            startIndex = this._slotIndex(\"start\", date);\n\n            slot = slots[startIndex];\n\n            if (slot.end < date) {\n                slotOffset = slot.offsetWidth;\n            } else if (slot.start <= date) {\n                startOffset = date - slot.start;\n                slotDuration = slot.end - slot.start;\n                slotOffset = (startOffset / slotDuration) * slot.offsetWidth;\n            }\n\n            if (isRtl) {\n                slotOffset = (slot.offsetWidth + 1) - slotOffset; // Add one pixel for border\n            }\n\n            return slot.offsetLeft + slotOffset;\n        },\n\n        _slotIndex: function(field, value, reverse) {\n            var slots = this._timeSlots();\n            var startIdx = 0;\n            var endIdx = slots.length - 1;\n            var middle;\n\n            if (reverse) {\n                slots = [].slice.call(slots).reverse();\n            }\n\n            do {\n                middle = Math.ceil((endIdx + startIdx) / 2);\n\n                if (slots[middle][field] < value) {\n                    startIdx = middle;\n                } else {\n                    if (middle === endIdx) {\n                        middle--;\n                    }\n\n                    endIdx = middle;\n                }\n            } while (startIdx !== endIdx);\n\n            if (reverse) {\n                startIdx = (slots.length - 1) - startIdx;\n            }\n\n            return startIdx;\n        },\n\n        _timeByPosition: function(x, snap, snapToEnd) {\n            var slot = this._slotByPosition(x);\n\n            if (snap) {\n                return snapToEnd ? slot.end : slot.start;\n            }\n\n            var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n            var duration = slot.end - slot.start;\n            var slotOffset = offsetLeft - slot.offsetLeft;\n\n            if (isRtl) {\n                slotOffset = slot.offsetWidth - slotOffset;\n            }\n\n            return new Date(slot.start.getTime() + (duration * (slotOffset / slot.offsetWidth)));\n        },\n\n        _slotByPosition: function(x) {\n            var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n            var slotIndex = this._slotIndex(\"offsetLeft\", offsetLeft, isRtl);\n\n            return this._timeSlots()[slotIndex];\n        },\n\n        _renderDependencies: function(dependencies) {\n            var elements = [];\n            var tree = this._dependencyTree;\n\n            for (var i = 0, l = dependencies.length; i < l; i++) {\n                elements.push.apply(elements, this._renderDependency(dependencies[i]));\n            }\n\n            tree.render(elements);\n        },\n\n        _renderDependency: function(dependency) {\n            var predecessor = this._taskCoordinates[dependency.predecessorId];\n            var successor = this._taskCoordinates[dependency.successorId];\n            var elements;\n            var method;\n\n            if (!predecessor || !successor) {\n                return [];\n            }\n\n            method = \"_render\" + [\"FF\", \"FS\", \"SF\", \"SS\"][isRtl ? 3 - dependency.type : dependency.type];\n\n            elements = this[method](predecessor, successor);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].attr[\"data-uid\"] = dependency.uid;\n            }\n\n            return elements;\n        },\n\n        _renderFF: function(from, to) {\n            var lines = this._dependencyFF(from, to, false);\n\n            lines[lines.length - 1].children[0] = this._arrow(true);\n\n            return lines;\n        },\n\n        _renderSS: function(from, to) {\n            var lines = this._dependencyFF(to, from, true);\n\n            lines[0].children[0] = this._arrow(false);\n\n            return lines.reverse();\n        },\n\n        _renderFS: function(from, to) {\n            var lines = this._dependencyFS(from, to, false);\n\n            lines[lines.length - 1].children[0] = this._arrow(false);\n\n            return lines;\n        },\n\n        _renderSF: function(from, to) {\n            var lines = this._dependencyFS(to, from, true);\n\n            lines[0].children[0] = this._arrow(true);\n\n            return lines.reverse();\n        },\n\n        _dependencyFF: function(from, to, reverse) {\n            var that = this;\n            var lines = [];\n            var left = 0;\n            var top = 0;\n            var width = 0;\n            var height = 0;\n            var dir = reverse ? \"start\" : \"end\";\n            var delta;\n            var overlap = 2;\n            var arrowOverlap = 1;\n            var rowHeight = this._rowHeight;\n            var minLineWidth = 10;\n            var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var styles = GanttView.styles;\n\n            var addHorizontal = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n            };\n            var addVertical = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n            };\n\n            left = from[dir];\n            top = fromTop;\n            width = minLineWidth;\n\n            delta = to[dir] - from[dir];\n\n            if ((delta) > 0 !== reverse) {\n                width = Math.abs(delta) + minLineWidth;\n            }\n\n            if (reverse) {\n                left -= width;\n                width -= arrowOverlap;\n                addHorizontal();\n            } else {\n                addHorizontal();\n                left += width - overlap;\n            }\n\n            if (toTop < top) {\n                height = top - toTop;\n                height += overlap;\n                top = toTop;\n                addVertical();\n            } else {\n                height = toTop - top;\n                height += overlap;\n                addVertical();\n                top += (height - overlap);\n            }\n\n            width = Math.abs(left - to[dir]);\n\n            if (!reverse) {\n                width -= arrowOverlap;\n                left -= width;\n            }\n\n            addHorizontal();\n\n            return lines;\n        },\n\n        _dependencyFS: function(from, to, reverse) {\n            var that = this;\n            var lines = [];\n            var left = 0;\n            var top = 0;\n            var width = 0;\n            var height = 0;\n            var rowHeight = this._rowHeight;\n            var minLineHeight = Math.floor(rowHeight / 2);\n            var minLineWidth = 10;\n            var minDistance = 2 * minLineWidth;\n            var delta = to.start - from.end;\n            var overlap = 2;\n            var arrowOverlap = 1;\n            var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var styles = GanttView.styles;\n\n            var addHorizontal = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n            };\n            var addVertical = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n            };\n\n            left = from.end;\n            top = fromTop;\n            width = minLineWidth;\n\n            if (reverse) {\n                left += arrowOverlap;\n\n                if (delta > minDistance) {\n                    width = delta - (minLineWidth - overlap);\n                }\n\n                width -= arrowOverlap;\n            }\n\n            addHorizontal();\n            left += width - overlap;\n\n            if ((delta) <= minDistance) {\n                height = reverse ? Math.abs(toTop - fromTop) - minLineHeight : minLineHeight;\n\n                if (toTop < fromTop) {\n                    top -= height;\n\n                    height += overlap;\n\n                    addVertical();\n                } else {\n                    addVertical();\n                    top += height;\n                }\n\n                width = (from.end - to.start) + minDistance;\n\n                if (width < minLineWidth) {\n                    width = minLineWidth;\n                }\n\n                left -= width - overlap;\n\n                addHorizontal();\n            }\n\n            if (toTop < fromTop) {\n                height = top - toTop;\n                top = toTop;\n\n                height += overlap;\n\n                addVertical();\n            } else {\n                height = toTop - top;\n                addVertical();\n                top += height;\n            }\n\n            width = to.start - left;\n\n            if (!reverse) {\n                width -= arrowOverlap;\n            }\n\n            addHorizontal();\n\n            return lines;\n        },\n\n        _line: function(className, styles) {\n            return kendoDomElement(\"div\", { className: className, style: styles });\n        },\n\n        _arrow: function(direction) {\n            return kendoDomElement(\"span\", { className: direction ? GanttView.styles.arrowWest : GanttView.styles.arrowEast });\n        },\n\n        _colgroup: function() {\n            var slots = this._timeSlots();\n            var count = slots.length;\n            var cols = [];\n\n            for (var i = 0; i < count; i++) {\n                for (var j = 0, length = slots[i].span; j < length; j++) {\n                    cols.push(kendoDomElement(\"col\"));\n                }\n            }\n\n            return kendoDomElement(\"colgroup\", null, cols);\n        },\n\n        _createDragHint: function(element) {\n            var styles = GanttView.styles;\n            var plannedElement;\n\n            this._dragHint = element\n                .clone()\n                .addClass(styles.dragHint)\n                .css({\n                    \"cursor\": \"move\"\n                });\n\n            plannedElement = this._dragHint.find(DOT + styles.taskPlanned);\n\n            plannedElement.css({\n                \"visibility\": \"hidden\"\n            });\n\n            if(isRtl && element.find(DOT + styles.taskAdvanced).length > 0) {\n                plannedElement.css({\n                    \"margin-right\": \"auto\",\n                    \"width\": 0\n                });\n\n                this._dragHint.find(DOT + styles.taskDotEnd).css({\n                    \"left\": 0\n                });\n            }\n\n            element\n                .closest(\"td\")\n                .append(this._dragHint);\n        },\n\n        _updateDragHint: function(start) {\n            var left = this._offset(start);\n            this._dragHint\n                .css({\n                    \"left\": left\n                });\n        },\n\n        _removeDragHint: function() {\n            this._dragHint.remove();\n            this._dragHint = null;\n        },\n\n        _createResizeHint: function(task) {\n            var styles = GanttView.styles;\n            var taskTop = this._taskCoordinates[task.id].rowIndex * this._rowHeight;\n            var tooltipHeight;\n            var tooltipTop;\n            var options = this.options;\n            var messages = options.messages;\n\n            this._resizeHint = $(RESIZE_HINT({ styles: styles })).css({\n                \"top\": 0,\n                \"height\": this._contentHeight\n            });\n\n            this.content.append(this._resizeHint);\n\n            this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                styles: styles,\n                start: task.start,\n                end: task.end,\n                messages: messages.views,\n                format: options.resizeTooltipFormat\n            }))\n            .css({\n                \"top\": 0,\n                \"left\": 0\n            });\n\n            this.content.append(this._resizeTooltip);\n\n            this._resizeTooltipWidth = outerWidth(this._resizeTooltip);\n            tooltipHeight = outerHeight(this._resizeTooltip);\n\n            tooltipTop = taskTop - tooltipHeight;\n\n            if (tooltipTop < 0) {\n                tooltipTop = taskTop + this._rowHeight;\n            }\n\n            this._resizeTooltipTop = tooltipTop;\n        },\n\n        _updateResizeHint: function(start, end, resizeStart) {\n            var left = this._offset(isRtl ? end : start);\n            var right = this._offset(isRtl ? start : end);\n            var width = right - left;\n            var tooltipLeft = (resizeStart !== isRtl) ? left : right;\n            var tablesWidth = this._tableWidth - kendo.support.scrollbar();\n            var tooltipWidth = this._resizeTooltipWidth;\n            var options = this.options;\n            var messages = options.messages;\n            var tableOffset = this.element.find(DOT + GanttView.styles.tasksTable).offset().left - this.element.find(DOT + GanttView.styles.tasksWrapper).offset().left;\n\n            if (isRtl) {\n                left += tableOffset;\n            }\n\n            this._resizeHint\n                .css({\n                    \"left\": left,\n                    \"width\": width\n                });\n\n            if (this._resizeTooltip) {\n                this._resizeTooltip.remove();\n            }\n\n            tooltipLeft -= Math.round(tooltipWidth / 2);\n\n            if (tooltipLeft < 0) {\n                tooltipLeft = 0;\n            } else if (tooltipLeft + tooltipWidth > tablesWidth) {\n                tooltipLeft = tablesWidth - tooltipWidth;\n            }\n\n            if (isRtl) {\n                tooltipLeft += tableOffset;\n            }\n\n            this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                styles: GanttView.styles,\n                start: start,\n                end: end,\n                messages: messages.views,\n                format: options.resizeTooltipFormat\n            }))\n            .css({\n                \"top\": this._resizeTooltipTop,\n                \"left\": tooltipLeft,\n                \"min-width\": tooltipWidth\n            })\n            .appendTo(this.content);\n        },\n\n        _removeResizeHint: function() {\n            this._resizeHint.remove();\n            this._resizeHint = null;\n\n            this._resizeTooltip.remove();\n            this._resizeTooltip = null;\n        },\n\n        _updatePercentCompleteTooltip: function(top, left, text) {\n            this._removePercentCompleteTooltip();\n\n            var tooltip = this._percentCompleteResizeTooltip = $(PERCENT_RESIZE_TOOLTIP_TEMPLATE({ styles: GanttView.styles, text: text }))\n                .appendTo(this.element);\n\n            var tooltipMiddle = Math.round(outerWidth(tooltip) / 2);\n            var arrow = tooltip.find(DOT + GanttView.styles.callout);\n            var arrowHeight = Math.round(outerWidth(arrow) / 2);\n\n            tooltip.css({\n                \"top\": top - (outerHeight(tooltip) + arrowHeight),\n                \"left\": left - tooltipMiddle\n            });\n\n            arrow.css(\"left\", tooltipMiddle - arrowHeight);\n        },\n\n        _removePercentCompleteTooltip: function() {\n            if (this._percentCompleteResizeTooltip) {\n                this._percentCompleteResizeTooltip.remove();\n            }\n\n            this._percentCompleteResizeTooltip = null;\n        },\n\n        _updateDependencyDragHint: function(from, to) {\n            this._removeDependencyDragHint();\n\n            this._creteDependencyDragHint(from, to);\n        },\n\n        _creteDependencyDragHint: function(from, to) {\n            var styles = GanttView.styles;\n\n            var deltaX = to.x - from.x;\n            var deltaY = to.y - from.y;\n\n            var width = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n            var angle = Math.atan(deltaY / deltaX);\n\n            if (deltaX < 0) {\n                angle += Math.PI;\n            }\n\n            $(\"<div class='\" + styles.line + \" \" + styles.lineHorizontal + \" \" + styles.dependencyHint + \"'></div>\")\n                .css({\n                    \"top\": from.y,\n                    \"left\": from.x,\n                    \"width\": width,\n                    \"transform-origin\": \"0% 0\",\n                    \"-ms-transform-origin\": \"0% 0\",\n                    \"-webkit-transform-origin\": \"0% 0\",\n                    \"transform\": \"rotate(\" + angle + \"rad)\",\n                    \"-ms-transform\": \"rotate(\" + angle + \"rad)\",\n                    \"-webkit-transform\": \"rotate(\" + angle + \"rad)\"\n                })\n                .appendTo(this.content);\n        },\n\n        _removeDependencyDragHint: function() {\n            this.content.find(DOT + GanttView.styles.dependencyHint).remove();\n        },\n\n        _createTaskTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var options = this.options;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = $(element).parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var template = (options.tooltip && options.tooltip.template) ? kendo.template(options.tooltip.template) : TASK_TOOLTIP_TEMPLATE;\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._taskTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" >' +\n                                   '<div class=\"' + styles.taskContent + '\"></div></div>');\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .appendTo(content)\n                .find(DOT + styles.taskContent)\n                .append(template({\n                    styles: styles,\n                    task: task,\n                    messages: options.messages.views\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removeTaskTooltip: function() {\n            if (this._taskTooltip) {\n                this._taskTooltip.remove();\n            }\n\n            this._taskTooltip = null;\n        },\n\n        _createOffsetTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = element.parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._offsetTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" ></div>');\n            var offsetValue = Math.round((task.end.getTime() - task.plannedEnd.getTime()) / 60000);\n            var plannedTasksMessages = this.options.messages.plannedTasks;\n            var minutes = offsetValue % 60;\n            var offsetText = minutes + \" \" + plannedTasksMessages.minutes;\n            var hours, days;\n\n            if(offsetValue >= 60) {\n                hours = offsetValue = Math.floor(offsetValue / 60);\n\n                offsetText = hours + \" \" + plannedTasksMessages.hours;\n\n                if(minutes !== 0) {\n                    offsetText += (\" \" + minutes + \" \" + plannedTasksMessages.minutes);\n                }\n\n                if(offsetValue >= 24) {\n                    hours = offsetValue % 24;\n                    days = offsetValue = Math.floor(offsetValue / 24);\n\n                    offsetText = days + \" \" + plannedTasksMessages.days;\n\n                    if(hours !== 0) {\n                        offsetText += (\" \" + hours + \" \" + plannedTasksMessages.hours);\n                    }\n                }\n            }\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .addClass(styles.offsetTooltipDelay)\n                .appendTo(content)\n                .append(OFFSET_TOOLTIP_TEMPLATE({\n                    offsetPrefix: plannedTasksMessages.offsetTooltipDelay,\n                    offsetText: offsetText\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removeOffsetTooltip: function() {\n            if (this._offsetTooltip) {\n                this._offsetTooltip.remove();\n            }\n\n            this._offsetTooltip = null;\n        },\n\n        _createPlannedTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = element.parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._plannedTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + ' ' + styles.plannedTooltip + '\" ></div>');\n            var editorMessages = this.options.messages.editor;\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .appendTo(content)\n                .append(PLANNED_TOOLTIP_TEMPLATE({\n                    plannedStart: editorMessages.plannedStart,\n                    startDate: kendo.toString(task.plannedStart, \"H:mm tt ddd, MMM dd\"),\n                    plannedEnd: editorMessages.plannedEnd,\n                    endDate: kendo.toString(task.plannedEnd, \"H:mm tt ddd, MMM dd\")\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removePlannedTooltip: function() {\n            if (this._plannedTooltip) {\n                this._plannedTooltip.remove();\n            }\n\n            this._plannedTooltip = null;\n        },\n\n        _adjustTooltipDimensions: function(tooltip, rowOffset, contentOffset, left, contentScrollLeft) {\n            var content = this.content;\n            var contentWidth = content.width();\n            var tooltipWidth;\n\n            if (outerHeight(tooltip) < rowOffset.top - contentOffset.top) {\n                tooltip.css(\"top\", ((rowOffset.top - contentOffset.top) - outerHeight(tooltip)) + content.scrollTop());\n            }\n\n            tooltipWidth = outerWidth(tooltip);\n\n            if ((tooltipWidth + left) - contentScrollLeft > contentWidth) {\n                left -= tooltipWidth;\n\n                if (left < contentScrollLeft) {\n                    left = (contentScrollLeft + contentWidth) - (tooltipWidth + 17);\n                }\n\n                tooltip.css(\"left\", left);\n            }\n        },\n\n        _scrollTo: function(element) {\n            var elementLeft = element.offset().left;\n            var elementWidth = element.width();\n            var elementRight = elementLeft + elementWidth;\n\n            var row = element.closest(\"tr\");\n            var rowTop = row.offset().top;\n            var rowHeight = row.height();\n            var rowBottom = rowTop + rowHeight;\n\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentTop = contentOffset.top;\n            var contentHeight = content.height();\n            var contentBottom = contentTop + contentHeight;\n            var contentLeft = contentOffset.left;\n            var contentWidth = content.width();\n            var contentRight = contentLeft + contentWidth;\n\n            var scrollbarWidth = kendo.support.scrollbar();\n\n            if (rowTop < contentTop) {\n                content.scrollTop(content.scrollTop() + (rowTop - contentTop));\n            } else if (rowBottom > contentBottom) {\n                content.scrollTop(content.scrollTop() + (rowBottom + scrollbarWidth - contentBottom));\n            }\n\n            if (elementLeft < contentLeft && elementWidth > contentWidth && elementRight < contentRight ||\n                elementRight > contentRight && elementWidth < contentWidth) {\n                    kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementRight + scrollbarWidth - contentRight));\n            } else if (elementRight > contentRight && elementWidth > contentWidth && elementLeft > contentLeft ||\n                elementLeft < contentLeft && elementWidth < contentWidth) {\n            kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementLeft - contentLeft));\n            }\n        },\n\n        _scrollToDate: function (date) {\n            var viewStart = this.start;\n            var viewEnd = this.end;\n            var offset;\n\n            if (date >= viewStart && date < viewEnd) {\n                offset = this._offset(date);\n\n                if (kendo.support.isRtl(this.element)) {\n                    offset = this._tableWidth - offset;\n                }\n\n                kendo.scrollLeft(this.content, offset);\n            }\n        },\n\n        _timeSlots: function() {\n            if (!this._slots || !this._slots.length) {\n                return [];\n            }\n\n            return this._slots[this._slots.length - 1];\n        },\n\n        _headers: function(columnLevels) {\n            var rows = [];\n            var level;\n            var headers;\n            var column;\n            var headerText;\n            var styles = GanttView.styles;\n\n            for (var levelIndex = 0, levelCount = columnLevels.length; levelIndex < levelCount; levelIndex++) {\n                level = columnLevels[levelIndex];\n                headers = [];\n\n                for (var columnIndex = 0, columnCount = level.length; columnIndex < columnCount; columnIndex++) {\n                    column = level[columnIndex];\n\n                    headerText = kendoHtmlElement(column.text);\n                    headers.push(kendoDomElement(\"td\", { colspan: column.span, className: styles.header + (column.isNonWorking ? (\" \" + styles.nonWorking) : \"\") }, [headerText]));\n                }\n\n                rows.push(kendoDomElement(\"tr\", null, headers));\n            }\n\n            return rows;\n        },\n\n        _hours: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var options = this.options;\n            var workDayStart = options.workDayStart.getHours();\n            var workDayEnd = options.workDayEnd.getHours();\n            var isWorkHour;\n            var hours;\n            var hourSpan = options.hourSpan;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            if (options.showWorkHours) {\n                start.setHours(workDayStart);\n            }\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                hours = slotEnd.getHours();\n\n                isWorkHour = hours >= workDayStart && hours < workDayEnd;\n\n                slotEnd.setHours(slotEnd.getHours() + hourSpan);\n\n                if (hours == slotEnd.getHours()) {\n                    // Chrome DTS Fix\n                    slotEnd.setHours(slotEnd.getHours() + 2 * hourSpan);\n                }\n\n                if (!options.showWorkHours || isWorkHour) {\n                    slots.push({\n                        start: start,\n                        end: slotEnd,\n                        isNonWorking: !isWorkHour,\n                        span: 1\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _days: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var isWorkDay;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = end < kendo.date.nextDay(start) ? end : kendo.date.nextDay(start);\n\n                isWorkDay = this._isWorkDay(start);\n\n                if (!this.options.showWorkDays || isWorkDay) {\n                    slots.push({\n                        start: start,\n                        end: slotEnd,\n                        isNonWorking: !isWorkDay,\n                        span: 1\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _weeks: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var firstDay = this.calendarInfo().firstDay;\n            var daySlots;\n            var span;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = kendo.date.dayOfWeek(kendo.date.addDays(start, 1), firstDay, 1);\n\n                if (slotEnd > end) {\n                    slotEnd = end;\n                }\n\n                daySlots = this._days(start, slotEnd);\n                span = daySlots.length;\n\n                if (span > 0) {\n                    slots.push({\n                        start: daySlots[0].start,\n                        end: daySlots[span - 1].end,\n                        span: span\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _months: function(start, end) {\n            var slotEnd;\n            var endMonth;\n            var slots = [];\n            var daySlots;\n            var span;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                endMonth = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(slotEnd.getMonth() + 1)));\n                slotEnd = end < endMonth ? end : endMonth;\n\n                daySlots = this._days(start, slotEnd);\n                span = daySlots.length;\n\n                if (span > 0) {\n                    slots.push({\n                        start: daySlots[0].start,\n                        end: daySlots[span - 1].end,\n                        span: span\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _years: function(start, end) {\n            var slotEnd;\n            var monthSpan;\n            var endMonth;\n            var slots = [];\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                slotEnd = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(12)));\n\n                if (slotEnd >= end) {\n                    slotEnd = end;\n                }\n\n                endMonth = slotEnd.getMonth() || 12;\n                monthSpan = endMonth - start.getMonth();\n\n                slots.push({\n                    start: start,\n                    end: slotEnd,\n                    span: monthSpan\n                });\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _slotHeaders: function(slots, template) {\n            var columns = [];\n            var slot;\n\n            for (var i = 0, l = slots.length; i < l; i++) {\n                slot = slots[i];\n\n                columns.push({\n                    text: template(slot),\n                    isNonWorking: !!slot.isNonWorking,\n                    span: slot.span\n                });\n            }\n\n            return columns;\n        },\n\n        _isWorkDay: function(date) {\n            var day = date.getDay();\n            var workDays = this._workDays;\n\n            for (var i = 0, l = workDays.length; i < l; i++) {\n                if (workDays[i] === day) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        calendarInfo: function() {\n            return kendo.getCulture().calendars.standard;\n        },\n\n        _renderCurrentTime: function() {\n            var currentTime = this._getCurrentTime();\n            var timeOffset = this._offset(currentTime);\n            var element = $(\"<div class='k-current-time'></div>\");\n            var viewStyles = GanttView.styles;\n            var tablesWrap = this.element.find(DOT + viewStyles.tasksWrapper);\n            var tasksTable = this.element.find(DOT + viewStyles.tasksTable);\n            var slot;\n\n            if (!this.content || !this._timeSlots().length) {\n                return;\n            }\n\n            this.content.find(\".k-current-time\").remove();\n\n            slot = this._timeSlots()[this._slotIndex(\"start\", currentTime)];\n\n            if (currentTime < slot.start || currentTime > slot.end) {\n                return;\n            }\n\n            if (tablesWrap.length && tasksTable.length) {\n                timeOffset += tasksTable.offset().left - tablesWrap.offset().left;\n            }\n\n            element.css({\n                left: timeOffset + \"px\",\n                top: \"0px\",\n                width: \"1px\",\n                height: this._contentHeight + \"px\"\n            })\n            .appendTo(this.content);\n        },\n\n        _getCurrentTime: function() {\n            // Introduced for testing purposes\n            return new Date();\n        },\n\n        _currentTime: function() {\n            var markerOptions = this.options.currentTimeMarker;\n\n            if (markerOptions !== false && markerOptions.updateInterval !== undefined) {\n                this._renderCurrentTime();\n                this._currentTimeUpdateTimer = setInterval(proxy(this._renderCurrentTime, this), markerOptions.updateInterval);\n            }\n        }\n    });\n\n    extend(true, GanttView, { styles: viewStyles });\n\n    kendo.ui.GanttDayView = GanttView.extend({\n        name: \"day\",\n\n        options: {\n            timeHeaderTemplate: TIME_HEADER_TEMPLATE,\n            dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            this.start = kendo.date.getDate(range.start);\n            this.end = kendo.date.getDate(range.end);\n\n            if (kendo.date.getMilliseconds(range.end) > 0 || this.end.getTime() === this.start.getTime()) {\n                this.end = kendo.date.addDays(this.end, 1);\n            }\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n                this.start.setHours(optionsRange.start.getHours());\n            }\n\n            if (optionsRange && optionsRange.end) {\n                this.end = kendo.date.getDate(optionsRange.end);\n                this.end.setHours(optionsRange.end.getHours());\n            }\n        },\n\n        _createSlots: function() {\n            var daySlots;\n            var daySlot;\n            var hourSlots;\n            var hours;\n            var slots = [];\n\n            daySlots = this._days(this.start, this.end);\n            hourSlots = [];\n\n            for (var i = 0, l = daySlots.length; i < l; i++) {\n                daySlot = daySlots[i];\n                hours = this._hours(daySlot.start, daySlot.end);\n\n                daySlot.span = hours.length;\n\n                hourSlots.push.apply(hourSlots, hours);\n            }\n\n            slots.push(daySlots);\n            slots.push(hourSlots);\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.dayHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.timeHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttWeekView = GanttView.extend({\n        name: \"week\",\n\n        options: {\n            dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n            weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var calendarInfo = this.calendarInfo();\n            var firstDay = calendarInfo.firstDay;\n            var rangeEnd = range.end;\n            var endDay;\n\n            if (firstDay === rangeEnd.getDay()) {\n                rangeEnd.setDate(rangeEnd.getDate() + 7);\n            }\n\n            this.start = kendo.date.getDate(kendo.date.dayOfWeek(range.start, firstDay, -1));\n            this.end = kendo.date.getDate(kendo.date.dayOfWeek(rangeEnd, firstDay, 1));\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                endDay = new Date(optionsRange.end);\n\n                if (kendo.date.getDate(endDay) < optionsRange.end) {\n                    this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                } else {\n                    this.end = kendo.date.getDate(endDay);\n                }\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n\n            slots.push(this._weeks(this.start, this.end));\n            slots.push(this._days(this.start, this.end));\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.weekHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.dayHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttMonthView = GanttView.extend({\n        name: \"month\",\n\n        options: {\n            weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n            monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var endDay;\n            this.start = kendo.date.firstDayOfMonth(range.start);\n            this.end = kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(range.end)), 1);\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                endDay = new Date(optionsRange.end);\n\n                if (kendo.date.getDate(endDay) < optionsRange.end) {\n                    this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                } else {\n                    this.end = kendo.date.getDate(endDay);\n                }\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n\n            slots.push(this._months(this.start, this.end));\n            slots.push(this._weeks(this.start, this.end));\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.monthHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.weekHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttYearView = GanttView.extend({\n        name: \"year\",\n\n        options: {\n            yearHeaderTemplate: YEAR_HEADER_TEMPLATE,\n            monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var firstDayOfMonth;\n            this.start = kendo.date.firstDayOfMonth(new Date(range.start.setMonth(0)));\n            this.end = kendo.date.firstDayOfMonth(new Date(range.end.setMonth(12))); //set month to first month of next year\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.firstDayOfMonth(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                firstDayOfMonth = kendo.date.firstDayOfMonth(optionsRange.end);\n\n                this.end = kendo.date.getDate(new Date(firstDayOfMonth.setMonth(firstDayOfMonth.getMonth() + 1)));\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n            var monthSlots = this._months(this.start, this.end);\n\n            $(monthSlots).each(function(index, slot) {\n                slot.span = 1;\n            });\n\n            slots.push(this._years(this.start, this.end));\n            slots.push(monthSlots);\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.yearHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.monthHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    var timelineStyles = {\n        wrapper: \"k-timeline k-grid k-widget\",\n        gridHeader: \"k-grid-header\",\n        gridHeaderWrap: \"k-grid-header-wrap\",\n        gridContent: \"k-grid-content\",\n        gridContentWrap: \"k-grid-content\",\n        tasksWrapper: \"k-gantt-tables\",\n        dependenciesWrapper: \"k-gantt-dependencies\",\n        task: \"k-task\",\n        taskOffset: \"k-task-offset\",\n        taskOffsetWrap: \"k-task-offset-wrap\",\n        taskPlanned: \"k-task-planned\",\n        line: \"k-gantt-line\",\n        taskResizeHandle: \"k-resize-handle\",\n        taskResizeHandleWest: \"k-resize-w\",\n        taskDragHandle: \"k-task-draghandle\",\n        taskComplete: \"k-task-complete\",\n        taskDelete: \"k-task-delete\",\n        taskWrapActive: \"k-task-wrap-active\",\n        taskWrap: \"k-task-wrap\",\n        taskDot: \"k-task-dot\",\n        taskDotStart: \"k-task-start\",\n        taskDotEnd: \"k-task-end\",\n        hovered: \"k-state-hover\",\n        selected: \"k-state-selected\",\n        origin: \"k-origin\"\n    };\n\n    var GanttTimeline = kendo.ui.GanttTimeline = Widget.extend({\n        init: function(element, options) {\n\n            Widget.fn.init.call(this, element, options);\n\n            if (!this.options.views || !this.options.views.length) {\n                this.options.views = [\"day\", \"week\", \"month\"];\n            }\n\n            isRtl = kendo.support.isRtl(element);\n\n            this._wrapper();\n\n            this._domTrees();\n\n            this._views();\n\n            this._selectable();\n\n            this._draggable();\n\n            this._resizable();\n\n            this._percentResizeDraggable();\n\n            this._createDependencyDraggable();\n\n            this._attachEvents();\n\n            this._tooltip();\n        },\n\n        options: {\n            name: \"GanttTimeline\",\n            messages: {\n                views: {\n                    day: \"Day\",\n                    week: \"Week\",\n                    month: \"Month\",\n                    year: \"Year\",\n                    start: \"Start\",\n                    end: \"End\"\n                }\n            },\n            snap: true,\n            selectable: true,\n            editable: true\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            clearTimeout(this._tooltipTimeout);\n\n            if (this._currentTimeUpdateTimer) {\n                clearInterval(this._currentTimeUpdateTimer);\n            }\n\n            this._unbindView(this._selectedView);\n\n            if (this._moveDraggable) {\n                this._moveDraggable.destroy();\n            }\n\n            if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n            }\n\n            if (this._percentDraggable) {\n                this._percentDraggable.destroy();\n            }\n\n            if (this._dependencyDraggable) {\n                this._dependencyDraggable.destroy();\n            }\n\n            if (this.touch) {\n                this.touch.destroy();\n            }\n\n            this._headerTree = null;\n            this._taskTree = null;\n            this._dependencyTree = null;\n\n            this.wrapper.off(NS);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        _wrapper: function() {\n            var styles = GanttTimeline.styles;\n            var that = this;\n            var options = this.options;\n            var calculateSize = function () {\n                var rowHeight = typeof options.rowHeight === STRING ? options.rowHeight :\n                    options.rowHeight + \"px\";\n                var table = $(kendo.format(SIZE_CALCULATION_TEMPLATE, rowHeight));\n                var calculatedRowHeight;\n                var calculatedCellHeight;\n                var content = that.wrapper.find(DOT + styles.tasksWrapper);\n\n                content.append(table);\n\n                calculatedRowHeight = outerHeight(table.find(\"tr\"));\n                calculatedCellHeight = table.find(\"td\").height();\n\n                table.remove();\n\n                return {\n                    \"row\": calculatedRowHeight,\n                    \"cell\": calculatedCellHeight\n                };\n            };\n\n            this.wrapper = this.element\n                .addClass(styles.wrapper)\n                .append(\"<div class='\" + styles.gridHeader + \"'><div class='\" + styles.gridHeaderWrap + \"'></div></div>\")\n                .append(\"<div class='\" + styles.gridContentWrap + \"'><div class='\" + styles.tasksWrapper + \"'></div><div class='\" + styles.dependenciesWrapper + \"'></div></div>\");\n\n            if (options.rowHeight) {\n                this._calculatedSize = calculateSize();\n            }\n        },\n\n        _domTrees: function() {\n            var styles = GanttTimeline.styles;\n            var tree = kendo.dom.Tree;\n            var wrapper = this.wrapper;\n\n            this._headerTree = new tree(wrapper.find(DOT + styles.gridHeaderWrap)[0]);\n\n            this._taskTree = new tree(wrapper.find(DOT + styles.tasksWrapper)[0]);\n\n            this._dependencyTree = new tree(wrapper.find(DOT + styles.dependenciesWrapper)[0]);\n        },\n\n        _views: function() {\n            var views = this.options.views;\n            var view;\n            var isSettings;\n            var name;\n            var defaultView;\n            var selected;\n\n            this.views = {};\n\n            for (var i = 0, l = views.length; i < l; i++) {\n                view = views[i];\n\n                isSettings = isPlainObject(view);\n\n                if (isSettings && view.selectable === false) {\n                    continue;\n                }\n\n                name = isSettings ? ((typeof view.type !== \"string\") ? view.title : view.type) : view;\n\n                defaultView = defaultViews[name];\n\n                if (defaultView) {\n                    if (isSettings) {\n                        view.type = defaultView.type;\n                    }\n\n                    defaultView.title = this.options.messages.views[name];\n                }\n\n                view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                if (name) {\n                    this.views[name] = view;\n\n                    if (!selected || view.selected) {\n                        selected = name;\n                    }\n                }\n            }\n\n            if (selected) {\n                this._selectedViewName = selected;\n            }\n        },\n\n        view: function(name) {\n            if (name) {\n                this._selectView(name);\n\n                this.trigger(\"navigate\", { view: name, action: \"changeView\" });\n            }\n\n            return this._selectedView;\n        },\n\n        _selectView: function(name) {\n            if (name && this.views[name]) {\n                if (this._selectedView) {\n                    this._unbindView(this._selectedView);\n                }\n\n                this._selectedView = this._initializeView(name);\n                this._selectedViewName = name;\n            }\n        },\n\n        _viewByIndex: function(index) {\n            var view;\n            var views = this.views;\n\n            for (view in views) {\n                if (!index) {\n                    return view;\n                }\n\n                index--;\n            }\n        },\n\n        _initializeView: function(name) {\n            var view = this.views[name];\n\n            if (view) {\n                var type = view.type;\n\n                if (typeof type === \"string\") {\n                    type = kendo.getter(view.type)(window);\n                }\n\n                if (type) {\n                    var newRange = {};\n                    extend(newRange, this.options.range, view.range);\n\n                    var newDate = view.date || this.options.date;\n\n                    view = new type(this.wrapper, trimOptions(extend(true, {\n                        headerTree: this._headerTree,\n                        taskTree: this._taskTree,\n                        dependencyTree: this._dependencyTree,\n                        calculatedSize: this._calculatedSize\n                    }, view, this.options, {\n                        date: newDate,\n                        range: newRange\n                    })));\n                } else {\n                    throw new Error(\"There is no such view\");\n                }\n            }\n\n            return view;\n        },\n\n        _unbindView: function(view) {\n            if (view) {\n                view.destroy();\n            }\n        },\n\n        _range: function (tasks) {\n            var startOrder = {\n                field: \"start\",\n                dir: \"asc\"\n            };\n            var endOrder = {\n                field: \"end\",\n                dir: \"desc\"\n            };\n\n            if (!tasks || !tasks.length) {\n                return { start: new Date(), end: new Date() };\n            }\n\n            var start = new Query(tasks).sort(startOrder).toArray()[0].start || new Date();\n            var end = new Query(tasks).sort(endOrder).toArray()[0].end || new Date();\n\n            return {\n                start: new Date(start),\n                end: new Date(end)\n            };\n        },\n\n        _render: function(tasks) {\n            var view = this.view();\n            var range = this._range(tasks);\n            var date = view.options.date;\n\n            this._tasks = tasks;\n\n            view.range(range);\n\n            view.renderLayout();\n\n            view.render(tasks);\n\n            if (date) {\n                view._scrollToDate(date);\n            }\n        },\n\n        _renderDependencies: function(dependencies) {\n            this.view()._renderDependencies(dependencies);\n        },\n\n        _taskByUid: function(uid) {\n            var tasks = this._tasks;\n            var length = tasks.length;\n            var task;\n\n            for (var i = 0; i < length; i++) {\n                task = tasks[i];\n\n                if (task.uid === uid) {\n                    return task;\n                }\n            }\n        },\n\n        _draggable: function() {\n            var that = this;\n            var element;\n            var task;\n            var currentStart;\n            var startOffset;\n            var snap = this.options.snap;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removeDragHint();\n\n                if (element) {\n                    element.css(\"opacity\", 1);\n                }\n\n                element = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            if (!editable || editable.move === false || editable.update === false) {\n                return;\n            }\n\n            this._moveDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                holdToDrag: kendo.support.mobileOS,\n                ignore: DOT + styles.taskResizeHandle\n            });\n\n            this._moveDraggable\n                .bind(\"dragstart\", function(e) {\n                    var view = that.view();\n                    element = e.currentTarget.closest(DOT + styles.taskWrap);\n                    task = that._taskByUid(e.currentTarget.parent().find(DOT + styles.task).attr(\"data-uid\"));\n\n                    if (that.trigger(\"moveStart\", { task: task })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    currentStart = task.start;\n                    startOffset = view._timeByPosition(e.x.location, snap) - currentStart;\n\n                    view._createDragHint(element);\n\n                    element.css(\"opacity\", 0.5);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    var view = that.view();\n                    var date = new Date(view._timeByPosition(e.x.location, snap) - startOffset);\n                    var updateHintDate = date;\n\n                    if (!that.trigger(\"move\", { task: task, start: date })) {\n                        currentStart = date;\n\n                        if (isRtl) {\n                            updateHintDate = new Date(currentStart.getTime() + task.duration());\n                        }\n\n                        view._updateDragHint(updateHintDate);\n                    }\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"moveEnd\", { task: task, start: currentStart });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _resizable: function() {\n            var that = this;\n            var element;\n            var task;\n            var currentStart;\n            var currentEnd;\n            var resizeStart;\n            var snap = this.options.snap;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removeResizeHint();\n                element = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            if (!editable || editable.resize === false || editable.update === false) {\n                return;\n            }\n\n            this._resizeDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskResizeHandle,\n                holdToDrag: false\n            });\n\n            this._resizeDraggable\n                .bind(\"dragstart\", function(e) {\n                    resizeStart = e.currentTarget.hasClass(styles.taskResizeHandleWest);\n\n                    if (isRtl) {\n                        resizeStart = !resizeStart;\n                    }\n\n                    element = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n\n                    task = that._taskByUid(element.attr(\"data-uid\"));\n\n                    if (that.trigger(\"resizeStart\", { task: task })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    currentStart = task.start;\n                    currentEnd = task.end;\n\n                    that.view()._createResizeHint(task);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    var view = that.view();\n                    var date = view._timeByPosition(e.x.location, snap, !resizeStart);\n\n                    if (resizeStart) {\n                        if (date < currentEnd) {\n                            currentStart = date;\n                        } else {\n                            currentStart = currentEnd;\n                        }\n                    } else {\n                        if (date > currentStart) {\n                            currentEnd = date;\n                        } else {\n                            currentEnd = currentStart;\n                        }\n                    }\n\n                    if (!that.trigger(\"resize\", { task: task, start: currentStart, end: currentEnd })) {\n                        view._updateResizeHint(currentStart, currentEnd, resizeStart);\n                    }\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"resizeEnd\", { task: task, resizeStart: resizeStart, start: currentStart, end: currentEnd });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _percentResizeDraggable: function() {\n            var that = this;\n            var task;\n            var taskElement;\n            var taskElementOffset;\n            var timelineOffset;\n            var originalPercentWidth;\n            var maxPercentWidth;\n            var currentPercentComplete;\n            var tooltipTop;\n            var tooltipLeft;\n            var styles = GanttTimeline.styles;\n            var delta;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removePercentCompleteTooltip();\n                taskElement = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            var updateElement = function(width) {\n                var taskDragHandle =  taskElement.siblings(DOT + styles.taskDragHandle);\n\n                if(!taskDragHandle.length) {\n                    taskDragHandle =  taskElement.closest(DOT + styles.taskWrap).find(DOT + styles.taskDragHandle);\n                }\n\n                taskDragHandle.css(isRtl ? \"right\" : \"left\", width);\n\n                taskElement\n                    .find(DOT + styles.taskComplete)\n                    .width(width);\n            };\n\n            if (!editable || editable.dragPercentComplete === false || editable.update === false) {\n                return;\n            }\n\n            this._percentDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskDragHandle,\n                holdToDrag: false\n            });\n\n            this._percentDraggable\n                .bind(\"dragstart\", function(e) {\n                    if (that.trigger(\"percentResizeStart\")) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    taskElement = e.currentTarget.siblings(DOT + styles.task);\n\n                    if(!taskElement.length) {\n                        taskElement = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                    }\n\n                    task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                    currentPercentComplete = task.percentComplete;\n\n                    taskElementOffset = taskElement.offset();\n                    timelineOffset = this.element.offset();\n\n                    originalPercentWidth = taskElement.find(DOT + styles.taskComplete).width();\n                    maxPercentWidth = outerWidth(taskElement);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    delta = isRtl ? -e.x.initialDelta : e.x.initialDelta;\n\n                    var currentWidth = Math.max(0, Math.min(maxPercentWidth, originalPercentWidth + delta));\n\n                    currentPercentComplete = Math.round((currentWidth / maxPercentWidth) * 100);\n\n                    updateElement(currentWidth);\n\n                    tooltipTop = taskElementOffset.top - timelineOffset.top;\n                    tooltipLeft = taskElementOffset.left + currentWidth - timelineOffset.left;\n\n                    if (isRtl) {\n                        tooltipLeft += (maxPercentWidth - 2 * currentWidth);\n                    }\n\n                    that.view()._updatePercentCompleteTooltip(tooltipTop, tooltipLeft, currentPercentComplete);\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"percentResizeEnd\", { task: task, percentComplete: currentPercentComplete / 100 });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    updateElement(originalPercentWidth);\n\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _createDependencyDraggable: function() {\n            var that = this;\n            var originalHandle;\n            var hoveredHandle = $();\n            var hoveredTask = $();\n            var startX;\n            var startY;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                originalHandle\n                    .css(\"display\", \"\")\n                    .removeClass(styles.hovered);\n\n                originalHandle.parent().removeClass(styles.origin);\n                originalHandle = null;\n\n                toggleHandles(false);\n\n                hoveredTask = $();\n                hoveredHandle = $();\n\n                that.view()._removeDependencyDragHint();\n\n                that.dragInProgress = false;\n            };\n\n            var toggleHandles = function(value) {\n                if (!hoveredTask.hasClass(styles.origin)) {\n                    hoveredTask.find(DOT + styles.taskDot).css(\"display\", value ? \"block\" : \"\");\n                    hoveredHandle.toggleClass(styles.hovered, value);\n                }\n            };\n\n            if (!editable || editable.dependencyCreate === false) {\n                return;\n            }\n\n            this._dependencyDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskDot,\n                holdToDrag: false\n            });\n\n            this._dependencyDraggable\n                .bind(\"dragstart\", function(e) {\n                    if (that.trigger(\"dependencyDragStart\")) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    originalHandle = e.currentTarget\n                        .css(\"display\", \"block\")\n                        .addClass(styles.hovered);\n\n                    originalHandle.parent().addClass(styles.origin);\n\n                    var elementOffset = originalHandle.offset();\n                    var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n\n                    startX = Math.round(elementOffset.left - tablesOffset.left + (outerHeight(originalHandle) / 2));\n                    startY = Math.round(elementOffset.top - tablesOffset.top + (outerWidth(originalHandle) / 2));\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    that.view()._removeDependencyDragHint();\n\n                    var target = $(kendo.elementUnderCursor(e));\n                    var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n                    var currentX = e.x.location - tablesOffset.left;\n                    var currentY = e.y.location - tablesOffset.top;\n\n                    that.view()._updateDependencyDragHint({ x: startX, y: startY }, { x: currentX, y: currentY });\n\n                    toggleHandles(false);\n\n                    hoveredHandle = (target.hasClass(styles.taskDot)) ? target : $();\n                    hoveredTask = target.closest(DOT + styles.taskWrap);\n\n                    toggleHandles(true);\n                }, 15))\n                .bind(\"dragend\", function() {\n                    if (hoveredHandle.length) {\n                        var fromStart = originalHandle.hasClass(styles.taskDotStart);\n                        var toStart = hoveredHandle.hasClass(styles.taskDotStart);\n\n                        var type = fromStart ? (toStart ? 3 : 2) : (toStart ? 1 : 0);\n\n                        var predecessorElement = originalHandle.siblings(DOT + styles.task);\n                        if(!predecessorElement.length) {\n                            predecessorElement = originalHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                        }\n                        var predecessor = that._taskByUid(predecessorElement.attr(\"data-uid\"));\n\n                        var successorElement = hoveredHandle.siblings(DOT + styles.task);\n                        if(!successorElement.length) {\n                            successorElement = hoveredHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                        }\n                        var successor = that._taskByUid(successorElement.attr(\"data-uid\"));\n\n                        if (predecessor !== successor) {\n                            that.trigger(\"dependencyDragEnd\", { type: type, predecessor: predecessor, successor: successor });\n                        }\n                    }\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _selectable: function() {\n            var that = this;\n            var styles = GanttTimeline.styles;\n\n            if (this.options.selectable) {\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                        e.stopPropagation();\n\n                        var uid = $(this).attr(\"data-uid\");\n\n                        if(!uid) {\n                            uid = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).data(\"uid\");\n                        }\n\n                        if (!e.ctrlKey) {\n                            that.trigger(\"select\", { uid: uid });\n                        } else {\n                            that.trigger(\"clear\");\n                        }\n                    })\n                    .on(CLICK + NS, DOT + styles.taskWrap, function(e) {\n                        e.stopPropagation();\n\n                        // Decrease z-index of wrap so the we can get to the\n                        // dependency line underneath, if there is any\n                        $(this).css(\"z-index\", \"0\");\n\n                        var target = $(document.elementFromPoint(e.clientX, e.clientY));\n\n                        if (target.hasClass(styles.line)) {\n                            target.click();\n                        }\n\n                        $(this).css(\"z-index\", \"\");\n                    })\n                    .on(CLICK + NS, DOT + styles.tasksWrapper, function() {\n                        if (that.selectDependency().length > 0) {\n                            that.clearSelection();\n                        } else {\n                            that.trigger(\"clear\");\n                        }\n                    })\n                    .on(CLICK + NS, DOT + styles.line, function(e) {\n                        e.stopPropagation();\n\n                        that.selectDependency(this);\n                    });\n            }\n        },\n\n        select: function(value) {\n            var element = this.wrapper.find(value);\n            var styles = GanttTimeline.styles;\n\n            if (element.length) {\n                this.clearSelection();\n\n                element.addClass(styles.selected);\n\n                if (kendo.support.mobileOS) {\n                    element.parent().addClass(styles.taskWrapActive);\n                }\n\n                return;\n            }\n\n            return this.wrapper.find(DOT + styles.task + DOT + styles.selected);\n        },\n\n        selectDependency: function(value) {\n            var element = this.wrapper.find(value);\n            var uid;\n            var styles = GanttTimeline.styles;\n\n            if (element.length) {\n                this.clearSelection();\n                this.trigger(\"clear\");\n\n                uid = $(element).attr(\"data-uid\");\n\n                this.wrapper.find(DOT + styles.line + \"[data-uid='\" + uid + \"']\").addClass(styles.selected);\n\n                return;\n            }\n\n            return this.wrapper.find(DOT + styles.line + DOT + styles.selected);\n        },\n\n        clearSelection: function() {\n            var styles = GanttTimeline.styles;\n\n            this.wrapper\n                .find(DOT + styles.selected)\n                .removeClass(styles.selected);\n\n            if (kendo.support.mobileOS) {\n                this.wrapper\n                    .find(DOT + styles.taskWrapActive)\n                    .removeClass(styles.taskWrapActive);\n            }\n        },\n\n        _attachEvents: function() {\n            var that = this;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            if (editable) {\n                this._tabindex();\n\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                        that.trigger(\"removeTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                        e.stopPropagation();\n                        e.preventDefault();\n                    })\n                    .on(KEYDOWN + NS, function(e) {\n                        var selectedDependency;\n                        var editable = that.options.editable;\n\n                        if (e.keyCode === keys.DELETE && editable && editable.dependencyDestroy !== false) {\n                            selectedDependency = that.selectDependency();\n\n                            if (selectedDependency.length) {\n                                that.trigger(\"removeDependency\", { uid: selectedDependency.attr(\"data-uid\") });\n                                that.clearSelection();\n                            }\n                        }\n                    });\n\n                if (!kendo.support.mobileOS) {\n                    this.wrapper\n                        .on(DBLCLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                            if (that.options.editable.update !== false) {\n                                that.trigger(\"editTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n\n                                e.stopPropagation();\n                                e.preventDefault();\n                            }\n                        });\n                } else {\n                    this.touch = this.wrapper\n                        .kendoTouch({\n                            filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                            doubletap: function(e) {\n                                if (that.options.editable.update !== false) {\n                                    that.trigger(\"editTask\", { uid: $(e.touch.currentTarget).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                                }\n                            }\n                        }).data(\"kendoTouch\");\n                }\n            }\n        },\n\n        _tooltip: function() {\n            var that = this;\n            var tooltipOptions = this.options.tooltip;\n            var styles = GanttTimeline.styles;\n            var currentMousePosition;\n            var mouseMoveHandler = function(e) {\n                currentMousePosition = e.clientX;\n            };\n\n            if (tooltipOptions && tooltipOptions.visible === false) {\n                return;\n            }\n\n            if (!kendo.support.mobileOS) {\n                this.wrapper\n                        .on(MOUSEENTER + NS, DOT + styles.task, function() {\n                            var element = this;\n                            var task = that._taskByUid($(this).attr(\"data-uid\"));\n\n                            if (that.dragInProgress) {\n                                return;\n                            }\n\n                            that._tooltipTimeout = setTimeout(function() {\n                                that.view()._createTaskTooltip(task, element, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.task, function() {\n                            clearTimeout(that._tooltipTimeout);\n\n                            that.view()._removeTaskTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSEENTER + NS, DOT + styles.taskOffset, function() {\n                            var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                            if (that.dragInProgress) {\n                                return;\n                            }\n\n                            that._offsetTooltipTimeout = setTimeout(function() {\n                                that.view()._createOffsetTooltip(task, taskElement, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function() {\n                            clearTimeout(that._offsetTooltipTimeout);\n\n                            that.view()._removeOffsetTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSEENTER + NS, DOT + styles.taskPlanned, function() {\n                            var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                            that._plannedTooltipTimeout = setTimeout(function() {\n                                that.view()._createPlannedTooltip(task, taskElement, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function() {\n                            clearTimeout(that._plannedTooltipTimeout);\n\n                            that.view()._removePlannedTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        });\n            } else {\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                        e.stopPropagation();\n                        that.view()._removeTaskTooltip();\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.task, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removeTaskTooltip();\n                        }\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removeOffsetTooltip();\n                        }\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removePlannedTooltip();\n                        }\n                    });\n\n                if (this.touch) {\n                    this.touch\n                        .bind(\"tap\", function(e) {\n                            var element = $(e.touch.target);\n                            var currentPosition = e.touch.x.client;\n                            var task;\n\n                            if(!element.hasClass(styles.task)) {\n                                task = that._taskByUid(element.closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\"));\n                                if (that.view()._offsetTooltip) {\n                                    that.view()._removeOffsetTooltip();\n                                }\n\n                                that.view()._createOffsetTooltip(task, element, currentPosition);\n                            } else {\n                                task = that._taskByUid(element.attr(\"data-uid\"));\n                                if (that.view()._taskTooltip) {\n                                    that.view()._removeTaskTooltip();\n                                }\n\n                                that.view()._createTaskTooltip(task, element, currentPosition);\n                            }\n                        })\n                        .bind(\"doubletap\", function() {\n                            that.view()._removeTaskTooltip();\n                            that.view()._removeOffsetTooltip();\n                        });\n                }\n            }\n        },\n        _setPlanned: function(value) {\n            this.options.showPlannedTasks = value;\n            this.view().options.showPlannedTasks = value;\n        }\n    });\n\n    extend(true, GanttTimeline, { styles: timelineStyles });\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","hidden","$","window","kendo","jQuery","Widget","ui","kendoDomElement","dom","element","kendoTextElement","text","kendoHtmlElement","html","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","proxy","isRtl","keys","Query","data","STRING","NS","CLICK","DBLCLICK","MOUSEMOVE","MOUSEENTER","MOUSELEAVE","KEYDOWN","DOT","TIME_HEADER_TEMPLATE","template","DAY_HEADER_TEMPLATE","WEEK_HEADER_TEMPLATE","MONTH_HEADER_TEMPLATE","YEAR_HEADER_TEMPLATE","RESIZE_HINT","RESIZE_TOOLTIP_TEMPLATE","PERCENT_RESIZE_TOOLTIP_TEMPLATE","TASK_TOOLTIP_TEMPLATE","OFFSET_TOOLTIP_TEMPLATE","PLANNED_TOOLTIP_TEMPLATE","SIZE_CALCULATION_TEMPLATE","defaultViews","day","type","week","month","year","trimOptions","options","prefix","views","getWorkDays","workDays","dayIndex","workWeekStart","push","workWeekEnd","blurActiveElement","activeElement","_activeElement","nodeName","toLowerCase","trigger","viewStyles","alt","reset","nonWorking","header","gridHeader","gridHeaderWrap","gridContent","tasksWrapper","rowsTable","columnsTable","tasksTable","dependenciesWrapper","resource","resourceAlt","task","taskSingle","taskMilestone","taskSummary","taskWrap","taskMilestoneWrap","taskSummaryWrap","taskPlanned","taskPlannedMoment","taskPlannedDuration","taskPlannedMomentLeft","taskAdvanced","taskDelayed","taskOffset","taskOffsetWrap","taskInnerWrap","resourcesWrap","taskDot","taskDotStart","taskDotEnd","taskDragHandle","taskContent","taskTemplate","taskActions","taskDelete","taskComplete","taskDetails","taskDetailsPercent","link","icon","iconDelete","taskResizeHandle","taskResizeHandleWest","taskResizeHandleEast","taskSummaryProgress","taskSummaryComplete","line","lineHorizontal","lineVertical","arrowWest","arrowEast","dragHint","dependencyHint","tooltipWrapper","tooltipContent","tooltipCallout","callout","marquee","marqueeColor","offsetTooltipAdvanced","offsetTooltipDelay","plannedTooltip","GanttView","init","fn","call","this","title","find","styles","content","contentWidth","width","_workDays","_headerTree","headerTree","_taskTree","taskTree","_taskTemplate","Template","templateSettings","_dependencyTree","dependencyTree","_taskCoordinates","_currentTime","destroy","clearTimeout","_tooltipTimeout","headerRow","_dragHint","_resizeHint","_resizeTooltip","_taskTooltip","_percentCompleteResizeTooltip","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","hourSpan","slotSize","currentTimeMarker","updateInterval","renderLayout","_slots","_createSlots","_tableWidth","_calculateTableWidth","createLayout","_layout","_slotDimensions","_adjustHeight","height","rows","headers","_headers","colgroup","_colgroup","tree","table","style","role","render","first","last","children","slots","_timeSlots","slot","i","length","offsetLeft","offsetWidth","tasks","taskCount","contentTable","_rowsTable","_columnsTable","_tasksTable","calculatedSize","totalHeight","row","_contentHeight","_rowHeight","undefined","_renderCurrentTime","rowCount","attributes","className","_createTable","cells","slotsCount","slotSpan","totalSpan","span","colspan","isNonWorking","cell","position","plannedPosition","coordinates","size","_calculateMilestoneWidth","milestoneWidth","Math","round","resourcesField","resourcesPosition","resourcesMargin","_calculateResourcesMargin","taskBorderWidth","_calculateTaskBorderWidth","resourceStyle","showPlannedTasks","addCoordinates","rowIndex","taskLeft","taskRight","left","isMilestone","start","end","l","_taskPosition","_taskPositionPlanned","borderWidth","_renderTask","max","clientWidth","_renderResources","cols","tbody","maxSpan","currentSpan","tableWidth","milestone","boundingClientRect","append","getBoundingClientRect","right","remove","margin","wrapper","parseInt","css","computedStyle","getComputedStyles","parseFloat","editable","wrapClassName","dragHandleStyle","taskWrapAttr","endTaskDotRight","taskFullWidth","taskWrapper","taskElement","progressHandleOffset","plannedElement","endTaskDotLeft","offsetElement","_renderPlannedMilestone","_renderPlannedSingleTask","summary","_renderSummary","_renderMilestone","_renderSingleTask","plannedStart","plannedEnd","resize","update","href","aria-label","dependencyCreate","dragPercentComplete","percentComplete","progressWidth","taskChildren","classes","widthExceptDelay","data-uid","uid","showPlanned","margin-left","margin-right","resources","color","get","reverse","startLeft","_offset","endLeft","date","startOffset","slotDuration","slotOffset","startIndex","_slotIndex","field","value","startIdx","endIdx","middle","slice","ceil","_timeByPosition","x","snap","snapToEnd","_slotByPosition","offset","duration","getTime","slotIndex","_renderDependencies","dependencies","elements","apply","_renderDependency","dependency","predecessor","predecessorId","successor","successorId","method","attr","_renderFF","from","to","lines","_dependencyFF","_arrow","_renderSS","_renderFS","_dependencyFS","_renderSF","that","top","dir","delta","overlap","arrowOverlap","rowHeight","minLineWidth","fromTop","floor","toTop","addHorizontal","_line","addVertical","abs","minLineHeight","minDistance","direction","count","j","_createDragHint","clone","addClass","cursor","visibility","closest","_updateDragHint","_removeDragHint","_createResizeHint","taskTop","tooltipHeight","tooltipTop","messages","format","resizeTooltipFormat","_resizeTooltipWidth","_resizeTooltipTop","_updateResizeHint","resizeStart","tooltipLeft","tablesWidth","support","scrollbar","tooltipWidth","tableOffset","min-width","appendTo","_removeResizeHint","_updatePercentCompleteTooltip","_removePercentCompleteTooltip","tooltip","tooltipMiddle","arrow","arrowHeight","_updateDependencyDragHint","_removeDependencyDragHint","_creteDependencyDragHint","deltaX","deltaY","y","sqrt","angle","atan","PI","transform-origin","-ms-transform-origin","-webkit-transform-origin","transform","-ms-transform","-webkit-transform","_createTaskTooltip","mouseLeft","contentOffset","contentScrollLeft","scrollLeft","parents","rowOffset","scrollTop","_adjustTooltipDimensions","_removeTaskTooltip","_createOffsetTooltip","_offsetTooltip","offsetValue","plannedTasksMessages","plannedTasks","minutes","offsetText","hours","days","offsetPrefix","_removeOffsetTooltip","_createPlannedTooltip","_plannedTooltip","editorMessages","editor","startDate","toString","endDate","_removePlannedTooltip","_scrollTo","elementLeft","elementWidth","elementRight","rowTop","rowBottom","contentTop","contentHeight","contentBottom","contentLeft","contentRight","scrollbarWidth","_scrollToDate","viewStart","viewEnd","columnLevels","level","column","headerText","levelIndex","levelCount","columnIndex","columnCount","_hours","slotEnd","getHours","isWorkHour","setHours","_days","isWorkDay","nextDay","_isWorkDay","_weeks","firstDay","calendarInfo","daySlots","dayOfWeek","addDays","_months","endMonth","firstDayOfMonth","setMonth","getMonth","_years","monthSpan","_slotHeaders","columns","getDay","getCulture","calendars","standard","currentTime","_getCurrentTime","timeOffset","tablesWrap","markerOptions","_currentTimeUpdateTimer","setInterval","timelineStyles","GanttDayView","timeHeaderTemplate","dayHeaderTemplate","range","optionsRange","getDate","getMilliseconds","daySlot","hourSlots","GanttWeekView","weekHeaderTemplate","rangeEnd","endDay","setDate","GanttMonthView","monthHeaderTemplate","lastDayOfMonth","GanttYearView","yearHeaderTemplate","monthSlots","each","index","gridContentWrap","taskWrapActive","hovered","selected","origin","GanttTimeline","_wrapper","_domTrees","_views","_selectable","_draggable","_resizable","_percentResizeDraggable","_createDependencyDraggable","_attachEvents","_tooltip","selectable","clearInterval","_unbindView","_selectedView","_moveDraggable","_resizeDraggable","_percentDraggable","_dependencyDraggable","touch","off","calculateSize","calculatedRowHeight","calculatedCellHeight","_calculatedSize","Tree","view","isSettings","defaultView","_selectedViewName","_selectView","action","_initializeView","_viewByIndex","getter","newRange","newDate","Error","_range","startOrder","endOrder","sort","toArray","_render","_tasks","_taskByUid","currentStart","cleanUp","dragInProgress","move","Draggable","distance","filter","holdToDrag","mobileOS","ignore","bind","e","currentTarget","parent","preventDefault","location","throttle","updateHintDate","userEvents","currentEnd","hasClass","taskElementOffset","timelineOffset","originalPercentWidth","maxPercentWidth","currentPercentComplete","updateElement","siblings","initialDelta","currentWidth","min","originalHandle","hoveredHandle","hoveredTask","startX","startY","removeClass","toggleHandles","toggleClass","elementOffset","tablesOffset","target","elementUnderCursor","currentX","currentY","fromStart","toStart","predecessorElement","successorElement","on","stopPropagation","ctrlKey","document","elementFromPoint","clientX","clientY","click","selectDependency","clearSelection","select","_tabindex","selectedDependency","keyCode","DELETE","dependencyDestroy","kendoTouch","doubletap","tooltipOptions","currentMousePosition","mouseMoveHandler","visible","setTimeout","_offsetTooltipTimeout","_plannedTooltipTimeout","relatedTarget","currentPosition","client","_setPlanned","amd","a1","a2","a3"],"mappings":"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"}