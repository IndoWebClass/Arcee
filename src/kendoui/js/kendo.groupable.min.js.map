{"version":3,"file":"kendo.groupable.min.js","sources":["kendo.groupable.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.groupable',[ \"./kendo.core\", \"./kendo.draganddrop\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"groupable\",\n    name: \"Groupable\",\n    category: \"framework\",\n    depends: [ \"core\", \"draganddrop\" ],\n    advanced: true\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        outerWidth = kendo._outerWidth,\n        kendoAttr = kendo.attr,\n        extend = $.extend,\n        each = $.each,\n        proxy = $.proxy,\n        isRtl = false,\n\n        DIR = \"dir\",\n        FIELD = \"field\",\n        TITLE = \"title\",\n        ASCENDING = \"asc\",\n        DESCENDING = \"desc\",\n        GROUP_SORT = \"group-sort\",\n        NS = \".kendoGroupable\",\n        CHANGE = \"change\",\n        indicatorTmpl = kendo.template('<div class=\"k-group-indicator\" data-#=data.ns#field=\"${data.field}\" data-#=data.ns#title=\"${data.title || \"\"}\" data-#=data.ns#dir=\"${data.dir || \"asc\"}\">' +\n                '<a href=\"\\\\#\" class=\"k-link\">' +\n                    '<span class=\"k-icon k-i-sort-${(data.dir || \"asc\") == \"asc\" ? \"asc-sm\" : \"desc-sm\"}\" title=\"(sorted ${(data.dir || \"asc\") == \"asc\" ? \"ascending\": \"descending\"})\"></span>' +\n                    '${data.title ? data.title: data.field}' +\n                '</a>' +\n                '<a href=\"\\\\#\" data-role=\"button\" aria-label=\"Remove grouping by ${data.title || data.field} field\" class=\"k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button\">' +\n                    '<span class=\"k-button-icon k-icon k-i-close\"></span>' +\n                '</a>' +\n             '</div>',  { useWithBlock:false }),\n        hint = function(target) {\n            var title = target.attr(kendo.attr(\"title\"));\n            if (title) {\n                title = kendo.htmlEncode(title);\n            }\n\n            return $('<div class=\"k-group-clue k-drag-clue\" />')\n                .html(title || target.attr(kendo.attr(\"field\")))\n                .prepend('<span class=\"k-icon k-drag-status k-i-cancel\"></span>');\n        },\n        dropCue = $('<div class=\"k-grouping-dropclue\"/>');\n\n    var Groupable = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                group = kendo.guid(),\n                intializePositions = proxy(that._intializePositions, that),\n                draggable,\n                horizontalCuePosition,\n                dropCuePositions = that._dropCuePositions = [];\n\n            Widget.fn.init.call(that, element, options);\n\n            isRtl = kendo.support.isRtl(element);\n            horizontalCuePosition = isRtl ? \"right\" : \"left\";\n\n            that.draggable = draggable = that.options.draggable || new kendo.ui.Draggable(that.element, {\n                filter: that.options.draggableElements,\n                hint: hint,\n                group: group\n            });\n\n            that.groupContainer = $(that.options.groupContainer, that.element)\n                .kendoDropTarget({\n                    group: draggable.options.group,\n                    dragenter: function(e) {\n                        if (that._canDrag(e.draggable.currentTarget)) {\n                            e.draggable.hint.find(\".k-drag-status\").removeClass(\"k-i-cancel\").addClass(\"k-i-plus\");\n                            dropCue.css(horizontalCuePosition, 0).appendTo(that.groupContainer);\n                        }\n                    },\n                    dragleave: function(e) {\n                        e.draggable.hint.find(\".k-drag-status\").removeClass(\"k-i-plus\").addClass(\"k-i-cancel\");\n                        dropCue.remove();\n                    },\n                    drop: function(e) {\n                        var targetElement = e.draggable.currentTarget,\n                            field = targetElement.attr(kendo.attr(\"field\")),\n                            title = targetElement.attr(kendo.attr(\"title\")),\n                            sourceIndicator = that.indicator(field),\n                            dropCuePositions = that._dropCuePositions,\n                            lastCuePosition = dropCuePositions[dropCuePositions.length - 1],\n                            position;\n                        var sortOptions = extend({}, that.options.sort, targetElement.data(GROUP_SORT));\n                        var dir = sortOptions.dir;\n\n                        if (!targetElement.hasClass(\"k-group-indicator\") && !that._canDrag(targetElement)) {\n                            return;\n                        }\n                        if(lastCuePosition) {\n                            position = that._dropCuePosition(kendo.getOffset(dropCue).left + parseInt(lastCuePosition.element.css(\"marginLeft\"), 10) * (isRtl ? -1 : 1) + parseInt(lastCuePosition.element.css(\"marginRight\"), 10));\n                            if(position && that._canDrop($(sourceIndicator), position.element, position.left)) {\n                                if(position.before) {\n                                    position.element.before(sourceIndicator || that.buildIndicator(field, title, dir));\n                                } else {\n                                    position.element.after(sourceIndicator || that.buildIndicator(field, title, dir));\n                                }\n\n                                that._setIndicatorSortOptions(field, sortOptions);\n                                that._change();\n                            }\n                        } else {\n                            that.groupContainer.empty();\n                            that.groupContainer.append(that.buildIndicator(field, title, dir));\n                            that._setIndicatorSortOptions(field, sortOptions);\n                            that._change();\n                        }\n                    }\n                })\n                .kendoDraggable({\n                    filter: \"div.k-group-indicator\",\n                    hint: hint,\n                    group: draggable.options.group,\n                    dragcancel: proxy(that._dragCancel, that),\n                    dragstart: function(e) {\n                        var element = e.currentTarget,\n                            marginLeft = parseInt(element.css(\"marginLeft\"), 10),\n                            elementPosition = element.position(),\n                            left = isRtl ? elementPosition.left - marginLeft : elementPosition.left + outerWidth(element);\n\n                        intializePositions();\n                        dropCue.css(\"left\", left).appendTo(that.groupContainer);\n                        this.hint.find(\".k-drag-status\").removeClass(\"k-i-cancel\").addClass(\"k-i-plus\");\n                    },\n                    dragend: function() {\n                        that._dragEnd(this);\n                    },\n                    drag: proxy(that._drag, that)\n                })\n                .on(\"click\" + NS, \".k-button\", function(e) {\n                    e.preventDefault();\n                    that._removeIndicator($(this).parent());\n                })\n                .on(\"click\" + NS,\".k-link\", function(e) {\n                    var indicator = $(this).parent();\n                    var newDir = indicator.attr(kendoAttr(DIR)) === ASCENDING ? DESCENDING : ASCENDING;\n\n                    indicator.attr(kendoAttr(DIR), newDir);\n                    that._change();\n                    e.preventDefault();\n                });\n\n            draggable.bind([ \"dragend\", \"dragcancel\", \"dragstart\", \"drag\" ],\n            {\n                dragend: function() {\n                    that._dragEnd(this);\n                },\n                dragcancel: proxy(that._dragCancel, that),\n                dragstart: function(e) {\n                    var element, marginRight, left;\n\n                    if (!that.options.allowDrag && !that._canDrag(e.currentTarget)) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    intializePositions();\n                    if(dropCuePositions.length) {\n                        element = dropCuePositions[dropCuePositions.length - 1].element;\n                        marginRight = parseInt(element.css(\"marginRight\"), 10);\n                        left = element.position().left + outerWidth(element) + marginRight;\n                    } else {\n                        left = 0;\n                    }\n                },\n                drag: proxy(that._drag, that)\n            });\n\n            that.dataSource = that.options.dataSource;\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n            } else {\n                that._refreshHandler = proxy(that.refresh, that);\n            }\n\n            if(that.dataSource) {\n                that.dataSource.bind(\"change\", that._refreshHandler);\n                that.refresh();\n            }\n        },\n\n        refresh: function() {\n            var that = this,\n                dataSource = that.dataSource;\n            var groups = dataSource.group() || [];\n            var fieldAttr = kendoAttr(FIELD);\n            var titleAttr = kendoAttr(TITLE);\n            var indicatorHtml;\n\n            if (that.groupContainer) {\n                that.groupContainer.empty();\n\n                each(groups, function(index, group) {\n                    var field = group.field;\n                    var dir =group.dir;\n                    var element = that.element\n                        .find(that.options.filter)\n                        .filter(function() {\n                            return $(this).attr(fieldAttr) === field;\n                        });\n\n                    indicatorHtml = that.buildIndicator(field, element.attr(titleAttr), dir);\n                    that.groupContainer.append(indicatorHtml);\n                    that._setIndicatorSortOptions(field, extend({}, that.options.sort, { dir: dir, compare: group.compare }));\n                });\n            }\n\n            that._invalidateGroupContainer();\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.groupContainer.off(NS);\n\n            if (that.groupContainer.data(\"kendoDropTarget\")) {\n                that.groupContainer.data(\"kendoDropTarget\").destroy();\n            }\n\n            if (that.groupContainer.data(\"kendoDraggable\")) {\n                that.groupContainer.data(\"kendoDraggable\").destroy();\n            }\n\n            if (!that.options.draggable) {\n                that.draggable.destroy();\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(\"change\", that._refreshHandler);\n                that._refreshHandler = null;\n            }\n\n            that.groupContainer = that.element = that.draggable = null;\n        },\n\n        events: [\"change\"],\n\n        options: {\n            name: \"Groupable\",\n            filter: \"th\",\n            draggableElements: \"th\",\n            messages: {\n                empty: \"Drag a column header and drop it here to group by that column\"\n            },\n            sort: {\n                dir: ASCENDING,\n                compare: null\n            }\n        },\n\n        indicator: function(field) {\n            var indicators = $(\".k-group-indicator\", this.groupContainer);\n            return $.grep(indicators, function (item)\n                {\n                    return $(item).attr(kendo.attr(\"field\")) === field;\n                })[0];\n        },\n\n        buildIndicator: function(field, title, dir) {\n            var that = this;\n            var indicator = indicatorTmpl({\n                ns: kendo.ns,\n                field: field.replace(/\"/g, \"'\"),\n                title: title,\n                dir: dir || (that.options.sort || {}).dir || ASCENDING\n            });\n\n            return indicator;\n        },\n\n        _setIndicatorSortOptions: function(field, options) {\n            var indicator = $(this.indicator(field));\n            indicator.data(GROUP_SORT, options);\n        },\n\n        aggregates: function() {\n            var that = this;\n            var names;\n            var idx;\n            var length;\n\n            return that.element.find(that.options.filter).map(function() {\n                var cell = $(this),\n                    aggregate = cell.attr(kendo.attr(\"aggregates\")),\n                    member = cell.attr(kendo.attr(\"field\"));\n\n                if (aggregate && aggregate !== \"\") {\n                    names = aggregate.split(\",\");\n                    aggregate = [];\n                    for (idx = 0, length = names.length; idx < length; idx++) {\n                        aggregate.push({ field: member, aggregate: names[idx] });\n                    }\n                }\n                return aggregate;\n            }).toArray();\n        },\n\n        descriptors: function() {\n            var that = this,\n                indicators = $(\".k-group-indicator\", that.groupContainer),\n                field,\n                aggregates = that.aggregates();\n\n            return $.map(indicators, function(item) {\n                item = $(item);\n                field = item.attr(kendo.attr(\"field\"));\n                var sortOptions = that.options.sort || {};\n                var indicatorSortOptions = item.data(GROUP_SORT) || {};\n\n                return {\n                    field: field,\n                    dir: item.attr(kendo.attr(\"dir\")),\n                    aggregates: aggregates || [],\n                    compare: indicatorSortOptions.compare || sortOptions.compare\n                };\n            });\n        },\n\n        _removeIndicator: function(indicator) {\n            var that = this;\n            indicator.off();\n            indicator.removeData();\n            indicator.remove();\n            that._invalidateGroupContainer();\n            that._change();\n        },\n\n        _change: function() {\n            var that = this;\n            if(that.dataSource) {\n                var descriptors = that.descriptors();\n                if (that.trigger(\"change\", { groups: descriptors })) {\n                    that.refresh();\n                    return;\n                }\n                that.dataSource.group(descriptors);\n            }\n        },\n\n        _dropCuePosition: function(position) {\n            var dropCuePositions = this._dropCuePositions;\n            if(!dropCue.is(\":visible\") || dropCuePositions.length === 0) {\n                return;\n            }\n\n            position = Math.ceil(position);\n\n            var lastCuePosition = dropCuePositions[dropCuePositions.length - 1],\n                left = lastCuePosition.left,\n                right = lastCuePosition.right,\n                marginLeft = parseInt(lastCuePosition.element.css(\"marginLeft\"), 10),\n                marginRight = parseInt(lastCuePosition.element.css(\"marginRight\"), 10);\n\n            if(position >= right && !isRtl || position < left && isRtl) {\n                position = {\n                    left: lastCuePosition.element.position().left + (!isRtl ? outerWidth(lastCuePosition.element) + marginRight : - marginLeft),\n                    element: lastCuePosition.element,\n                    before: false\n                };\n            } else {\n                position = $.grep(dropCuePositions, function(item) {\n                    return (item.left <= position && position <= item.right) || (isRtl && position > item.right);\n                })[0];\n\n                if(position) {\n                    position = {\n                        left: isRtl ? position.element.position().left + outerWidth(position.element) + marginRight : position.element.position().left - marginLeft,\n                        element: position.element,\n                        before: true\n                    };\n                }\n            }\n\n            return position;\n        },\n        _drag: function(event) {\n            var position = this._dropCuePosition(event.x.location);\n\n            if (position) {\n                dropCue.css({ left: position.left, right: \"auto\" });\n            }\n        },\n        _canDrag: function(element) {\n            var field = element.attr(kendo.attr(\"field\"));\n\n            return element.attr(kendo.attr(\"groupable\")) != \"false\" &&\n                field &&\n                (element.hasClass(\"k-group-indicator\") ||\n                    !this.indicator(field));\n        },\n        _canDrop: function(source, target, position) {\n            var next = source.next(),\n                result = source[0] !== target[0] && (!next[0] || target[0] !== next[0] || (!isRtl && position > next.position().left || isRtl && position < next.position().left));\n            return result;\n        },\n        _dragEnd: function(draggable) {\n            var that = this,\n                field = draggable.currentTarget.attr(kendo.attr(\"field\")),\n                sourceIndicator = that.indicator(field);\n\n            if (draggable !== that.options.draggable && !draggable.dropped && sourceIndicator) {\n                that._removeIndicator($(sourceIndicator));\n            }\n\n            that._dragCancel();\n        },\n        _dragCancel: function() {\n            dropCue.remove();\n            this._dropCuePositions = [];\n        },\n        _intializePositions: function() {\n            var that = this,\n                indicators = $(\".k-group-indicator\", that.groupContainer),\n                left;\n\n            that._dropCuePositions = $.map(indicators, function(item) {\n                item = $(item);\n                left = kendo.getOffset(item).left;\n                return {\n                    left: parseInt(left, 10),\n                    right: parseInt(left + outerWidth(item), 10),\n                    element: item\n                };\n            });\n        },\n        _invalidateGroupContainer: function() {\n            var groupContainer = this.groupContainer;\n            if(groupContainer && groupContainer.is(\":empty\")) {\n                groupContainer.html(this.options.messages.empty);\n            }\n        }\n    });\n\n    kendo.ui.plugin(Groupable);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","depends","advanced","$","window","kendo","jQuery","undefined","Widget","ui","outerWidth","_outerWidth","kendoAttr","attr","extend","each","proxy","isRtl","DIR","FIELD","TITLE","ASCENDING","DESCENDING","GROUP_SORT","NS","CHANGE","indicatorTmpl","template","useWithBlock","hint","target","title","htmlEncode","html","prepend","dropCue","Groupable","init","element","options","that","this","group","guid","intializePositions","_intializePositions","draggable","horizontalCuePosition","dropCuePositions","_dropCuePositions","fn","call","support","Draggable","filter","draggableElements","groupContainer","kendoDropTarget","dragenter","e","_canDrag","currentTarget","find","removeClass","addClass","css","appendTo","dragleave","remove","drop","targetElement","field","sourceIndicator","indicator","lastCuePosition","length","position","sortOptions","sort","data","dir","hasClass","_dropCuePosition","getOffset","left","parseInt","_canDrop","before","buildIndicator","after","_setIndicatorSortOptions","_change","empty","append","kendoDraggable","dragcancel","_dragCancel","dragstart","marginLeft","elementPosition","dragend","_dragEnd","drag","_drag","on","preventDefault","_removeIndicator","parent","newDir","bind","marginRight","allowDrag","dataSource","_refreshHandler","unbind","refresh","groups","fieldAttr","titleAttr","indicatorHtml","index","compare","_invalidateGroupContainer","destroy","off","events","messages","indicators","grep","item","ns","replace","aggregates","names","idx","map","cell","aggregate","member","split","push","toArray","descriptors","indicatorSortOptions","removeData","trigger","is","Math","ceil","right","event","x","location","source","next","result","dropped","plugin","amd","a1","a2","a3"],"mappings":"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"}