/** 
 * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(define){define("kendo.imagebrowser.min",["./kendo.filebrowser.min"],function(){var e={id:"imagebrowser",name:"ImageBrowser",category:"web",description:"",hidden:true,depends:["filebrowser"]},l=window.kendo.jQuery,p=void 0,c=window.kendo,a=c.ui.FileBrowser,r=l.isPlainObject,d=l.proxy,f=l.extend,u=c.isFunction,s=/(^\/|\/$)/g,g="error",m=".kendoImageBrowser",h="name",v="size",n="type",w={field:n,dir:"asc"},i=c.template('<div class="k-listview-item k-listview-item-empty"><span class="k-file-preview"><span class="k-file-icon k-icon k-i-none"></span></span><span class="k-file-name">${text}</span></div>');function o(e){return e.offsetTop-l(e).height()}function _(e,t){if(e===p||!e.match(/\/$/))e=(e||"")+"/";return e+t}function k(e){if(!e)return"";var t=" bytes";if(e>=1073741824){t=" GB";e/=1073741824}else if(e>=1048576){t=" MB";e/=1048576}else if(e>=1024){t=" KB";e/=1024}return Math.round(e*100)/100+t}f(true,c.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),f(true,c.data,{transports:{imagebrowser:c.data.RemoteTransport.extend({init:function(e){c.data.RemoteTransport.fn.init.call(this,l.extend(true,{},this.options,e))},_call:function(e,t){t.data=l.extend({},t.data,{path:this.options.path()});if(u(this.options[e]))this.options[e].call(this,t);else c.data.RemoteTransport.fn[e].call(this,t)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}});var t=a.extend({init:function(e,t){var i=this;t=t||{};a.fn.init.call(i,e,t);i.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e=this,t=e._selectedItem(),i,a=e.options.transport.imageUrl;if(t&&t.get(n)==="f"){i=_(e.path(),t.get(h)).replace(s,"");if(a)i=u(a)?a(i):c.format(a,encodeURIComponent(i));return i}},_fileUpload:function(e){var i=this,t=i.options,a=t.fileTypes,n=new RegExp(("("+a.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),s=e.files[0].name,o=e.files[0].size,r=h,l=v,d;if(n.test(s)){e.data={path:i.path()};d=i._createFile(s,o);if(!d)e.preventDefault();else{d._uploading=true;i.upload.one("error",function(){d=p});i.upload.one("success",function(e){if(d){delete d._uploading;var t=i._insertFileToList(d);t.set(r,e.response[i._getFieldName(r)]);t.set(l,e.response[i._getFieldName(l)]);i._tiles=i.listView.items().filter("["+c.attr("type")+"=f]");i._scroll()}})}}else{e.preventDefault();i._showMessage(c.format(t.messages.invalidFileType,s,a))}},_content:function(){var t=this;t.list=l('<div class="k-filemanager-listview" />').appendTo(t.element).on("dblclick"+m,".k-listview-item",d(t._dblClick,t));t.listView=new c.ui.ListView(t.list,{layout:"flex",flex:{direction:"row",wrap:"wrap"},dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:true,autoBind:false,dataBinding:function(e){t.toolbar.find(".k-i-close").parent().addClass("k-disabled");if(e.action==="remove"||e.action==="sync"){e.preventDefault();c.ui.progress(t.listView.content,false)}},dataBound:function(){if(t.dataSource.view().length){t._tiles=this.items().filter("["+c.attr("type")+"=f]");t._scroll()}else this.content.append(i({text:t.options.messages.emptyFolder}))},change:d(t._listViewChange,t)});t.listView.content.on("scroll"+m,d(t._scroll,t))},_dataSource:function(){var e=this,t=e.options,i=t.transport,a=f({},w),n={field:h,dir:"asc"},s,o={type:i.type||"imagebrowser",sort:[a,n]};if(r(i)){i.path=d(e.path,e);o.transport=i}if(r(t.schema))o.schema=t.schema;else if(i.type&&r(c.data.schemas[i.type]))s=c.data.schemas[i.type];if(e.dataSource&&e._errorHandler)e.dataSource.unbind(g,e._errorHandler);else e._errorHandler=d(e._error,e);e.dataSource=c.data.DataSource.create(o).bind(g,e._errorHandler)},_loadImage:function(e){var t=this,i=l(e),a=t.dataSource.getByUid(i.attr(c.attr("uid"))),n=a.get(h),s=t.options.transport.thumbnailUrl,o=l("<img />",{alt:n}),r="?";if(a._uploading)return;o.hide().on("load"+m,function(){l(this).prev().remove().end().addClass("k-image k-file-image").fadeIn()});i.find(".k-i-loading").after(o);if(u(s))s=s(t.path(),encodeURIComponent(n));else{if(s.indexOf("?")>=0)r="&";s=s+r+"path="+encodeURIComponent(t.path()+n);if(a._override){s+="&_="+(new Date).getTime();delete a._override}}o.attr("src",s);e.loaded=true},_scroll:function(){var n=this;if(n.options.transport&&n.options.transport.thumbnailUrl){clearTimeout(n._timeout);n._timeout=setTimeout(function(){var e=c._outerHeight(n.listView.content),i=n.listView.content.scrollTop(),a=i+e;n._tiles.each(function(){var e=o(this),t=e+this.offsetHeight;if(e>=i&&e<a||t>=i&&t<a)n._loadImage(this);if(e>a)return false});n._tiles=n._tiles.filter(function(){return!this.loaded})},250)}},_itemTmpl:function(){var e=this,t='<div class="k-listview-item" '+c.attr("uid")+'="#=uid#" ';t+=c.attr("type")+'="${'+n+'}">';t+="#if("+n+' == "d") { #';t+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-folder"></span></div>';t+="#}else{#";if(e.options.transport&&e.options.transport.thumbnailUrl)t+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-loading"></span></div>';else t+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-file"></span></div>';t+="#}#";t+='<span class="k-file-name">${'+h+"}</span>";t+="#if("+n+' == "f") { # <span class="k-file-size">${this.sizeFormatter('+v+")}</span> #}#";t+="</div>";return d(c.template(t),{sizeFormatter:k})}});return c.ui.plugin(t),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()});
//# sourceMappingURL=kendo.imagebrowser.min.js.map
