{"version":3,"file":"kendo.listview.min.js","sources":["kendo.listview.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.listview',[ \"./kendo.data\", \"./kendo.editable\", \"./kendo.selectable\", \"./kendo.pager\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"listview\",\n    name: \"ListView\",\n    category: \"web\",\n    description: \"The ListView widget offers rich support for interacting with data.\",\n    depends: [ \"data\" ],\n    features: [ {\n        id: \"listview-editing\",\n        name: \"Editing\",\n        description: \"Support for record editing\",\n        depends: [ \"editable\" ]\n    }, {\n        id: \"listview-selection\",\n        name: \"Selection\",\n        description: \"Support for selection\",\n        depends: [ \"selectable\" ]\n    }, {\n        id: \"listview-paging\",\n        name: \"Paging\",\n        description: \"Support for paging\",\n        depends: [ \"pager\" ]\n    } ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        CHANGE = \"change\",\n        KENDO_KEYDOWN = \"kendoKeydown\",\n        CANCEL = \"cancel\",\n        DATABOUND = \"dataBound\",\n        DATABINDING = \"dataBinding\",\n        Widget = kendo.ui.Widget,\n        keys = kendo.keys,\n        EMPTY_STRING = \"\",\n        DOT = \".\",\n        FOCUSSELECTOR = \"> *:not(.k-loading-mask)\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        FOCUSED = \"k-state-focused\",\n        SELECTED = \"k-state-selected\",\n        KEDITITEM = \"k-edit-item\",\n        PAGER_CLASS = \"k-listview-pager\",\n        ITEM_CLASS = \"k-listview-item\",\n        TABINDEX = \"tabindex\",\n        ARIA_SETSIZE = \"aria-setsize\",\n        ARIA_POSINSET = \"aria-posinset\",\n        ARIA_ROLE = \"role\",\n        ARIA_LABEL = \"aria-label\",\n        EDIT = \"edit\",\n        REMOVE = \"remove\",\n        SAVE = \"save\",\n        MOUSEDOWN = \"mousedown\",\n        CLICK = \"click\",\n        TOUCHSTART = \"touchstart\",\n        NS = \".kendoListView\",\n        proxy = $.proxy,\n        activeElement = kendo._activeElement,\n        progress = kendo.ui.progress,\n        DataSource = kendo.data.DataSource;\n\n    var ListView = kendo.ui.DataBoundWidget.extend( {\n        init: function(element, options) {\n            var that = this;\n\n            options = Array.isArray(options) ? { dataSource: options } : options;\n\n            Widget.fn.init.call(that, element, options);\n\n            options = that.options;\n\n            that.wrapper = element = that.element;\n\n            if (element[0].id) {\n                that._itemId = element[0].id + \"_lv_active\";\n            }\n\n            that._element();\n\n            that._layout();\n\n            that._dataSource();\n\n            that._setContentHeight();\n\n            that._templates();\n\n            that._navigatable();\n\n            that._selectable();\n\n            that._pageable();\n\n            that._crudHandlers();\n\n            that._scrollable();\n\n            if (that.options.autoBind){\n                that.dataSource.fetch();\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n            CHANGE,\n            CANCEL,\n            DATABINDING,\n            DATABOUND,\n            EDIT,\n            REMOVE,\n            SAVE,\n            KENDO_KEYDOWN\n        ],\n\n        options: {\n            name: \"ListView\",\n            autoBind: true,\n            selectable: false,\n            navigatable: false,\n            pageable: false,\n            height: null,\n            template: EMPTY_STRING,\n            altTemplate: EMPTY_STRING,\n            editTemplate: EMPTY_STRING,\n            contentTemplate: \"<div data-content='true' />\",\n            contentElement: \"div\",\n            bordered: true,\n            borders: \"\",\n            layout: \"\",\n            flex: {\n                direction: \"row\",\n                wrap: \"nowrap\"\n            },\n            grid: {},\n            scrollable: false\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            this._layout();\n\n            this._templates();\n\n            if (this.selectable) {\n                this.selectable.destroy();\n                this.selectable = null;\n            }\n\n            this._selectable();\n        },\n\n        _templates: function() {\n            var options = this.options;\n\n            this.template = kendo.template(options.template || EMPTY_STRING);\n            this.altTemplate = kendo.template(options.altTemplate || options.template);\n            this.editTemplate = kendo.template(options.editTemplate || EMPTY_STRING);\n        },\n\n        _item: function(action) {\n            return this.content.children()[action]();\n        },\n\n        items: function() {\n            return this.content.children(\":not(.k-loading-mask)\");\n        },\n\n        dataItem: function(element) {\n            var attr = kendo.attr(\"uid\");\n            var uid = $(element).closest(\"[\" + attr + \"]\").attr(attr);\n\n            return this.dataSource.getByUid(uid);\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n            this._dataSource();\n\n            if (this.options.autoBind) {\n                dataSource.fetch();\n            }\n\n            if (this.options.scrollable === \"endless\") {\n                this._bindScrollable();\n            }\n        },\n\n        _unbindDataSource: function() {\n            var that = this;\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler)\n                            .unbind(PROGRESS, that._progressHandler)\n                            .unbind(ERROR, that._errorHandler);\n        },\n\n        _dataSource: function() {\n            var that = this,\n                pageable = that.options.pageable,\n                dataSource = that.options.dataSource;\n\n            if ($.isPlainObject(pageable) && pageable.pageSize !== undefined) {\n                dataSource.pageSize = pageable.pageSize;\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that._unbindDataSource();\n            } else {\n                that._refreshHandler = proxy(that.refresh, that);\n                that._progressHandler = proxy(that._progress, that);\n                that._errorHandler = proxy(that._error, that);\n            }\n\n            that.dataSource = DataSource.create(dataSource)\n                                .bind(CHANGE, that._refreshHandler)\n                                .bind(PROGRESS, that._progressHandler)\n                                .bind(ERROR, that._errorHandler);\n        },\n\n        _progress: function(toggle) {\n            var element = this.content;\n            progress(element, toggle, { opacity: true});\n        },\n\n        _error: function() {\n            progress(this.content, false);\n        },\n\n        _element: function() {\n            var options = this.options;\n            var height = options.height;\n\n            this.element.addClass(\"k-widget k-listview\");\n\n            if (options.navigatable || options.selectable) {\n                this.element.attr(ARIA_ROLE, \"listbox\");\n            } else {\n                this.element.attr(ARIA_ROLE, \"list\");\n            }\n\n            if (options.contentElement) {\n                this.content = $(document.createElement(options.contentElement)).appendTo(this.element);\n            } else {\n                this.content = this.element;\n            }\n\n            this.content.attr(TABINDEX, -1);\n\n            if (height) {\n                this.element.css(\"height\", height);\n            }\n        },\n\n        _layout: function() {\n            var that = this;\n            var options = that.options;\n            var flex = options.flex;\n            var grid = options.grid;\n            var element = that.element;\n            var elementClassNames = [\"k-widget\", \"k-listview\"];\n            var content = that.content;\n            var contentClassNames = [\"k-listview-content\"];\n\n            element.add(content).removeClass(function (index, className) {\n                if (className.indexOf(\"k-\") >= 0) {\n                    return true;\n                }\n            });\n\n            // Element class names\n            if (options.bordered === true) {\n                elementClassNames.push(\"k-listview-bordered\");\n            }\n\n            if (typeof options.borders === \"string\" && options.borders !== EMPTY_STRING) {\n                elementClassNames.push(\"k-listview-borders-\" + options.borders);\n            }\n\n\n            // Content class names\n            if (typeof options.contentPadding === \"string\" && options.contentPadding !== EMPTY_STRING) {\n                contentClassNames.push(\"k-listview-content-padding-\" + options.contentPadding);\n            }\n\n            if (typeof options.layout === \"string\" && options.layout !== EMPTY_STRING) {\n                contentClassNames.push(\"k-d-\" + options.layout);\n            }\n\n            if (options.layout === \"flex\" && typeof flex === \"object\") {\n                if (typeof flex.direction === \"string\" && flex.direction !== \"\") {\n                    contentClassNames.push(\"k-flex-\" + flex.direction);\n                }\n\n                if (typeof flex.wrap === \"string\" && flex.wrap !== \"\") {\n                    contentClassNames.push(\"k-flex-\" + flex.wrap);\n                }\n            }\n\n            if (options.layout === \"grid\" && typeof grid === \"object\") {\n                if (typeof grid.cols === \"number\") {\n                    content.css(\"grid-template-columns\", \"repeat(\" + grid.cols + \", 1fr)\");\n                } else if (typeof grid.cols === \"string\") {\n                    content.css(\"grid-template-columns\", grid.cols);\n                }\n\n                if (typeof grid.rows === \"number\") {\n                    content.css(\"grid-template-rows\", \"repeat(\" + grid.rows + \", \" + (grid.rowHeight !== undefined ? grid.rowHeight : \"1fr\") + \")\");\n                } else if (typeof grid.rows === \"string\") {\n                    content.css(\"grid-template-rows\", grid.rows);\n                }\n\n                if (typeof grid.gutter === \"number\") {\n                    content.css(\"grid-gap\", grid.gutter);\n                } else if (typeof grid.gutter === \"string\") {\n                    content.css(\"grid-gap\", grid.gutter);\n                }\n            }\n\n            that.element.addClass(elementClassNames.join(\" \"));\n            that.content.addClass(contentClassNames.join(\" \"));\n\n        },\n\n        _setContentHeight: function() {\n            var that = this,\n                options = that.options,\n                height;\n\n            if (options.scrollable && that.wrapper.is(\":visible\")) {\n\n                height = that.wrapper.innerHeight();\n                that.content.height(height);\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                view = that.dataSource.view(),\n                data,\n                items,\n                item,\n                html = \"\",\n                idx,\n                length,\n                template = that.template,\n                altTemplate = that.altTemplate,\n                options = that.options,\n                role = (options.selectable || options.navigatable) ? \"option\" : \"listitem\",\n                active = activeElement(),\n                endlessAppend =  that._endlessFetchInProgress,\n                index = endlessAppend ? that._skipRerenderItemsCount : 0,\n                scrollable = that.options.scrollable;\n\n            e = e || {};\n\n            if (e.action === \"itemchange\") {\n                if (!that._hasBindingTarget() && !that.editable) {\n                    data = e.items[0];\n                    item = that.items().filter(\"[\" + kendo.attr(\"uid\") + \"=\" + data.uid + \"]\");\n\n                    if (item.length > 0) {\n                        idx = item.index();\n\n                        that.angular(\"cleanup\", function() {\n                            return { elements: [ item ]};\n                        });\n\n                        item.replaceWith(template(data));\n                        item = that.items().eq(idx);\n                        item.attr(kendo.attr(\"uid\"), data.uid);\n\n                        that.angular(\"compile\", function() {\n                            return { elements: [ item ], data: [ { dataItem: data } ]};\n                        });\n\n                        that.trigger(\"itemChange\", {\n                            item: item,\n                            data: data\n                        });\n                    }\n                }\n\n                return;\n            }\n\n            if (that.trigger(DATABINDING, { action: e.action || \"rebind\", items: e.items, index: e.index })) {\n                return;\n            }\n\n            that._angularItems(\"cleanup\");\n\n            if (!endlessAppend) {\n                that._destroyEditable();\n            }\n\n            for (idx = index, length = view.length; idx < length; idx++) {\n                if (idx % 2) {\n                    html += altTemplate(view[idx]);\n                } else {\n                    html += template(view[idx]);\n                }\n            }\n\n            if (endlessAppend) {\n                that.content.append(html);\n            } else {\n                that.content.html(html);\n            }\n\n            items = that.items().not(\".k-loading-mask\");\n\n            if (!view.length) {\n                that.element.removeAttr(ARIA_ROLE);\n                that.element.removeAttr(ARIA_LABEL);\n            }\n\n            for (idx = index, length = view.length; idx < length; idx++) {\n                item = items.eq(idx);\n\n                item.addClass(ITEM_CLASS);\n\n                item.attr(kendo.attr(\"uid\"), view[idx].uid)\n                    .attr(\"role\", role);\n\n                if (that.options.selectable) {\n                    item.attr(\"aria-selected\", \"false\");\n                }\n\n                if (that.options.pageable) {\n                    item.attr(ARIA_SETSIZE, that.dataSource.total());\n                    item.attr(ARIA_POSINSET, that.dataSource.indexOf(that.dataItem(item)) + 1);\n                }\n            }\n\n            if (that.content[0] === active && that.options.navigatable) {\n                if (that._focusNext) {\n                    that.current(that.current().next());\n                } else {\n                    if (!scrollable) {\n                        that.current(items.eq(0));\n                    }\n                }\n            }\n\n            that._setContentHeight();\n            that._angularItems(\"compile\");\n\n            that._progress(false);\n            that._endlessFetchInProgress = null;\n\n            that.trigger(DATABOUND, { action: e.action || \"rebind\", items: e.items, index: e.index });\n        },\n\n        _pageable: function() {\n            var that = this,\n                pageable = that.options.pageable,\n                navigatable = that.options.navigatable,\n                pagerWrap,\n                settings;\n\n            if (!pageable) {\n                return;\n            }\n\n            pagerWrap = that.wrapper.find(DOT + PAGER_CLASS);\n\n            if (!pagerWrap.length) {\n                pagerWrap = $('<div />').addClass(PAGER_CLASS);\n            }\n\n            if (pageable.position === \"top\") {\n                pagerWrap\n                    .addClass(kendo.format(\"{0}-{1}\", PAGER_CLASS, pageable.position))\n                    .prependTo(that.wrapper);\n            } else {\n                pagerWrap.appendTo(that.wrapper);\n            }\n\n            if (that.pager) {\n                that.pager.destroy();\n            }\n\n            if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                that.pager = pageable;\n            } else {\n                pagerWrap = pageable.pagerId ? $(\"#\" + pageable.pagerId) : pagerWrap;\n\n                settings = $.extend({}, pageable, {\n                    dataSource: that.dataSource,\n                    navigatable: navigatable,\n                    pagerId: null\n                });\n\n                that.pager = new kendo.ui.Pager(pagerWrap, settings);\n            }\n        },\n\n        _selectable: function() {\n            var that = this,\n                multi,\n                current,\n                selectable = that.options.selectable,\n                navigatable = that.options.navigatable;\n\n            if (selectable) {\n                multi = kendo.ui.Selectable.parseOptions(selectable).multiple;\n\n                that.selectable = new kendo.ui.Selectable(that.element, {\n                    aria: true,\n                    multiple: multi,\n                    filter: that.options.contentElement ? \".k-listview-content \" + FOCUSSELECTOR : FOCUSSELECTOR,\n                    change: function() {\n                        that.trigger(CHANGE);\n                    }\n                });\n\n                if(multi) {\n                    that.element.attr(\"aria-multiselectable\", true);\n                }\n\n                if (navigatable) {\n                    that.element.on(\"keydown\" + NS, function(e) {\n\n                        if (!$(e.target).is(that.element)) { return; }\n\n                        if (e.keyCode === keys.SPACEBAR) {\n                            current = that.current();\n\n                            if (e.target == e.currentTarget) {\n                                e.preventDefault();\n                            }\n\n                            if (multi) {\n                                if (!e.ctrlKey) {\n                                    that.selectable.clear();\n                                } else {\n                                    if (current && current.hasClass(SELECTED)) {\n                                        current.removeClass(SELECTED);\n                                        that.trigger(CHANGE);\n                                        return;\n                                    }\n                                }\n                            } else {\n                                that.selectable.clear();\n                            }\n\n                            that.selectable.value(current);\n                        }\n                    });\n                }\n            }\n        },\n\n        _scrollable: function() {\n            var that = this;\n            var scrollable = that.options.scrollable;\n\n            if (scrollable) {\n\n                that.content.css({\n                    \"overflow-y\": \"scroll\",\n                    \"position\": \"relative\",\n                    \"-webkit-overflow-scrolling\": \"touch\"\n                });\n\n                if (scrollable === \"endless\") {\n                    that._bindScrollable();\n                }\n            }\n        },\n\n        _bindScrollable: function (){\n            var that = this;\n            var originalPageSize = that._endlessPageSize = that.dataSource.options.pageSize;\n\n            that.content\n                .off(\"scroll\" + NS)\n                .on(\"scroll\" + NS, function () {\n                    if (this.scrollTop + this.clientHeight - this.scrollHeight >= -15 &&\n                    !that._endlessFetchInProgress &&\n                    that._endlessPageSize < that.dataSource.total()) {\n                        that._skipRerenderItemsCount =  that._endlessPageSize;\n                        that._endlessPageSize = that._skipRerenderItemsCount  + originalPageSize;\n                        that.dataSource.options.endless = true;\n                        that._endlessFetchInProgress = true;\n                        that.dataSource.pageSize(that._endlessPageSize);\n                    }\n                });\n        },\n\n        current: function(candidate) {\n            var that = this,\n                element = that.element,\n                current = that._current,\n                id = that._itemId;\n\n            if (candidate === undefined) {\n                return current;\n            }\n\n            if (current && current[0]) {\n                if (current[0].id === id) {\n                    current.removeAttr(\"id\");\n                }\n\n                current.removeClass(FOCUSED);\n                element.removeAttr(\"aria-activedescendant\");\n            }\n\n            if (candidate && candidate[0]) {\n                id = candidate[0].id || id;\n\n                that._scrollTo(candidate[0]);\n\n                element.attr(\"aria-activedescendant\", id);\n                candidate.addClass(FOCUSED).attr(\"id\", id);\n            }\n\n            that._current = candidate;\n        },\n\n        _scrollTo: function(element) {\n            var that = this,\n                content = that.content,\n                container,\n                UseJQueryoffset = false,\n                SCROLL = \"scroll\";\n\n            if (content.css(\"overflow\") === \"auto\" || content.css(\"overflow\") === SCROLL || content.css(\"overflow-y\") === SCROLL) {\n                container = content[0];\n            } else {\n                container = window;\n                UseJQueryoffset = true;\n            }\n\n            var scrollDirectionFunc = function(direction, dimension) {\n\n                var elementOffset = UseJQueryoffset ? $(element).offset()[direction.toLowerCase()] : element[\"offset\" + direction],\n                    elementDimension = element[\"client\" + dimension],\n                    containerScrollAmount = $(container)[SCROLL + direction](),\n                    containerDimension = $(container)[dimension.toLowerCase()]();\n\n                if (elementOffset + elementDimension > containerScrollAmount + containerDimension) {\n                    $(container)[SCROLL + direction](elementOffset + elementDimension - containerDimension);\n                } else if (elementOffset < containerScrollAmount) {\n                    $(container)[SCROLL + direction](elementOffset);\n                }\n            };\n\n            scrollDirectionFunc(\"Top\", \"Height\");\n            scrollDirectionFunc(\"Left\", \"Width\");\n        },\n\n        _navigatable: function() {\n            var that = this,\n                navigatable = that.options.navigatable,\n                element = that.element,\n                content = that.content,\n                clickCallback = function(e) {\n                    that.current($(e.currentTarget));\n                    if (!$(e.target).is(\":button, a, :input, a > .k-icon, textarea\")) {\n                        kendo.focusElement(element);\n                    }\n                };\n\n            if (navigatable) {\n                that._tabindex();\n\n                element\n                    .on(\"focus\" + NS, function() {\n                        var current = that._current;\n\n                        if (!current || !current.is(\":visible\")) {\n                            current = that._item(\"first\");\n                        }\n\n                        that.current(current);\n                    })\n                    .on(\"focusout\" + NS, function() {\n                        if (that._current) {\n                            that._current.removeClass(FOCUSED);\n                        }\n                    })\n                    .on(\"keydown\" + NS, that, function(e) {\n                        var key = e.keyCode,\n                            current = that.current(),\n                            target = $(e.target),\n                            canHandle = !target.is(\":button, textarea, a, a > .t-icon, input\"),\n                            isTextBox = target.is(\":text, :password\"),\n                            preventDefault = kendo.preventDefault,\n                            editItem = content.find(\".\" + KEDITITEM),\n                            active = activeElement(), idx,\n                            scrollable = that.options.scrollable;\n\n                        if (!target.is(that.element) || (!canHandle && !isTextBox && key !== keys.ESC) || (isTextBox && key !== keys.ESC && key !== keys.ENTER)) {\n                            return;\n                        }\n\n                        if (key === keys.UP || key === keys.LEFT) {\n                            if (current && current[0]) {\n                                current = current.prev();\n                            }\n\n                            if (current && current[0]) {\n                                that.current(current);\n                            }\n                            else if (!scrollable) {\n                                that.current(that._item(\"last\"));\n                            }\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.DOWN || key === keys.RIGHT) {\n                            if (scrollable) {\n                                if (that.options.scrollable === \"endless\" && !current.next().length) {\n                                    that.content[0].scrollTop = that.content[0].scrollHeight;\n                                    that._focusNext = true;\n                                } else {\n                                    current = current.next();\n\n                                    if (current && current[0]) {\n                                        that.current(current);\n                                    }\n                                }\n                            }\n                            else {\n                                current = current.next();\n                                that.current(!current || !current[0] ? that._item(\"first\") : current);\n                            }\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.PAGEUP) {\n                            that.current(null);\n                            that.dataSource.page(that.dataSource.page() - 1);\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.PAGEDOWN) {\n                            that.current(null);\n                            that.dataSource.page(that.dataSource.page() + 1);\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.HOME) {\n                            that.current(that._item(\"first\"));\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.END) {\n                            that.current(that._item(\"last\"));\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.ENTER) {\n                            if (editItem.length !== 0 && (canHandle || isTextBox)) {\n                                idx = that.items().index(editItem);\n\n                                if (active) {\n                                    active.blur();\n                                }\n\n                                that.save();\n\n                                var focusAgain = function(){\n                                    that.element.trigger(\"focus\");\n                                    that.current(that.items().eq(idx));\n                                };\n\n                                that.one(\"dataBound\", focusAgain);\n                            } else if (that.options.editTemplate !== \"\") {\n                                that.edit(current);\n                            }\n                        }\n\n                        if (key === keys.ESC) {\n                            editItem = content.find(\".\" + KEDITITEM);\n\n                            if (editItem.length === 0) {\n                                return;\n                            }\n\n                            idx = that.items().index(editItem);\n                            that.cancel();\n                            that.element.trigger(\"focus\");\n                            that.current(that.items().eq(idx));\n                        }\n                    });\n\n                element.on(MOUSEDOWN + NS + \" \" + TOUCHSTART + NS, that.options.contentElement ? \".k-listview-content \" + FOCUSSELECTOR : FOCUSSELECTOR, proxy(clickCallback, that));\n            }\n        },\n\n        clearSelection: function() {\n            var that = this;\n            that.selectable.clear();\n            that.trigger(CHANGE);\n        },\n\n        select: function(items) {\n            var that = this,\n                selectable = that.selectable;\n\n            items = $(items);\n\n            if (items.length) {\n                if (!selectable.options.multiple) {\n                    selectable.clear();\n                    items = items.first();\n                }\n                selectable.value(items);\n                return;\n            }\n\n            return selectable.value();\n        },\n\n        _destroyEditable: function() {\n            var that = this;\n            if (that.editable) {\n                that.editable.destroy();\n                delete that.editable;\n            }\n        },\n\n        _modelFromElement: function(element) {\n            var uid = element.attr(kendo.attr(\"uid\"));\n\n            return this.dataSource.getByUid(uid);\n        },\n\n        _closeEditable: function() {\n            var that = this,\n                editable = that.editable,\n                options = that.options,\n                role = (options.selectable || options.navigatable) ? \"option\" : \"listitem\",\n                data,\n                item,\n                index,\n                template = that.template;\n\n            if (editable) {\n                if (editable.element.index() % 2) {\n                    template = that.altTemplate;\n                }\n\n                that.angular(\"cleanup\", function() {\n                    return { elements: [ editable.element ]};\n                });\n\n                data = that._modelFromElement(editable.element);\n                that._destroyEditable();\n\n                index = editable.element.index();\n                editable.element.replaceWith(template(data));\n                item = that.items().eq(index);\n                item.attr(kendo.attr(\"uid\"), data.uid);\n                item.attr(\"role\", role);\n\n                if (that._hasBindingTarget()) {\n                    kendo.bind(item, data);\n                }\n\n                that.angular(\"compile\", function() {\n                    return { elements: [ item ], data: [ { dataItem: data } ]};\n                });\n            }\n            return true;\n        },\n\n        edit: function(item) {\n            var that = this,\n                data = that._modelFromElement(item),\n                container,\n                uid = data.uid,\n                index;\n\n            that.cancel();\n\n            item = that.items().filter(\"[\" + kendo.attr(\"uid\") + \"=\" + uid + \"]\");\n            index = item.index();\n            item.replaceWith(that.editTemplate(data));\n            container = that.items().eq(index).addClass(KEDITITEM).attr(kendo.attr(\"uid\"), data.uid);\n            that.editable = container.kendoEditable({\n                model: data,\n                clearContainer: false,\n                errorTemplate: false,\n                target: that\n            }).data(\"kendoEditable\");\n\n            that.trigger(EDIT, { model: data, item: container });\n        },\n\n        save: function() {\n            var that = this,\n                editable = that.editable,\n                model;\n\n            if (!editable) {\n                return;\n            }\n\n            var container = editable.element;\n            model = that._modelFromElement(container);\n\n            if (editable.end() && !that.trigger(SAVE, { model: model, item: container }))  {\n                that._closeEditable();\n                that.dataSource.sync();\n            }\n        },\n\n        remove: function(item) {\n            var that = this,\n                dataSource = that.dataSource,\n                data = that._modelFromElement(item);\n\n            if (that.editable) {\n                dataSource.cancelChanges(that._modelFromElement(that.editable.element));\n                that._closeEditable();\n            }\n\n            if (!that.trigger(REMOVE, { model: data, item: item })) {\n                item.hide();\n                dataSource.remove(data);\n                dataSource.sync();\n            }\n        },\n\n        add: function() {\n            var that = this,\n                dataItem,\n                dataSource = that.dataSource,\n                index = dataSource.indexOf((dataSource.view() || [])[0]);\n\n            if (index < 0) {\n                index = 0;\n            }\n\n            that.cancel();\n            dataItem = dataSource.insert(index, {});\n            that.edit(that.element.find(\"[data-uid='\" + dataItem.uid + \"']\"));\n        },\n\n        cancel: function() {\n            var that = this,\n                dataSource = that.dataSource;\n\n            if (that.editable) {\n                var container = that.editable.element;\n                var model = that._modelFromElement(container);\n\n                if (!that.trigger(CANCEL, { model: model, container: container})) {\n                    dataSource.cancelChanges(model);\n                    that._closeEditable();\n                }\n            }\n        },\n\n        _crudHandlers: function() {\n            var that = this,\n                mousedownNs = MOUSEDOWN + NS,\n                touchstartNs = TOUCHSTART + NS,\n                clickNs = CLICK + NS;\n\n            that.content.on(mousedownNs + \" \" + touchstartNs, \".k-edit-button\", function(e) {\n                e.preventDefault();\n                var item = $(this).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n                setTimeout(function() {\n                    that.edit(item);\n                });\n            });\n\n\n            that.content.on(mousedownNs + \" \" + touchstartNs, \".k-delete-button\", function(e) {\n                e.preventDefault();\n                var item = $(this).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n                 setTimeout(function() {\n                    that.remove(item);\n                 });\n            });\n\n            that.content.on(clickNs, \".k-update-button\", function(e) {\n                that.save();\n                e.preventDefault();\n            });\n\n            that.content.on(clickNs, \".k-cancel-button\", function(e) {\n                that.cancel();\n                e.preventDefault();\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that._unbindDataSource();\n\n            that._destroyEditable();\n\n            that.element.off(NS);\n            that.content.off(NS);\n\n            that._endlessFetchInProgress = that._endlessPageSize = that._skipRerenderItemsCount = that._focusNext = null;\n\n            if (that.pager) {\n                that.pager.destroy();\n            }\n\n            kendo.destroy(that.element);\n        }\n    });\n\n    kendo.ui.plugin(ListView);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","features","$","window","kendo","jQuery","undefined","CHANGE","KENDO_KEYDOWN","CANCEL","DATABOUND","DATABINDING","Widget","ui","keys","EMPTY_STRING","DOT","FOCUSSELECTOR","PROGRESS","ERROR","FOCUSED","SELECTED","KEDITITEM","PAGER_CLASS","ITEM_CLASS","TABINDEX","ARIA_SETSIZE","ARIA_POSINSET","ARIA_ROLE","ARIA_LABEL","EDIT","REMOVE","SAVE","MOUSEDOWN","CLICK","TOUCHSTART","NS","proxy","activeElement","_activeElement","progress","DataSource","data","ListView","DataBoundWidget","extend","init","element","options","that","this","Array","isArray","dataSource","fn","call","wrapper","_itemId","_element","_layout","_dataSource","_setContentHeight","_templates","_navigatable","_selectable","_pageable","_crudHandlers","_scrollable","autoBind","fetch","notify","events","selectable","navigatable","pageable","height","template","altTemplate","editTemplate","contentTemplate","contentElement","bordered","borders","layout","flex","direction","wrap","grid","scrollable","setOptions","destroy","_item","action","content","children","items","dataItem","attr","uid","closest","getByUid","setDataSource","_bindScrollable","_unbindDataSource","unbind","_refreshHandler","_progressHandler","_errorHandler","isPlainObject","pageSize","refresh","_progress","_error","create","bind","toggle","opacity","addClass","document","createElement","appendTo","css","elementClassNames","contentClassNames","add","removeClass","index","className","indexOf","push","contentPadding","cols","rows","rowHeight","gutter","join","is","innerHeight","e","view","item","html","idx","length","role","active","endlessAppend","_endlessFetchInProgress","_skipRerenderItemsCount","_hasBindingTarget","editable","filter","angular","elements","replaceWith","eq","trigger","_angularItems","_destroyEditable","append","not","removeAttr","total","_focusNext","current","next","pagerWrap","settings","find","position","format","prependTo","pager","Pager","pagerId","multi","Selectable","parseOptions","multiple","aria","change","on","target","keyCode","SPACEBAR","currentTarget","preventDefault","ctrlKey","clear","hasClass","value","overflow-y","-webkit-overflow-scrolling","originalPageSize","_endlessPageSize","off","scrollTop","clientHeight","scrollHeight","endless","candidate","_current","_scrollTo","container","UseJQueryoffset","SCROLL","scrollDirectionFunc","dimension","elementOffset","offset","toLowerCase","elementDimension","containerScrollAmount","containerDimension","clickCallback","focusElement","_tabindex","key","canHandle","isTextBox","editItem","ESC","ENTER","UP","LEFT","prev","DOWN","RIGHT","PAGEUP","page","PAGEDOWN","HOME","END","blur","save","focusAgain","one","edit","cancel","clearSelection","select","first","_modelFromElement","_closeEditable","kendoEditable","model","clearContainer","errorTemplate","end","sync","remove","cancelChanges","hide","insert","mousedownNs","touchstartNs","clickNs","setTimeout","plugin","amd","a1","a2","a3"],"mappings":"CAwBA,SAAaA,QACTA,OAAO,iBAAiB,CAAE,eAAgB,mBAAoB,qBAAsB,iBACrF,WAEH,IAAIC,EAAW,CACXC,GAAI,WACJC,KAAM,WACNC,SAAU,MACVC,YAAa,qEACbC,QAAS,CAAE,QACXC,SAAU,CAAE,CACRL,GAAI,mBACJC,KAAM,UACNE,YAAa,6BACbC,QAAS,CAAE,aACZ,CACCJ,GAAI,qBACJC,KAAM,YACNE,YAAa,wBACbC,QAAS,CAAE,eACZ,CACCJ,GAAI,kBACJC,KAAM,SACNE,YAAa,qBACbC,QAAS,CAAE,YAITE,EA+9BPC,OAAOC,MAAMC,OA/9BHC,OAAb,EACQF,EAAQD,OAAOC,MACfG,EAAS,SACTC,EACAC,EAAS,SACTC,EAAY,YACZC,EAAc,cACdC,EAASR,EAAMS,GAAGD,OAClBE,EAAOV,EAAMU,KACbC,EAAe,GACfC,EAAM,IACNC,EAAgB,2BAChBC,EAAW,WACXC,EAAQ,QACRC,EAAU,kBACVC,EAAW,mBACXC,EAAY,cACZC,EAAc,mBACdC,EAAa,kBACbC,EAAW,WACXC,EAAe,eACfC,EAAgB,gBAChBC,EAAY,OACZC,EAAa,aACbC,EAAO,OACPC,EAAS,SACTC,EAAO,OACPC,EAAY,YACZC,EAAQ,QACRC,EAAa,aACbC,EAAK,iBACLC,EAAQnC,EAAEmC,MACVC,EAAgBlC,EAAMmC,eACtBC,EAAWpC,EAAMS,GAAG2B,SACpBC,EAAarC,EAAMsC,KAAKD,WAExBE,EAAWvC,EAAMS,GAAG+B,gBAAgBC,OAAQ,CAC5CC,KAAM,SAASC,EAASC,GACpB,IAAIC,EAAOC,KAEXF,EAAUG,MAAMC,QAAQJ,GAAW,CAAEK,WAAYL,GAAYA,EAE7DpC,EAAO0C,GAAGR,KAAKS,KAAKN,EAAMF,EAASC,GAEnCA,EAAUC,EAAKD,QAEfC,EAAKO,QAAUT,EAAUE,EAAKF,QAE9B,GAAIA,EAAQ,GAAGnD,GACXqD,EAAKQ,QAAUV,EAAQ,GAAGnD,GAAK,aAGnCqD,EAAKS,WAELT,EAAKU,UAELV,EAAKW,cAELX,EAAKY,oBAELZ,EAAKa,aAELb,EAAKc,eAELd,EAAKe,cAELf,EAAKgB,YAELhB,EAAKiB,gBAELjB,EAAKkB,cAEL,GAAIlB,EAAKD,QAAQoB,SACbnB,EAAKI,WAAWgB,QAGpBjE,EAAMkE,OAAOrB,IAGjBsB,OAAQ,CACJhE,EACAE,EACAE,EACAD,EACAoB,EACAC,EACAC,EAnFY,gBAuFhBgB,QAAS,CACLnD,KAAM,WACNuE,SAAU,KACVI,WAAY,MACZC,YAAa,MACbC,SAAU,MACVC,OAAQ,KACRC,SAAU7D,EACV8D,YAAa9D,EACb+D,aAAc/D,EACdgE,gBAAiB,8BACjBC,eAAgB,MAChBC,SAAU,KACVC,QAAS,GACTC,OAAQ,GACRC,KAAM,CACFC,UAAW,MACXC,KAAM,UAEVC,KAAM,GACNC,WAAY,OAGhBC,WAAY,SAASzC,GACjBpC,EAAO0C,GAAGmC,WAAWlC,KAAKL,KAAMF,GAEhCE,KAAKS,UAELT,KAAKY,aAEL,GAAIZ,KAAKsB,WAAY,CACjBtB,KAAKsB,WAAWkB,UAChBxC,KAAKsB,WAAa,KAGtBtB,KAAKc,eAGTF,WAAY,WACR,IAAId,EAAUE,KAAKF,QAEnBE,KAAK0B,SAAWxE,EAAMwE,SAAS5B,EAAQ4B,UAAY7D,GACnDmC,KAAK2B,YAAczE,EAAMwE,SAAS5B,EAAQ6B,aAAe7B,EAAQ4B,UACjE1B,KAAK4B,aAAe1E,EAAMwE,SAAS5B,EAAQ8B,cAAgB/D,IAG/D4E,MAAO,SAASC,GACZ,OAAO1C,KAAK2C,QAAQC,WAAWF,MAGnCG,MAAO,WACH,OAAO7C,KAAK2C,QAAQC,SAAS,0BAGjCE,SAAU,SAASjD,GACf,IAAIkD,EAAO7F,EAAM6F,KAAK,OACtB,IAAIC,EAAMhG,EAAE6C,GAASoD,QAAQ,IAAMF,EAAO,KAAKA,KAAKA,GAEpD,OAAO/C,KAAKG,WAAW+C,SAASF,IAGpCG,cAAe,SAAShD,GACpBH,KAAKF,QAAQK,WAAaA,EAC1BH,KAAKU,cAEL,GAAIV,KAAKF,QAAQoB,SACbf,EAAWgB,QAGf,GAAInB,KAAKF,QAAQwC,aAAe,UAC5BtC,KAAKoD,mBAIbC,kBAAmB,WACf,IAAItD,EAAOC,KAEXD,EAAKI,WAAWmD,OAAOjG,EAAQ0C,EAAKwD,iBACnBD,OAAOtF,EAAU+B,EAAKyD,kBACtBF,OAAOrF,EAAO8B,EAAK0D,gBAGxC/C,YAAa,WACT,IAAIX,EAAOC,KACPwB,EAAWzB,EAAKD,QAAQ0B,SACxBrB,EAAaJ,EAAKD,QAAQK,WAE9B,GAAInD,EAAE0G,cAAclC,IAAaA,EAASmC,WAAavG,EACnD+C,EAAWwD,SAAWnC,EAASmC,SAGnC,GAAI5D,EAAKI,YAAcJ,EAAKwD,gBACxBxD,EAAKsD,wBACF,CACHtD,EAAKwD,gBAAkBpE,EAAMY,EAAK6D,QAAS7D,GAC3CA,EAAKyD,iBAAmBrE,EAAMY,EAAK8D,UAAW9D,GAC9CA,EAAK0D,cAAgBtE,EAAMY,EAAK+D,OAAQ/D,GAG5CA,EAAKI,WAAaZ,EAAWwE,OAAO5D,GACf6D,KAAK3G,EAAQ0C,EAAKwD,iBAClBS,KAAKhG,EAAU+B,EAAKyD,kBACpBQ,KAAK/F,EAAO8B,EAAK0D,gBAG1CI,UAAW,SAASI,GAChB,IAAIpE,EAAUG,KAAK2C,QACnBrD,EAASO,EAASoE,EAAQ,CAAEC,QAAS,QAGzCJ,OAAQ,WACJxE,EAASU,KAAK2C,QAAS,QAG3BnC,SAAU,WACN,IAAIV,EAAUE,KAAKF,QACnB,IAAI2B,EAAS3B,EAAQ2B,OAErBzB,KAAKH,QAAQsE,SAAS,uBAEtB,GAAIrE,EAAQyB,aAAezB,EAAQwB,WAC/BtB,KAAKH,QAAQkD,KAAKrE,EAAW,gBAE7BsB,KAAKH,QAAQkD,KAAKrE,EAAW,QAGjC,GAAIoB,EAAQgC,eACR9B,KAAK2C,QAAU3F,EAAEoH,SAASC,cAAcvE,EAAQgC,iBAAiBwC,SAAStE,KAAKH,cAE/EG,KAAK2C,QAAU3C,KAAKH,QAGxBG,KAAK2C,QAAQI,KAAKxE,GAAW,GAE7B,GAAIkD,EACAzB,KAAKH,QAAQ0E,IAAI,SAAU9C,IAInChB,QAAS,WACL,IAAIV,EAAOC,KACX,IAAIF,EAAUC,EAAKD,QACnB,IAAIoC,EAAOpC,EAAQoC,KACnB,IAAIG,EAAOvC,EAAQuC,KACnB,IAAIxC,EAAUE,EAAKF,QACnB,IAAI2E,EAAoB,CAAC,WAAY,cACrC,IAAI7B,EAAU5C,EAAK4C,QACnB,IAAI8B,EAAoB,CAAC,sBAEzB5E,EAAQ6E,IAAI/B,GAASgC,YAAY,SAAUC,EAAOC,GAC9C,GAAIA,EAAUC,QAAQ,OAAS,EAC3B,OAAO,OAKf,GAAIhF,EAAQiC,WAAa,KACrByC,EAAkBO,KAAK,uBAG3B,UAAWjF,EAAQkC,UAAY,UAAYlC,EAAQkC,UAAYnE,EAC3D2G,EAAkBO,KAAK,sBAAwBjF,EAAQkC,SAK3D,UAAWlC,EAAQkF,iBAAmB,UAAYlF,EAAQkF,iBAAmBnH,EACzE4G,EAAkBM,KAAK,8BAAgCjF,EAAQkF,gBAGnE,UAAWlF,EAAQmC,SAAW,UAAYnC,EAAQmC,SAAWpE,EACzD4G,EAAkBM,KAAK,OAASjF,EAAQmC,QAG5C,GAAInC,EAAQmC,SAAW,eAAiBC,IAAS,SAAU,CACvD,UAAWA,EAAKC,YAAc,UAAYD,EAAKC,YAAc,GACzDsC,EAAkBM,KAAK,UAAY7C,EAAKC,WAG5C,UAAWD,EAAKE,OAAS,UAAYF,EAAKE,OAAS,GAC/CqC,EAAkBM,KAAK,UAAY7C,EAAKE,MAIhD,GAAItC,EAAQmC,SAAW,eAAiBI,IAAS,SAAU,CACvD,UAAWA,EAAK4C,OAAS,SACrBtC,EAAQ4B,IAAI,wBAAyB,UAAYlC,EAAK4C,KAAO,eAC1D,UAAW5C,EAAK4C,OAAS,SAC5BtC,EAAQ4B,IAAI,wBAAyBlC,EAAK4C,MAG9C,UAAW5C,EAAK6C,OAAS,SACrBvC,EAAQ4B,IAAI,qBAAsB,UAAYlC,EAAK6C,KAAO,MAAQ7C,EAAK8C,YAAc/H,EAAYiF,EAAK8C,UAAY,OAAS,UACxH,UAAW9C,EAAK6C,OAAS,SAC5BvC,EAAQ4B,IAAI,qBAAsBlC,EAAK6C,MAG3C,UAAW7C,EAAK+C,SAAW,SACvBzC,EAAQ4B,IAAI,WAAYlC,EAAK+C,aAC1B,UAAW/C,EAAK+C,SAAW,SAC9BzC,EAAQ4B,IAAI,WAAYlC,EAAK+C,QAIrCrF,EAAKF,QAAQsE,SAASK,EAAkBa,KAAK,MAC7CtF,EAAK4C,QAAQwB,SAASM,EAAkBY,KAAK,OAIjD1E,kBAAmB,WACf,IAAIZ,EAAOC,KACPF,EAAUC,EAAKD,QACf2B,EAEJ,GAAI3B,EAAQwC,YAAcvC,EAAKO,QAAQgF,GAAG,YAAa,CAEnD7D,EAAS1B,EAAKO,QAAQiF,cACtBxF,EAAK4C,QAAQlB,OAAOA,KAI5BmC,QAAS,SAAS4B,GACd,IAAIzF,EAAOC,KACPyF,EAAO1F,EAAKI,WAAWsF,OACvBjG,EACAqD,EACA6C,EACAC,EAAO,GACPC,EACAC,EACAnE,EAAW3B,EAAK2B,SAChBC,EAAc5B,EAAK4B,YACnB7B,EAAUC,EAAKD,QACfgG,EAAQhG,EAAQwB,YAAcxB,EAAQyB,YAAe,SAAW,WAChEwE,EAAS3G,IACT4G,EAAiBjG,EAAKkG,wBACtBrB,EAAQoB,EAAgBjG,EAAKmG,wBAA0B,EACvD5D,EAAavC,EAAKD,QAAQwC,WAE9BkD,EAAIA,GAAK,GAET,GAAIA,EAAE9C,SAAW,aAAc,CAC3B,IAAK3C,EAAKoG,sBAAwBpG,EAAKqG,SAAU,CAC7C5G,EAAOgG,EAAE3C,MAAM,GACf6C,EAAO3F,EAAK8C,QAAQwD,OAAO,IAAMnJ,EAAM6F,KAAK,OAAS,IAAMvD,EAAKwD,IAAM,KAEtE,GAAI0C,EAAKG,OAAS,EAAG,CACjBD,EAAMF,EAAKd,QAEX7E,EAAKuG,QAAQ,UAAW,WACpB,MAAO,CAAEC,SAAU,CAAEb,MAGzBA,EAAKc,YAAY9E,EAASlC,IAC1BkG,EAAO3F,EAAK8C,QAAQ4D,GAAGb,GACvBF,EAAK3C,KAAK7F,EAAM6F,KAAK,OAAQvD,EAAKwD,KAElCjD,EAAKuG,QAAQ,UAAW,WACpB,MAAO,CAAEC,SAAU,CAAEb,GAAQlG,KAAM,CAAE,CAAEsD,SAAUtD,OAGrDO,EAAK2G,QAAQ,aAAc,CACvBhB,KAAMA,EACNlG,KAAMA,KAKlB,OAGJ,GAAIO,EAAK2G,QAAQjJ,EAAa,CAAEiF,OAAQ8C,EAAE9C,QAAU,SAAUG,MAAO2C,EAAE3C,MAAO+B,MAAOY,EAAEZ,QACnF,OAGJ7E,EAAK4G,cAAc,WAEnB,IAAKX,EACDjG,EAAK6G,mBAGT,IAAKhB,EAAMhB,EAAOiB,EAASJ,EAAKI,OAAQD,EAAMC,EAAQD,IAClD,GAAIA,EAAM,EACND,GAAQhE,EAAY8D,EAAKG,SAEzBD,GAAQjE,EAAS+D,EAAKG,IAI9B,GAAII,EACAjG,EAAK4C,QAAQkE,OAAOlB,QAEpB5F,EAAK4C,QAAQgD,KAAKA,GAGtB9C,EAAQ9C,EAAK8C,QAAQiE,IAAI,mBAEzB,IAAKrB,EAAKI,OAAQ,CACd9F,EAAKF,QAAQkH,WAAWrI,GACxBqB,EAAKF,QAAQkH,WAAWpI,GAG5B,IAAKiH,EAAMhB,EAAOiB,EAASJ,EAAKI,OAAQD,EAAMC,EAAQD,IAAO,CACzDF,EAAO7C,EAAM4D,GAAGb,GAEhBF,EAAKvB,SAAS7F,GAEdoH,EAAK3C,KAAK7F,EAAM6F,KAAK,OAAQ0C,EAAKG,GAAK5C,KAClCD,KAAK,OAAQ+C,GAElB,GAAI/F,EAAKD,QAAQwB,WACboE,EAAK3C,KAAK,gBAAiB,SAG/B,GAAIhD,EAAKD,QAAQ0B,SAAU,CACvBkE,EAAK3C,KAAKvE,EAAcuB,EAAKI,WAAW6G,SACxCtB,EAAK3C,KAAKtE,EAAesB,EAAKI,WAAW2E,QAAQ/E,EAAK+C,SAAS4C,IAAS,IAIhF,GAAI3F,EAAK4C,QAAQ,KAAOoD,GAAUhG,EAAKD,QAAQyB,YAC3C,GAAIxB,EAAKkH,WACLlH,EAAKmH,QAAQnH,EAAKmH,UAAUC,aAE5B,IAAK7E,EACDvC,EAAKmH,QAAQrE,EAAM4D,GAAG,IAKlC1G,EAAKY,oBACLZ,EAAK4G,cAAc,WAEnB5G,EAAK8D,UAAU,OACf9D,EAAKkG,wBAA0B,KAE/BlG,EAAK2G,QAAQlJ,EAAW,CAAEkF,OAAQ8C,EAAE9C,QAAU,SAAUG,MAAO2C,EAAE3C,MAAO+B,MAAOY,EAAEZ,SAGrF7D,UAAW,WACP,IAAIhB,EAAOC,KACPwB,EAAWzB,EAAKD,QAAQ0B,SACxBD,EAAcxB,EAAKD,QAAQyB,YAC3B6F,EACAC,EAEJ,IAAK7F,EACD,OAGJ4F,EAAYrH,EAAKO,QAAQgH,KAAKxJ,EAAMO,GAEpC,IAAK+I,EAAUvB,OACXuB,EAAYpK,EAAE,WAAWmH,SAAS9F,GAGtC,GAAImD,EAAS+F,WAAa,MACtBH,EACKjD,SAASjH,EAAMsK,OAAO,UAAWnJ,EAAamD,EAAS+F,WACvDE,UAAU1H,EAAKO,cAEpB8G,EAAU9C,SAASvE,EAAKO,SAG5B,GAAIP,EAAK2H,MACL3H,EAAK2H,MAAMlF,UAGf,UAAWhB,IAAa,UAAYA,aAAoBtE,EAAMS,GAAGgK,MAC7D5H,EAAK2H,MAAQlG,MACV,CACH4F,EAAY5F,EAASoG,QAAU5K,EAAE,IAAMwE,EAASoG,SAAWR,EAE3DC,EAAWrK,EAAE2C,OAAO,GAAI6B,EAAU,CAC9BrB,WAAYJ,EAAKI,WACjBoB,YAAaA,EACbqG,QAAS,OAGb7H,EAAK2H,MAAQ,IAAIxK,EAAMS,GAAGgK,MAAMP,EAAWC,KAInDvG,YAAa,WACT,IAAIf,EAAOC,KACP6H,EACAX,EACA5F,EAAavB,EAAKD,QAAQwB,WAC1BC,EAAcxB,EAAKD,QAAQyB,YAE/B,GAAID,EAAY,CACZuG,EAAQ3K,EAAMS,GAAGmK,WAAWC,aAAazG,GAAY0G,SAErDjI,EAAKuB,WAAa,IAAIpE,EAAMS,GAAGmK,WAAW/H,EAAKF,QAAS,CACpDoI,KAAM,KACND,SAAUH,EACVxB,OAAQtG,EAAKD,QAAQgC,eAAiB,uBAAyB/D,EAAgBA,EAC/EmK,OAAQ,WACJnI,EAAK2G,QAAQrJ,MAIrB,GAAGwK,EACC9H,EAAKF,QAAQkD,KAAK,uBAAwB,MAG9C,GAAIxB,EACAxB,EAAKF,QAAQsI,GAAG,UAAYjJ,EAAI,SAASsG,GAErC,IAAKxI,EAAEwI,EAAE4C,QAAQ9C,GAAGvF,EAAKF,SAAY,OAErC,GAAI2F,EAAE6C,UAAYzK,EAAK0K,SAAU,CAC7BpB,EAAUnH,EAAKmH,UAEf,GAAI1B,EAAE4C,QAAU5C,EAAE+C,cACd/C,EAAEgD,iBAGN,GAAIX,GACA,IAAKrC,EAAEiD,QACH1I,EAAKuB,WAAWoH,aAEhB,GAAIxB,GAAWA,EAAQyB,SAASxK,GAAW,CACvC+I,EAAQvC,YAAYxG,GACpB4B,EAAK2G,QAAQrJ,GACb,aAIR0C,EAAKuB,WAAWoH,QAGpB3I,EAAKuB,WAAWsH,MAAM1B,QAO1CjG,YAAa,WACT,IAAIlB,EAAOC,KACX,IAAIsC,EAAavC,EAAKD,QAAQwC,WAE9B,GAAIA,EAAY,CAEZvC,EAAK4C,QAAQ4B,IAAI,CACbsE,aAAc,SACdtB,SAAY,WACZuB,6BAA8B,UAGlC,GAAIxG,IAAe,UACfvC,EAAKqD,oBAKjBA,gBAAiB,WACb,IAAIrD,EAAOC,KACX,IAAI+I,EAAmBhJ,EAAKiJ,iBAAmBjJ,EAAKI,WAAWL,QAAQ6D,SAEvE5D,EAAK4C,QACAsG,IAAI,SAAW/J,GACfiJ,GAAG,SAAWjJ,EAAI,WACf,GAAIc,KAAKkJ,UAAYlJ,KAAKmJ,aAAenJ,KAAKoJ,eAAiB,KAC9DrJ,EAAKkG,yBACNlG,EAAKiJ,iBAAmBjJ,EAAKI,WAAW6G,QAAS,CAC7CjH,EAAKmG,wBAA2BnG,EAAKiJ,iBACrCjJ,EAAKiJ,iBAAmBjJ,EAAKmG,wBAA2B6C,EACxDhJ,EAAKI,WAAWL,QAAQuJ,QAAU,KAClCtJ,EAAKkG,wBAA0B,KAC/BlG,EAAKI,WAAWwD,SAAS5D,EAAKiJ,sBAK9C9B,QAAS,SAASoC,GACd,IAAIvJ,EAAOC,KACPH,EAAUE,EAAKF,QACfqH,EAAUnH,EAAKwJ,SACf7M,EAAKqD,EAAKQ,QAEd,GAAI+I,IAAclM,EACd,OAAO8J,EAGX,GAAIA,GAAWA,EAAQ,GAAI,CACvB,GAAIA,EAAQ,GAAGxK,KAAOA,EAClBwK,EAAQH,WAAW,MAGvBG,EAAQvC,YAAYzG,GACpB2B,EAAQkH,WAAW,yBAGvB,GAAIuC,GAAaA,EAAU,GAAI,CAC3B5M,EAAK4M,EAAU,GAAG5M,IAAMA,EAExBqD,EAAKyJ,UAAUF,EAAU,IAEzBzJ,EAAQkD,KAAK,wBAAyBrG,GACtC4M,EAAUnF,SAASjG,GAAS6E,KAAK,KAAMrG,GAG3CqD,EAAKwJ,SAAWD,GAGpBE,UAAW,SAAS3J,GAChB,IAAIE,EAAOC,KACP2C,EAAU5C,EAAK4C,QACf8G,EACAC,EAAkB,MAClBC,EAAS,SAEb,GAAIhH,EAAQ4B,IAAI,cAAgB,QAAU5B,EAAQ4B,IAAI,cAAgBoF,GAAUhH,EAAQ4B,IAAI,gBAAkBoF,EAC1GF,EAAY9G,EAAQ,OACjB,CACH8G,EAAYxM,OACZyM,EAAkB,KAGtB,IAAIE,EAAsB,SAASzH,EAAW0H,GAE1C,IAAIC,EAAgBJ,EAAkB1M,EAAE6C,GAASkK,SAAS5H,EAAU6H,eAAiBnK,EAAQ,SAAWsC,GACpG8H,EAAmBpK,EAAQ,SAAWgK,GACtCK,EAAwBlN,EAAEyM,GAAWE,EAASxH,KAC9CgI,EAAqBnN,EAAEyM,GAAWI,EAAUG,iBAEhD,GAAIF,EAAgBG,EAAmBC,EAAwBC,EAC3DnN,EAAEyM,GAAWE,EAASxH,GAAW2H,EAAgBG,EAAmBE,QACjE,GAAIL,EAAgBI,EACvBlN,EAAEyM,GAAWE,EAASxH,GAAW2H,IAIzCF,EAAoB,MAAO,UAC3BA,EAAoB,OAAQ,UAGhC/I,aAAc,WACV,IAAId,EAAOC,KACPuB,EAAcxB,EAAKD,QAAQyB,YAC3B1B,EAAUE,EAAKF,QACf8C,EAAU5C,EAAK4C,QACfyH,EAAgB,SAAS5E,GACrBzF,EAAKmH,QAAQlK,EAAEwI,EAAE+C,gBACjB,IAAKvL,EAAEwI,EAAE4C,QAAQ9C,GAAG,6CAChBpI,EAAMmN,aAAaxK,IAI/B,GAAI0B,EAAa,CACbxB,EAAKuK,YAELzK,EACKsI,GAAG,QAAUjJ,EAAI,WACd,IAAIgI,EAAUnH,EAAKwJ,SAEnB,IAAKrC,IAAYA,EAAQ5B,GAAG,YACxB4B,EAAUnH,EAAK0C,MAAM,SAGzB1C,EAAKmH,QAAQA,KAEhBiB,GAAG,WAAajJ,EAAI,WACjB,GAAIa,EAAKwJ,SACLxJ,EAAKwJ,SAAS5E,YAAYzG,KAGjCiK,GAAG,UAAYjJ,EAAIa,EAAM,SAASyF,GAC/B,IAAI+E,EAAM/E,EAAE6C,QACRnB,EAAUnH,EAAKmH,UACfkB,EAASpL,EAAEwI,EAAE4C,QACboC,GAAapC,EAAO9C,GAAG,4CACvBmF,EAAYrC,EAAO9C,GAAG,oBACtBkD,EAAiBtL,EAAMsL,eACvBkC,EAAW/H,EAAQ2E,KAAK,IAAMlJ,GAC9B2H,EAAS3G,IAAiBwG,EAC1BtD,EAAavC,EAAKD,QAAQwC,WAE9B,IAAK8F,EAAO9C,GAAGvF,EAAKF,WAAc2K,IAAcC,GAAaF,IAAQ3M,EAAK+M,KAASF,GAAaF,IAAQ3M,EAAK+M,KAAOJ,IAAQ3M,EAAKgN,MAC7H,OAGJ,GAAIL,IAAQ3M,EAAKiN,IAAMN,IAAQ3M,EAAKkN,KAAM,CACtC,GAAI5D,GAAWA,EAAQ,GACnBA,EAAUA,EAAQ6D,OAGtB,GAAI7D,GAAWA,EAAQ,GACnBnH,EAAKmH,QAAQA,QAEZ,IAAK5E,EACNvC,EAAKmH,QAAQnH,EAAK0C,MAAM,SAE5B+F,EAAehD,GAGnB,GAAI+E,IAAQ3M,EAAKoN,MAAQT,IAAQ3M,EAAKqN,MAAO,CACzC,GAAI3I,EACA,GAAIvC,EAAKD,QAAQwC,aAAe,YAAc4E,EAAQC,OAAOtB,OAAQ,CACjE9F,EAAK4C,QAAQ,GAAGuG,UAAYnJ,EAAK4C,QAAQ,GAAGyG,aAC5CrJ,EAAKkH,WAAa,SACf,CACHC,EAAUA,EAAQC,OAElB,GAAID,GAAWA,EAAQ,GACnBnH,EAAKmH,QAAQA,OAIpB,CACDA,EAAUA,EAAQC,OAClBpH,EAAKmH,SAASA,IAAYA,EAAQ,GAAKnH,EAAK0C,MAAM,SAAWyE,GAEjEsB,EAAehD,GAGnB,GAAI+E,IAAQ3M,EAAKsN,OAAQ,CACrBnL,EAAKmH,QAAQ,MACbnH,EAAKI,WAAWgL,KAAKpL,EAAKI,WAAWgL,OAAS,GAC9C3C,EAAehD,GAGnB,GAAI+E,IAAQ3M,EAAKwN,SAAU,CACvBrL,EAAKmH,QAAQ,MACbnH,EAAKI,WAAWgL,KAAKpL,EAAKI,WAAWgL,OAAS,GAC9C3C,EAAehD,GAGnB,GAAI+E,IAAQ3M,EAAKyN,KAAM,CACnBtL,EAAKmH,QAAQnH,EAAK0C,MAAM,UACxB+F,EAAehD,GAGnB,GAAI+E,IAAQ3M,EAAK0N,IAAK,CAClBvL,EAAKmH,QAAQnH,EAAK0C,MAAM,SACxB+F,EAAehD,GAGnB,GAAI+E,IAAQ3M,EAAKgN,MACb,GAAIF,EAAS7E,SAAW,IAAM2E,GAAaC,GAAY,CACnD7E,EAAM7F,EAAK8C,QAAQ+B,MAAM8F,GAEzB,GAAI3E,EACAA,EAAOwF,OAGXxL,EAAKyL,OAEL,IAAIC,EAAa,WACb1L,EAAKF,QAAQ6G,QAAQ,SACrB3G,EAAKmH,QAAQnH,EAAK8C,QAAQ4D,GAAGb,KAGjC7F,EAAK2L,IAAI,YAAaD,QACnB,GAAI1L,EAAKD,QAAQ8B,eAAiB,GACrC7B,EAAK4L,KAAKzE,GAIlB,GAAIqD,IAAQ3M,EAAK+M,IAAK,CAClBD,EAAW/H,EAAQ2E,KAAK,IAAMlJ,GAE9B,GAAIsM,EAAS7E,SAAW,EACpB,OAGJD,EAAM7F,EAAK8C,QAAQ+B,MAAM8F,GACzB3K,EAAK6L,SACL7L,EAAKF,QAAQ6G,QAAQ,SACrB3G,EAAKmH,QAAQnH,EAAK8C,QAAQ4D,GAAGb,OAIzC/F,EAAQsI,GAAGpJ,EAAYG,EAAK,IAAMD,EAAaC,EAAIa,EAAKD,QAAQgC,eAAiB,uBAAyB/D,EAAgBA,EAAeoB,EAAMiL,EAAerK,MAItK8L,eAAgB,WACZ,IAAI9L,EAAOC,KACXD,EAAKuB,WAAWoH,QAChB3I,EAAK2G,QAAQrJ,IAGjByO,OAAQ,SAASjJ,GACb,IAAI9C,EAAOC,KACPsB,EAAavB,EAAKuB,WAEtBuB,EAAQ7F,EAAE6F,GAEV,GAAIA,EAAMgD,OAAQ,CACd,IAAKvE,EAAWxB,QAAQkI,SAAU,CAC9B1G,EAAWoH,QACX7F,EAAQA,EAAMkJ,QAElBzK,EAAWsH,MAAM/F,GACjB,OAGJ,OAAOvB,EAAWsH,SAGtBhC,iBAAkB,WACd,IAAI7G,EAAOC,KACX,GAAID,EAAKqG,SAAU,CACfrG,EAAKqG,SAAS5D,iBACPzC,EAAKqG,WAIpB4F,kBAAmB,SAASnM,GACxB,IAAImD,EAAMnD,EAAQkD,KAAK7F,EAAM6F,KAAK,QAElC,OAAO/C,KAAKG,WAAW+C,SAASF,IAGpCiJ,eAAgB,WACZ,IAAIlM,EAAOC,KACPoG,EAAWrG,EAAKqG,SAChBtG,EAAUC,EAAKD,QACfgG,EAAQhG,EAAQwB,YAAcxB,EAAQyB,YAAe,SAAW,WAChE/B,EACAkG,EACAd,EACAlD,EAAW3B,EAAK2B,SAEpB,GAAI0E,EAAU,CACV,GAAIA,EAASvG,QAAQ+E,QAAU,EAC3BlD,EAAW3B,EAAK4B,YAGpB5B,EAAKuG,QAAQ,UAAW,WACpB,MAAO,CAAEC,SAAU,CAAEH,EAASvG,YAGlCL,EAAOO,EAAKiM,kBAAkB5F,EAASvG,SACvCE,EAAK6G,mBAELhC,EAAQwB,EAASvG,QAAQ+E,QACzBwB,EAASvG,QAAQ2G,YAAY9E,EAASlC,IACtCkG,EAAO3F,EAAK8C,QAAQ4D,GAAG7B,GACvBc,EAAK3C,KAAK7F,EAAM6F,KAAK,OAAQvD,EAAKwD,KAClC0C,EAAK3C,KAAK,OAAQ+C,GAElB,GAAI/F,EAAKoG,oBACLjJ,EAAM8G,KAAK0B,EAAMlG,GAGrBO,EAAKuG,QAAQ,UAAW,WACpB,MAAO,CAAEC,SAAU,CAAEb,GAAQlG,KAAM,CAAE,CAAEsD,SAAUtD,OAGzD,OAAO,MAGXmM,KAAM,SAASjG,GACX,IAAI3F,EAAOC,KACPR,EAAOO,EAAKiM,kBAAkBtG,GAC9B+D,EACAzG,EAAMxD,EAAKwD,IACX4B,EAEJ7E,EAAK6L,SAELlG,EAAO3F,EAAK8C,QAAQwD,OAAO,IAAMnJ,EAAM6F,KAAK,OAAS,IAAMC,EAAM,KACjE4B,EAAQc,EAAKd,QACbc,EAAKc,YAAYzG,EAAK6B,aAAapC,IACnCiK,EAAY1J,EAAK8C,QAAQ4D,GAAG7B,GAAOT,SAAS/F,GAAW2E,KAAK7F,EAAM6F,KAAK,OAAQvD,EAAKwD,KACpFjD,EAAKqG,SAAWqD,EAAUyC,cAAc,CACpCC,MAAO3M,EACP4M,eAAgB,MAChBC,cAAe,MACfjE,OAAQrI,IACTP,KAAK,iBAERO,EAAK2G,QAAQ9H,EAAM,CAAEuN,MAAO3M,EAAMkG,KAAM+D,KAG5C+B,KAAM,WACF,IAAIzL,EAAOC,KACPoG,EAAWrG,EAAKqG,SAChB+F,EAEJ,IAAK/F,EACD,OAGJ,IAAIqD,EAAYrD,EAASvG,QACzBsM,EAAQpM,EAAKiM,kBAAkBvC,GAE/B,GAAIrD,EAASkG,QAAUvM,EAAK2G,QAAQ5H,EAAM,CAAEqN,MAAOA,EAAOzG,KAAM+D,IAAe,CAC3E1J,EAAKkM,iBACLlM,EAAKI,WAAWoM,SAIxBC,OAAQ,SAAS9G,GACb,IAAI3F,EAAOC,KACPG,EAAaJ,EAAKI,WAClBX,EAAOO,EAAKiM,kBAAkBtG,GAElC,GAAI3F,EAAKqG,SAAU,CACfjG,EAAWsM,cAAc1M,EAAKiM,kBAAkBjM,EAAKqG,SAASvG,UAC9DE,EAAKkM,iBAGT,IAAKlM,EAAK2G,QAAQ7H,EAAQ,CAAEsN,MAAO3M,EAAMkG,KAAMA,IAAS,CACpDA,EAAKgH,OACLvM,EAAWqM,OAAOhN,GAClBW,EAAWoM,SAInB7H,IAAK,WACD,IAAI3E,EAAOC,KACP8C,EACA3C,EAAaJ,EAAKI,WAClByE,EAAQzE,EAAW2E,SAAS3E,EAAWsF,QAAU,IAAI,IAEzD,GAAIb,EAAQ,EACRA,EAAQ,EAGZ7E,EAAK6L,SACL9I,EAAW3C,EAAWwM,OAAO/H,EAAO,IACpC7E,EAAK4L,KAAK5L,EAAKF,QAAQyH,KAAK,cAAgBxE,EAASE,IAAM,QAG/D4I,OAAQ,WACJ,IAAI7L,EAAOC,KACPG,EAAaJ,EAAKI,WAEtB,GAAIJ,EAAKqG,SAAU,CACf,IAAIqD,EAAY1J,EAAKqG,SAASvG,QAC9B,IAAIsM,EAAQpM,EAAKiM,kBAAkBvC,GAEnC,IAAK1J,EAAK2G,QAAQnJ,EAAQ,CAAE4O,MAAOA,EAAO1C,UAAWA,IAAa,CAC9DtJ,EAAWsM,cAAcN,GACzBpM,EAAKkM,oBAKjBjL,cAAe,WACX,IAAIjB,EAAOC,KACP4M,EAAc7N,EAAYG,EAC1B2N,EAAe5N,EAAaC,EAC5B4N,EAAU9N,EAAQE,EAEtBa,EAAK4C,QAAQwF,GAAGyE,EAAc,IAAMC,EAAc,iBAAkB,SAASrH,GACzEA,EAAEgD,iBACF,IAAI9C,EAAO1I,EAAEgD,MAAMiD,QAAQ,IAAM/F,EAAM6F,KAAK,OAAS,KACrDgK,WAAW,WACPhN,EAAK4L,KAAKjG,OAKlB3F,EAAK4C,QAAQwF,GAAGyE,EAAc,IAAMC,EAAc,mBAAoB,SAASrH,GAC3EA,EAAEgD,iBACF,IAAI9C,EAAO1I,EAAEgD,MAAMiD,QAAQ,IAAM/F,EAAM6F,KAAK,OAAS,KACpDgK,WAAW,WACRhN,EAAKyM,OAAO9G,OAIpB3F,EAAK4C,QAAQwF,GAAG2E,EAAS,mBAAoB,SAAStH,GAClDzF,EAAKyL,OACLhG,EAAEgD,mBAGNzI,EAAK4C,QAAQwF,GAAG2E,EAAS,mBAAoB,SAAStH,GAClDzF,EAAK6L,SACLpG,EAAEgD,oBAIVhG,QAAS,WACL,IAAIzC,EAAOC,KAEXtC,EAAO0C,GAAGoC,QAAQnC,KAAKN,GAEvBA,EAAKsD,oBAELtD,EAAK6G,mBAEL7G,EAAKF,QAAQoJ,IAAI/J,GACjBa,EAAK4C,QAAQsG,IAAI/J,GAEjBa,EAAKkG,wBAA0BlG,EAAKiJ,iBAAmBjJ,EAAKmG,wBAA0BnG,EAAKkH,WAAa,KAExG,GAAIlH,EAAK2H,MACL3H,EAAK2H,MAAMlF,UAGftF,EAAMsF,QAAQzC,EAAKF,YAO/B,OAHI3C,EAAMS,GAAGqP,OAAOvN,GAGbxC,OAAOC,QA7/Bd,CA+/BoB,mBAAVV,QAAwBA,OAAOyQ,IAAMzQ,OAAS,SAAS0Q,EAAIC,EAAIC,IAAMA,GAAMD"}