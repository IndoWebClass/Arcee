{"version":3,"file":"kendo.mediaplayer.min.js","sources":["kendo.mediaplayer.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.mediaplayer',[\"./kendo.slider\", \"./kendo.toolbar\", \"./kendo.dropdownlist\", \"./kendo.tooltip\"], f);\n})(function () {\n\n    var __meta__ = { // jshint ignore:line\n        id: \"mediaplayer\",\n        name: \"MediaPlayer\",\n        category: \"web\",\n        description: \"\",\n        depends: [\"slider\", \"toolbar\", \"dropdownlist\", \"tooltip\"]\n    };\n\n    (function ($, undefined) {\n        var kendo = window.kendo,\n            END = \"end\",\n            PAUSE = \"pause\",\n            PLAY = \"play\",\n            READY = \"ready\",\n            TIMECHANGE = \"timeChange\",\n            VOLUMECHANGE = \"volumeChange\",\n            FULLSCREEN_ENTER = \"k-i-full-screen\",\n            FULLSCREEN_EXIT = \"k-i-full-screen-exit\",\n            MUTE = \"k-i-volume-off\",\n            LOW_VOLUME = \"k-i-volume-down\",\n            HIGH_VOLUME = \"k-i-volume-up\",\n            VIDEO_QUALITY = \"k-mediaplayer-quality\",\n            STATE_PLAY = \"k-i-play\",\n            STATE_PAUSE = \"k-i-pause\",\n            TITLEBAR = \"k-mediaplayer-titlebar\",\n            TITLE = \"k-title\",\n            TOOLBARWRAP = \"k-mediaplayer-toolbar-wrap\",\n            TOOLBAR = \"k-mediaplayer-toolbar\",\n            SLIDER = \"k-mediaplayer-seekbar\",\n            VOLUME_SLIDER = \"k-mediaplayer-volume\",\n            MEDIA = \"k-mediaplayer-media\",\n            OVERLAY = \"k-mediaplayer-overlay\",\n            YTPLAYER = \"k-mediaplayer-yt\",\n            DOT = \".\",\n            ui = kendo.ui,\n            ns = \".kendoMediaPlayer\",\n            baseTime = new Date(1970, 0, 1),\n            timeZoneSec = baseTime.getTimezoneOffset() * 60,\n            Widget = kendo.ui.Widget,\n            isArray = Array.isArray,\n            timeFormats = {\n                shortTime: \"mm:ss\",\n                longTime: \"HH:mm:ss\"\n            },\n            template = kendo.template,\n            proxy = $.proxy,\n            keys = kendo.keys,\n            templates = {\n                htmlPlayer: \"<video class='\" + MEDIA + \"'> </video>\",\n                titleBar: template(\"<div class='\" + TITLEBAR + \"'><span class='\" + TITLE + \"'>Video Title</span></div>\"),\n                toolBar: \"<div class='\" + TOOLBARWRAP + \"'><div class='\" + TOOLBAR + \"'></div></div>\",\n                youtubePlayer: \"<div class='\" + YTPLAYER + \"'> </div>\",\n                toolBarTime: \"<span class='k-mediaplayer-currenttime'>00:00:00</span> / <span class='k-mediaplayer-duration'>00:00:00</span>\",\n                slider: \"<input class='\" + SLIDER + \"' value='0' title='seekbar' />\",\n                volumeSlider: \"<input class='\" + VOLUME_SLIDER + \"' title='volume'/>\",\n                qualityDropDown: \"<input class='\" + VIDEO_QUALITY + \"' title='video quality' />\",\n                toolTip: \"#= kendo.toString(new Date(value), 'HH:mm:ss') #\"\n            };\n\n        var MediaPlayer = Widget.extend({\n            init: function (element, options) {\n                this.wrapper = $(element);\n\n                Widget.fn.init.call(this, element, options);\n\n                this.wrapper.addClass(\"k-mediaplayer k-widget\");\n\n                options = this.options;\n\n                this._currentIndex = 0;\n\n                this._createTitlebar();\n\n                this._createToolbar();\n\n                this._createDropDown();\n\n                this._createSlider();\n\n                this._createVolumeSlider();\n\n                this._timers = {};\n\n                this._aria();\n\n                this._navigatable();\n\n                if (options.fullScreen) {\n                    this.fullScreen(true);\n                }\n\n                if (options.media) {\n                    this.media(this.options.media);\n                }\n\n                kendo.notify(this);\n            },\n\n            events: [\n                END,\n                PAUSE,\n                PLAY,\n                READY,\n                TIMECHANGE,\n                VOLUMECHANGE\n            ],\n\n            options: {\n                name: \"MediaPlayer\",\n                autoPlay: false,\n                autoRepeat: false,\n                volume: 100,\n                fullScreen: false,\n                mute: false,\n                navigatable: false,\n                forwardSeek: true,\n                media: null,\n                messages: {\n                    \"pause\": \"Pause\",\n                    \"play\": \"Play\",\n                    \"mute\": \"Mute\",\n                    \"unmute\": \"Unmute\",\n                    \"quality\": \"Quality\",\n                    \"fullscreen\": \"Full Screen\"\n                }\n            },\n\n            _msToTime: function (ms) {\n                var time = new Date(baseTime.getTime());\n                time.setSeconds(ms);\n                return time;\n            },\n\n            _timeToSec: function (time) {\n                var curTime = new Date(time).getTime();\n                return curTime / 1000;\n            },\n\n            _createTitlebar: function () {\n                this._titleBar = this.wrapper.find(DOT + TITLEBAR);\n                if (this._titleBar.length === 0) {\n                    this.wrapper.append(templates.titleBar);\n                    this._titleBar = this.wrapper.find(DOT + TITLEBAR);\n                }\n            },\n\n            _createSlider: function () {\n                var sliderElement = this.wrapper.find(DOT + SLIDER);\n                if (!this._slider) {\n                    this._sliderDragChangeHandler = proxy(this._sliderDragChange, this);\n                    this._sliderDraggingHandler = proxy(this._sliderDragging, this);\n                    sliderElement = this.wrapper.find(DOT + SLIDER);\n\n                    this._slider = new ui.Slider(sliderElement[0], {\n                        smallStep: 1000,\n                        tickPlacement: \"none\",\n                        showButtons: false,\n                        change: this._sliderDragChangeHandler,\n                        slide: this._sliderDraggingHandler,\n                        tooltip: {\n                            template: templates.toolTip\n                        },\n                        dragHandleTitle: this.options.messages.time\n                    });\n                }\n            },\n\n            _createVolumeSlider: function () {\n                var volumeSliderElement = this.wrapper.find(DOT + VOLUME_SLIDER);\n                if (!this._volumeSlider) {\n                    this._volumeDraggingHandler = proxy(this._volumeDragging, this);\n                    this._volumeChangeHandler = proxy(this._volumeChange, this);\n                    volumeSliderElement.width(87);\n                    this._volumeSlider = new ui.Slider(volumeSliderElement[0], {\n                        smallStep: 1,\n                        min: 0,\n                        max: 100,\n                        value: this.options.volume,\n                        slide: this._volumeDraggingHandler,\n                        change: this._volumeChangeHandler,\n                        tickPlacement: \"none\",\n                        showButtons: false,\n                        tooltip: { enabled: false },\n                        dragHandleTitle: this.options.messages.volume\n                    });\n                }\n            },\n\n            _resetTime: function () {\n                if (this._youTubeVideo) {\n                    this._ytmedia.seekTo(0, true);\n                } else {\n                    this._media.currentTime = 0;\n                }\n\n                this._mediaTimeUpdate();\n                $.grep(this._toolBar.options.items, function (e) { return !!e.template; }).template = templates.toolBarTime;\n            },\n\n            _currentUrl: function () {\n                var media = this.media();\n                return isArray(media.source) ? media.source[this._currentIndex].url : media.source;\n            },\n\n            _isYouTubeUrl: function () {\n                return !!this._currentUrl().match(\"youtube.com/|youtu.be/\");\n            },\n\n            _setPlayerUrl: function () {\n                var oldPlayer = this._youTubeVideo;\n                this.stop();\n\n                this._youTubeVideo = this._isYouTubeUrl();\n\n                if (oldPlayer !== this._youTubeVideo) {\n                    this.wrapper.find(DOT + YTPLAYER).toggle();\n                    this.wrapper.find(DOT + MEDIA).toggle();\n                }\n\n                var initialized = this._media || this._ytmedia;\n\n                this._initializePlayer();\n\n                if (initialized) { //mute and volume settings should be persisted when switching between html and youtube players\n                    this.mute(this.mute());\n                    this.volume(this.volume());\n                }\n\n                if (!this._youTubeVideo) {\n                    this._videoOverlay.show();\n                    this.wrapper.find(DOT + MEDIA + \" > source\").remove();\n                    this.wrapper.find(DOT + MEDIA).attr(\"src\", this._currentUrl());\n\n                    if (this.options.autoPlay) {\n                        this.play();\n                    }\n                }\n                else if (this._ytmedia) {\n                    if (this._videoOverlay) {\n                        this._videoOverlay.hide();\n                    }\n                    if (this.options.autoPlay) {\n                        this._ytmedia.loadVideoById(this._getMediaId());\n                        this._playStateToggle(true);\n                    }\n                    else {\n                        this._ytmedia.cueVideoById(this._getMediaId());\n                        this._playStateToggle(true);\n                    }\n                }\n            },\n\n            _createToolbar: function () {\n                var toolBarElement = this.wrapper.find(DOT + TOOLBAR);\n                if (toolBarElement.length === 0) {\n                    this._toolbarClickHandler = proxy(this._toolbarClick, this);\n                    this.wrapper.append(templates.toolBar);\n                    toolBarElement = this.wrapper.find(DOT + TOOLBAR);\n                    toolBarElement.width(this.wrapper.find(DOT + MEDIA).width());\n                    this._toolBar = new ui.ToolBar(toolBarElement, {\n                        click: this._toolbarClickHandler,\n                        resizable: false,\n                        items: [\n                            {\n                                type: \"button\",\n                                attributes: { \"class\": \"k-play-button\" },\n                                icon: \"play\",\n                                fillMode: \"flat\"\n                            },\n                            {\n                                template: templates.toolBarTime,\n                                attributes: { \"class\": \"k-mediaplayer-currenttime-wrap\" }\n                            },\n                            {\n                                type: \"spacer\"\n                            },\n                            {\n                                type: \"button\",\n                                attributes: { \"class\": \"k-volume-button\" },\n                                icon: \"volume-up\",\n                                fillMode: \"flat\"\n                            },\n                            {\n                                template: templates.volumeSlider,\n                                attributes: { \"class\": \"k-mediaplayer-volume-wrap\" }\n                            },\n                            {\n                                template: templates.qualityDropDown,\n                                attributes: { \"class\": \"k-mediaplayer-quality-wrap\" }\n                            },\n                            {\n                                type: \"button\",\n                                attributes: { \"class\": \"k-fullscreen-button\" },\n                                icon: \"full-screen\",\n                                fillMode: \"flat\"\n                            }\n                        ]\n                    });\n\n                    this._toolBar.wrapper.off(\"keydown\");\n                    toolBarElement.before(templates.slider);\n\n                    this._volumeButton = toolBarElement.find(\".k-volume-button\");\n                    this._fullscreenButton = toolBarElement.find(\".k-fullscreen-button\");\n                    this._volumeButton.attr(\"title\", this.options.mute ? this.options.messages.unmute : this.options.messages.mute);\n                    this._volumeButton.attr(\"aria-label\", this.options.mute ? this.options.messages.unmute : this.options.messages.mute);\n                    this._fullscreenButton.attr(\"title\", this.options.messages.fullscreen);\n                    this._fullscreenButton.attr(\"aria-label\", this.options.messages.fullscreen);\n\n                    toolBarElement.width(\"auto\");\n                    this._currentTimeElement = toolBarElement.find(\".k-mediaplayer-currenttime\");\n                    this._durationElement = toolBarElement.find(\".k-mediaplayer-duration\");\n                    this._playButton = toolBarElement.find(\".k-play-button\");\n                    this._playButtonSpan = this._playButton.find(\".k-i-play\");\n\n                    if (this.options.autoPlay) {\n                        this._playStateToggle(true);\n                    }\n\n                    if ( kendo.support.cssFlexbox === false ) {\n                        $([\n                            this._volumeButton[0],\n                            toolBarElement.find(\".k-mediaplayer-volume-wrap\")[0],\n                            toolBarElement.find(\".k-mediaplayer-quality-wrap\")[0],\n                            this._fullscreenButton[0]\n                        ]).wrapAll(\"<div class='k-align-right' />\");\n                    }\n                }\n            },\n\n            _createDropDown: function () {\n                var dropDownElement = this.wrapper.find(DOT + VIDEO_QUALITY);\n                var media = this.media();\n                if (typeof dropDownElement.data(\"kendoDropDownList\") === \"undefined\") {\n                    this._dropDownSelectHandler = proxy(this._dropDownSelect, this);\n                    this._dropDown = new ui.DropDownList(dropDownElement, {\n                        dataTextField: \"quality\",\n                        dataValueField: \"url\",\n                        popup: {\n                            position: \"bottom\",\n                            origin: \"top\",\n                            appendTo: this.wrapper\n                        },\n                        animation: {\n                            open: {\n                                effects: \"slideIn:up\",\n                                duration: 1\n                            }\n                        },\n                        select: this._dropDownSelectHandler\n                    });\n\n                    if (media && isArray(media.source)) {\n                        this._dropDown.setDataSource(media.source);\n                        this._dropDown.select(0);\n                    }\n\n                    this._dropDown.wrapper.addClass(\"k-button k-button-md k-rounded-md k-button-flat k-button-flat-base\");\n                    this._dropDown.wrapper.attr(\"title\", this.options.messages.quality).hide();\n                    this._dropDown.wrapper.find(\"span.k-i-arrow-s\")\n                        .removeClass('k-i-arrow-s')\n                        .addClass('k-icon k-i-hd');\n                    this._dropDown.list.addClass(\"k-quality-list\");\n                }\n            },\n\n            _dropDownSelect: function (e) {\n                if (this._currentIndex !== e.item.index()) {\n                    this._currentIndex = e.item.index();\n                    this._setPlayerUrl();\n                }\n            },\n\n            _toolbarClick: function (e) {\n                var target = $(e.target).children().first();\n                var isPaused = target.hasClass(STATE_PLAY);\n\n                if (!this.media()) {\n                    return;\n                }\n\n                if (target.hasClass(STATE_PLAY) || target.hasClass(STATE_PAUSE)) {\n                    if (isPaused) {\n                        this.play();\n                    }\n                    else {\n                        this.pause();\n                    }\n                }\n\n                if (target.hasClass(FULLSCREEN_ENTER) || target.hasClass(FULLSCREEN_EXIT)) {\n                    if (this._isInFullScreen) {\n                        target\n                            .removeClass(FULLSCREEN_EXIT)\n                            .addClass(FULLSCREEN_ENTER);\n                        this.fullScreen(false);\n                    } else {\n                        target\n                            .removeClass(FULLSCREEN_ENTER)\n                            .addClass(FULLSCREEN_EXIT);\n                        this.fullScreen(true);\n                    }\n                }\n\n                if (target.hasClass(MUTE) || target.hasClass(LOW_VOLUME) || target.hasClass(HIGH_VOLUME)) {\n                    var muted = this.mute();\n                    this.mute(!muted);\n                }\n            },\n\n            _sliderDragging: function () {\n                if (!this.media()) {\n                    return;\n                }\n\n                this._isDragging = true;\n            },\n\n            _sliderDragChange: function (e) {\n                var that = this;\n                var slider = e.sender;\n                var tzOffset = timeZoneSec * 1000;\n\n                if (!this.media()) {\n                    return;\n                }\n\n                that._sliderChangeFired = true;\n                that._isDragging = false;\n\n                if (!this.options.forwardSeek && slider.value() > this._seekBarLastPosition) {\n                    setTimeout(function () {\n                        slider.value(that._seekBarLastPosition);\n                    }, 1);\n                } else if (this._youTubeVideo) {\n                    that._ytmedia.seekTo(that._timeToSec(e.value - tzOffset));\n                } else {\n                    that._media.currentTime = that._timeToSec(e.value - tzOffset);\n                }\n                that.trigger(TIMECHANGE);\n                that._preventPlay = true;\n            },\n\n            _changeVolumeButtonImage: function (volume) {\n                var volumeButton = this._volumeButton;\n                var volumeElement = volumeButton.find(\"span\");\n                var cssClass = volumeElement.attr(\"class\");\n                cssClass = cssClass.substring(0, cssClass.lastIndexOf(\" \"));\n\n                if (volume === 0) {\n                    volumeElement.attr(\"class\", cssClass + \" \" + MUTE);\n                    volumeButton.attr(\"title\", this.options.messages.unmute);\n                    volumeButton.attr(\"aria-label\", this.options.messages.unmute);\n                } else if (volume > 0 && volume < 51) {\n                    volumeElement.attr(\"class\", cssClass + \" \" + LOW_VOLUME);\n                    volumeButton.attr(\"title\", this.options.messages.mute);\n                    volumeButton.attr(\"aria-label\", this.options.messages.mute);\n                } else {\n                    volumeElement.attr(\"class\", cssClass + \" \" + HIGH_VOLUME);\n                    volumeButton.attr(\"title\", this.options.messages.mute);\n                    volumeButton.attr(\"aria-label\", this.options.messages.mute);\n                }\n            },\n\n            _volumeDragging: function (e) {\n                if (!this.media()) {\n                    return;\n                }\n                this.volume(e.value);\n                this._changeVolumeButtonImage(e.value);\n                this.trigger(VOLUMECHANGE);\n            },\n\n            _volumeChange: function (e) {\n                if (!this.media()) {\n                    return;\n                }\n                this.volume(e.value);\n                this._changeVolumeButtonImage(e.value);\n                this.trigger(VOLUMECHANGE);\n            },\n\n            _mediaTimeUpdate: function () {\n                var currentTime = (this._youTubeVideo) ? this._ytmedia.getCurrentTime() : this._media.currentTime;\n                currentTime = currentTime ? currentTime : 0;\n                var timeInMs = this._msToTime(currentTime);\n                this._currentTimeElement.text(kendo.toString(timeInMs, this._timeFormat));\n                if (!this._isDragging) {\n                    this._seekBarLastPosition = (currentTime + timeZoneSec) * 1000;\n                    this._slider.value(this._seekBarLastPosition);\n                }\n\n                return this.isPlaying();\n            },\n\n            _playStateToggle: function (play) {\n                if (typeof play === \"undefined\") {\n                    play = this._playButtonSpan.is(DOT + STATE_PLAY);\n                }\n\n                if (play) {\n                    this._playButtonSpan\n                        .removeClass(STATE_PLAY)\n                        .addClass(STATE_PAUSE);\n                    this._playButton.attr(\"title\", this.options.messages.pause);\n                    this._playButton.attr(\"aria-label\", this.options.messages.pause);\n                }\n                else {\n                    this._playButtonSpan\n                        .removeClass(STATE_PAUSE)\n                        .addClass(STATE_PLAY);\n                    this._playButton.attr(\"title\", this.options.messages.play);\n                    this._playButton.attr(\"aria-label\", this.options.messages.play);\n                }\n            },\n\n            _mediaEnded: function () {\n                this._playStateToggle(false);\n                this._currentTimeElement.text(kendo.toString(this._msToTime(0), this._timeFormat));\n                this._slider.value((0 + timeZoneSec) * 1000);\n                this.trigger(END);\n            },\n\n            _mediaPlay: function () {\n                this.trigger(PLAY);\n            },\n\n            _mediaReady: function () {\n                this.trigger(READY);\n            },\n\n            _mediaDurationChange: function () {\n                var durationTime = this._msToTime((this._youTubeVideo) ? this._ytmedia.getDuration() : this._media.duration);\n\n                this._timeFormat = durationTime.getHours() === 0 ? timeFormats.shortTime : timeFormats.longTime;\n\n                this._durationElement.text(kendo.toString(durationTime, this._timeFormat));\n                this._slider.setOptions({\n                    min: baseTime.getTime(),\n                    max: durationTime.getTime()\n                });\n\n                if (!this._isFirstRun) {\n                    this._resetTime();\n                    this._isFirstRun = true;\n                }\n            },\n\n            _createYoutubePlayer: function () {\n                this._mediaTimeUpdateHandler = proxy(this._mediaTimeUpdate, this);\n                this._mediaDurationChangeHandler = proxy(this._mediaDurationChange, this);\n\n                this.wrapper.prepend(templates.youtubePlayer);\n                this._ytPlayer = this.wrapper.find(DOT + YTPLAYER)[0];\n                $(this._ytPlayer)\n                    .css({\n                        width: this.wrapper.width(),\n                        height: this.wrapper.height()\n                    });\n\n                if (!window.YT || !window.YT.Player) {\n                    if (!window.onYouTubeIframeAPIReadyRegister) {\n                        window.onYouTubeIframeAPIReadyRegister = [];\n                        $.getScript(\"https://www.youtube.com/iframe_api\");\n                        window.onYouTubeIframeAPIReady =\n                            function () {\n                                if (window.onYouTubeIframeAPIReadyRegister) {\n                                    for (var i = 0; i < window.onYouTubeIframeAPIReadyRegister.length; i++) {\n                                        window.onYouTubeIframeAPIReadyRegister[i]._youtubeApiReady();\n                                    }\n                                }\n                                window.onYouTubeIframeAPIReadyRegister.length = 0;\n                                window.onYouTubeIframeAPIReadyRegister = undefined;\n                            };\n                    }\n                    window.onYouTubeIframeAPIReadyRegister[window.onYouTubeIframeAPIReadyRegister.length] = this;\n                }\n                else {\n                    this._configurePlayer();\n                }\n            },\n\n            _poll: function (name, callback, interval, context) {\n                var that = this;\n\n                if (that._timers[name] !== null) {\n                    clearTimeout(that._timers[name]);\n                }\n\n                that._timers[name] = setTimeout((function (context) {\n                    return function callLater() {\n                        if (callback.call(context)) {\n                            that._timers[name] = setTimeout(callLater, interval);\n                        }\n                    };\n                })(context), interval);\n\n                return that._timers[name];\n            },\n\n            _youtubeApiReady: function () {\n                this._configurePlayer();\n            },\n\n            _configurePlayer: function () {\n                var vars = {\n                    'autoplay': +this.options.autoPlay,\n                    'wmode': 'transparent',\n                    'controls': 0,\n                    'rel': 0,\n                    'showinfo': 0\n                };\n\n                this._onYouTubePlayerReady = proxy(this._onYouTubePlayerReady, this);\n                window.onYouTubePlayerReady = this._onYouTubePlayerReady;\n                this._onPlayerStateChangeHandler = proxy(this._onPlayerStateChange, this);\n                window.onPlayerStateChange = this._onPlayerStateChange;\n\n                /*jshint unused:false */\n                var player = new window.YT.Player(this.wrapper.find(DOT + YTPLAYER)[0], {\n                    height: this.wrapper.height(),\n                    width: this.wrapper.width(),\n                    videoId: this._getMediaId(),\n                    playerVars: vars,\n                    events: {\n                        'onReady': this._onYouTubePlayerReady,\n                        'onStateChange': this._onPlayerStateChangeHandler\n                    }\n                });\n            },\n\n            _onYouTubePlayerReady: function (event) {\n                this._ytmedia = event.target;\n                this._ytmedia.getIframe().style.width = \"100%\";\n                this._ytmedia.getIframe().style.height = \"100%\";\n                this._youTubeVideo = true;\n                this._mediaDurationChangeHandler();\n\n                if (this.options.autoPlay) {\n                    this._playStateToggle(true);\n                    this._ytmedia.loadVideoById(this._getMediaId());\n                }\n                else {\n                    this._ytmedia.cueVideoById(this._getMediaId());\n                }\n\n                if (this.options.mute) {\n                    this.mute(true);\n                }\n\n                this.trigger(READY);\n            },\n\n            _updateTitle: function () {\n                this.titlebar().text(this.media().title || this.media().source);\n            },\n\n            _onPlayerStateChange: function (event) {\n\n                if (event.data === 0) {\n                    this._slider.value(0);\n                    this._paused = false;\n                    this._playStateToggle(true);\n                    this.trigger(END);\n                    if (this.options.autoRepeat) {\n                        this.play();\n                    }\n                }\n                else if (event.data === 1) {\n                    this._mediaDurationChange();\n                    this._ytmedia.setVolume(this.volume());\n                    if (this._sliderChangeFired) {\n                        this._sliderChangeFired = false;\n                    } else {\n                        this._uiDisplay(false);\n                    }\n                    this.trigger(PLAY);\n                    this._playStateToggle(true);\n\n                    this._poll(\"progress\", this._mediaTimeUpdate, 500, this);\n                    this._paused = false;\n                }\n                else if (event.data === 2) {\n                    if (!this._paused) {\n                        this._uiDisplay(true);\n                        this._playStateToggle(false);\n                        this.trigger(PAUSE);\n                        this._paused = true;\n                    }\n                }\n            },\n\n            _getMediaId: function () {\n                var result = this._currentUrl();\n                var regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&\\?]*).*/;\n                var match = result.match(regExp);\n\n                if (match && match[7].length === 11) {\n                    result = match[7];\n                }\n\n                return result;\n            },\n\n            _mouseClick: function () {\n                if (this.isPaused()) {\n                    this.play();\n                } else {\n                    this.pause();\n                }\n            },\n\n            _initializePlayer: function () {\n                if (!this._mouseMoveHandler) {\n                    this._mouseMoveHandler = proxy(this._mouseMove, this);\n                    this._mouseInHandler = proxy(this._mouseIn, this);\n                    this._mouseOutHandler = proxy(this._mouseOut, this);\n\n                    $(this.wrapper)\n                        .on(\"mouseenter\" + ns, this._mouseInHandler)\n                        .on(\"mouseleave\" + ns, this._mouseOutHandler)\n                        .on(\"mousemove\" + ns, this._mouseMoveHandler);\n                }\n\n                if (!this._ytmedia && this._youTubeVideo) {\n                    this._createYoutubePlayer();\n                }\n                else if (!this._media && !this._youTubeVideo) {\n                    this._createHtmlPlayer();\n                }\n            },\n\n            _createHtmlPlayer: function () {\n                if (!this._videoOverlay) {\n                    this._mouseClickHanlder = proxy(this._mouseClick, this);\n                    this.wrapper.append(\"<div class='\" + OVERLAY + \"'></div>\");\n                    this._videoOverlay = this.wrapper.find(\".k-mediaplayer-overlay\")\n                        .on(\"click\" + ns, this._mouseClickHanlder);\n                }\n\n                this._mediaTimeUpdateHandler = proxy(this._mediaTimeUpdate, this);\n                this._mediaDurationChangeHandler = proxy(this._mediaDurationChange, this);\n                this._mediaEndedHandler = proxy(this._mediaEnded, this);\n                this._mediaCanPlayHandler = proxy(this._mediaReady, this);\n                this._mediaPlayHandler = proxy(this._mediaPlay, this);\n                this._videoOverlay.after(templates.htmlPlayer);\n                this._media = this.wrapper.find(DOT + MEDIA)[0];\n                $(this._media)\n                    .css({\n                        width: \"100%\",\n                        height: \"100%\"\n                    });\n\n                if (this.options.mute) {\n                    this.mute(true);\n                }\n\n                this._media.ontimeupdate = this._mediaTimeUpdateHandler;\n                this._media.ondurationchange = this._mediaDurationChangeHandler;\n                this._media.oncanplay = this._mediaCanPlayHandler;\n                this._media.onplay = this._mediaPlayHandler;\n                this._media.onended = this._mediaEndedHandler;\n                this._media.loop = this.options.autoRepeat;\n            },\n\n            _mouseIn: function () {\n                this._uiDisplay(true);\n            },\n\n            _mouseOut: function () {\n                this._poll(\"mouseIdle\", this._mouseIdle, 3000, this);\n            },\n\n            _mouseIdle: function () {\n                this._uiDisplay(false);\n                return false;\n            },\n\n            _mouseMove: function () {\n                if (!(this._titleBar.is(':animated') || this._toolBar.element.is(':animated') || this._slider.wrapper.is(':animated'))) {\n                    this._uiDisplay(true);\n                }\n                this._poll(\"mouseIdle\", this._mouseIdle, 3000, this);\n            },\n\n            _uiDisplay: function (state) {\n                var animationSpeed = 'slow';\n                var uiElements = this._titleBar\n                    .add(this._toolBar.element.parent());\n\n                if (state) {\n                    uiElements.fadeIn(animationSpeed);\n                }\n                else {\n                    uiElements.fadeOut(animationSpeed);\n                    if (this.options.navigatable) {\n                        this.wrapper.trigger(\"focus\");\n                    }\n                }\n            },\n\n            setOptions: function (options) {\n                Widget.fn.setOptions.call(this, options);\n            },\n\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n\n                if (!this.isPaused()) {\n                    this.pause();\n                }\n\n                this.element.off(ns);\n                this.element.find(DOT + OVERLAY).off(ns);\n                this._timers = null;\n                this._mouseMoveHandler = null;\n                this._mouseOutHandler = null;\n                this._mouseInHandler = null;\n                this._mouseClickHanlder = null;\n                this._keyDownHandler = null;\n                this._fullscreenHandler = null;\n\n                this._toolbarClickHandler = null;\n                this._sliderDragChangeHandler = null;\n                this._sliderDraggingHandler = null;\n                this._volumeDraggingHandler = null;\n                this._volumeChangeHandler = null;\n                this._youtubeApiReadyHandler = null;\n                this._onYouTubePlayerReady = null;\n                this._onPlayerStateChangeHandler = null;\n                this._dropDownSelectHandler = null;\n\n                if (this._youTubeVideo) {\n                    this._ytmedia.destroy();\n                }\n                else {\n                    this._media.ontimeupdate = this._mediaTimeUpdateHandler = null;\n                    this._media.ondurationchange = this._mediaDurationChangeHandler = null;\n                    this._media.oncanplay = this._mediaCanPlayHandler = null;\n                    this._media.onplay = this._mediaPlayHandler = null;\n                    this._media.onended = this._mediaEndedHandler = null;\n                    this._media.src = \"\";\n                    this._media.remove();\n                }\n\n                this._mouseMoveTimer = null;\n                clearTimeout(this._mouseMoveTimer);\n\n                kendo.destroy(this.element);\n            },\n\n            seek: function (ms) {\n                if (typeof ms === 'undefined') {\n                    return 1000 * (this._youTubeVideo) ? this._ytmedia.getCurrentTime() : (this._media ? this._media.currentTime : 0);\n                }\n                var seconds = ms / 1000;\n                if (this._youTubeVideo) {\n                    if (seconds + 3 >= this._ytmedia.getDuration() | 0) {\n                        //avoid infinite bad request loop in youtube player.\n                        this._ytmedia.seekTo(this._ytmedia.getDuration() - 3 | 0, true);\n                    } else {\n                        this._ytmedia.seekTo(seconds, true);\n                    }\n                } else {\n                    this._media.currentTime = seconds;\n                }\n\n                return this;\n            },\n\n            play: function () {\n                if (this._youTubeVideo) {\n                    this._ytmedia.playVideo();\n                } else {\n                    if (kendo.support.mobileOS) {\n                        this._uiDisplay(false);\n                    }\n                    this._media.play();\n                }\n                this._paused = false;\n\n                this._playStateToggle(true);\n\n                return this;\n            },\n\n            stop: function () {\n                if (this._youTubeVideo && this._ytmedia) {\n                    this._ytmedia.stopVideo();\n                } else if (this._media && !this._youTubeVideo) {\n                    if (kendo.support.mobileOS) {\n                        this._uiDisplay(true);\n                    }\n                    this._media.pause();\n                    this._media.currentTime = 0;\n                }\n                this._paused = true;\n\n                this._playStateToggle(false);\n                return this;\n            },\n\n            pause: function () {\n                if (this._youTubeVideo) {\n                    this._ytmedia.pauseVideo();\n                } else {\n                    if (kendo.support.mobileOS) {\n                        this._uiDisplay(true);\n                    }\n                    this._media.pause();\n                }\n                this._paused = true;\n                this._playStateToggle(false);\n                this.trigger(PAUSE);\n                return this;\n            },\n\n            toolbar: function () {\n                return this._toolBar;\n            },\n\n            dropdown: function () {\n                return this._dropDown;\n            },\n\n            titlebar: function () {\n                return this._titleBar;\n            },\n\n            fullScreen: function (enterFullScreen) {\n                if (typeof enterFullScreen === 'undefined') {\n                    return this._isInFullScreen || false;\n                }\n                var element = this.element.get(0);\n                if (enterFullScreen) {\n                    // Handles the case when the action is triggered by code and not by user iteraction\n                    this.element.addClass(\"k-mediaplayer-fullscreen\");\n                    if (element.requestFullscreen) {\n                        element.requestFullscreen();\n                    } else if (element.webkitRequestFullscreen) {\n                        element.webkitRequestFullscreen();\n                    } else if (element.mozRequestFullScreen) {\n                        element.mozRequestFullScreen();\n                    } else if (element.msRequestFullscreen) {\n                        element.msRequestFullscreen();\n                    }\n                    this._isInFullScreen = true;\n                } else {\n\n                    if (document.cancelFullscreen) {\n                        document.cancelFullscreen();\n                    } else if (document.webkitCancelFullScreen) {\n                        document.webkitCancelFullScreen();\n                    } else if (document.mozCancelFullScreen) {\n                        document.mozCancelFullScreen();\n                    } else if (document.msCancelFullscreen) {\n                        document.msCancelFullscreen();\n                    } else if (document.exitFullscreen) {\n                        document.exitFullscreen();\n                    } else if (document.msExitFullscreen) {\n                        document.msExitFullscreen();\n                    }\n                    // Handles the case when the action is triggered by code and not by user iteraction\n                    this.element.removeClass(\"k-mediaplayer-fullscreen\");\n                    this._isInFullScreen = false;\n                }\n                this._slider.resize();\n            },\n\n            volume: function (value) {\n                if (typeof value === 'undefined') {\n                    return (typeof this._volume !== 'undefined') ? this._volume : this._volume = this.options.volume;\n                }\n                this._volume = value;\n                this.mute(value <= 0);\n\n                if (this._youTubeVideo) {\n                    this._ytmedia.setVolume(this._volume);\n                } else {\n                    this._media.volume = this._volume / 100;\n                }\n\n                this._volumeSlider.value(value);\n            },\n\n            mute: function (muted) {\n                var currentState = this._youTubeVideo ? (this._ytmedia && this._ytmedia.isMuted()) : (this._media && this._media.muted);\n                if (typeof muted === 'undefined' || muted === currentState) {\n                    return currentState;\n                }\n                if (this._youTubeVideo) {\n                    if (muted) {\n                        this._ytmedia.mute();\n                    }\n                    else {\n                        this._ytmedia.unMute();\n                    }\n                }\n                else {\n                    this._media.muted = muted;\n                }\n\n                if (muted) {\n                    this._volumeSlider.value(0);\n                }\n                else {\n                    this._volumeSlider.value((this._media && this._media.volume * 100) || (this._ytmedia && this._ytmedia.getVolume()));\n                }\n                this.trigger(VOLUMECHANGE);\n                this._changeVolumeButtonImage(this._volumeSlider.value());\n            },\n\n            isEnded: function () {\n                if (this._youTubeVideo) {\n                    return this._ytmedia.getPlayerState() === 0;\n                } else {\n                    return this._media.ended;\n                }\n            },\n\n            media: function (value) {\n                var dropdown = this.dropdown();\n                if (typeof value === 'undefined') {\n                    return (typeof this._mediaData !== 'undefined') ? this._mediaData : this._mediaData = this.options.media;\n                }\n\n                if (isArray(value.source)) {\n                    dropdown.setDataSource(value.source);\n                    dropdown.wrapper.show();\n                }\n                else {\n                    dropdown.wrapper.hide();\n                }\n\n                this._mediaData = value;\n\n                this._updateTitle();\n\n                this._setPlayerUrl();\n            },\n\n            isPaused: function () {\n                return this._paused;\n            },\n\n            isPlaying: function () {\n                return !this.isEnded() && !this._paused;\n            },\n\n            _aria: function () {\n                this.wrapper.attr(\"role\", \"region\");\n                //this.wrapper.attr(\"aria-labelledby\", \"mediaplayerTitleBar\");\n                //add onfocus with aria active descendant\n            },\n\n            _navigatable: function () {\n                this._fullscreenHandler = proxy(this._fullscreen, this);\n                $(document)\n                    .on(\"webkitfullscreenchange mozfullscreenchange fullscreenchange\" + ns, this._fullscreenHandler);\n\n                if (this.options.navigatable) {\n                    this.wrapper.attr(\"tabIndex\", 0);\n                    this._keyDownHandler = proxy(this._keyDown, this);\n                    this.wrapper\n                        .on(\"keydown\" + ns, this._keyDownHandler);\n                }\n            },\n\n            _fullscreen: function () {\n                var isFullScreen = document.fullScreen ||\n                    document.mozFullScreen ||\n                    document.webkitIsFullScreen;\n\n                this._uiDisplay(true);\n                this._slider.resize();\n\n                if (!isFullScreen) {\n                    this.wrapper.find('span[class*=\"k-i-fullscreen\"]')\n                        .removeClass(FULLSCREEN_EXIT)\n                        .addClass(FULLSCREEN_ENTER);\n                    this.fullScreen(false);\n                }\n            },\n\n            _keyDown: function (e) {\n                e.preventDefault();\n                var fsButton = this.wrapper.find('span[class*=\"k-i-fullscreen\"]');\n                if (e.keyCode === keys.SPACEBAR) {\n                    if (this.isPlaying()) {\n                        this.pause();\n                    }\n                    else {\n                        this.play();\n                    }\n                }\n                else if (e.keyCode === keys.ENTER && !this._isInFullScreen) {\n                    fsButton\n                        .removeClass(FULLSCREEN_ENTER)\n                        .addClass(FULLSCREEN_EXIT);\n                    this.fullScreen(true);\n                }\n                else if (e.keyCode === 77) {\n                    var muted = this.mute();\n                    this.mute(!muted);\n                }\n                else if (e.keyCode === keys.ESC && this._isInFullScreen) {\n                    fsButton\n                        .removeClass(FULLSCREEN_EXIT)\n                        .addClass(FULLSCREEN_ENTER);\n                    this.fullScreen(false);\n                }\n            },\n\n            _error: function () {\n            },\n\n            _progress: function () {\n            }\n\n        });\n\n        ui.plugin(MediaPlayer);\n\n    })(window.kendo.jQuery);\n\n    return window.kendo;\n\n}, typeof define === 'function' && define.amd ? define : function (a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","END","PAUSE","PLAY","READY","TIMECHANGE","VOLUMECHANGE","FULLSCREEN_ENTER","FULLSCREEN_EXIT","MUTE","LOW_VOLUME","HIGH_VOLUME","VIDEO_QUALITY","STATE_PLAY","STATE_PAUSE","TITLEBAR","TITLE","TOOLBARWRAP","TOOLBAR","SLIDER","VOLUME_SLIDER","MEDIA","OVERLAY","YTPLAYER","DOT","ui","ns","baseTime","Date","timeZoneSec","getTimezoneOffset","Widget","isArray","Array","timeFormats","shortTime","longTime","template","proxy","keys","templates","htmlPlayer","titleBar","toolBar","youtubePlayer","toolBarTime","slider","volumeSlider","qualityDropDown","toolTip","MediaPlayer","extend","init","element","options","this","wrapper","fn","call","addClass","_currentIndex","_createTitlebar","_createToolbar","_createDropDown","_createSlider","_createVolumeSlider","_timers","_aria","_navigatable","fullScreen","media","notify","events","autoPlay","autoRepeat","volume","mute","navigatable","forwardSeek","messages","pause","play","unmute","quality","fullscreen","_msToTime","ms","time","getTime","setSeconds","_timeToSec","curTime","_titleBar","find","length","append","sliderElement","_slider","_sliderDragChangeHandler","_sliderDragChange","_sliderDraggingHandler","_sliderDragging","Slider","smallStep","tickPlacement","showButtons","change","slide","tooltip","dragHandleTitle","volumeSliderElement","_volumeSlider","_volumeDraggingHandler","_volumeDragging","_volumeChangeHandler","_volumeChange","width","min","max","value","enabled","_resetTime","_youTubeVideo","_ytmedia","seekTo","_media","currentTime","_mediaTimeUpdate","grep","_toolBar","items","e","_currentUrl","source","url","_isYouTubeUrl","match","_setPlayerUrl","oldPlayer","stop","toggle","initialized","_initializePlayer","_videoOverlay","show","remove","attr","hide","loadVideoById","_getMediaId","_playStateToggle","cueVideoById","toolBarElement","_toolbarClickHandler","_toolbarClick","ToolBar","click","resizable","type","attributes","class","icon","fillMode","off","before","_volumeButton","_fullscreenButton","_currentTimeElement","_durationElement","_playButton","_playButtonSpan","support","cssFlexbox","wrapAll","dropDownElement","data","_dropDownSelectHandler","_dropDownSelect","_dropDown","DropDownList","dataTextField","dataValueField","popup","position","origin","appendTo","animation","open","effects","duration","select","setDataSource","removeClass","list","item","index","target","children","first","isPaused","hasClass","_isInFullScreen","muted","_isDragging","that","sender","tzOffset","_sliderChangeFired","_seekBarLastPosition","setTimeout","trigger","_preventPlay","_changeVolumeButtonImage","volumeButton","volumeElement","cssClass","substring","lastIndexOf","getCurrentTime","timeInMs","text","toString","_timeFormat","isPlaying","is","_mediaEnded","_mediaPlay","_mediaReady","_mediaDurationChange","durationTime","getDuration","getHours","setOptions","_isFirstRun","_createYoutubePlayer","_mediaTimeUpdateHandler","_mediaDurationChangeHandler","prepend","_ytPlayer","css","height","YT","Player","onYouTubeIframeAPIReadyRegister","getScript","onYouTubeIframeAPIReady","i","_youtubeApiReady","_configurePlayer","_poll","callback","interval","context","clearTimeout","callLater","vars","autoplay","wmode","controls","rel","showinfo","_onYouTubePlayerReady","onYouTubePlayerReady","_onPlayerStateChangeHandler","_onPlayerStateChange","onPlayerStateChange","player","videoId","playerVars","onReady","onStateChange","event","getIframe","style","_updateTitle","titlebar","title","_paused","setVolume","_uiDisplay","result","regExp","_mouseClick","_mouseMoveHandler","_mouseMove","_mouseInHandler","_mouseIn","_mouseOutHandler","_mouseOut","on","_createHtmlPlayer","_mouseClickHanlder","_mediaEndedHandler","_mediaCanPlayHandler","_mediaPlayHandler","after","ontimeupdate","ondurationchange","oncanplay","onplay","onended","loop","_mouseIdle","state","animationSpeed","uiElements","add","parent","fadeIn","fadeOut","destroy","_keyDownHandler","_fullscreenHandler","_youtubeApiReadyHandler","src","_mouseMoveTimer","seek","seconds","playVideo","mobileOS","stopVideo","pauseVideo","toolbar","dropdown","enterFullScreen","get","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","document","cancelFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msCancelFullscreen","exitFullscreen","msExitFullscreen","resize","_volume","currentState","isMuted","unMute","getVolume","isEnded","getPlayerState","ended","_mediaData","_fullscreen","_keyDown","isFullScreen","mozFullScreen","webkitIsFullScreen","preventDefault","fsButton","keyCode","SPACEBAR","ENTER","ESC","_error","_progress","plugin","amd","a1","a2","a3"],"mappings":"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"}