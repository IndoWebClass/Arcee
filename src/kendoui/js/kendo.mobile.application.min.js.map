{"version":3,"file":"kendo.mobile.application.min.js","sources":["kendo.mobile.application.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.mobile.application',[ \"./kendo.mobile.pane\", \"./kendo.router\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"mobile.application\",\n    name: \"Application\",\n    category: \"mobile\",\n    description: \"The Mobile application provides a framework to build native looking web applications on mobile devices.\",\n    depends: [ \"mobile.pane\", \"router\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        mobile = kendo.mobile,\n        support = kendo.support,\n        Widget = mobile.ui.Widget,\n        Pane = mobile.ui.Pane,\n\n        DEFAULT_OS = \"ios7\",\n        OS = support.mobileOS,\n        BERRYPHONEGAP = OS.device == \"blackberry\" && OS.flatVersion >= 600 && OS.flatVersion < 1000 && OS.appMode,\n        FONT_SIZE_COEF = 0.93,\n        VERTICAL = \"km-vertical\",\n        CHROME =  OS.browser === \"chrome\",\n        BROKEN_WEBVIEW_RESIZE = OS.ios && OS.flatVersion >= 700 && OS.flatVersion < 800 && (OS.appMode || CHROME),\n        INITIALLY_HORIZONTAL = (Math.abs(window.orientation) / 90 == 1),\n        HORIZONTAL = \"km-horizontal\",\n\n        MOBILE_PLATFORMS = {\n            ios7: { ios: true, browser: \"default\", device: \"iphone\", flatVersion: \"700\", majorVersion: \"7\", minorVersion: \"0.0\", name: \"ios\", tablet: false },\n            ios: { ios: true, browser: \"default\", device: \"iphone\", flatVersion: \"612\", majorVersion: \"6\", minorVersion: \"1.2\", name: \"ios\", tablet: false },\n            android: { android: true, browser: \"default\", device: \"android\", flatVersion: \"442\", majorVersion: \"4\", minorVersion: \"4.2\", name: \"android\", tablet: false },\n            blackberry: { blackberry: true, browser: \"default\", device: \"blackberry\", flatVersion: \"710\", majorVersion: \"7\", minorVersion: \"1.0\", name: \"blackberry\", tablet: false },\n            meego: { meego: true, browser: \"default\", device: \"meego\", flatVersion: \"850\", majorVersion: \"8\", minorVersion: \"5.0\", name: \"meego\", tablet: false },\n            wp: { wp: true, browser: \"default\", device: \"wp\", flatVersion: \"800\", majorVersion: \"8\", minorVersion: \"0.0\", name: \"wp\", tablet: false }\n        },\n\n        viewportTemplate = kendo.template('<meta content=\"initial-scale=#: data.scale #, maximum-scale=#: data.scale #, user-scalable=no#=data.height#\" name=\"viewport\" />', {usedWithBlock: false}),\n        systemMeta = kendo.template('<meta name=\"apple-mobile-web-app-capable\" content=\"#= data.webAppCapable === false ? \\'no\\' : \\'yes\\' #\" /> ' +\n                     '<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"#=data.statusBarStyle#\" /> ' +\n                     '<meta name=\"msapplication-tap-highlight\" content=\"no\" /> ', {usedWithBlock: false}),\n        clipTemplate = kendo.template('<style>.km-view { clip: rect(0 #= data.width #px #= data.height #px 0); }</style>', {usedWithBlock: false}),\n        ENABLE_CLIP = OS.android && OS.browser != \"chrome\" || OS.blackberry,\n\n        iconMeta = kendo.template('<link rel=\"apple-touch-icon' + (OS.android ? '-precomposed' : '') + '\" # if(data.size) { # sizes=\"#=data.size#\" #}# href=\"#=data.icon#\" />', {usedWithBlock: false}),\n\n        HIDEBAR = (OS.device == \"iphone\" || OS.device == \"ipod\") && OS.majorVersion < 7,\n        SUPPORT_SWIPE_TO_GO_BACK = (OS.device == \"iphone\" || OS.device == \"ipod\") && OS.majorVersion >= 7,\n        HISTORY_TRANSITION = SUPPORT_SWIPE_TO_GO_BACK ? \"none\" : null,\n        BARCOMPENSATION = OS.browser == \"mobilesafari\" ? 60 : 0,\n        STATUS_BAR_HEIGHT = 20,\n        WINDOW = $(window),\n        SCREEN = window.screen,\n        HEAD = $(\"head\"),\n\n        // mobile app events\n        INIT = \"init\",\n        proxy = $.proxy;\n\n    function osCssClass(os, options) {\n        var classes = [];\n\n        if (OS) {\n            classes.push(\"km-on-\" + OS.name);\n        }\n\n        if (os.skin) {\n            classes.push(\"km-\" + os.skin);\n        } else {\n            if (os.name == \"ios\" && os.majorVersion > 6) {\n                classes.push(\"km-ios7\");\n            } else {\n                classes.push(\"km-\" + os.name);\n            }\n        }\n        if ((os.name == \"ios\" && os.majorVersion < 7) || os.name != \"ios\") {\n            classes.push(\"km-\" + os.name + os.majorVersion);\n        }\n        classes.push(\"km-\" + os.majorVersion);\n        classes.push(\"km-m\" + (os.minorVersion ? os.minorVersion[0] : 0));\n\n        if (os.variant && ((os.skin && os.skin === os.name) || !os.skin || os.setDefaultPlatform === false)) {\n            classes.push(\"km-\" + (os.skin ? os.skin : os.name) + \"-\" + os.variant);\n        }\n\n        if (os.cordova) {\n            classes.push(\"km-cordova\");\n        }\n        if (os.appMode) {\n            classes.push(\"km-app\");\n        } else {\n            classes.push(\"km-web\");\n        }\n\n        if (options && options.statusBarStyle) {\n            classes.push(\"km-\" + options.statusBarStyle + \"-status-bar\");\n        }\n\n        return classes.join(\" \");\n    }\n\n    function wp8Background(os) {\n        return 'km-wp-' + (os.noVariantSet ?\n                            (parseInt($(\"<div style='background: Background' />\").css(\"background-color\").split(\",\")[1], 10) === 0 ? 'dark' : 'light') :\n                            os.variant + \" km-wp-\" + os.variant + \"-force\");\n    }\n\n    function isOrientationHorizontal(element) {\n        return OS.wp ? element.css(\"animation-name\") == \"-kendo-landscape\" : (Math.abs(window.orientation) / 90 == 1);\n    }\n\n    function getOrientationClass(element) {\n        return isOrientationHorizontal(element) ? HORIZONTAL : VERTICAL;\n    }\n\n    function setMinimumHeight(pane) {\n        pane.parent().addBack()\n               .css(\"min-height\", window.innerHeight);\n    }\n\n    function applyViewportHeight() {\n        $(\"meta[name=viewport]\").remove();\n            HEAD.append(viewportTemplate({\n            height: \", width=device-width\" +  // width=device-width was removed for iOS6, but this should stay for BB PhoneGap.\n                        (isOrientationHorizontal() ?\n                            \", height=\" + window.innerHeight + \"px\"  :\n                            (support.mobileOS.flatVersion >= 600 && support.mobileOS.flatVersion < 700) ?\n                                \", height=\" + window.innerWidth + \"px\" :\n                                \", height=device-height\")\n        }));\n    }\n\n    var Application = Widget.extend({\n        init: function(element, options) {\n            // global reference to current application\n            mobile.application = this;\n            $($.proxy(this, 'bootstrap', element, options));\n        },\n\n        bootstrap: function(element, options) {\n            element = $(element);\n\n            if (!element[0]) {\n                element = $(document.body);\n            }\n\n            Widget.fn.init.call(this, element, options);\n            this.element.removeAttr(\"data-\" + kendo.ns + \"role\");\n\n            this._setupPlatform();\n            this._attachMeta();\n            this._setupElementClass();\n            this._attachHideBarHandlers();\n            var paneOptions = $.extend({}, this.options);\n            delete paneOptions.name;\n\n            var that = this,\n                startHistory = function() {\n                    that.pane = new Pane(that.element, paneOptions);\n                    that.pane.navigateToInitial();\n\n                    if (that.options.updateDocumentTitle) {\n                        that._setupDocumentTitle();\n                    }\n\n                    that._startHistory();\n                    that.trigger(INIT);\n                };\n\n            if (this.options.$angular) {\n                setTimeout(startHistory);\n            } else {\n                startHistory();\n            }\n        },\n\n        options: {\n            name: \"Application\",\n            hideAddressBar: true,\n            browserHistory: true,\n            historyTransition: HISTORY_TRANSITION,\n            modelScope: window,\n            statusBarStyle: \"black\",\n            transition: \"\",\n            retina: false,\n            platform: null,\n            skin: null,\n            updateDocumentTitle: true,\n            useNativeScrolling: false\n        },\n\n        events: [\n            INIT\n        ],\n\n        navigate: function(url, transition) {\n            this.pane.navigate(url, transition);\n        },\n\n        replace: function(url, transition) {\n            this.pane.replace(url, transition);\n        },\n\n        scroller: function() {\n            return this.view().scroller;\n        },\n\n        hideLoading: function() {\n            if (this.pane) {\n                this.pane.hideLoading();\n            } else {\n                throw new Error(\"The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.\");\n            }\n        },\n\n        showLoading: function() {\n            if (this.pane) {\n                this.pane.showLoading();\n            } else {\n                throw new Error(\"The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.\");\n            }\n        },\n\n        changeLoadingMessage: function(message) {\n            if (this.pane) {\n                this.pane.changeLoadingMessage(message);\n            } else {\n                throw new Error(\"The mobile application instance is not fully instantiated. Please consider changing the message in the application init event handler.\");\n            }\n        },\n\n        view: function() {\n            return this.pane.view();\n        },\n\n        skin: function(skin) {\n            var that = this;\n\n            if (!arguments.length) {\n                return that.options.skin;\n            }\n\n            that.options.skin = skin || \"\";\n            that.element[0].className = \"km-pane\";\n            that._setupPlatform();\n            that._setupElementClass();\n\n            return that.options.skin;\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            this.pane.destroy();\n            if (this.options.browserHistory) {\n                this.router.destroy();\n            }\n        },\n\n        _setupPlatform: function() {\n            var that = this,\n                platform = that.options.platform,\n                skin = that.options.skin,\n                split = [],\n                os = OS || MOBILE_PLATFORMS[DEFAULT_OS];\n\n            if (platform) {\n                os.setDefaultPlatform = true;\n                if (typeof platform === \"string\") {\n                    split = platform.split(\"-\");\n                    os = $.extend({ variant: split[1] }, os, MOBILE_PLATFORMS[split[0]]);\n                } else {\n                    os = platform;\n                }\n            }\n\n            if (skin) {\n                split = skin.split(\"-\");\n                if (!OS) {\n                    os.setDefaultPlatform = false;\n                }\n                os = $.extend({}, os, { skin: split[0], variant: split[1] });\n            }\n\n            if (!os.variant) {\n                os.noVariantSet = true;\n                os.variant = \"dark\";\n            }\n\n            that.os = os;\n\n            that.osCssClass = osCssClass(that.os, that.options);\n\n            if (os.name == \"wp\") {\n                if (!that.refreshBackgroundColorProxy) {\n                    that.refreshBackgroundColorProxy = $.proxy(function () {\n                        if (that.os.variant && (that.os.skin && that.os.skin === that.os.name) || !that.os.skin) {\n                            that.element.removeClass(\"km-wp-dark km-wp-light km-wp-dark-force km-wp-light-force\").addClass(wp8Background(that.os));\n                        }\n                    }, that);\n                }\n\n                $(document).off(\"visibilitychange\", that.refreshBackgroundColorProxy);\n                $(document).off(\"resume\", that.refreshBackgroundColorProxy);\n\n                if (!os.skin) {\n                    that.element.parent().css(\"overflow\", \"hidden\");\n\n                    $(document).on(\"visibilitychange\", that.refreshBackgroundColorProxy); // Restore theme on browser focus (using the Visibility API).\n                    $(document).on(\"resume\", that.refreshBackgroundColorProxy); // PhoneGap fires resume.\n\n                    that.refreshBackgroundColorProxy();\n                }\n            }\n        },\n\n        _startHistory: function() {\n            if (this.options.browserHistory) {\n                this.router = new kendo.Router({ pushState: this.options.pushState, root: this.options.root, hashBang: this.options.hashBang });\n                this.pane.bindToRouter(this.router);\n                this.router.start();\n            } else {\n                if (!this.options.initial) {\n                    this.pane.navigate(\"\");\n                }\n            }\n        },\n\n        _resizeToScreenHeight: function() {\n            var includeStatusBar = $(\"meta[name=apple-mobile-web-app-status-bar-style]\").attr(\"content\").match(/black-translucent|hidden/),\n                element = this.element,\n                height;\n\n            if (CHROME) {\n                height = window.innerHeight;\n            } else {\n                if (isOrientationHorizontal(element)) {\n                    if (includeStatusBar) {\n                        if (INITIALLY_HORIZONTAL) {\n                            height = SCREEN.availWidth + STATUS_BAR_HEIGHT;\n                        } else {\n                            height = SCREEN.availWidth;\n                        }\n                    } else {\n                        if (INITIALLY_HORIZONTAL) {\n                            height = SCREEN.availWidth;\n                        } else {\n                            height = SCREEN.availWidth - STATUS_BAR_HEIGHT;\n                        }\n                    }\n                } else {\n                    if (includeStatusBar) {\n                        if (INITIALLY_HORIZONTAL) {\n                            height = SCREEN.availHeight;\n                        } else {\n                            height = SCREEN.availHeight + STATUS_BAR_HEIGHT;\n                        }\n                    } else {\n                        if (INITIALLY_HORIZONTAL) {\n                            height = SCREEN.availHeight - STATUS_BAR_HEIGHT;\n                        } else {\n                            height = SCREEN.availHeight;\n                        }\n                    }\n                }\n            }\n\n            element.height(height);\n        },\n\n        _setupElementClass: function() {\n            var that = this, size,\n                element = that.element;\n\n            element.parent().addClass(\"km-root km-\" + (that.os.tablet ? \"tablet\" : \"phone\"));\n            element.addClass(that.osCssClass + \" \" + getOrientationClass(element));\n            if (this.options.useNativeScrolling) {\n                element.parent().addClass(\"km-native-scrolling\");\n            }\n\n            if (CHROME) {\n                element.addClass(\"km-ios-chrome\");\n            }\n\n            if (support.wpDevicePixelRatio) {\n                element.parent().css(\"font-size\", support.wpDevicePixelRatio + \"em\");\n            }\n\n            if (this.options.retina) {\n                element.parent().addClass(\"km-retina\");\n                element.parent().css(\"font-size\", (support.devicePixelRatio * FONT_SIZE_COEF) + \"em\");\n            }\n\n            if (BERRYPHONEGAP) {\n                applyViewportHeight();\n            }\n            if (that.options.useNativeScrolling) {\n                element.parent().addClass(\"km-native-scrolling\");\n            } else if (ENABLE_CLIP) {\n                size = (screen.availWidth > screen.availHeight ? screen.availWidth : screen.availHeight) + 200;\n                $(clipTemplate({ width: size, height: size })).appendTo(HEAD);\n            }\n\n            if (BROKEN_WEBVIEW_RESIZE) {\n                that._resizeToScreenHeight();\n            }\n\n            kendo.onResize(function() {\n                element\n                    .removeClass(\"km-horizontal km-vertical\")\n                    .addClass(getOrientationClass(element));\n\n                if (that.options.useNativeScrolling) {\n                    setMinimumHeight(element);\n                }\n\n                if (BROKEN_WEBVIEW_RESIZE) {\n                    that._resizeToScreenHeight();\n                }\n\n                if (BERRYPHONEGAP) {\n                    applyViewportHeight();\n                }\n\n                kendo.resize(element);\n            });\n        },\n\n        _clearExistingMeta: function() {\n            HEAD.find(\"meta\")\n                .filter(\"[name|='apple-mobile-web-app'],[name|='msapplication-tap'],[name='viewport']\")\n                .remove();\n        },\n\n        _attachMeta: function() {\n            var options = this.options,\n                icon = options.icon, size;\n\n            this._clearExistingMeta();\n\n            if (!BERRYPHONEGAP) {\n                HEAD.prepend(viewportTemplate({ height: \"\", scale : this.options.retina ? 1 / support.devicePixelRatio : \"1.0\" }));\n            }\n\n            HEAD.prepend(systemMeta(options));\n\n            if (icon) {\n                if (typeof icon === \"string\") {\n                    icon = { \"\" : icon };\n                }\n\n                for(size in icon) {\n                    HEAD.prepend(iconMeta({ icon: icon[size], size: size }));\n                }\n            }\n\n            if (options.useNativeScrolling) {\n                setMinimumHeight(this.element);\n            }\n        },\n\n        _attachHideBarHandlers: function() {\n            var that = this,\n                hideBar = proxy(that, \"_hideBar\");\n\n            if (support.mobileOS.appMode || !that.options.hideAddressBar || !HIDEBAR || that.options.useNativeScrolling) {\n                return;\n            }\n\n            that._initialHeight = {};\n\n            WINDOW.on(\"load\", hideBar);\n\n            kendo.onResize(function() {\n                setTimeout(window.scrollTo, 0, 0, 1);\n            });\n        },\n\n        _setupDocumentTitle: function() {\n            var that = this,\n                defaultTitle = document.title;\n\n            that.pane.bind(\"viewShow\", function(e) {\n                var title = e.view.title;\n                document.title = title !== undefined ? title : defaultTitle;\n            });\n        },\n\n        _hideBar: function() {\n            var that = this,\n                element = that.element;\n\n            element.height(kendo.support.transforms.css + \"calc(100% + \" + BARCOMPENSATION + \"px)\");\n            $(window).trigger(kendo.support.resize);\n        }\n    });\n\n    kendo.mobile.Application = Application;\n    kendo.ui.plugin(Application, kendo.mobile, 'Mobile');\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","mobile","support","Widget","ui","Pane","DEFAULT_OS","OS","mobileOS","BERRYPHONEGAP","device","flatVersion","appMode","FONT_SIZE_COEF","VERTICAL","CHROME","browser","BROKEN_WEBVIEW_RESIZE","ios","INITIALLY_HORIZONTAL","Math","abs","orientation","HORIZONTAL","MOBILE_PLATFORMS","ios7","majorVersion","minorVersion","tablet","android","blackberry","meego","wp","viewportTemplate","template","usedWithBlock","systemMeta","clipTemplate","ENABLE_CLIP","iconMeta","HIDEBAR","SUPPORT_SWIPE_TO_GO_BACK","HISTORY_TRANSITION","BARCOMPENSATION","STATUS_BAR_HEIGHT","WINDOW","SCREEN","screen","HEAD","INIT","proxy","osCssClass","os","options","classes","push","skin","variant","setDefaultPlatform","cordova","statusBarStyle","join","wp8Background","noVariantSet","parseInt","css","split","isOrientationHorizontal","element","getOrientationClass","setMinimumHeight","pane","parent","addBack","innerHeight","applyViewportHeight","remove","append","height","innerWidth","Application","extend","init","application","this","bootstrap","document","body","fn","call","removeAttr","ns","_setupPlatform","_attachMeta","_setupElementClass","_attachHideBarHandlers","paneOptions","that","startHistory","navigateToInitial","updateDocumentTitle","_setupDocumentTitle","_startHistory","trigger","$angular","setTimeout","hideAddressBar","browserHistory","historyTransition","modelScope","transition","retina","platform","useNativeScrolling","events","navigate","url","replace","scroller","view","hideLoading","Error","showLoading","changeLoadingMessage","message","arguments","length","className","destroy","router","refreshBackgroundColorProxy","removeClass","addClass","off","on","Router","pushState","root","hashBang","bindToRouter","start","initial","_resizeToScreenHeight","includeStatusBar","attr","match","availWidth","availHeight","size","wpDevicePixelRatio","devicePixelRatio","width","appendTo","onResize","resize","_clearExistingMeta","find","filter","icon","prepend","scale","","hideBar","_initialHeight","scrollTo","defaultTitle","title","bind","e","_hideBar","transforms","plugin","amd","a1","a2","a3"],"mappings":"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"}