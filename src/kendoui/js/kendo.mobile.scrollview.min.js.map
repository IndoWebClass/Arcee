{"version":3,"file":"kendo.mobile.scrollview.min.js","sources":["kendo.mobile.scrollview.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.mobile.scrollview',[ \"./kendo.fx\", \"./kendo.data\", \"./kendo.draganddrop\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"mobile.scrollview\",\n    name: \"ScrollView\",\n    category: \"mobile\",\n    description: \"The Kendo Mobile ScrollView widget is used to scroll content wider than the device screen.\",\n    depends: [ \"fx\", \"data\", \"draganddrop\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        mobile = kendo.mobile,\n        ui = mobile.ui,\n        proxy = $.proxy,\n        Transition = kendo.effects.Transition,\n        Pane = kendo.ui.Pane,\n        PaneDimensions = kendo.ui.PaneDimensions,\n        Widget = ui.DataBoundWidget,\n        DataSource = kendo.data.DataSource,\n        Buffer = kendo.data.Buffer,\n        BatchBuffer = kendo.data.BatchBuffer,\n\n        // Math\n        math = Math,\n        abs  = math.abs,\n        ceil = math.ceil,\n        round = math.round,\n        max = math.max,\n        min = math.min,\n        floor = math.floor,\n\n        CHANGE = \"change\",\n        CHANGING = \"changing\",\n        REFRESH = \"refresh\",\n        CURRENT_PAGE_CLASS = \"current-page\",\n        VIRTUAL_PAGE_CLASS = \"virtual-page\",\n        FUNCTION = \"function\",\n        ITEM_CHANGE = \"itemChange\",\n        CLEANUP = \"cleanup\",\n\n        VIRTUAL_PAGE_COUNT = 3,\n        LEFT_PAGE = -1,\n        CETER_PAGE = 0,\n        RIGHT_PAGE = 1,\n\n        LEFT_SWIPE = -1,\n        NUDGE = 0,\n        RIGHT_SWIPE = 1;\n\n    function className(name) {\n        return \"k-\" + name + \" km-\" + name;\n    }\n\n    var Pager = kendo.Class.extend({\n        init: function(scrollView) {\n            var that = this,\n                element = $(\"<ol class='\" + className(\"pages\") + \"'/>\");\n\n            scrollView.element.append(element);\n\n            this._changeProxy = proxy(that, \"_change\");\n            this._refreshProxy = proxy(that, \"_refresh\");\n            scrollView.bind(CHANGE, this._changeProxy);\n            scrollView.bind(REFRESH, this._refreshProxy);\n\n            $.extend(that, { element: element, scrollView: scrollView });\n        },\n\n        items: function() {\n            return this.element.children();\n        },\n\n        _refresh: function(e) {\n            var pageHTML = \"\";\n\n            for (var idx = 0; idx < e.pageCount; idx ++) {\n                pageHTML += \"<li></li>\";\n            }\n\n            this.element.html(pageHTML);\n            this.items().eq(e.page).addClass(className(CURRENT_PAGE_CLASS));\n        },\n\n        _change: function(e) {\n            this.items()\n                .removeClass(className(CURRENT_PAGE_CLASS))\n                .eq(e.page).addClass(className(CURRENT_PAGE_CLASS));\n        },\n\n        destroy: function() {\n            this.scrollView.unbind(CHANGE, this._changeProxy);\n            this.scrollView.unbind(REFRESH, this._refreshProxy);\n            this.element.remove();\n        }\n    });\n\n    kendo.mobile.ui.ScrollViewPager = Pager;\n\n    var TRANSITION_END = \"transitionEnd\",\n        DRAG_START = \"dragStart\",\n        DRAG_END = \"dragEnd\";\n\n    var ElasticPane = kendo.Observable.extend({\n        init: function(element, options) {\n            var that = this;\n\n            kendo.Observable.fn.init.call(this);\n\n            this.element = element;\n            this.container = element.parent();\n\n            var movable,\n                transition,\n                userEvents,\n                dimensions,\n                dimension,\n                pane;\n\n            movable = new kendo.ui.Movable(that.element);\n\n            transition = new Transition({\n                axis: \"x\",\n                movable: movable,\n                onEnd: function() {\n                    that.trigger(TRANSITION_END);\n                }\n            });\n\n            userEvents = new kendo.UserEvents(element, {\n                fastTap: true,\n                start: function(e) {\n                    if (abs(e.x.velocity) * 2 >= abs(e.y.velocity)) {\n                        userEvents.capture();\n                    } else {\n                        userEvents.cancel();\n                    }\n\n                    that.trigger(DRAG_START, e);\n                    transition.cancel();\n                },\n                allowSelection: true,\n                end: function(e) {\n                    that.trigger(DRAG_END, e);\n                }\n            });\n\n            dimensions = new PaneDimensions({\n                element: that.element,\n                container: that.container\n            });\n\n            dimension = dimensions.x;\n\n            dimension.bind(CHANGE, function() {\n                that.trigger(CHANGE);\n            });\n\n            pane = new Pane({\n                dimensions: dimensions,\n                userEvents: userEvents,\n                movable: movable,\n                elastic: true\n            });\n\n            $.extend(that, {\n                duration: options && options.duration || 1,\n                movable: movable,\n                transition: transition,\n                userEvents: userEvents,\n                dimensions: dimensions,\n                dimension: dimension,\n                pane: pane\n            });\n\n            this.bind([TRANSITION_END, DRAG_START, DRAG_END, CHANGE], options);\n        },\n\n        size: function() {\n            return { width: this.dimensions.x.getSize(), height: this.dimensions.y.getSize() };\n        },\n\n        total: function() {\n            return this.dimension.getTotal();\n        },\n\n        offset: function() {\n            return -this.movable.x;\n        },\n\n        updateDimension: function() {\n            this.dimension.update(true);\n        },\n\n        refresh: function() {\n            this.dimensions.refresh();\n        },\n\n        moveTo: function(offset) {\n            this.movable.moveAxis(\"x\", -offset);\n        },\n\n        transitionTo: function(offset, ease, instant) {\n            if (instant) {\n                this.moveTo(-offset);\n            } else {\n                this.transition.moveTo({ location: offset, duration: this.duration, ease: ease });\n            }\n        }\n    });\n\n    kendo.mobile.ui.ScrollViewElasticPane = ElasticPane;\n\n    var ScrollViewContent = kendo.Observable.extend({\n        init: function(element, pane, options) {\n            var that = this;\n\n            kendo.Observable.fn.init.call(this);\n            that.element = element;\n            that.pane = pane;\n            that._getPages();\n            this.page = 0;\n            this.pageSize = options.pageSize || 1;\n            this.contentHeight = options.contentHeight;\n            this.enablePager = options.enablePager;\n            this.pagerOverlay = options.pagerOverlay;\n        },\n\n        scrollTo: function(page, instant) {\n            this.page = page;\n            this.pane.transitionTo(- page * this.pane.size().width, Transition.easeOutExpo, instant);\n        },\n\n        paneMoved: function(swipeType, bounce, callback, /*internal*/ instant) {\n            var that = this,\n                pane = that.pane,\n                width = pane.size().width * that.pageSize,\n                approx = round,\n                ease = bounce ? Transition.easeOutBack : Transition.easeOutExpo,\n                snap,\n                nextPage;\n\n            if (swipeType === LEFT_SWIPE) {\n                approx = ceil;\n            } else if (swipeType === RIGHT_SWIPE) {\n                approx = floor;\n            }\n\n            nextPage = approx(pane.offset() / width);\n\n            snap = max(that.minSnap, min(-nextPage * width, that.maxSnap));\n\n            if (nextPage != that.page) {\n                if (callback && callback({ currentPage: that.page, nextPage: nextPage })) {\n                    snap = -that.page * pane.size().width;\n                }\n            }\n\n            pane.transitionTo(snap, ease, instant);\n        },\n\n        updatePage: function() {\n            var pane = this.pane,\n                page = round(pane.offset() / pane.size().width);\n\n            if (page != this.page) {\n                this.page = page;\n                return true;\n            }\n\n            return false;\n        },\n\n        forcePageUpdate: function() {\n            return this.updatePage();\n        },\n\n        resizeTo: function(size) {\n            var pane = this.pane,\n                width = size.width;\n\n            this.pageElements.width(width);\n\n            if (this.contentHeight === \"100%\") {\n                var containerHeight = this.element.parent().height();\n\n                if (this.enablePager === true) {\n                    var pager = this.element.parent().find(\"ol.km-pages\");\n                    if (!this.pagerOverlay && pager.length) {\n                        containerHeight -= kendo._outerHeight(pager, true);\n                    }\n                }\n\n                this.element.css(\"height\", containerHeight);\n                this.pageElements.css(\"height\", containerHeight);\n            }\n\n            // re-read pane dimension after the pageElements have been resized.\n            pane.updateDimension();\n\n            if (!this._paged) {\n                this.page = floor(pane.offset() / width);\n            }\n\n            this.scrollTo(this.page, true);\n\n            this.pageCount = ceil(pane.total() / width);\n            this.minSnap = - (this.pageCount - 1) * width;\n            this.maxSnap = 0;\n        },\n\n        _getPages: function() {\n            this.pageElements = this.element.find(kendo.roleSelector(\"page\"));\n            this._paged = this.pageElements.length > 0;\n        }\n    });\n\n    kendo.mobile.ui.ScrollViewContent = ScrollViewContent;\n\n    var VirtualScrollViewContent = kendo.Observable.extend({\n        init: function(element, pane, options) {\n            var that = this;\n\n            kendo.Observable.fn.init.call(this);\n\n            that.element = element;\n            that.pane = pane;\n            that.options = options;\n            that._templates();\n            that.page = options.page || 0;\n            that.pages = [];\n            that._initPages();\n            that.resizeTo(that.pane.size());\n\n            that.pane.dimension.forceEnabled();\n        },\n\n        setDataSource: function(dataSource) {\n            this.dataSource = DataSource.create(dataSource);\n            this._buffer();\n            this._pendingPageRefresh = false;\n            this._pendingWidgetRefresh = false;\n        },\n\n        _viewShow: function() {\n            var that = this;\n            if (that._pendingWidgetRefresh) {\n                setTimeout(function() {\n                    that._resetPages();\n                }, 0);\n                that._pendingWidgetRefresh = false;\n            }\n        },\n\n        _buffer: function() {\n            var itemsPerPage = this.options.itemsPerPage;\n\n            if (this.buffer) {\n                this.buffer.destroy();\n            }\n\n            if (itemsPerPage > 1) {\n                this.buffer = new BatchBuffer(this.dataSource, itemsPerPage);\n            } else {\n                this.buffer = new Buffer(this.dataSource, itemsPerPage * 3);\n            }\n\n            this._resizeProxy = proxy(this, \"_onResize\");\n            this._resetProxy = proxy(this, \"_onReset\");\n            this._endReachedProxy = proxy(this, \"_onEndReached\");\n\n            this.buffer.bind({\n                \"resize\": this._resizeProxy,\n                \"reset\": this._resetProxy,\n                \"endreached\": this._endReachedProxy\n            });\n        },\n\n        _templates: function() {\n            var template = this.options.template,\n                emptyTemplate = this.options.emptyTemplate,\n                templateProxy = {},\n                emptyTemplateProxy = {};\n\n            if (typeof template === FUNCTION) {\n                templateProxy.template = template;\n                template = \"#=this.template(data)#\";\n            }\n\n            this.template = proxy(kendo.template(template), templateProxy);\n\n            if (typeof emptyTemplate === FUNCTION) {\n                emptyTemplateProxy.emptyTemplate = emptyTemplate;\n                emptyTemplate = \"#=this.emptyTemplate(data)#\";\n            }\n\n            this.emptyTemplate = proxy(kendo.template(emptyTemplate), emptyTemplateProxy);\n        },\n\n        _initPages: function() {\n            var pages = this.pages,\n                element = this.element,\n                page;\n\n            for (var i = 0; i < VIRTUAL_PAGE_COUNT; i++) {\n                page = new Page(element);\n                pages.push(page);\n            }\n\n            this.pane.updateDimension();\n        },\n\n        resizeTo: function(size) {\n            var pages = this.pages,\n                pane = this.pane;\n\n            for (var i = 0; i < pages.length; i++) {\n                pages[i].setWidth(size.width);\n            }\n\n            if (this.options.contentHeight === \"auto\") {\n                this.element.css(\"height\", this.pages[1].element.height());\n            }\n\n            else if (this.options.contentHeight === \"100%\") {\n                var containerHeight = this.element.parent().height();\n\n                if (this.options.enablePager === true) {\n                    var pager = this.element.parent().find(\"ol.km-pages\");\n                    if (!this.options.pagerOverlay && pager.length) {\n                        containerHeight -= kendo._outerHeight(pager, true);\n                    }\n                }\n\n                this.element.css(\"height\", containerHeight);\n                pages[0].element.css(\"height\", containerHeight);\n                pages[1].element.css(\"height\", containerHeight);\n                pages[2].element.css(\"height\", containerHeight);\n            }\n\n            pane.updateDimension();\n\n            this._repositionPages();\n\n            this.width = size.width;\n        },\n\n        scrollTo: function(page) {\n            var buffer = this.buffer,\n                dataItem;\n\n            buffer.syncDataSource();\n            dataItem = buffer.at(page);\n\n            if (!dataItem) {\n                return;\n            }\n\n            this._updatePagesContent(page);\n\n            this.page = page;\n        },\n\n        paneMoved: function(swipeType, bounce, callback, /*internal*/ instant) {\n            var that = this,\n                pane = that.pane,\n                width = pane.size().width,\n                offset = pane.offset(),\n                thresholdPassed = Math.abs(offset) >= width / 3,\n                ease = bounce ? kendo.effects.Transition.easeOutBack : kendo.effects.Transition. easeOutExpo,\n                isEndReached = that.page + 2 > that.buffer.total(),\n                nextPage,\n                delta = 0;\n\n            if (swipeType === RIGHT_SWIPE) {\n                if (that.page !== 0) {\n                    delta = -1; //backward\n                }\n            } else if (swipeType === LEFT_SWIPE && !isEndReached) {\n                delta = 1; //forward\n            } else if (offset > 0 && (thresholdPassed && !isEndReached)) {\n                delta = 1; //forward\n            } else if (offset < 0 && thresholdPassed) {\n                if (that.page !== 0) {\n                    delta = -1; //backward\n                }\n            }\n\n            nextPage = that.page;\n            if (delta) {\n                nextPage = (delta > 0) ? nextPage + 1 : nextPage - 1;\n            }\n\n            if (callback && callback({ currentPage: that.page, nextPage: nextPage })) {\n                delta = 0;\n            }\n\n            if (delta === 0) {\n                that._cancelMove(ease, instant);\n            } else if (delta === -1) {\n                that._moveBackward(instant);\n            } else if (delta === 1) {\n                that._moveForward(instant);\n            }\n        },\n\n        updatePage: function() {\n            var pages = this.pages;\n\n            if (this.pane.offset() === 0) {\n                return false;\n            }\n\n            if (this.pane.offset() > 0) {\n                pages.push(this.pages.shift());//forward\n                this.page++;\n                this.setPageContent(pages[2], this.page + 1);\n            } else {\n                pages.unshift(this.pages.pop()); //back\n                this.page--;\n                this.setPageContent(pages[0], this.page - 1);\n            }\n\n            this._repositionPages();\n\n            this._resetMovable();\n\n            return true;\n        },\n\n        forcePageUpdate: function() {\n            var offset = this.pane.offset(),\n                threshold  = this.pane.size().width * 3/4;\n\n            if (abs(offset) > threshold) {\n                return this.updatePage();\n            }\n\n            return false;\n        },\n\n        _resetMovable: function() {\n            this.pane.moveTo(0);\n        },\n\n        _moveForward: function(instant) {\n            this.pane.transitionTo(-this.width, kendo.effects.Transition.easeOutExpo, instant);\n        },\n\n        _moveBackward: function(instant) {\n            this.pane.transitionTo(this.width, kendo.effects.Transition.easeOutExpo, instant);\n        },\n\n        _cancelMove: function(ease, /*internal*/ instant) {\n            this.pane.transitionTo(0, ease, instant);\n        },\n\n        _resetPages: function() {\n            this.page = this.options.page || 0;\n\n            this._updatePagesContent(this.page);\n            this._repositionPages();\n\n            this.trigger(\"reset\");\n        },\n\n        _onResize: function() {\n            this.pageCount = ceil(this.dataSource.total() / this.options.itemsPerPage);\n\n            if (this._pendingPageRefresh) {\n                this._updatePagesContent(this.page);\n                this._pendingPageRefresh = false;\n            }\n\n            this.trigger(\"resize\");\n        },\n\n        _onReset: function() {\n            this.pageCount = ceil(this.dataSource.total() / this.options.itemsPerPage);\n            this._resetPages();\n        },\n\n        _onEndReached: function() {\n            this._pendingPageRefresh = true;\n        },\n\n        _repositionPages: function() {\n            var pages = this.pages;\n\n            pages[0].position(LEFT_PAGE);\n            pages[1].position(CETER_PAGE);\n            pages[2].position(RIGHT_PAGE);\n        },\n\n        _updatePagesContent: function(offset) {\n            var pages = this.pages,\n                currentPage = offset || 0;\n\n            this.setPageContent(pages[0], currentPage - 1);\n            this.setPageContent(pages[1], currentPage);\n            this.setPageContent(pages[2], currentPage + 1);\n        },\n\n        setPageContent: function(page, index) {\n            var buffer = this.buffer,\n                template = this.template,\n                emptyTemplate = this.emptyTemplate,\n                view = null;\n\n            if (index >= 0) {\n                view = buffer.at(index);\n                if (Array.isArray(view) && !view.length) {\n                    view = null;\n                }\n            }\n\n            this.trigger(CLEANUP, { item: page.element });\n\n            if (view !== null) {\n                page.content(template(view));\n            } else {\n                page.content(emptyTemplate({}));\n            }\n\n            kendo.mobile.init(page.element);\n            this.trigger(ITEM_CHANGE, { item: page.element, data: view, ns: kendo.mobile.ui });\n\n        }\n    });\n\n    kendo.mobile.ui.VirtualScrollViewContent = VirtualScrollViewContent;\n\n    var Page = kendo.Class.extend({\n        init: function(container) {\n            this.element = $(\"<div class='\" + className(VIRTUAL_PAGE_CLASS) + \"'></div>\");\n            this.width = container.width();\n            this.element.width(this.width);\n            container.append(this.element);\n        },\n\n        content: function(theContent) {\n            this.element.html(theContent);\n        },\n\n        position: function(position) { //position can be -1, 0, 1\n            this.element.css(\"transform\", \"translate3d(\" + this.width * position + \"px, 0, 0)\");\n        },\n\n        setWidth: function(width) {\n            this.width = width;\n            this.element.width(width);\n        }\n    });\n\n    kendo.mobile.ui.VirtualPage = Page;\n\n    var ScrollView = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            options = that.options;\n            element = that.element;\n\n            kendo.stripWhitespace(element[0]);\n\n            element\n                .wrapInner(\"<div/>\")\n                .addClass(\"k-widget \" + className(\"scrollview\"));\n\n            if (this.options.enablePager) {\n                this.pager = new Pager(this);\n\n                if (this.options.pagerOverlay) {\n                    element.addClass(className(\"scrollview-overlay\"));\n                }\n            }\n\n            that.inner = element.children().first();\n            that.page = 0;\n            that.inner.css(\"height\", options.contentHeight);\n\n            that.pane = new ElasticPane(that.inner, {\n                duration: this.options.duration,\n                transitionEnd: proxy(this, \"_transitionEnd\"),\n                dragStart: proxy(this, \"_dragStart\"),\n                dragEnd: proxy(this, \"_dragEnd\"),\n                change: proxy(this, REFRESH)\n            });\n\n            that.bind(\"resize\", function() {\n                that.pane.refresh();\n            });\n\n            that.page = options.page;\n\n            var empty = this.inner.children().length === 0;\n\n            var content = empty ? new VirtualScrollViewContent(that.inner, that.pane, options) : new ScrollViewContent(that.inner, that.pane, options);\n\n            content.page = that.page;\n\n            content.bind(\"reset\", function() {\n                this._pendingPageRefresh = false;\n                that._syncWithContent();\n                that.trigger(REFRESH, { pageCount: content.pageCount, page: content.page });\n            });\n\n            content.bind(\"resize\", function() {\n                that.trigger(REFRESH, { pageCount: content.pageCount, page: content.page });\n            });\n\n            content.bind(ITEM_CHANGE, function(e) {\n                that.trigger(ITEM_CHANGE, e);\n\n                that.angular(\"compile\", function() {\n                    return { elements: e.item, data: [ { dataItem: e.data } ] };\n                });\n            });\n\n            content.bind(CLEANUP, function(e) {\n                that.angular(\"cleanup\", function() {\n                    return { elements: e.item };\n                });\n            });\n\n            that._content = content;\n            that.setDataSource(options.dataSource);\n\n            var mobileContainer = that.container();\n\n            if (mobileContainer.nullObject) {\n                that.viewInit();\n                that.viewShow();\n            } else {\n                mobileContainer.bind(\"show\", proxy(this, \"viewShow\")).bind(\"init\", proxy(this, \"viewInit\"));\n            }\n        },\n\n        options: {\n            name: \"ScrollView\",\n            page: 0,\n            duration: 400,\n            velocityThreshold: 0.8,\n            contentHeight: \"auto\",\n            pageSize: 1,\n            itemsPerPage: 1,\n            bounceVelocityThreshold: 1.6,\n            enablePager: true,\n            pagerOverlay: false,\n            autoBind: true,\n            template: \"\",\n            emptyTemplate: \"\"\n        },\n\n        events: [\n            CHANGING,\n            CHANGE,\n            REFRESH\n        ],\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            kendo.destroy(this.element);\n        },\n\n        viewInit: function() {\n            if (this.options.autoBind) {\n                this._content.scrollTo(this._content.page, true);\n            }\n        },\n\n        viewShow: function() {\n            this.pane.refresh();\n        },\n\n        refresh: function() {\n            var content = this._content;\n\n            content.resizeTo(this.pane.size());\n            this.page = content.page;\n            this.trigger(REFRESH, { pageCount: content.pageCount, page: content.page });\n        },\n\n        content: function(html) {\n           this.element.children().first().html(html);\n           this._content._getPages();\n           this.pane.refresh();\n        },\n\n        value: function(item) {\n            var dataSource = this.dataSource;\n\n            if (item) {\n                this.scrollTo(dataSource.indexOf(item), true);\n            } else {\n                return dataSource.at(this.page);\n            }\n        },\n\n        scrollTo: function(page, instant) {\n            this._content.scrollTo(page, instant);\n            this._syncWithContent();\n        },\n\n        prev: function() {\n            var that = this,\n                prevPage = that.page - 1;\n\n            if (that._content instanceof VirtualScrollViewContent) {\n                that._content.paneMoved(RIGHT_SWIPE, undefined, function(eventData) {\n                    return that.trigger(CHANGING, eventData);\n                });\n            } else if (prevPage > -1) {\n                that.scrollTo(prevPage);\n            }\n        },\n\n        next: function() {\n            var that = this,\n                nextPage = that.page + 1;\n\n            if (that._content instanceof VirtualScrollViewContent) {\n                that._content.paneMoved(LEFT_SWIPE, undefined, function(eventData) {\n                    return that.trigger(CHANGING, eventData);\n                });\n            } else if (nextPage < that._content.pageCount) {\n                that.scrollTo(nextPage);\n            }\n        },\n\n        setDataSource: function(dataSource) {\n            if (!(this._content instanceof VirtualScrollViewContent)) {\n                return;\n            }\n            // the scrollview should have a ready datasource for MVVM to function properly. But an empty datasource should not empty the element\n            var emptyDataSource = !dataSource;\n            this.dataSource = DataSource.create(dataSource);\n\n            this._content.setDataSource(this.dataSource);\n\n            if (this.options.autoBind && !emptyDataSource) {\n                // this.items().remove();\n                this.dataSource.fetch();\n            }\n        },\n\n        items: function() {\n            return this.element.find(\".km-\" + VIRTUAL_PAGE_CLASS);\n        },\n\n        _syncWithContent: function() {\n            var pages = this._content.pages,\n                buffer = this._content.buffer,\n                data,\n                element;\n\n            this.page = this._content.page;\n\n            data = buffer ? buffer.at(this.page) : undefined;\n            if (!(data instanceof Array)) {\n                data = [data];\n            }\n            element = pages ? pages[1].element : undefined;\n\n            this.trigger(CHANGE, { page: this.page, element: element, data: data });\n        },\n\n        _dragStart: function() {\n            if (this._content.forcePageUpdate()) {\n                this._syncWithContent();\n            }\n        },\n\n        _dragEnd: function(e) {\n            var that = this,\n                velocity = e.x.velocity,\n                velocityThreshold = this.options.velocityThreshold,\n                swipeType = NUDGE,\n                bounce = abs(velocity) > this.options.bounceVelocityThreshold;\n\n            if (velocity > velocityThreshold) {\n                swipeType = RIGHT_SWIPE;\n            } else if (velocity < -velocityThreshold) {\n                swipeType = LEFT_SWIPE;\n            }\n\n            this._content.paneMoved(swipeType, bounce, function(eventData) {\n                return that.trigger(CHANGING, eventData);\n            });\n        },\n\n        _transitionEnd: function() {\n            if (this._content.updatePage()) {\n                this._syncWithContent();\n            }\n        }\n    });\n\n    ui.plugin(ScrollView);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","mobile","ui","proxy","Transition","effects","Pane","PaneDimensions","Widget","DataBoundWidget","DataSource","data","Buffer","BatchBuffer","math","Math","abs","ceil","round","max","min","floor","CHANGE","CHANGING","REFRESH","CURRENT_PAGE_CLASS","VIRTUAL_PAGE_CLASS","FUNCTION","ITEM_CHANGE","CLEANUP","VIRTUAL_PAGE_COUNT","LEFT_PAGE","CETER_PAGE","RIGHT_PAGE","LEFT_SWIPE","NUDGE","RIGHT_SWIPE","className","Pager","Class","extend","init","scrollView","that","this","element","append","_changeProxy","_refreshProxy","bind","items","children","_refresh","e","pageHTML","idx","pageCount","html","eq","page","addClass","_change","removeClass","destroy","unbind","remove","TRANSITION_END","ScrollViewPager","DRAG_START","DRAG_END","ElasticPane","Observable","options","fn","call","container","parent","movable","transition","userEvents","dimensions","dimension","pane","Movable","axis","onEnd","trigger","UserEvents","fastTap","start","x","velocity","y","capture","cancel","allowSelection","end","elastic","duration","size","width","getSize","height","total","getTotal","offset","updateDimension","update","refresh","moveTo","moveAxis","transitionTo","ease","instant","location","ScrollViewContent","ScrollViewElasticPane","_getPages","pageSize","contentHeight","enablePager","pagerOverlay","scrollTo","easeOutExpo","paneMoved","swipeType","bounce","callback","approx","easeOutBack","snap","nextPage","minSnap","maxSnap","currentPage","updatePage","forcePageUpdate","resizeTo","pageElements","containerHeight","pager","find","length","_outerHeight","css","_paged","roleSelector","VirtualScrollViewContent","_templates","pages","_initPages","forceEnabled","setDataSource","dataSource","create","_buffer","_pendingPageRefresh","_pendingWidgetRefresh","_viewShow","setTimeout","_resetPages","itemsPerPage","buffer","_resizeProxy","_resetProxy","_endReachedProxy","resize","reset","endreached","template","emptyTemplate","templateProxy","emptyTemplateProxy","i","Page","push","setWidth","_repositionPages","dataItem","syncDataSource","at","_updatePagesContent","thresholdPassed","isEndReached","delta","_cancelMove","_moveBackward","_moveForward","shift","setPageContent","unshift","pop","_resetMovable","threshold","_onResize","_onReset","_onEndReached","position","index","view","Array","isArray","item","content","ns","theContent","ScrollView","VirtualPage","stripWhitespace","wrapInner","inner","first","transitionEnd","dragStart","dragEnd","change","empty","_syncWithContent","angular","elements","_content","mobileContainer","nullObject","viewInit","viewShow","velocityThreshold","bounceVelocityThreshold","autoBind","events","value","indexOf","prev","prevPage","eventData","next","emptyDataSource","fetch","_dragStart","_dragEnd","_transitionEnd","plugin","amd","a1","a2","a3"],"mappings":"CAwBA,SAAaA,QACTA,OAAO,0BAA0B,CAAE,aAAc,eAAgB,uBAClE,WAEH,IAAIC,EAAW,CACXC,GAAI,oBACJC,KAAM,aACNC,SAAU,SACVC,YAAa,6FACbC,QAAS,CAAE,KAAM,OAAQ,gBAGnBC,EA43BPC,OAAOC,MAAMC,OA53BHC,OAAb,EACQF,EAAQD,OAAOC,MACfG,EACAC,EADSJ,EAAMG,OACHC,GACZC,EAAQP,EAAEO,MACVC,EAAaN,EAAMO,QAAQD,WAC3BE,EAAOR,EAAMI,GAAGI,KAChBC,EAAiBT,EAAMI,GAAGK,eAC1BC,EAASN,EAAGO,gBACZC,EAAaZ,EAAMa,KAAKD,WACxBE,EAASd,EAAMa,KAAKC,OACpBC,EAAcf,EAAMa,KAAKE,YAGzBC,EAAOC,KACPC,EAAOF,EAAKE,IACZC,EAAOH,EAAKG,KACZC,EAAQJ,EAAKI,MACbC,EAAML,EAAKK,IACXC,EAAMN,EAAKM,IACXC,EAAQP,EAAKO,MAEbC,EAAS,SACTC,EAAW,WACXC,EAAU,UACVC,EAAqB,eACrBC,EAAqB,eACrBC,EAAW,WACXC,EAAc,aACdC,EAAU,UAEVC,EAAqB,EACrBC,GAAa,EACbC,EAAa,EACbC,EAAa,EAEbC,GAAc,EACdC,EAAQ,EACRC,EAAc,EAElB,SAASC,EAAU7C,GACf,MAAO,KAAOA,EAAO,OAASA,EAGlC,IAAI8C,EAAQxC,EAAMyC,MAAMC,OAAO,CAC3BC,KAAM,SAASC,GACX,IAAIC,EAAOC,KACPC,EAAUjD,EAAE,cAAgByC,EAAU,SAAW,OAErDK,EAAWG,QAAQC,OAAOD,GAE1BD,KAAKG,aAAe5C,EAAMwC,EAAM,WAChCC,KAAKI,cAAgB7C,EAAMwC,EAAM,YACjCD,EAAWO,KAAK3B,EAAQsB,KAAKG,cAC7BL,EAAWO,KAAKzB,EAASoB,KAAKI,eAE9BpD,EAAE4C,OAAOG,EAAM,CAAEE,QAASA,EAASH,WAAYA,KAGnDQ,MAAO,WACH,OAAON,KAAKC,QAAQM,YAGxBC,SAAU,SAASC,GACf,IAAIC,EAAW,GAEf,IAAK,IAAIC,EAAM,EAAGA,EAAMF,EAAEG,UAAWD,IACjCD,GAAY,YAGhBV,KAAKC,QAAQY,KAAKH,GAClBV,KAAKM,QAAQQ,GAAGL,EAAEM,MAAMC,SAASvB,EAAUZ,KAG/CoC,QAAS,SAASR,GACdT,KAAKM,QACAY,YAAYzB,EAAUZ,IACtBiC,GAAGL,EAAEM,MAAMC,SAASvB,EAAUZ,KAGvCsC,QAAS,WACLnB,KAAKF,WAAWsB,OAAO1C,EAAQsB,KAAKG,cACpCH,KAAKF,WAAWsB,OAAOxC,EAASoB,KAAKI,eACrCJ,KAAKC,QAAQoB,YAMjBC,GAFJpE,EAAMG,OAAOC,GAAGiE,gBAAkB7B,EAEb,iBACjB8B,EAAa,YACbC,EAAW,UAEXC,EAAcxE,EAAMyE,WAAW/B,OAAO,CACtCC,KAAM,SAASI,EAAS2B,GACpB,IAAI7B,EAAOC,KAEX9C,EAAMyE,WAAWE,GAAGhC,KAAKiC,KAAK9B,MAE9BA,KAAKC,QAAUA,EACfD,KAAK+B,UAAY9B,EAAQ+B,SAEzB,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEJL,EAAU,IAAI/E,EAAMI,GAAGiF,QAAQxC,EAAKE,SAEpCiC,EAAa,IAAI1E,EAAW,CACxBgF,KAAM,IACNP,QAASA,EACTQ,MAAO,WACH1C,EAAK2C,QAAQpB,MAIrBa,EAAa,IAAIjF,EAAMyF,WAAW1C,EAAS,CACvC2C,QAAS,KACTC,MAAO,SAASpC,GACZ,GAAIrC,EAAIqC,EAAEqC,EAAEC,UAAY,GAAK3E,EAAIqC,EAAEuC,EAAED,UACjCZ,EAAWc,eAEXd,EAAWe,SAGfnD,EAAK2C,QAAQlB,EAAYf,GACzByB,EAAWgB,UAEfC,eAAgB,KAChBC,IAAK,SAAS3C,GACVV,EAAK2C,QAAQjB,EAAUhB,MAI/B2B,EAAa,IAAIzE,EAAe,CAC5BsC,QAASF,EAAKE,QACd8B,UAAWhC,EAAKgC,YAGpBM,EAAYD,EAAWU,EAEvBT,EAAUhC,KAAK3B,EAAQ,WACnBqB,EAAK2C,QAAQhE,KAGjB4D,EAAO,IAAI5E,EAAK,CACZ0E,WAAYA,EACZD,WAAYA,EACZF,QAASA,EACToB,QAAS,OAGbrG,EAAE4C,OAAOG,EAAM,CACXuD,SAAU1B,GAAWA,EAAQ0B,UAAY,EACzCrB,QAASA,EACTC,WAAYA,EACZC,WAAYA,EACZC,WAAYA,EACZC,UAAWA,EACXC,KAAMA,IAGVtC,KAAKK,KAAK,CAACiB,EAAgBE,EAAYC,EAAU/C,GAASkD,IAG9D2B,KAAM,WACF,MAAO,CAAEC,MAAOxD,KAAKoC,WAAWU,EAAEW,UAAWC,OAAQ1D,KAAKoC,WAAWY,EAAES,YAG3EE,MAAO,WACH,OAAO3D,KAAKqC,UAAUuB,YAG1BC,OAAQ,WACJ,OAAQ7D,KAAKiC,QAAQa,GAGzBgB,gBAAiB,WACb9D,KAAKqC,UAAU0B,OAAO,OAG1BC,QAAS,WACLhE,KAAKoC,WAAW4B,WAGpBC,OAAQ,SAASJ,GACb7D,KAAKiC,QAAQiC,SAAS,KAAML,IAGhCM,aAAc,SAASN,EAAQO,EAAMC,GACjC,GAAIA,EACArE,KAAKiE,QAAQJ,QAEb7D,KAAKkC,WAAW+B,OAAO,CAAEK,SAAUT,EAAQP,SAAUtD,KAAKsD,SAAUc,KAAMA,OAOlFG,GAFJrH,EAAMG,OAAOC,GAAGkH,sBAAwB9C,EAEhBxE,EAAMyE,WAAW/B,OAAO,CAC5CC,KAAM,SAASI,EAASqC,EAAMV,GAC1B,IAAI7B,EAAOC,KAEX9C,EAAMyE,WAAWE,GAAGhC,KAAKiC,KAAK9B,MAC9BD,EAAKE,QAAUA,EACfF,EAAKuC,KAAOA,EACZvC,EAAK0E,YACLzE,KAAKe,KAAO,EACZf,KAAK0E,SAAW9C,EAAQ8C,UAAY,EACpC1E,KAAK2E,cAAgB/C,EAAQ+C,cAC7B3E,KAAK4E,YAAchD,EAAQgD,YAC3B5E,KAAK6E,aAAejD,EAAQiD,cAGhCC,SAAU,SAAS/D,EAAMsD,GACrBrE,KAAKe,KAAOA,EACZf,KAAKsC,KAAK6B,cAAepD,EAAOf,KAAKsC,KAAKiB,OAAOC,MAAOhG,EAAWuH,YAAaV,IAGpFW,UAAW,SAASC,EAAWC,EAAQC,EAAuBd,GAC1D,IAAItE,EAAOC,KACPsC,EAAOvC,EAAKuC,KACZkB,EAAQlB,EAAKiB,OAAOC,MAAQzD,EAAK2E,SACjCU,EAAS9G,EACT8F,EAAOc,EAAS1H,EAAW6H,YAAc7H,EAAWuH,YACpDO,EACAC,EAEJ,GAAIN,IAAc3F,EACd8F,EAAS/G,OACN,GAAI4G,IAAczF,EACrB4F,EAAS3G,EAGb8G,EAAWH,EAAO9C,EAAKuB,SAAWL,GAElC8B,EAAO/G,EAAIwB,EAAKyF,QAAShH,GAAK+G,EAAW/B,EAAOzD,EAAK0F,UAErD,GAAIF,GAAYxF,EAAKgB,KACjB,GAAIoE,GAAYA,EAAS,CAAEO,YAAa3F,EAAKgB,KAAMwE,SAAUA,IACzDD,GAAQvF,EAAKgB,KAAOuB,EAAKiB,OAAOC,MAIxClB,EAAK6B,aAAamB,EAAMlB,EAAMC,IAGlCsB,WAAY,WACR,IAAIrD,EAAOtC,KAAKsC,KACZvB,EAAOzC,EAAMgE,EAAKuB,SAAWvB,EAAKiB,OAAOC,OAE7C,GAAIzC,GAAQf,KAAKe,KAAM,CACnBf,KAAKe,KAAOA,EACZ,OAAO,KAGX,OAAO,OAGX6E,gBAAiB,WACb,OAAO5F,KAAK2F,cAGhBE,SAAU,SAAStC,GACf,IAAIjB,EAAOtC,KAAKsC,KACZkB,EAAQD,EAAKC,MAEjBxD,KAAK8F,aAAatC,MAAMA,GAExB,GAAIxD,KAAK2E,gBAAkB,OAAQ,CAC/B,IAAIoB,EAAkB/F,KAAKC,QAAQ+B,SAAS0B,SAE5C,GAAI1D,KAAK4E,cAAgB,KAAM,CAC3B,IAAIoB,EAAQhG,KAAKC,QAAQ+B,SAASiE,KAAK,eACvC,IAAKjG,KAAK6E,cAAgBmB,EAAME,OAC5BH,GAAmB7I,EAAMiJ,aAAaH,EAAO,MAIrDhG,KAAKC,QAAQmG,IAAI,SAAUL,GAC3B/F,KAAK8F,aAAaM,IAAI,SAAUL,GAIpCzD,EAAKwB,kBAEL,IAAK9D,KAAKqG,OACNrG,KAAKe,KAAOtC,EAAM6D,EAAKuB,SAAWL,GAGtCxD,KAAK8E,SAAS9E,KAAKe,KAAM,MAEzBf,KAAKY,UAAYvC,EAAKiE,EAAKqB,QAAUH,GACrCxD,KAAKwF,UAAaxF,KAAKY,UAAY,GAAK4C,EACxCxD,KAAKyF,QAAU,GAGnBhB,UAAW,WACPzE,KAAK8F,aAAe9F,KAAKC,QAAQgG,KAAK/I,EAAMoJ,aAAa,SACzDtG,KAAKqG,OAASrG,KAAK8F,aAAaI,OAAS,MAM7CK,GAFJrJ,EAAMG,OAAOC,GAAGiH,kBAAoBA,EAELrH,EAAMyE,WAAW/B,OAAO,CACnDC,KAAM,SAASI,EAASqC,EAAMV,GAC1B,IAAI7B,EAAOC,KAEX9C,EAAMyE,WAAWE,GAAGhC,KAAKiC,KAAK9B,MAE9BD,EAAKE,QAAUA,EACfF,EAAKuC,KAAOA,EACZvC,EAAK6B,QAAUA,EACf7B,EAAKyG,aACLzG,EAAKgB,KAAOa,EAAQb,MAAQ,EAC5BhB,EAAK0G,MAAQ,GACb1G,EAAK2G,aACL3G,EAAK8F,SAAS9F,EAAKuC,KAAKiB,QAExBxD,EAAKuC,KAAKD,UAAUsE,gBAGxBC,cAAe,SAASC,GACpB7G,KAAK6G,WAAa/I,EAAWgJ,OAAOD,GACpC7G,KAAK+G,UACL/G,KAAKgH,oBAAsB,MAC3BhH,KAAKiH,sBAAwB,OAGjCC,UAAW,WACP,IAAInH,EAAOC,KACX,GAAID,EAAKkH,sBAAuB,CAC5BE,WAAW,WACPpH,EAAKqH,eACN,GACHrH,EAAKkH,sBAAwB,QAIrCF,QAAS,WACL,IAAIM,EAAerH,KAAK4B,QAAQyF,aAEhC,GAAIrH,KAAKsH,OACLtH,KAAKsH,OAAOnG,UAGhB,GAAIkG,EAAe,EACfrH,KAAKsH,OAAS,IAAIrJ,EAAY+B,KAAK6G,WAAYQ,QAE/CrH,KAAKsH,OAAS,IAAItJ,EAAOgC,KAAK6G,WAAYQ,EAAe,GAG7DrH,KAAKuH,aAAehK,EAAMyC,KAAM,aAChCA,KAAKwH,YAAcjK,EAAMyC,KAAM,YAC/BA,KAAKyH,iBAAmBlK,EAAMyC,KAAM,iBAEpCA,KAAKsH,OAAOjH,KAAK,CACbqH,OAAU1H,KAAKuH,aACfI,MAAS3H,KAAKwH,YACdI,WAAc5H,KAAKyH,oBAI3BjB,WAAY,WACR,IAAIqB,EAAW7H,KAAK4B,QAAQiG,SACxBC,EAAgB9H,KAAK4B,QAAQkG,cAC7BC,EAAgB,GAChBC,EAAqB,GAEzB,UAAWH,IAAa9I,EAAU,CAC9BgJ,EAAcF,SAAWA,EACzBA,EAAW,yBAGf7H,KAAK6H,SAAWtK,EAAML,EAAM2K,SAASA,GAAWE,GAEhD,UAAWD,IAAkB/I,EAAU,CACnCiJ,EAAmBF,cAAgBA,EACnCA,EAAgB,8BAGpB9H,KAAK8H,cAAgBvK,EAAML,EAAM2K,SAASC,GAAgBE,IAG9DtB,WAAY,WACR,IAAID,EAAQzG,KAAKyG,MACbxG,EAAUD,KAAKC,QACfc,EAEJ,IAAK,IAAIkH,EAAI,EAAGA,EAAI/I,EAAoB+I,IAAK,CACzClH,EAAO,IAAImH,EAAKjI,GAChBwG,EAAM0B,KAAKpH,GAGff,KAAKsC,KAAKwB,mBAGd+B,SAAU,SAAStC,GACf,IAAIkD,EAAQzG,KAAKyG,MACbnE,EAAOtC,KAAKsC,KAEhB,IAAK,IAAI2F,EAAI,EAAGA,EAAIxB,EAAMP,OAAQ+B,IAC9BxB,EAAMwB,GAAGG,SAAS7E,EAAKC,OAG3B,GAAIxD,KAAK4B,QAAQ+C,gBAAkB,OAC/B3E,KAAKC,QAAQmG,IAAI,SAAUpG,KAAKyG,MAAM,GAAGxG,QAAQyD,eAGhD,GAAI1D,KAAK4B,QAAQ+C,gBAAkB,OAAQ,CAC5C,IAAIoB,EAAkB/F,KAAKC,QAAQ+B,SAAS0B,SAE5C,GAAI1D,KAAK4B,QAAQgD,cAAgB,KAAM,CACnC,IAAIoB,EAAQhG,KAAKC,QAAQ+B,SAASiE,KAAK,eACvC,IAAKjG,KAAK4B,QAAQiD,cAAgBmB,EAAME,OACpCH,GAAmB7I,EAAMiJ,aAAaH,EAAO,MAIrDhG,KAAKC,QAAQmG,IAAI,SAAUL,GAC3BU,EAAM,GAAGxG,QAAQmG,IAAI,SAAUL,GAC/BU,EAAM,GAAGxG,QAAQmG,IAAI,SAAUL,GAC/BU,EAAM,GAAGxG,QAAQmG,IAAI,SAAUL,GAGnCzD,EAAKwB,kBAEL9D,KAAKqI,mBAELrI,KAAKwD,MAAQD,EAAKC,OAGtBsB,SAAU,SAAS/D,GACf,IAAIuG,EAAStH,KAAKsH,OACdgB,EAEJhB,EAAOiB,iBACPD,EAAWhB,EAAOkB,GAAGzH,GAErB,IAAKuH,EACD,OAGJtI,KAAKyI,oBAAoB1H,GAEzBf,KAAKe,KAAOA,GAGhBiE,UAAW,SAASC,EAAWC,EAAQC,EAAuBd,GAC1D,IAAItE,EAAOC,KACPsC,EAAOvC,EAAKuC,KACZkB,EAAQlB,EAAKiB,OAAOC,MACpBK,EAASvB,EAAKuB,SACd6E,EAAkBvK,KAAKC,IAAIyF,IAAWL,EAAQ,EAC9CY,EAAOc,EAAShI,EAAMO,QAAQD,WAAW6H,YAAcnI,EAAMO,QAAQD,WAAYuH,YACjF4D,EAAe5I,EAAKgB,KAAO,EAAIhB,EAAKuH,OAAO3D,QAC3C4B,EACAqD,EAAQ,EAEZ,GAAI3D,IAAczF,GACd,GAAIO,EAAKgB,OAAS,EACd6H,GAAS,OAEV,GAAI3D,IAAc3F,IAAeqJ,EACpCC,EAAQ,OACL,GAAI/E,EAAS,IAAM6E,IAAoBC,GAC1CC,EAAQ,OACL,GAAI/E,EAAS,GAAK6E,EACrB,GAAI3I,EAAKgB,OAAS,EACd6H,GAAS,EAIjBrD,EAAWxF,EAAKgB,KAChB,GAAI6H,EACArD,EAAYqD,EAAQ,EAAKrD,EAAW,EAAIA,EAAW,EAGvD,GAAIJ,GAAYA,EAAS,CAAEO,YAAa3F,EAAKgB,KAAMwE,SAAUA,IACzDqD,EAAQ,EAGZ,GAAIA,IAAU,EACV7I,EAAK8I,YAAYzE,EAAMC,QACpB,GAAIuE,KAAW,EAClB7I,EAAK+I,cAAczE,QAChB,GAAIuE,IAAU,EACjB7I,EAAKgJ,aAAa1E,IAI1BsB,WAAY,WACR,IAAIc,EAAQzG,KAAKyG,MAEjB,GAAIzG,KAAKsC,KAAKuB,WAAa,EACvB,OAAO,MAGX,GAAI7D,KAAKsC,KAAKuB,SAAW,EAAG,CACxB4C,EAAM0B,KAAKnI,KAAKyG,MAAMuC,SACtBhJ,KAAKe,OACLf,KAAKiJ,eAAexC,EAAM,GAAIzG,KAAKe,KAAO,OACvC,CACH0F,EAAMyC,QAAQlJ,KAAKyG,MAAM0C,OACzBnJ,KAAKe,OACLf,KAAKiJ,eAAexC,EAAM,GAAIzG,KAAKe,KAAO,GAG9Cf,KAAKqI,mBAELrI,KAAKoJ,gBAEL,OAAO,MAGXxD,gBAAiB,WACb,IAAI/B,EAAS7D,KAAKsC,KAAKuB,SACnBwF,EAAarJ,KAAKsC,KAAKiB,OAAOC,MAAQ,EAAE,EAE5C,GAAIpF,EAAIyF,GAAUwF,EACd,OAAOrJ,KAAK2F,aAGhB,OAAO,OAGXyD,cAAe,WACXpJ,KAAKsC,KAAK2B,OAAO,IAGrB8E,aAAc,SAAS1E,GACnBrE,KAAKsC,KAAK6B,cAAcnE,KAAKwD,MAAOtG,EAAMO,QAAQD,WAAWuH,YAAaV,IAG9EyE,cAAe,SAASzE,GACpBrE,KAAKsC,KAAK6B,aAAanE,KAAKwD,MAAOtG,EAAMO,QAAQD,WAAWuH,YAAaV,IAG7EwE,YAAa,SAASzE,EAAmBC,GACrCrE,KAAKsC,KAAK6B,aAAa,EAAGC,EAAMC,IAGpC+C,YAAa,WACTpH,KAAKe,KAAOf,KAAK4B,QAAQb,MAAQ,EAEjCf,KAAKyI,oBAAoBzI,KAAKe,MAC9Bf,KAAKqI,mBAELrI,KAAK0C,QAAQ,UAGjB4G,UAAW,WACPtJ,KAAKY,UAAYvC,EAAK2B,KAAK6G,WAAWlD,QAAU3D,KAAK4B,QAAQyF,cAE7D,GAAIrH,KAAKgH,oBAAqB,CAC1BhH,KAAKyI,oBAAoBzI,KAAKe,MAC9Bf,KAAKgH,oBAAsB,MAG/BhH,KAAK0C,QAAQ,WAGjB6G,SAAU,WACNvJ,KAAKY,UAAYvC,EAAK2B,KAAK6G,WAAWlD,QAAU3D,KAAK4B,QAAQyF,cAC7DrH,KAAKoH,eAGToC,cAAe,WACXxJ,KAAKgH,oBAAsB,MAG/BqB,iBAAkB,WACd,IAAI5B,EAAQzG,KAAKyG,MAEjBA,EAAM,GAAGgD,SAAStK,GAClBsH,EAAM,GAAGgD,SAASrK,GAClBqH,EAAM,GAAGgD,SAASpK,IAGtBoJ,oBAAqB,SAAS5E,GAC1B,IAAI4C,EAAQzG,KAAKyG,MACbf,EAAc7B,GAAU,EAE5B7D,KAAKiJ,eAAexC,EAAM,GAAIf,EAAc,GAC5C1F,KAAKiJ,eAAexC,EAAM,GAAIf,GAC9B1F,KAAKiJ,eAAexC,EAAM,GAAIf,EAAc,IAGhDuD,eAAgB,SAASlI,EAAM2I,GAC3B,IAAIpC,EAAStH,KAAKsH,OACdO,EAAW7H,KAAK6H,SAChBC,EAAgB9H,KAAK8H,cACrB6B,EAAO,KAEX,GAAID,GAAS,EAAG,CACZC,EAAOrC,EAAOkB,GAAGkB,GACjB,GAAIE,MAAMC,QAAQF,KAAUA,EAAKzD,OAC7ByD,EAAO,KAIf3J,KAAK0C,QAAQzD,EAAS,CAAE6K,KAAM/I,EAAKd,UAEnC,GAAI0J,IAAS,KACT5I,EAAKgJ,QAAQlC,EAAS8B,SAEtB5I,EAAKgJ,QAAQjC,EAAc,KAG/B5K,EAAMG,OAAOwC,KAAKkB,EAAKd,SACvBD,KAAK0C,QAAQ1D,EAAa,CAAE8K,KAAM/I,EAAKd,QAASlC,KAAM4L,EAAMK,GAAI9M,EAAMG,OAAOC,SAOjF4K,GAFJhL,EAAMG,OAAOC,GAAGiJ,yBAA2BA,EAEhCrJ,EAAMyC,MAAMC,OAAO,CAC1BC,KAAM,SAASkC,GACX/B,KAAKC,QAAUjD,EAAE,eAAiByC,EAAUX,GAAsB,YAClEkB,KAAKwD,MAAQzB,EAAUyB,QACvBxD,KAAKC,QAAQuD,MAAMxD,KAAKwD,OACxBzB,EAAU7B,OAAOF,KAAKC,UAG1B8J,QAAS,SAASE,GACdjK,KAAKC,QAAQY,KAAKoJ,IAGtBR,SAAU,SAASA,GACfzJ,KAAKC,QAAQmG,IAAI,YAAa,eAAiBpG,KAAKwD,MAAQiG,EAAW,cAG3ErB,SAAU,SAAS5E,GACfxD,KAAKwD,MAAQA,EACbxD,KAAKC,QAAQuD,MAAMA,OAMvB0G,GAFJhN,EAAMG,OAAOC,GAAG6M,YAAcjC,EAEbtK,EAAOgC,OAAO,CAC3BC,KAAM,SAASI,EAAS2B,GACpB,IAAI7B,EAAOC,KAEXpC,EAAOiE,GAAGhC,KAAKiC,KAAK/B,EAAME,EAAS2B,GAEnCA,EAAU7B,EAAK6B,QACf3B,EAAUF,EAAKE,QAEf/C,EAAMkN,gBAAgBnK,EAAQ,IAE9BA,EACKoK,UAAU,UACVrJ,SAAS,YAAcvB,EAAU,eAEtC,GAAIO,KAAK4B,QAAQgD,YAAa,CAC1B5E,KAAKgG,MAAQ,IAAItG,EAAMM,MAEvB,GAAIA,KAAK4B,QAAQiD,aACb5E,EAAQe,SAASvB,EAAU,uBAInCM,EAAKuK,MAAQrK,EAAQM,WAAWgK,QAChCxK,EAAKgB,KAAO,EACZhB,EAAKuK,MAAMlE,IAAI,SAAUxE,EAAQ+C,eAEjC5E,EAAKuC,KAAO,IAAIZ,EAAY3B,EAAKuK,MAAO,CACpChH,SAAUtD,KAAK4B,QAAQ0B,SACvBkH,cAAejN,EAAMyC,KAAM,kBAC3ByK,UAAWlN,EAAMyC,KAAM,cACvB0K,QAASnN,EAAMyC,KAAM,YACrB2K,OAAQpN,EAAMyC,KAAMpB,KAGxBmB,EAAKM,KAAK,SAAU,WAChBN,EAAKuC,KAAK0B,YAGdjE,EAAKgB,KAAOa,EAAQb,KAEpB,IAAI6J,EAAQ5K,KAAKsK,MAAM/J,WAAW2F,SAAW,EAE7C,IAAI6D,EAAUa,EAAQ,IAAIrE,EAAyBxG,EAAKuK,MAAOvK,EAAKuC,KAAMV,GAAW,IAAI2C,EAAkBxE,EAAKuK,MAAOvK,EAAKuC,KAAMV,GAElImI,EAAQhJ,KAAOhB,EAAKgB,KAEpBgJ,EAAQ1J,KAAK,QAAS,WAClBL,KAAKgH,oBAAsB,MAC3BjH,EAAK8K,mBACL9K,EAAK2C,QAAQ9D,EAAS,CAAEgC,UAAWmJ,EAAQnJ,UAAWG,KAAMgJ,EAAQhJ,SAGxEgJ,EAAQ1J,KAAK,SAAU,WACnBN,EAAK2C,QAAQ9D,EAAS,CAAEgC,UAAWmJ,EAAQnJ,UAAWG,KAAMgJ,EAAQhJ,SAGxEgJ,EAAQ1J,KAAKrB,EAAa,SAASyB,GAC/BV,EAAK2C,QAAQ1D,EAAayB,GAE1BV,EAAK+K,QAAQ,UAAW,WACpB,MAAO,CAAEC,SAAUtK,EAAEqJ,KAAM/L,KAAM,CAAE,CAAEuK,SAAU7H,EAAE1C,YAIzDgM,EAAQ1J,KAAKpB,EAAS,SAASwB,GAC3BV,EAAK+K,QAAQ,UAAW,WACpB,MAAO,CAAEC,SAAUtK,EAAEqJ,UAI7B/J,EAAKiL,SAAWjB,EAChBhK,EAAK6G,cAAchF,EAAQiF,YAE3B,IAAIoE,EAAkBlL,EAAKgC,YAE3B,GAAIkJ,EAAgBC,WAAY,CAC5BnL,EAAKoL,WACLpL,EAAKqL,gBAELH,EAAgB5K,KAAK,OAAQ9C,EAAMyC,KAAM,aAAaK,KAAK,OAAQ9C,EAAMyC,KAAM,cAIvF4B,QAAS,CACLhF,KAAM,aACNmE,KAAM,EACNuC,SAAU,IACV+H,kBAAmB,GACnB1G,cAAe,OACfD,SAAU,EACV2C,aAAc,EACdiE,wBAAyB,IACzB1G,YAAa,KACbC,aAAc,MACd0G,SAAU,KACV1D,SAAU,GACVC,cAAe,IAGnB0D,OAAQ,CACJ7M,EACAD,EACAE,GAGJuC,QAAS,WACLvD,EAAOiE,GAAGV,QAAQW,KAAK9B,MACvB9C,EAAMiE,QAAQnB,KAAKC,UAGvBkL,SAAU,WACN,GAAInL,KAAK4B,QAAQ2J,SACbvL,KAAKgL,SAASlG,SAAS9E,KAAKgL,SAASjK,KAAM,OAInDqK,SAAU,WACNpL,KAAKsC,KAAK0B,WAGdA,QAAS,WACL,IAAI+F,EAAU/J,KAAKgL,SAEnBjB,EAAQlE,SAAS7F,KAAKsC,KAAKiB,QAC3BvD,KAAKe,KAAOgJ,EAAQhJ,KACpBf,KAAK0C,QAAQ9D,EAAS,CAAEgC,UAAWmJ,EAAQnJ,UAAWG,KAAMgJ,EAAQhJ,QAGxEgJ,QAAS,SAASlJ,GACfb,KAAKC,QAAQM,WAAWgK,QAAQ1J,KAAKA,GACrCb,KAAKgL,SAASvG,YACdzE,KAAKsC,KAAK0B,WAGbyH,MAAO,SAAS3B,GACZ,IAAIjD,EAAa7G,KAAK6G,WAEtB,GAAIiD,EACA9J,KAAK8E,SAAS+B,EAAW6E,QAAQ5B,GAAO,WAExC,OAAOjD,EAAW2B,GAAGxI,KAAKe,OAIlC+D,SAAU,SAAS/D,EAAMsD,GACrBrE,KAAKgL,SAASlG,SAAS/D,EAAMsD,GAC7BrE,KAAK6K,oBAGTc,KAAM,WACF,IAAI5L,EAAOC,KACP4L,EAAW7L,EAAKgB,KAAO,EAE3B,GAAIhB,EAAKiL,oBAAoBzE,EACzBxG,EAAKiL,SAAShG,UAAUxF,EAAapC,EAAW,SAASyO,GACrD,OAAO9L,EAAK2C,QAAQ/D,EAAUkN,UAE/B,GAAID,GAAY,EACnB7L,EAAK+E,SAAS8G,IAItBE,KAAM,WACF,IAAI/L,EAAOC,KACPuF,EAAWxF,EAAKgB,KAAO,EAE3B,GAAIhB,EAAKiL,oBAAoBzE,EACzBxG,EAAKiL,SAAShG,UAAU1F,EAAYlC,EAAW,SAASyO,GACpD,OAAO9L,EAAK2C,QAAQ/D,EAAUkN,UAE/B,GAAItG,EAAWxF,EAAKiL,SAASpK,UAChCb,EAAK+E,SAASS,IAItBqB,cAAe,SAASC,GACpB,KAAM7G,KAAKgL,oBAAoBzE,GAC3B,OAGJ,IAAIwF,GAAmBlF,EACvB7G,KAAK6G,WAAa/I,EAAWgJ,OAAOD,GAEpC7G,KAAKgL,SAASpE,cAAc5G,KAAK6G,YAEjC,GAAI7G,KAAK4B,QAAQ2J,WAAaQ,EAE1B/L,KAAK6G,WAAWmF,SAIxB1L,MAAO,WACH,OAAON,KAAKC,QAAQgG,KAAK,OAASnH,IAGtC+L,iBAAkB,WACd,IAAIpE,EAAQzG,KAAKgL,SAASvE,MACtBa,EAAStH,KAAKgL,SAAS1D,OACvBvJ,EACAkC,EAEJD,KAAKe,KAAOf,KAAKgL,SAASjK,KAE1BhD,EAAOuJ,EAASA,EAAOkB,GAAGxI,KAAKe,MAAQ3D,EACvC,KAAMW,aAAgB6L,OAClB7L,EAAO,CAACA,GAEZkC,EAAUwG,EAAQA,EAAM,GAAGxG,QAAU7C,EAErC4C,KAAK0C,QAAQhE,EAAQ,CAAEqC,KAAMf,KAAKe,KAAMd,QAASA,EAASlC,KAAMA,KAGpEkO,WAAY,WACR,GAAIjM,KAAKgL,SAASpF,kBACd5F,KAAK6K,oBAIbqB,SAAU,SAASzL,GACf,IAAIV,EAAOC,KACP+C,EAAWtC,EAAEqC,EAAEC,SACfsI,EAAoBrL,KAAK4B,QAAQyJ,kBACjCpG,EAAY1F,EACZ2F,EAAS9G,EAAI2E,GAAY/C,KAAK4B,QAAQ0J,wBAE1C,GAAIvI,EAAWsI,EACXpG,EAAYzF,OACT,GAAIuD,GAAYsI,EACnBpG,EAAY3F,EAGhBU,KAAKgL,SAAShG,UAAUC,EAAWC,EAAQ,SAAS2G,GAChD,OAAO9L,EAAK2C,QAAQ/D,EAAUkN,MAItCM,eAAgB,WACZ,GAAInM,KAAKgL,SAASrF,aACd3F,KAAK6K,uBASrB,OAJIvN,EAAG8O,OAAOlC,GAIPjN,OAAOC,QA14Bd,CA44BoB,mBAAVT,QAAwBA,OAAO4P,IAAM5P,OAAS,SAAS6P,EAAIC,EAAIC,IAAMA,GAAMD"}