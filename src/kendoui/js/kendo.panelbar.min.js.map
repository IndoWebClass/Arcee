{"version":3,"file":"kendo.panelbar.min.js","sources":["kendo.panelbar.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.panelbar',[ \"./kendo.data\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"panelbar\",\n    name: \"PanelBar\",\n    category: \"web\",\n    description: \"The PanelBar widget displays hierarchical data as a multi-level expandable panel bar.\",\n    depends: [ \"core\", \"data\", \"data.odata\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        keys = kendo.keys,\n        extend = $.extend,\n        proxy = $.proxy,\n        each = $.each,\n        isArray = Array.isArray,\n        template = kendo.template,\n        Widget = ui.Widget,\n        HierarchicalDataSource = kendo.data.HierarchicalDataSource,\n        excludedNodesRegExp = /^(ul|a|div)$/i,\n        NS = \".kendoPanelBar\",\n        IMG = \"img\",\n        HREF = \"href\",\n        LAST = \"k-last\",\n        LINK = \"k-link\",\n        LINKSELECTOR = \".\" + LINK,\n        ERROR = \"error\",\n        ITEM = \".k-item\",\n        GROUP = \".k-group\",\n        VISIBLEGROUP = GROUP + \":visible\",\n        IMAGE = \"k-image\",\n        FIRST = \"k-first\",\n        CHANGE = \"change\",\n        EXPAND = \"expand\",\n        SELECT = \"select\",\n        CLICK = \"click\",\n        CONTENT = \"k-content\",\n        ACTIVATE = \"activate\",\n        COLLAPSE = \"collapse\",\n        DATABOUND = \"dataBound\",\n        MOUSEENTER = \"mouseenter\",\n        MOUSELEAVE = \"mouseleave\",\n        CONTENTLOAD = \"contentLoad\",\n        UNDEFINED = \"undefined\",\n        ACTIVECLASS = \"k-state-active\",\n        GROUPS = \"> .k-panel\",\n        CONTENTS = \"> .k-content\",\n        STRING = \"string\",\n        FOCUSEDCLASS = \"k-state-focused\",\n        DISABLEDCLASS = \"k-state-disabled\",\n        SELECTEDCLASS = \"k-state-selected\",\n        SELECTEDSELECTOR = \".\" + SELECTEDCLASS,\n        HIGHLIGHTCLASS = \"k-state-highlight\",\n        ACTIVEITEMSELECTOR = ITEM + \":not(.k-state-disabled)\",\n        clickableItems = \"> \" + ACTIVEITEMSELECTOR + \" > \" + LINKSELECTOR + \", .k-panel > \" + ACTIVEITEMSELECTOR + \" > \" + LINKSELECTOR,\n        disabledItems = ITEM + \".k-state-disabled > .k-link\",\n        selectableItems = \"> li > \" + SELECTEDSELECTOR + \", .k-panel > li > \" + SELECTEDSELECTOR,\n        ARIA_DISABLED = \"aria-disabled\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_HIDDEN = \"aria-hidden\",\n        ARIA_SELECTED = \"aria-selected\",\n        VISIBLE = \":visible\",\n        EMPTY = \":empty\",\n        SINGLE = \"single\",\n        bindings = {\n            text: \"dataTextField\",\n            url: \"dataUrlField\",\n            spriteCssClass: \"dataSpriteCssClassField\",\n            imageUrl: \"dataImageUrlField\"\n        },\n        itemIcon,\n        rendering = {\n        aria: function(item) {\n            var attr = \"\";\n\n            if (item.items || item.content || item.contentUrl || item.expanded) {\n                attr += ARIA_EXPANDED + \"='\" + (item.expanded ? \"true\" : \"false\") + \"' \";\n            }\n\n            if (item.enabled === false) {\n                attr += ARIA_DISABLED + \"='true'\";\n            }\n\n            return attr;\n        },\n\n    wrapperCssClass: function (group, item) {\n        var result = \"k-item\",\n            index = item.index;\n\n        result += group.firstLevel ? \" k-panelbar-header\" : \" k-panelbar-item\";\n\n        if (item.enabled === false) {\n            result += \" \" + DISABLEDCLASS;\n        } else if (item.expanded === true) {\n            result += \" \" + ACTIVECLASS;\n        }\n\n        if (index === 0) {\n            result += \" k-first\";\n        }\n\n        if (index == group.length - 1) {\n            result += \" k-last\";\n        }\n\n        if (item.cssClass) {\n            result += \" \" + item.cssClass;\n        }\n\n        if (item.level) {\n            result += \" k-level-\" + item.level();\n        }\n\n        return result;\n    },\n\n    textClass: function(item) {\n        var result = LINK;\n\n        if (item.selected) {\n            result += \" \" + SELECTEDCLASS;\n        }\n\n        return result;\n    },\n    textAttributes: function(url) {\n        return url ? \" href='\" + url + \"'\" : \"\";\n    },\n    arrowClass: function(item) {\n        var result = \"k-icon\";\n\n        result += item.expanded ? \" k-panelbar-toggle k-panelbar-collapse k-i-arrow-chevron-up\" : \" k-panelbar-toggle k-panelbar-expand k-i-arrow-chevron-down\";\n\n        return result;\n    },\n    text: function(item) {\n         return item.encoded === false ? item.text : kendo.htmlEncode(item.text);\n    },\n    groupAttributes: function(group) {\n        return group.expanded !== true ? \" style='display:none'\" : \"\";\n    },\n    ariaHidden: function(group){\n        return group.expanded !== true;\n    },\n    groupCssClass: function() {\n        return \"k-panelbar-group k-group k-panel\";\n    },\n    contentAttributes: function(content) {\n        return content.item.expanded !== true ? \" style='display:none'\" : \"\";\n    },\n    content: function(item) {\n        return item.content ? item.content : item.contentUrl ? \"\" : \"&nbsp;\";\n    },\n    contentUrl: function(item) {\n        return item.contentUrl ? 'href=\"' + item.contentUrl + '\"' : \"\";\n    }\n};\n\n    function updateFirstLast (items) {\n        items = $(items);\n\n        items.filter(\".k-first:not(:first-child)\").removeClass(FIRST);\n        items.filter(\".k-last:not(:last-child)\").removeClass(LAST);\n        items.filter(\":first-child\").addClass(FIRST);\n        items.filter(\":last-child\").addClass(LAST);\n    }\n\n    function updateLevel (item) {\n        item = $(item);\n\n        item.addClass(\"k-level-\" + item.parentsUntil(\".k-panelbar\", \"ul\").length);\n    }\n\n     function updateItemHtml(item) {\n        var wrapper = item,\n            group = item.children(\"ul\"),\n            toggleButton = wrapper.children(\".k-link\").children(\".k-icon\");\n\n        if (item.hasClass(\"k-panelbar\")) {\n            return;\n        }\n\n        if (!toggleButton.length && group.length) {\n            toggleButton = $(\"<span class='k-icon' />\").appendTo(wrapper);\n        } else if (!group.length || !group.children().length) {\n            toggleButton.remove();\n            group.remove();\n        }\n     }\n\n    itemIcon = function(item) {\n        return item.children(\"span\").children(\".k-icon\");\n    };\n\n    var PanelBar = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this,\n                content,\n                hasDataSource;\n\n           if (isArray(options)) {\n                options = { dataSource: options };\n           }\n\n            hasDataSource = options && !!options.dataSource;\n\n            Widget.fn.init.call(that, element, options);\n\n            element = that.wrapper = that.element.addClass(\"k-panelbar\");\n            options = that.options;\n\n            if (element[0].id) {\n                that._itemId = element[0].id + \"_pb_active\";\n            }\n\n            that._tabindex();\n\n            that._accessors();\n\n            that._dataSource();\n\n            that._templates();\n\n            that._initData(hasDataSource);\n\n            that._updateClasses();\n\n            that._animations(options);\n\n            element\n                .on(CLICK + NS, clickableItems, proxy(that._click, that))\n                .on(MOUSEENTER  + NS + \" \" + MOUSELEAVE + NS, clickableItems, that._toggleHover)\n                .on(CLICK + NS, disabledItems, false)\n                .on(CLICK + NS, \".k-request-retry\", proxy(that._retryRequest, that))\n                .on(\"keydown\" + NS, proxy(that._keydown, that))\n                .on(\"focus\" + NS, function() {\n                    var item = that.select();\n                    that._current(item[0] ? item : that._first());\n                })\n                .on(\"blur\" + NS, function() {\n                    that._current(null);\n                })\n                .attr(\"role\", \"tree\");\n\n            content = element.find(\"li.\" + ACTIVECLASS + \" > .\" + CONTENT);\n\n            if (content[0]) {\n                that.expand(content.parent(), false);\n            }\n\n            if (!options.dataSource) {\n                that._angularCompile();\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n            EXPAND,\n            COLLAPSE,\n            SELECT,\n            ACTIVATE,\n            CHANGE,\n            ERROR,\n            DATABOUND,\n            CONTENTLOAD\n        ],\n        options: {\n            name: \"PanelBar\",\n            dataSource: {},\n            animation: {\n                expand: {\n                    effects: \"expand:vertical\",\n                    duration: 200\n                },\n                collapse: { // if collapse animation effects are defined, they will be used instead of expand.reverse\n                    duration: 200\n                }\n            },\n            messages: {\n                loading: \"Loading...\",\n                requestFailed: \"Request failed.\",\n                retry: \"Retry\"\n            },\n            autoBind: true,\n            loadOnDemand: true,\n            expandMode: \"multiple\",\n            template: \"\",\n            dataTextField: null\n        },\n\n        _angularCompile: function() {\n            var that = this;\n            that.angular(\"compile\", function(){\n                return {\n                    elements: that.element.children(\"li\"),\n                    data: [{ dataItem: that.options.$angular}]\n                };\n            });\n        },\n\n        _angularCompileElements: function(html, items) {\n            var that = this;\n            that.angular(\"compile\", function(){\n                return {\n                    elements: html,\n                    data: $.map(items, function(item) {\n                        return [{ dataItem: item }];\n                    })\n                };\n            });\n        },\n\n        _angularCleanup: function() {\n            var that = this;\n\n            that.angular(\"cleanup\", function(){\n                return { elements: that.element.children(\"li\") };\n            });\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            this.element.off(NS);\n\n            this._angularCleanup();\n\n            kendo.destroy(this.element);\n        },\n\n        _initData: function(hasDataSource) {\n            var that = this;\n\n            if (hasDataSource) {\n                that.element.empty();\n                 if (that.options.autoBind) {\n                    that._progress(true);\n\n                    that.dataSource.fetch();\n                 }\n            }\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                fieldAccessor = proxy(that._fieldAccessor, that);\n\n              if (options.template && typeof options.template == STRING) {\n                    options.template = template(options.template);\n              } else if (!options.template) {\n                     options.template = template(\n                        \"# var text = \" + fieldAccessor(\"text\") + \"(data.item); #\" +\n                        \"# if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {#\" +\n                            \"<span class='k-panelbar-item-text'>#= text #</span>\" +\n                        \"# } else { #\" +\n                            \"<span class='k-panelbar-item-text'>#: text #</span>\" +\n                        \"# } #\"\n                    );\n                }\n\n            that.templates = {\n                content: template(\n                    \"<div class='k-panelbar-content k-content'#= contentAttributes(data) #>#= content(item) #</div>\"\n                ),\n                group: template(\n                    \"<ul role='group' aria-hidden='#= ariaHidden(group) #' class='#= groupCssClass(group) #'#= groupAttributes(group) #>\" +\n                        \"#= renderItems(data) #\" +\n                    \"</ul>\"\n                ),\n                itemWrapper: template(\n                     \"# var url = \" + fieldAccessor(\"url\") + \"(item); #\" +\n                     \"# var imageUrl = \" + fieldAccessor(\"imageUrl\") + \"(item); #\" +\n                     \"# var spriteCssClass = \" + fieldAccessor(\"spriteCssClass\") + \"(item); #\" +\n                     \"# var contentUrl = contentUrl(item); #\" +\n                     \"# var tag = url||contentUrl ? 'a' : 'span'; #\" +\n\n                    \"<#= tag # class='#= textClass(item) #' #= contentUrl ##= textAttributes(url) #>\" +\n                        \"# if (imageUrl) { #\" +\n                              \"<img class='k-panelbar-item-icon k-image' alt='' src='#= imageUrl #' />\" +\n                        \"# } #\" +\n\n                        \"# if (spriteCssClass) { #\" +\n                            \"<span class='k-sprite #= spriteCssClass #'></span>\" +\n                        \"# } #\" +\n                      \"#= data.panelBar.options.template(data) #\" +\n                      \"#= arrow(data) #\" +\n                    \"</#= tag #>\"\n                ),\n\n                item: template(\n                    \"<li role='treeitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'\" +\n                         kendo.attr(\"uid\") + \"='#= item.uid #'>\" +\n                        \"#= itemWrapper(data) #\" +\n                        \"# if (item.items && item.items.length > 0) { #\" +\n                        \"#= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) #\" +\n                        \"# } else if (item.content || item.contentUrl) { #\" +\n                        \"#= renderContent(data) #\" +\n                        \"# } #\" +\n                    \"</li>\"\n                ),\n                loading: template(\"<li class='k-item'><span class='k-icon k-i-loading'></span> #: data.messages.loading #</li>\"),\n                retry: template(\n                    \"<li class='k-item'>\" +\n                        \"#: data.messages.requestFailed # \" +\n                        \"<button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-request-retry'><span class='k-button-text'>#: data.messages.retry #</span></button>\" +\n                    \"</li>\"\n                ),\n                arrow: template(\"<span class='#= arrowClass(item) #'></span>\"),\n                empty: template(\"\")\n            };\n        },\n\n        setOptions: function(options) {\n            var animation = this.options.animation;\n\n            this._animations(options);\n\n            options.animation = extend(true, animation, options.animation);\n\n            if (\"dataSource\" in options) {\n                this.setDataSource(options.dataSource);\n            }\n\n            Widget.fn.setOptions.call(this, options);\n        },\n\n        expand: function (element, useAnimation) {\n            var that = this,\n                animBackup = {};\n\n            element = this.element.find(element);\n\n            if (that._animating && element.find(\"ul\").is(\":visible\")) {\n                that.one(\"complete\", function() {\n                    setTimeout(function() {\n                        that.expand(element);\n                    });\n                });\n                return;\n            }\n            that._animating = true;\n\n            useAnimation = useAnimation !== false;\n\n            element.each(function (index, item) {\n                item = $(item);\n                var wrapper = element.children(\".k-group,.k-content\");\n\n                if (!wrapper.length) {\n                    wrapper =  that._addGroupElement(element);\n                }\n\n                 var groups = wrapper.add(item.find(CONTENTS));\n\n                if (!item.hasClass(DISABLEDCLASS) && groups.length > 0) {\n\n                    if (that.options.expandMode == SINGLE && that._collapseAllExpanded(item)) {\n                        return that;\n                    }\n\n                    element.find(\".\" + HIGHLIGHTCLASS).removeClass(HIGHLIGHTCLASS);\n                    item.addClass(HIGHLIGHTCLASS);\n\n                    if (!useAnimation) {\n                        animBackup = that.options.animation;\n                        that.options.animation = { expand: { effects: {} }, collapse: { hide: true, effects: {} } };\n                    }\n\n                    if (!that._triggerEvent(EXPAND, item)) {\n                        that._toggleItem(item, false, false);\n                    }\n\n                    if (!useAnimation) {\n                        that.options.animation = animBackup;\n                    }\n                }\n            });\n\n            return that;\n        },\n\n        collapse: function (element, useAnimation) {\n            var that = this,\n                animBackup = {};\n\n            that._animating = true;\n\n            useAnimation = useAnimation !== false;\n            element = that.element.find(element);\n\n            element.each(function (index, item) {\n                item = $(item);\n                var groups = item.find(GROUPS).add(item.find(CONTENTS));\n\n                if (!item.hasClass(DISABLEDCLASS) && groups.is(VISIBLE)) {\n                    item.removeClass(HIGHLIGHTCLASS);\n\n                    if (!useAnimation) {\n                        animBackup = that.options.animation;\n                        that.options.animation = { expand: { effects: {} }, collapse: { hide: true, effects: {} } };\n                    }\n\n                    if (!that._triggerEvent(COLLAPSE, item)) {\n                        that._toggleItem(item, true);\n                    }\n\n                    if (!useAnimation) {\n                        that.options.animation = animBackup;\n                    }\n                }\n\n            });\n            return that;\n        },\n\n         updateArrow: function(items) {\n                var that = this;\n\n                items = $(items);\n                items.children(LINKSELECTOR).children(\".k-panelbar-collapse, .k-panelbar-expand\").remove();\n\n                items\n                    .filter(function() {\n                        var dataItem = that.dataItem(this);\n\n                        if (!dataItem) {\n                            return $(this).find(\".k-panel\").length > 0 ||\n                                $(this).find(\".k-content\").length > 0;\n                        }\n\n                        return dataItem.hasChildren || dataItem.content || dataItem.contentUrl;\n                    })\n                    .children(\".k-link:not(:has([class*=k-i-arrow]))\")\n                    .each(function () {\n                        var item = $(this),\n                            parent = item.parent();\n\n                        item.append(\"<span class='k-icon \" + (parent.hasClass(ACTIVECLASS) ? \" k-panelbar-toggle k-panelbar-collapse k-i-arrow-chevron-up\" : \" k-panelbar-toggle k-panelbar-expand k-i-arrow-chevron-down\") + \"'/>\");\n                    });\n         },\n\n        _accessors: function() {\n            var that = this,\n                options = that.options,\n                i, field, textField,\n                element = that.element;\n\n            for (i in bindings) {\n                field = options[bindings[i]];\n                textField = element.attr(kendo.attr(i + \"-field\"));\n\n                if (!field && textField) {\n                    field = textField;\n                }\n\n                if (!field) {\n                    field = i;\n                }\n\n                if (!isArray(field)) {\n                    field = [field];\n                }\n\n                options[bindings[i]] = field;\n            }\n        },\n\n        _progress: function(item, showProgress) {\n            var element = this.element;\n            var loadingText = this.templates.loading({ messages: this.options.messages });\n\n            if (arguments.length == 1) {\n                showProgress = item;\n\n                if (showProgress) {\n                    element.html(loadingText);\n                } else {\n                    element.empty();\n                }\n            }\n            else {\n                itemIcon(item).toggleClass(\"k-i-loading\", showProgress).removeClass(\"k-i-refresh\");\n            }\n        },\n\n        _refreshRoot: function(items) {\n            var that = this;\n            var parent = that.element;\n            var  groupData = {\n                firstLevel: true,\n                expanded: true,\n                length: parent.children().length\n            };\n\n            this.element.empty();\n\n            var rootItemsHtml = $.map(items, function(value, idx) {\n                    if (typeof value === \"string\") {\n                        return $(value);\n                    } else {\n                        value.items = [];\n                        return $(that.renderItem({\n                            group: groupData,\n                            item: extend(value, { index: idx })\n                        }));\n                    }\n            });\n\n            this.element.append(rootItemsHtml);\n            var elements = this.element.children(\".k-item\");\n            for (var i = 0; i < items.length; i++) {\n                this.trigger(\"itemChange\", {\n                    item: elements.eq(i).find(\".k-link\").first(),\n                    data: items[i],\n                    ns: ui\n                });\n            }\n            this._angularCompileElements(rootItemsHtml, items);\n        },\n\n        _refreshChildren: function(item, parentNode) {\n            var i, children, child;\n\n            parentNode.children(\".k-group\").empty();\n            var items = item.children.data();\n            if (!items.length) {\n                updateItemHtml(parentNode);\n                children = parentNode.children(\".k-group\").children(\"li\");\n                this._angularCompileElements(children, items);\n            } else {\n                this.append(item.children, parentNode);\n\n                if(this.options.loadOnDemand){\n                    this._toggleGroup(parentNode.children(\".k-group\"), false);\n                }\n                children = parentNode.children(\".k-group\").children(\"li\");\n\n                for (i = 0; i < children.length; i++) {\n                    child = children.eq(i);\n                    this.trigger(\"itemChange\", {\n                        item: child.find(\".k-link\").first(),\n                        data: this.dataItem(child),\n                        ns: ui\n                    });\n                }\n            }\n        },\n\n        findByUid: function(uid) {\n            var items = this.element.find(\".k-item\");\n            var uidAttr = kendo.attr(\"uid\");\n            var result;\n\n            for (var i = 0; i < items.length; i++) {\n                if (items[i].getAttribute(uidAttr) == uid) {\n                    result = items[i];\n                    break;\n                }\n            }\n\n            return $(result);\n        },\n\n        refresh: function(e) {\n            var options = this.options;\n            var node = e.node;\n            var action = e.action;\n            var items = e.items;\n            var parentNode = this.wrapper;\n            var loadOnDemand = options.loadOnDemand;\n\n            if (e.field) {\n                if (!items[0] || !items[0].level) {\n                    return;\n                }\n\n                return this._updateItems(items, e.field);\n            }\n\n            if (node) {\n                parentNode = this.findByUid(node.uid);\n                this._progress(parentNode, false);\n            }\n            if (action == \"add\") {\n                this._appendItems(e.index, items, parentNode);\n            } else if (action == \"remove\") {\n                this.remove(this.findByUid(items[0].uid));\n            } else if (action == \"itemchange\") {\n                this._updateItems(items);\n            } else if (action == \"itemloaded\") {\n                this._refreshChildren(node, parentNode);\n            } else {\n                this._refreshRoot(items);\n            }\n\n            if (action != \"remove\") {\n                for (var k = 0; k < items.length; k++) {\n\n                    if (!loadOnDemand || items[k].expanded) {\n                        var tempItem = items[k];\n                        if (this._hasChildItems(tempItem)) {\n                                tempItem.load();\n                        }\n                    }\n                }\n            }\n\n            this.trigger(DATABOUND, { node: node ? parentNode : undefined });\n        },\n\n        _error: function(e) {\n            var node = e.node && this.findByUid(e.node.uid);\n            var retryHtml = this.templates.retry({ messages: this.options.messages });\n\n            if (node) {\n                this._progress(node, false);\n                this._expanded(node, false);\n                itemIcon(node).addClass(\"k-i-refresh\");\n                e.node.loaded(false);\n            } else {\n                this._progress(false);\n                this.element.html(retryHtml);\n            }\n        },\n\n        _retryRequest: function(e) {\n            e.preventDefault();\n\n            this.dataSource.fetch();\n        },\n\n         items: function() {\n            return this.element.find(\".k-item > span:first-child\");\n        },\n\n        setDataSource: function(dataSource) {\n            var options = this.options;\n\n            options.dataSource = dataSource;\n\n            this._dataSource();\n\n            if (this.options.autoBind) {\n                this._progress(true);\n                this.dataSource.fetch();\n            }\n        },\n\n        _bindDataSource: function() {\n            this._refreshHandler = proxy(this.refresh, this);\n            this._errorHandler = proxy(this._error, this);\n\n            this.dataSource.bind(CHANGE, this._refreshHandler);\n            this.dataSource.bind(ERROR, this._errorHandler);\n        },\n\n        _unbindDataSource: function() {\n            var dataSource = this.dataSource;\n\n            if (dataSource) {\n                dataSource.unbind(CHANGE, this._refreshHandler);\n                dataSource.unbind(ERROR, this._errorHandler);\n            }\n        },\n\n        // generates accessor function for a given field name, honoring the data*Field arrays\n        _fieldAccessor: function(fieldName) {\n            var fieldBindings = this.options[bindings[fieldName]] || [],\n                count = fieldBindings.length,\n                result = \"(function(item) {\";\n\n            if (count === 0) {\n                result += \"return item['\" + fieldName + \"'];\";\n            } else {\n                result += \"var levels = [\" +\n                            $.map(fieldBindings, function(x) {\n                                return \"function(d){ return \" + kendo.expr(x) + \"}\";\n                            }).join(\",\") + \"];\";\n                result += \"if(item.level){return levels[Math.min(item.level(), \" + count + \"-1)](item);}else\";\n                result += \"{return levels[\"+ count + \"-1](item)}\";\n            }\n\n            result += \"})\";\n\n            return result;\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                dataSource = options.dataSource;\n\n            if (!dataSource) {\n                return;\n            }\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            that._unbindDataSource();\n\n            if (!dataSource.fields) {\n                dataSource.fields = [\n                    { field: \"text\" },\n                    { field: \"url\" },\n                    { field: \"spriteCssClass\" },\n                    { field: \"imageUrl\" }\n                ];\n            }\n\n            that.dataSource = HierarchicalDataSource.create(dataSource);\n\n            that._bindDataSource();\n        },\n\n        _appendItems: function(index, items, parentNode) {\n            var that = this, children, wrapper;\n\n              if (parentNode.hasClass(\"k-panelbar\")) {\n                  children = parentNode.children(\"li\");\n                  wrapper = parentNode;\n              } else {\n                  wrapper = parentNode.children(\".k-group\");\n                  if (!wrapper.length) {\n                      wrapper =  that._addGroupElement(parentNode);\n                  }\n\n                  children = wrapper.children(\"li\");\n              }\n\n             var  groupData = {\n                firstLevel: parentNode.hasClass(\"k-panelbar\"),\n                expanded: true,\n                length: children.length\n             };\n\n             var itemsHtml = $.map(items, function(value, idx) {\n                    if (typeof value === \"string\") {\n                        return $(value);\n                    } else {\n                        return $(that.renderItem({\n                            group: groupData,\n                            item: extend(value, { index: idx })\n                        }));\n                    }\n            });\n\n              if (typeof index == UNDEFINED) {\n                   index = children.length;\n              }\n\n              for (var i = 0; i < itemsHtml.length; i++) {\n                  if (children.length === 0 || index === 0) {\n                      wrapper.append(itemsHtml[i]);\n                  } else {\n                       itemsHtml[i].insertAfter(children[index - 1]);\n                  }\n               }\n\n            that._angularCompileElements(itemsHtml, items);\n              if (that.dataItem(parentNode)) {\n                  that.dataItem(parentNode).hasChildren = true;\n                  that.updateArrow(parentNode);\n              }\n        },\n\n        _updateItems: function (items, field) {\n            var that = this;\n            var i, node, nodeWrapper, item;\n            var context = { panelBar: that.options, item: item, group: {} };\n            var render = field != \"expanded\";\n\n            if (field == \"selected\") {\n                if(items[0][field]){\n                    var currentNode = that.findByUid(items[0].uid);\n\n                    if (!currentNode.hasClass(DISABLEDCLASS)) {\n                        that.select(currentNode, true);\n                    }\n                }else{\n                    that.clearSelection();\n                }\n            } else {\n                var elements = $.map(items, function(item) {\n                    return that.findByUid(item.uid);\n                });\n\n                if (render) {\n                    that.angular(\"cleanup\", function() { return { elements: elements }; });\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    context.item = item = items[i];\n                    context.panelBar = that;\n                    nodeWrapper = elements[i];\n                    node = nodeWrapper.parent();\n                    if (render) {\n                        context.group = {\n                            firstLevel: node.hasClass(\"k-panelbar\"),\n                            expanded: nodeWrapper.parent().hasClass(ACTIVECLASS),\n                            length: nodeWrapper.children().length\n                        };\n\n                        nodeWrapper.children(\".k-link\").remove();\n                        nodeWrapper.prepend(that.templates.itemWrapper(extend(context,\n                            {\n                                arrow: item.hasChildren || item.content || item.contentUrl ? that.templates.arrow : that.templates.empty\n                            },\n                            rendering)));\n                    }\n\n                    if (field == \"expanded\") {\n                        that._toggleItem(nodeWrapper, !item[field], item[field] ? \"true\": true);\n                    } else if (field == \"enabled\") {\n                        that.enable(nodeWrapper, item[field]);\n                         if (!item[field]) {\n                            if (item.selected) {\n                                item.set(\"selected\", false);\n                            }\n                         }\n                    }\n\n                    if (nodeWrapper.length) {\n                        this.trigger(\"itemChange\", { item: nodeWrapper.find(\".k-link\").first(), data: item, ns: ui });\n                    }\n                }\n\n                if (render) {\n                    that.angular(\"compile\", function(){\n                        return {\n                            elements: elements,\n                            data: $.map(items, function(item) {\n                                return [{ dataItem: item }];\n                            })\n                        };\n                    });\n                }\n            }\n        },\n\n        _toggleDisabled: function(element, enable) {\n            element = this.element.find(element);\n            element\n                .toggleClass(DISABLEDCLASS, !enable)\n                .attr(ARIA_DISABLED, !enable);\n        },\n\n       dataItem: function(item) {\n            var uid = $(item).closest(ITEM).attr(kendo.attr(\"uid\")),\n                dataSource = this.dataSource;\n\n            return dataSource && dataSource.getByUid(uid);\n       },\n\n       select: function (element, skipChange) {\n           var that = this;\n\n            if (element === undefined) {\n                return that.element.find(selectableItems).parent();\n            }\n\n            element = that.element.find(element);\n\n            if (!element.length) {\n                this._updateSelected(element);\n            } else {\n                element\n                    .each(function () {\n                        var item = $(this),\n                            link = item.children(LINKSELECTOR);\n\n                        if (item.hasClass(DISABLEDCLASS)) {\n                            return that;\n                        }\n\n                        that._updateSelected(link, skipChange);\n                    });\n            }\n\n            return that;\n        },\n\n        clearSelection: function() {\n            this.select($());\n        },\n\n        enable: function (element, state) {\n            this._toggleDisabled(element, state !== false);\n\n            return this;\n        },\n\n        disable: function (element) {\n            this._toggleDisabled(element, false);\n\n            return this;\n        },\n\n        append: function (item, referenceItem) {\n            referenceItem = this.element.find(referenceItem);\n\n            var inserted = this._insert(item, referenceItem, referenceItem.length ? referenceItem.find(GROUPS) : null);\n\n            each(inserted.items, function () {\n                inserted.group.append(this);\n                updateFirstLast(this);\n                updateLevel(this);\n            });\n\n            this.updateArrow(referenceItem);\n            updateFirstLast(inserted.group.find(\".k-first, .k-last\"));\n            inserted.group.height(\"auto\");\n\n            return this;\n        },\n\n        insertBefore: function (item, referenceItem) {\n            referenceItem = this.element.find(referenceItem);\n\n            var inserted = this._insert(item, referenceItem, referenceItem.parent());\n\n            each(inserted.items, function () {\n                referenceItem.before(this);\n                updateFirstLast(this);\n                updateLevel(this);\n            });\n\n            updateFirstLast(referenceItem);\n            inserted.group.height(\"auto\");\n\n            return this;\n        },\n\n        insertAfter: function (item, referenceItem) {\n            referenceItem = this.element.find(referenceItem);\n\n            var inserted = this._insert(item, referenceItem, referenceItem.parent());\n\n            each(inserted.items, function () {\n                referenceItem.after(this);\n                updateFirstLast(this);\n                updateLevel(this);\n            });\n\n            updateFirstLast(referenceItem);\n            inserted.group.height(\"auto\");\n\n            return this;\n        },\n\n        remove: function (element) {\n            element = this.element.find(element);\n\n            var that = this,\n                parent = element.parentsUntil(that.element, ITEM),\n                group = element.parent(\"ul\");\n\n            element.remove();\n\n            if (group && !group.hasClass(\"k-panelbar\") && !group.children(ITEM).length) {\n                group.remove();\n            }\n\n            if (parent.length) {\n                parent = parent.eq(0);\n\n                that.updateArrow(parent);\n                updateFirstLast(parent);\n            }\n\n            return that;\n        },\n\n        reload: function (element) {\n            var that = this;\n            element = that.element.find(element);\n\n            element.each(function () {\n                var item = $(this);\n\n                that._ajaxRequest(item, item.children(\".\" + CONTENT), !item.is(VISIBLE));\n            });\n        },\n\n        _first: function() {\n            return this.element.children(ACTIVEITEMSELECTOR).first();\n        },\n\n        _last: function() {\n            var item = this.element.children(ACTIVEITEMSELECTOR).last(),\n                group = item.children(VISIBLEGROUP);\n\n            if (group[0]) {\n                return group.children(ACTIVEITEMSELECTOR).last();\n            }\n            return item;\n        },\n\n        _current: function(candidate) {\n            var that = this,\n                focused = that._focused,\n                id = that._itemId;\n\n            if (candidate === undefined) {\n                return focused;\n            }\n\n            that.element.removeAttr(\"aria-activedescendant\");\n\n            if (focused && focused.length) {\n                if (focused[0].id === id) {\n                    focused.removeAttr(\"id\");\n                }\n\n                focused\n                    .children(LINKSELECTOR)\n                    .removeClass(FOCUSEDCLASS);\n            }\n\n            if ($(candidate).length) {\n                id = candidate[0].id || id;\n\n                candidate.attr(\"id\", id)\n                         .children(LINKSELECTOR)\n                         .addClass(FOCUSEDCLASS);\n\n                that.element.attr(\"aria-activedescendant\", id);\n            }\n\n            that._focused = candidate;\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                current = that._current();\n\n            if (e.target != e.currentTarget) {\n                return;\n            }\n\n            if (key == keys.DOWN || key == keys.RIGHT) {\n                that._current(that._nextItem(current));\n                e.preventDefault();\n            } else if (key == keys.UP || key == keys.LEFT) {\n                that._current(that._prevItem(current));\n                e.preventDefault();\n            } else if (key == keys.ENTER || key == keys.SPACEBAR) {\n                that._click(e);\n                e.preventDefault();\n            } else if (key == keys.HOME) {\n                that._current(that._first());\n                e.preventDefault();\n            } else if (key == keys.END) {\n                that._current(that._last());\n                e.preventDefault();\n            }\n        },\n\n        _nextItem: function(item) {\n            if (!item) {\n                return this._first();\n            }\n\n            var group = item.children(VISIBLEGROUP),\n                next = item.nextAll(\":visible\").first();\n\n            if (group[0]) {\n                next = group.children(\".\" + FIRST);\n            }\n\n            if (!next[0]) {\n                next = item.parent(VISIBLEGROUP).parent(ITEM).next();\n            }\n\n            if (!next[0]) {\n                next = this._first();\n            }\n\n            if (next.hasClass(DISABLEDCLASS)) {\n                next = this._nextItem(next);\n            }\n\n            return next;\n        },\n\n        _prevItem: function(item) {\n            if (!item) {\n                return this._last();\n            }\n\n            var prev = item.prevAll(\":visible\").first(),\n                result;\n\n            if (!prev[0]) {\n                prev = item.parent(VISIBLEGROUP).parent(ITEM);\n                if (!prev[0]) {\n                    prev = this._last();\n                }\n            } else {\n                result = prev;\n                while (result[0]) {\n                    result = result.children(VISIBLEGROUP).children(\".\" + LAST);\n                    if (result[0]) {\n                        prev = result;\n                    }\n                }\n            }\n\n            if (prev.hasClass(DISABLEDCLASS)) {\n                prev = this._prevItem(prev);\n            }\n\n            return prev;\n        },\n\n        _insert: function (item, referenceItem, parent) {\n            var that = this,\n                items,\n                plain = $.isPlainObject(item),\n                isReferenceItem = referenceItem && referenceItem[0],\n                groupData;\n\n            if (!isReferenceItem) {\n                parent = that.element;\n            }\n\n            groupData = {\n                firstLevel: parent.hasClass(\"k-panelbar\"),\n                expanded: $(referenceItem).hasClass(ACTIVECLASS),\n                length: parent.children().length\n            };\n\n            if (isReferenceItem && !parent.length) {\n                parent = $(that.renderGroup({ group: groupData, options: that.options })).appendTo(referenceItem);\n            }\n\n            if (plain || Array.isArray(item) || item instanceof HierarchicalDataSource) { // is JSON or HierarchicalDataSource\n                if (item instanceof HierarchicalDataSource) {\n                   item = item.data();\n                }\n\n                items = $.map(plain ? [item] : item, function(value, idx) {\n                    if (typeof value === \"string\") {\n                        return $(value);\n                    } else {\n                        return $(that.renderItem({\n                            group: groupData,\n                            item: extend(value, { index: idx })\n                        }));\n                    }\n                });\n                if (isReferenceItem) {\n                    var dataItem = that.dataItem(referenceItem);\n\n                    if (dataItem) {\n                        dataItem.hasChildren = true;\n                        referenceItem\n                            .attr(ARIA_EXPANDED, dataItem.expanded)\n                            .not(\".\" + ACTIVECLASS)\n                            .children(\"ul\")\n                            .attr(ARIA_HIDDEN, !dataItem.expanded);\n                    }else{\n                        referenceItem.attr(ARIA_EXPANDED, false);\n                    }\n                }\n            } else {\n                if (typeof item == \"string\" && item.charAt(0) != \"<\") {\n                    items = that.element.find(item);\n                } else {\n                    items = $(item);\n                }\n                that._updateItemsClasses(items);\n            }\n\n            if (!item.length){\n                item = [item];\n            }\n\n            that._angularCompileElements(items, item);\n            return { items: items, group: parent };\n        },\n\n        _toggleHover: function(e) {\n            var target = $(e.currentTarget);\n\n            if (!target.parents(\"li.\" + DISABLEDCLASS).length) {\n                target.toggleClass(\"k-state-hover\", e.type == MOUSEENTER);\n            }\n        },\n\n        _updateClasses: function() {\n            var that = this,\n                panels, items, expanded, panelsParent, dataItem;\n\n            panels = that.element\n                         .find(\"li > ul\")\n                         .not(function () { return $(this).parentsUntil(\".k-panelbar\", \"div\").length; })\n                         .addClass(\"k-panelbar-group k-group k-panel\")\n                         .attr(\"role\", \"group\");\n\n            panelsParent = panels.parent();\n            dataItem = that.dataItem(panelsParent);\n            expanded = (dataItem && dataItem.expanded) || false;\n\n            panels.parent()\n                  .not(\"[\" + ARIA_EXPANDED + \"]\")\n                  .attr(ARIA_EXPANDED, expanded)\n                  .not(\".\" + ACTIVECLASS)\n                  .children(\"ul\")\n                  .attr(ARIA_HIDDEN, !expanded)\n                  .hide();\n\n            items = that.element.add(panels).children();\n\n            that._updateItemsClasses(items);\n            that.updateArrow(items);\n            updateFirstLast(items);\n        },\n\n        _updateItemsClasses: function(items) {\n            var length = items.length,\n                idx = 0;\n\n            for(; idx < length; idx++) {\n                this._updateItemClasses(items[idx], idx);\n            }\n        },\n\n        _updateItemClasses: function(item, index) {\n            var selected = this._selected,\n                contentUrls = this.options.contentUrls,\n                url = contentUrls && contentUrls[index],\n                root = this.element[0],\n                wrapElement, link;\n\n            item = $(item).addClass(\"k-item\").attr(\"role\", \"treeitem\");\n\n            if (kendo.support.browser.msie) {  // IE10 doesn't apply list-style: none on invisible items otherwise.\n                item.css(\"list-style-position\", \"inside\")\n                    .css(\"list-style-position\", \"\");\n            }\n\n            item\n                .children(IMG)\n                .addClass(IMAGE);\n\n            link = item\n                    .children(\"a\")\n                    .addClass(LINK);\n\n            if (link[0]) {\n                link.attr(\"href\", url); //url can be undefined\n\n                link.children(IMG)\n                    .addClass(IMAGE);\n            }\n\n            item\n                .filter(\"li[disabled]\")\n                .addClass(\"k-state-disabled\")\n                .attr(ARIA_DISABLED, true)\n                .prop(\"disabled\", false);\n\n            item\n                .children(\"div\")\n                .addClass(CONTENT + \" k-panelbar-content\")\n                .attr(ARIA_HIDDEN, true)\n                .hide()\n                .parent()\n                .attr(ARIA_EXPANDED, false);\n\n            link = item.children(SELECTEDSELECTOR);\n            if (link[0]) {\n                if (selected) {\n                    selected.removeAttr(ARIA_SELECTED)\n                            .children(SELECTEDSELECTOR)\n                            .removeClass(SELECTEDCLASS);\n                }\n\n                link.addClass(SELECTEDCLASS);\n                this._selected = item.attr(ARIA_SELECTED, true);\n            }\n\n            if (!item.children(LINKSELECTOR)[0]) {\n                wrapElement = \"<span class='\" + LINK + \"'><span class='k-panelbar-item-text'></span></span>\";\n                if (contentUrls && contentUrls[index] && item[0].parentNode == root) {\n                    wrapElement = '<a class=\"k-link\" href=\"' + contentUrls[index] + '\"></a>';\n                }\n\n                item\n                    .contents()      // exclude groups, real links, templates and empty text nodes\n                    .filter(function() { return (!this.nodeName.match(excludedNodesRegExp) && !(this.nodeType == 3 && !kendo.trim(this.nodeValue.trim))); })\n                    .wrapAll(wrapElement);\n            }\n\n\n            if (item.parent(\".k-panelbar\")[0]) {\n                item.addClass(\"k-panelbar-header\");\n            } else {\n                item.addClass(\"k-panelbar-item\");\n            }\n\n            if (!/k\\-level\\-\\d+/i.test(item.attr(\"class\"))) {\n                item.addClass(\"k-level-\" + item.parentsUntil(this.element, \"ul\").length);\n            }\n        },\n\n        _click: function (e) {\n            var that = this,\n                target = e.type == CLICK ? $(e.target) : that._current().children(LINKSELECTOR),\n                element = that.element,\n                prevent, contents, href, isAnchor;\n\n            if (target.parents(\"li.\" + DISABLEDCLASS).length) {\n                return;\n            }\n\n            if (target.closest(\".k-panelbar\")[0] != element[0]) {\n                return;\n            }\n\n            if (target.is(\":kendoFocusable\") && !target.hasClass(LINK)) {\n                return;\n            }\n\n            var link = target.closest(LINKSELECTOR),\n                item = link.closest(ITEM);\n\n            that._updateSelected(link);\n\n            var wrapper = item.children(\".k-group,.k-content\");\n            var dataItem = this.dataItem(item);\n\n            if (!wrapper.length && ((that.options.loadOnDemand && dataItem && dataItem.hasChildren) ||\n             this._hasChildItems(item) || item.content || item.contentUrl)) {\n                wrapper =  that._addGroupElement(item);\n            }\n\n            contents = item.find(GROUPS).add(item.find(CONTENTS));\n            href = link.attr(HREF);\n            isAnchor = href && (href.charAt(href.length - 1) == \"#\" || href.indexOf(\"#\" + that.element[0].id + \"-\") != -1);\n            prevent = !!(isAnchor || contents.length);\n\n            if (contents.data(\"animating\") && prevent) {\n                e.preventDefault();\n                return;\n            }\n\n            if (that._triggerEvent(SELECT, item)) {\n                prevent = true;\n            }\n\n            if (prevent === false) {\n                return;\n            }\n\n            if (that.options.expandMode == SINGLE) {\n                if (that._collapseAllExpanded(item) && prevent) {\n                    e.preventDefault();\n                    return;\n                }\n            }\n\n            if (contents.length) {\n                var visibility = contents.is(VISIBLE);\n\n                if (!that._triggerEvent(!visibility ? EXPAND : COLLAPSE, item)) {\n                    prevent = that._toggleItem(item, visibility);\n                }\n            }\n\n            if (prevent) {\n                e.preventDefault();\n            }\n        },\n        _hasChildItems: function (item) {\n            return (item.items && item.items.length > 0) || item.hasChildren;\n        },\n\n        _toggleItem: function (element, isVisible, expanded) {\n            var that = this,\n                childGroup = element.find(GROUPS),\n                link = element.find(LINKSELECTOR),\n                url = link.attr(HREF),\n                prevent, content,\n                dataItem = that.dataItem(element),\n                notVisible = !isVisible;\n\n            var loaded = dataItem && dataItem.loaded();\n\n            if (dataItem && !expanded && dataItem.expanded !== notVisible) {\n                dataItem.set(\"expanded\", notVisible);\n                prevent = dataItem.hasChildren || !!dataItem.content || !!dataItem.contentUrl;\n                return prevent;\n            }\n\n            if (dataItem && (!expanded || expanded === \"true\") &&  !loaded && !dataItem.content && !dataItem.contentUrl) {\n                 if (that.options.loadOnDemand) {\n                     this._progress(element, true);\n                 }\n\n                 element.children(\".k-group,.k-content\").remove();\n                 prevent = dataItem.hasChildren;\n\n                 dataItem.load();\n             } else {\n                   if (childGroup.length) {\n                        this._toggleGroup(childGroup, isVisible);\n                        prevent = true;\n                   } else {\n                        content = element.children(\".\"  + CONTENT);\n\n                        if (content.length) {\n                            prevent = true;\n\n                            if (!content.is(EMPTY) || url === undefined) {\n                                that._toggleGroup(content, isVisible);\n                            } else {\n                                that._ajaxRequest(element, content, isVisible);\n                            }\n                        }\n                    }\n             }\n\n            return prevent;\n        },\n\n        _toggleGroup: function (element, visibility) {\n            var that = this,\n                animationSettings = that.options.animation,\n                animation = animationSettings.expand,\n                hasCollapseAnimation = animationSettings.collapse && \"effects\" in animationSettings.collapse,\n                collapse = extend({}, animationSettings.expand, animationSettings.collapse);\n\n            if (!hasCollapseAnimation) {\n                collapse = extend(collapse, {reverse: true});\n            }\n\n            if (element.is(VISIBLE) != visibility) {\n                that._animating = false;\n                return;\n            }\n\n            element.attr(ARIA_HIDDEN, !!visibility);\n\n            element.parent()\n                .attr(ARIA_EXPANDED, !visibility)\n                .toggleClass(ACTIVECLASS, !visibility)\n                .find(\"> .k-link > .k-panelbar-collapse,> .k-link > .k-panelbar-expand\")\n                    .toggleClass(\"k-i-arrow-chevron-up\", !visibility)\n                    .toggleClass(\"k-panelbar-collapse\", !visibility)\n                    .toggleClass(\"k-i-arrow-chevron-down\", visibility)\n                    .toggleClass(\"k-panelbar-expand\", visibility);\n            if (visibility) {\n                animation = extend(collapse, { hide: true });\n\n                animation.complete = function() {\n                    that._animationCallback();\n                };\n            } else {\n                animation = extend( { complete: function (element) {\n                        that._triggerEvent(ACTIVATE, element.closest(ITEM));\n                        that._animationCallback();\n                    } }, animation );\n            }\n\n            element\n                .toggle(0)\n                .kendoStop(true, true)\n                .kendoAnimate( animation );\n        },\n\n        _animationCallback: function() {\n            var that = this;\n            that.trigger(\"complete\");\n            that._animating = false;\n        },\n\n        _addGroupElement: function(element) {\n            var group = $('<ul role=\"group\" aria-hidden=\"true\" class=\"k-panelbar-group k-group k-panel\" style=\"display:none\"></ul>');\n\n            element.append(group);\n            return group;\n        },\n\n        _collapseAllExpanded: function (item) {\n            var that = this, children, stopExpand = false;\n\n            var groups = item.find(GROUPS).add(item.find(CONTENTS));\n\n            if (groups.is(VISIBLE)) {\n                stopExpand = true;\n            }\n\n            if (!(groups.is(VISIBLE) || groups.length === 0)) {\n                children = item.siblings();\n                children.find(GROUPS).add(children.find(CONTENTS))\n                        .filter(function () { return $(this).is(VISIBLE); })\n                        .each(function (index, content) {\n                            content = $(content);\n\n                            stopExpand = that._triggerEvent(COLLAPSE, content.closest(ITEM));\n                            if (!stopExpand) {\n                                that._toggleGroup(content, true);\n                            }\n                        });\n\n                 that.one(\"complete\", function() {\n                    setTimeout(function() {\n                        children.each(function (index, child) {\n                            var dataItem = that.dataItem(child);\n\n                            if(dataItem){\n                                dataItem.set(\"expanded\", false);\n                            }\n                        });\n                    });\n                });\n            }\n\n            return stopExpand;\n        },\n\n        _ajaxRequest: function (element, contentElement, isVisible) {\n\n            var that = this,\n                statusIcon = element.find(\".k-panelbar-collapse, .k-panelbar-expand\"),\n                link = element.find(LINKSELECTOR),\n                loadingIconTimeout = setTimeout(function () {\n                    statusIcon.addClass(\"k-i-loading\");\n                }, 100),\n                data = {},\n                url = link.attr(HREF);\n\n            $.ajax({\n                type: \"GET\",\n                cache: false,\n                url: url,\n                dataType: \"html\",\n                data: data,\n\n                error: function (xhr, status) {\n                    statusIcon.removeClass(\"k-i-loading\");\n                    if (that.trigger(ERROR, { xhr: xhr, status: status })) {\n                        this.complete();\n                    }\n                },\n\n                complete: function () {\n                    clearTimeout(loadingIconTimeout);\n                    statusIcon.removeClass(\"k-i-loading\");\n                },\n\n                success: function (data) {\n                    function getElements(){\n                        return { elements: contentElement.get() };\n                    }\n                    try {\n                        that.angular(\"cleanup\", getElements);\n                        contentElement.html(data);\n                        that.angular(\"compile\", getElements);\n                    } catch (e) {\n                        var console = window.console;\n\n                        if (console && console.error) {\n                            console.error(e.name + \": \" + e.message + \" in \" + url);\n                        }\n                        this.error(this.xhr, \"error\");\n                    }\n\n                    that._toggleGroup(contentElement, isVisible);\n\n                    that.trigger(CONTENTLOAD, { item: element[0], contentElement: contentElement[0] });\n                }\n            });\n        },\n\n        _triggerEvent: function (eventName, element) {\n            var that = this;\n\n            return that.trigger(eventName, { item: element[0] });\n        },\n\n        _updateSelected: function(link, skipChange) {\n            var that = this,\n                element = that.element,\n                item = link.parent(ITEM),\n                selected = that._selected,\n                dataItem = that.dataItem(item);\n\n            if (selected) {\n                selected.removeAttr(ARIA_SELECTED);\n            }\n\n            that._selected = item.attr(ARIA_SELECTED, true);\n\n            element.find(selectableItems).removeClass(SELECTEDCLASS);\n            element.find(\"> .\" + HIGHLIGHTCLASS + \", .k-panel > .\" + HIGHLIGHTCLASS).removeClass(HIGHLIGHTCLASS);\n\n            link.addClass(SELECTEDCLASS);\n            link.parentsUntil(element, ITEM).filter(\":has(.k-link)\").addClass(HIGHLIGHTCLASS);\n            that._current(item[0] ? item : null);\n            if(dataItem){\n                 dataItem.set(\"selected\", true);\n            }\n\n            if(!skipChange){\n                that.trigger(CHANGE);\n            }\n        },\n\n        _animations: function(options) {\n            if (options && (\"animation\" in options) && !options.animation) {\n                options.animation = { expand: { effects: {} }, collapse: { hide: true, effects: {} } };\n            }\n        },\n\n        renderItem: function (options) {\n            var that = this;\n                options = extend({ panelBar: that, group: {} }, options);\n\n            var empty = that.templates.empty,\n                item = options.item;\n\n            return that.templates.item(extend(options, {\n                itemWrapper: that.templates.itemWrapper,\n                renderContent: that.renderContent,\n                arrow: that._hasChildItems(item) || item.content || item.contentUrl ? that.templates.arrow : empty,\n                subGroup: !options.loadOnDemand || item.expanded ? that.renderGroup : empty\n            }, rendering));\n        },\n\n        renderGroup: function(options) {\n            var that = this;\n            var templates = that.templates || options.panelBar.templates;\n\n            return templates.group(extend({\n                renderItems: function(options) {\n                    var html = \"\",\n                        i = 0,\n                        items = options.items,\n                        len = items ? items.length : 0,\n                        group = extend({ length: len }, options.group);\n\n                    for (; i < len; i++) {\n                        html += options.panelBar.renderItem(extend(options, {\n                            group: group,\n                            item: extend({ index: i }, items[i])\n                        }));\n                    }\n\n                    return html;\n                }\n            }, options, rendering));\n        },\n\n        renderContent: function(options) {\n            return options.panelBar.templates.content(extend(options, rendering));\n        }\n    });\n\nkendo.ui.plugin(PanelBar);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","ui","keys","extend","proxy","each","isArray","Array","template","Widget","HierarchicalDataSource","data","excludedNodesRegExp","NS","IMG","HREF","LAST","LINK","LINKSELECTOR","ERROR","ITEM","GROUP","VISIBLEGROUP","IMAGE","FIRST","CHANGE","EXPAND","SELECT","CLICK","CONTENT","ACTIVATE","COLLAPSE","DATABOUND","MOUSEENTER","MOUSELEAVE","CONTENTLOAD","UNDEFINED","ACTIVECLASS","GROUPS","CONTENTS","STRING","FOCUSEDCLASS","DISABLEDCLASS","SELECTEDCLASS","SELECTEDSELECTOR","HIGHLIGHTCLASS","ACTIVEITEMSELECTOR","clickableItems","disabledItems","selectableItems","ARIA_DISABLED","ARIA_EXPANDED","ARIA_HIDDEN","ARIA_SELECTED","VISIBLE","EMPTY","SINGLE","bindings","text","url","spriteCssClass","imageUrl","itemIcon","rendering","aria","item","attr","items","content","contentUrl","expanded","enabled","wrapperCssClass","group","result","index","firstLevel","length","cssClass","level","textClass","selected","textAttributes","arrowClass","encoded","htmlEncode","groupAttributes","ariaHidden","groupCssClass","contentAttributes","updateFirstLast","filter","removeClass","addClass","updateLevel","parentsUntil","updateItemHtml","wrapper","children","toggleButton","hasClass","appendTo","remove","PanelBar","DataBoundWidget","init","element","options","that","this","hasDataSource","dataSource","fn","call","_itemId","_tabindex","_accessors","_dataSource","_templates","_initData","_updateClasses","_animations","on","_click","_toggleHover","_retryRequest","_keydown","select","_current","_first","find","expand","parent","_angularCompile","notify","events","animation","effects","duration","collapse","messages","loading","requestFailed","retry","autoBind","loadOnDemand","expandMode","dataTextField","angular","elements","dataItem","$angular","_angularCompileElements","html","map","_angularCleanup","destroy","off","empty","_progress","fetch","fieldAccessor","_fieldAccessor","templates","itemWrapper","arrow","setOptions","setDataSource","useAnimation","animBackup","_animating","is","one","setTimeout","_addGroupElement","groups","add","_collapseAllExpanded","hide","_triggerEvent","_toggleItem","updateArrow","hasChildren","append","i","field","textField","showProgress","loadingText","arguments","toggleClass","_refreshRoot","groupData","rootItemsHtml","value","idx","renderItem","trigger","eq","first","ns","_refreshChildren","parentNode","child","_toggleGroup","findByUid","uid","uidAttr","getAttribute","refresh","e","node","action","_updateItems","_appendItems","k","tempItem","_hasChildItems","load","_error","retryHtml","_expanded","loaded","preventDefault","_bindDataSource","_refreshHandler","_errorHandler","bind","_unbindDataSource","unbind","fieldName","fieldBindings","count","x","expr","join","fields","create","itemsHtml","insertAfter","nodeWrapper","context","panelBar","render","currentNode","clearSelection","prepend","enable","set","_toggleDisabled","closest","getByUid","skipChange","_updateSelected","link","state","disable","referenceItem","inserted","_insert","height","insertBefore","before","after","reload","_ajaxRequest","_last","last","candidate","focused","_focused","removeAttr","key","keyCode","current","target","currentTarget","DOWN","RIGHT","_nextItem","UP","LEFT","_prevItem","ENTER","SPACEBAR","HOME","END","next","nextAll","prev","prevAll","plain","isPlainObject","isReferenceItem","renderGroup","not","charAt","_updateItemsClasses","parents","type","panels","panelsParent","_updateItemClasses","_selected","contentUrls","root","wrapElement","support","browser","msie","css","prop","contents","nodeName","match","nodeType","trim","nodeValue","wrapAll","test","prevent","href","isAnchor","indexOf","visibility","isVisible","childGroup","notVisible","animationSettings","hasCollapseAnimation","reverse","complete","_animationCallback","toggle","kendoStop","kendoAnimate","stopExpand","siblings","contentElement","statusIcon","loadingIconTimeout","ajax","cache","dataType","error","xhr","status","clearTimeout","success","getElements","get","console","message","eventName","renderContent","subGroup","renderItems","len","plugin","amd","a1","a2","a3"],"mappings":"CAwBA,SAAaA,QACTA,OAAO,iBAAiB,CAAE,gBAC3B,WAEH,IAAIC,EAAW,CACXC,GAAI,WACJC,KAAM,WACNC,SAAU,MACVC,YAAa,wFACbC,QAAS,CAAE,OAAQ,OAAQ,eAGrBC,EA8tDPC,OAAOC,MAAMC,OA9tDHC,OAAb,EACQF,EAAQD,OAAOC,MACfG,EAAKH,EAAMG,GACXC,EAAOJ,EAAMI,KACbC,EAASP,EAAEO,OACXC,EAAQR,EAAEQ,MACVC,EAAOT,EAAES,KACTC,EAAUC,MAAMD,QAChBE,EAAWV,EAAMU,SACjBC,EAASR,EAAGQ,OACZC,EAAyBZ,EAAMa,KAAKD,uBACpCE,EAAsB,gBACtBC,EAAK,iBACLC,EAAM,MACNC,EAAO,OACPC,EAAO,SACPC,EAAO,SACPC,EAAe,IAAMD,EACrBE,EAAQ,QACRC,EAAO,UACPC,EACAC,EADQ,WACe,WACvBC,EAAQ,UACRC,EAAQ,UACRC,EAAS,SACTC,EAAS,SACTC,EAAS,SACTC,EAAQ,QACRC,EAAU,YACVC,EAAW,WACXC,EAAW,WACXC,EAAY,YACZC,EAAa,aACbC,EAAa,aACbC,EAAc,cACdC,EAAY,YACZC,EAAc,iBACdC,EAAS,aACTC,EAAW,eACXC,EAAS,SACTC,EAAe,kBACfC,EAAgB,mBAChBC,EAAgB,mBAChBC,EAAmB,IAAMD,EACzBE,EAAiB,oBACjBC,EAAqB1B,EAAO,0BAC5B2B,EAAiB,KAAOD,EAAqB,MAAQ5B,EAAe,gBAAkB4B,EAAqB,MAAQ5B,EACnH8B,EAAgB5B,EAAO,8BACvB6B,EAAkB,UAAYL,EAAmB,qBAAuBA,EACxEM,EAAgB,gBAChBC,EAAgB,gBAChBC,EAAc,cACdC,GAAgB,gBAChBC,GAAU,WACVC,GAAQ,SACRC,GAAS,SACTC,GAAW,CACPC,KAAM,gBACNC,IAAK,eACLC,eAAgB,0BAChBC,SAAU,qBAEdC,GACAC,GAAY,CACZC,KAAM,SAASC,GACX,IAAIC,EAAO,GAEX,GAAID,EAAKE,OAASF,EAAKG,SAAWH,EAAKI,YAAcJ,EAAKK,SACtDJ,GAAQf,EAAgB,MAAQc,EAAKK,SAAW,OAAS,SAAW,KAGxE,GAAIL,EAAKM,UAAY,MACjBL,GAAQhB,EAAgB,UAG5B,OAAOgB,GAGfM,gBAAiB,SAAUC,EAAOR,GAC9B,IAAIS,EAAS,SACTC,EAAQV,EAAKU,MAEjBD,GAAUD,EAAMG,WAAa,qBAAuB,mBAEpD,GAAIX,EAAKM,UAAY,MACjBG,GAAU,IAAMhC,OACb,GAAIuB,EAAKK,WAAa,KACzBI,GAAU,IAAMrC,EAGpB,GAAIsC,IAAU,EACVD,GAAU,WAGd,GAAIC,GAASF,EAAMI,OAAS,EACxBH,GAAU,UAGd,GAAIT,EAAKa,SACLJ,GAAU,IAAMT,EAAKa,SAGzB,GAAIb,EAAKc,MACLL,GAAU,YAAcT,EAAKc,QAGjC,OAAOL,GAGXM,UAAW,SAASf,GAChB,IAAIS,EAASzD,EAEb,GAAIgD,EAAKgB,SACLP,GAAU,IAAM/B,EAGpB,OAAO+B,GAEXQ,eAAgB,SAASvB,GACrB,OAAOA,EAAM,UAAYA,EAAM,IAAM,IAEzCwB,WAAY,SAASlB,GACjB,IAAIS,EAAS,SAEbA,GAAUT,EAAKK,SAAW,8DAAgE,8DAE1F,OAAOI,GAEXhB,KAAM,SAASO,GACV,OAAOA,EAAKmB,UAAY,MAAQnB,EAAKP,KAAO5D,EAAMuF,WAAWpB,EAAKP,OAEvE4B,gBAAiB,SAASb,GACtB,OAAOA,EAAMH,WAAa,KAAO,wBAA0B,IAE/DiB,WAAY,SAASd,GACjB,OAAOA,EAAMH,WAAa,MAE9BkB,cAAe,WACX,MAAO,oCAEXC,kBAAmB,SAASrB,GACxB,OAAOA,EAAQH,KAAKK,WAAa,KAAO,wBAA0B,IAEtEF,QAAS,SAASH,GACd,OAAOA,EAAKG,QAAUH,EAAKG,QAAUH,EAAKI,WAAa,GAAK,UAEhEA,WAAY,SAASJ,GACjB,OAAOA,EAAKI,WAAa,SAAWJ,EAAKI,WAAa,IAAM,KAIhE,SAASqB,GAAiBvB,GACtBA,EAAQvE,EAAEuE,GAEVA,EAAMwB,OAAO,8BAA8BC,YAAYpE,GACvD2C,EAAMwB,OAAO,4BAA4BC,YAAY5E,GACrDmD,EAAMwB,OAAO,gBAAgBE,SAASrE,GACtC2C,EAAMwB,OAAO,eAAeE,SAAS7E,GAGzC,SAAS8E,GAAa7B,GAClBA,EAAOrE,EAAEqE,GAETA,EAAK4B,SAAS,WAAa5B,EAAK8B,aAAa,cAAe,MAAMlB,QAGrE,SAASmB,GAAe/B,GACrB,IAAIgC,EAAUhC,EACVQ,EAAQR,EAAKiC,SAAS,MACtBC,EAAeF,EAAQC,SAAS,WAAWA,SAAS,WAExD,GAAIjC,EAAKmC,SAAS,cACd,OAGJ,IAAKD,EAAatB,QAAUJ,EAAMI,OAC9BsB,EAAevG,EAAE,2BAA2ByG,SAASJ,QAClD,IAAKxB,EAAMI,SAAWJ,EAAMyB,WAAWrB,OAAQ,CAClDsB,EAAaG,SACb7B,EAAM6B,UAIdxC,GAAW,SAASG,GAChB,OAAOA,EAAKiC,SAAS,QAAQA,SAAS,YAG1C,IAAIK,GAAWzG,EAAMG,GAAGuG,gBAAgBrG,OAAO,CAC3CsG,KAAM,SAASC,EAASC,GACpB,IAAIC,EAAOC,KACPzC,EACA0C,EAEL,GAAIxG,EAAQqG,GACPA,EAAU,CAAEI,WAAYJ,GAG5BG,EAAgBH,KAAaA,EAAQI,WAErCtG,EAAOuG,GAAGP,KAAKQ,KAAKL,EAAMF,EAASC,GAEnCD,EAAUE,EAAKX,QAAUW,EAAKF,QAAQb,SAAS,cAC/Cc,EAAUC,EAAKD,QAEf,GAAID,EAAQ,GAAGnH,GACXqH,EAAKM,QAAUR,EAAQ,GAAGnH,GAAK,aAGnCqH,EAAKO,YAELP,EAAKQ,aAELR,EAAKS,cAELT,EAAKU,aAELV,EAAKW,UAAUT,GAEfF,EAAKY,iBAELZ,EAAKa,YAAYd,GAEjBD,EACKgB,GAAG9F,EAAQf,EAAIkC,EAAgB3C,EAAMwG,EAAKe,OAAQf,IAClDc,GAAGzF,EAAcpB,EAAK,IAAMqB,EAAarB,EAAIkC,EAAgB6D,EAAKgB,cAClEF,GAAG9F,EAAQf,EAAImC,EAAe,OAC9B0E,GAAG9F,EAAQf,EAAI,mBAAoBT,EAAMwG,EAAKiB,cAAejB,IAC7Dc,GAAG,UAAY7G,EAAIT,EAAMwG,EAAKkB,SAAUlB,IACxCc,GAAG,QAAU7G,EAAI,WACd,IAAIoD,EAAO2C,EAAKmB,SAChBnB,EAAKoB,SAAS/D,EAAK,GAAKA,EAAO2C,EAAKqB,YAEvCP,GAAG,OAAS7G,EAAI,WACb+F,EAAKoB,SAAS,QAEjB9D,KAAK,OAAQ,QAElBE,EAAUsC,EAAQwB,KAAK,MAAQ7F,EAAc,OAASR,GAEtD,GAAIuC,EAAQ,GACRwC,EAAKuB,OAAO/D,EAAQgE,SAAU,OAGlC,IAAKzB,EAAQI,WACTH,EAAKyB,kBAGTvI,EAAMwI,OAAO1B,IAGjB2B,OAAQ,CACJ7G,EACAK,EACAJ,EACAG,EACAL,EACAN,EACAa,EACAG,GAEJwE,QAAS,CACLnH,KAAM,WACNuH,WAAY,GACZyB,UAAW,CACPL,OAAQ,CACJM,QAAS,kBACTC,SAAU,KAEdC,SAAU,CACND,SAAU,MAGlBE,SAAU,CACNC,QAAS,aACTC,cAAe,kBACfC,MAAO,SAEXC,SAAU,KACVC,aAAc,KACdC,WAAY,WACZ1I,SAAU,GACV2I,cAAe,MAGnBd,gBAAiB,WACb,IAAIzB,EAAOC,KACXD,EAAKwC,QAAQ,UAAW,WACpB,MAAO,CACHC,SAAUzC,EAAKF,QAAQR,SAAS,MAChCvF,KAAM,CAAC,CAAE2I,SAAU1C,EAAKD,QAAQ4C,eAK5CC,wBAAyB,SAASC,EAAMtF,GACpC,IAAIyC,EAAOC,KACXD,EAAKwC,QAAQ,UAAW,WACpB,MAAO,CACHC,SAAUI,EACV9I,KAAMf,EAAE8J,IAAIvF,EAAO,SAASF,GACxB,MAAO,CAAC,CAAEqF,SAAUrF,UAMpC0F,gBAAiB,WACb,IAAI/C,EAAOC,KAEXD,EAAKwC,QAAQ,UAAW,WACpB,MAAO,CAAEC,SAAUzC,EAAKF,QAAQR,SAAS,UAIjD0D,QAAS,WACLnJ,EAAOuG,GAAG4C,QAAQ3C,KAAKJ,MAEvBA,KAAKH,QAAQmD,IAAIhJ,GAEjBgG,KAAK8C,kBAEL7J,EAAM8J,QAAQ/C,KAAKH,UAGvBa,UAAW,SAAST,GAChB,IAAIF,EAAOC,KAEX,GAAIC,EAAe,CACfF,EAAKF,QAAQoD,QACZ,GAAIlD,EAAKD,QAAQqC,SAAU,CACxBpC,EAAKmD,UAAU,MAEfnD,EAAKG,WAAWiD,WAK5B1C,WAAY,WACR,IAAIV,EAAOC,KACPF,EAAUC,EAAKD,QACfsD,EAAgB7J,EAAMwG,EAAKsD,eAAgBtD,GAE7C,GAAID,EAAQnG,iBAAmBmG,EAAQnG,UAAYgC,EAC7CmE,EAAQnG,SAAWA,EAASmG,EAAQnG,eACnC,IAAKmG,EAAQnG,SACbmG,EAAQnG,SAAWA,EAChB,gBAAkByJ,EAAc,QAAU,iBAC1C,mFACI,sDACJ,eACI,sDACJ,SAIZrD,EAAKuD,UAAY,CACb/F,QAAS5D,EACL,kGAEJiE,MAAOjE,EACH,sHACI,yBACJ,SAEJ4J,YAAa5J,EACR,eAAiByJ,EAAc,OAAS,YACxC,oBAAsBA,EAAc,YAAc,YAClD,0BAA4BA,EAAc,kBAAoB,YAC9D,yCACA,gDAED,kFACI,sBACM,0EACN,QAEA,4BACI,qDACJ,QACF,4CACA,mBACF,eAGJhG,KAAMzD,EACF,6EACKV,EAAMoE,KAAK,OAAS,oBACrB,yBACA,iDACA,+FACA,oDACA,2BACA,QACJ,SAEJ2E,QAASrI,EAAS,+FAClBuI,MAAOvI,EACH,sBACI,oCACA,4KACJ,SAEJ6J,MAAO7J,EAAS,+CAChBsJ,MAAOtJ,EAAS,MAIxB8J,WAAY,SAAS3D,GACjB,IAAI6B,EAAY3B,KAAKF,QAAQ6B,UAE7B3B,KAAKY,YAAYd,GAEjBA,EAAQ6B,UAAYrI,EAAO,KAAMqI,EAAW7B,EAAQ6B,WAEpD,GAAI,eAAgB7B,EAChBE,KAAK0D,cAAc5D,EAAQI,YAG/BtG,EAAOuG,GAAGsD,WAAWrD,KAAKJ,KAAMF,IAGpCwB,OAAQ,SAAUzB,EAAS8D,GACvB,IAAI5D,EAAOC,KACP4D,EAAa,GAEjB/D,EAAUG,KAAKH,QAAQwB,KAAKxB,GAE5B,GAAIE,EAAK8D,YAAchE,EAAQwB,KAAK,MAAMyC,GAAG,YAAa,CACtD/D,EAAKgE,IAAI,WAAY,WACjBC,WAAW,WACPjE,EAAKuB,OAAOzB,OAGpB,OAEJE,EAAK8D,WAAa,KAElBF,EAAeA,IAAiB,MAEhC9D,EAAQrG,KAAK,SAAUsE,EAAOV,GAC1BA,EAAOrE,EAAEqE,GACT,IAAIgC,EAAUS,EAAQR,SAAS,uBAE/B,IAAKD,EAAQpB,OACToB,EAAWW,EAAKkE,iBAAiBpE,GAGpC,IAAIqE,EAAS9E,EAAQ+E,IAAI/G,EAAKiE,KAAK3F,IAEpC,IAAK0B,EAAKmC,SAAS1D,IAAkBqI,EAAOlG,OAAS,EAAG,CAEpD,GAAI+B,EAAKD,QAAQuC,YAAc1F,IAAUoD,EAAKqE,qBAAqBhH,GAC/D,OAAO2C,EAGXF,EAAQwB,KAAK,IAAMrF,GAAgB+C,YAAY/C,GAC/CoB,EAAK4B,SAAShD,GAEd,IAAK2H,EAAc,CACfC,EAAa7D,EAAKD,QAAQ6B,UAC1B5B,EAAKD,QAAQ6B,UAAY,CAAEL,OAAQ,CAAEM,QAAS,IAAME,SAAU,CAAEuC,KAAM,KAAMzC,QAAS,KAGzF,IAAK7B,EAAKuE,cAAczJ,EAAQuC,GAC5B2C,EAAKwE,YAAYnH,EAAM,MAAO,OAGlC,IAAKuG,EACD5D,EAAKD,QAAQ6B,UAAYiC,KAKrC,OAAO7D,GAGX+B,SAAU,SAAUjC,EAAS8D,GACzB,IAAI5D,EAAOC,KACP4D,EAAa,GAEjB7D,EAAK8D,WAAa,KAElBF,EAAeA,IAAiB,MAChC9D,EAAUE,EAAKF,QAAQwB,KAAKxB,GAE5BA,EAAQrG,KAAK,SAAUsE,EAAOV,GAC1BA,EAAOrE,EAAEqE,GACT,IAAI8G,EAAS9G,EAAKiE,KAAK5F,GAAQ0I,IAAI/G,EAAKiE,KAAK3F,IAE7C,IAAK0B,EAAKmC,SAAS1D,IAAkBqI,EAAOJ,GAAGrH,IAAU,CACrDW,EAAK2B,YAAY/C,GAEjB,IAAK2H,EAAc,CACfC,EAAa7D,EAAKD,QAAQ6B,UAC1B5B,EAAKD,QAAQ6B,UAAY,CAAEL,OAAQ,CAAEM,QAAS,IAAME,SAAU,CAAEuC,KAAM,KAAMzC,QAAS,KAGzF,IAAK7B,EAAKuE,cAAcpJ,EAAUkC,GAC9B2C,EAAKwE,YAAYnH,EAAM,MAG3B,IAAKuG,EACD5D,EAAKD,QAAQ6B,UAAYiC,KAKrC,OAAO7D,GAGVyE,YAAa,SAASlH,GACf,IAAIyC,EAAOC,KAEX1C,EAAQvE,EAAEuE,GACVA,EAAM+B,SAAShF,GAAcgF,SAAS,4CAA4CI,SAElFnC,EACKwB,OAAO,WACJ,IAAI2D,EAAW1C,EAAK0C,SAASzC,MAE7B,IAAKyC,EACD,OAAO1J,EAAEiH,MAAMqB,KAAK,YAAYrD,OAAS,GACrCjF,EAAEiH,MAAMqB,KAAK,cAAcrD,OAAS,EAG5C,OAAOyE,EAASgC,aAAehC,EAASlF,SAAWkF,EAASjF,aAE/D6B,SAAS,yCACT7F,KAAK,WACF,IAAI4D,EAAOrE,EAAEiH,MACTuB,EAASnE,EAAKmE,SAElBnE,EAAKsH,OAAO,wBAA0BnD,EAAOhC,SAAS/D,GAAe,8DAAgE,+DAAiE,UAItN+E,WAAY,WACR,IAAIR,EAAOC,KACPF,EAAUC,EAAKD,QACf6E,EAAGC,EAAOC,EACVhF,EAAUE,EAAKF,QAEnB,IAAK8E,KAAK/H,GAAU,CAChBgI,EAAQ9E,EAAQlD,GAAS+H,IACzBE,EAAYhF,EAAQxC,KAAKpE,EAAMoE,KAAKsH,EAAI,WAExC,IAAKC,GAASC,EACVD,EAAQC,EAGZ,IAAKD,EACDA,EAAQD,EAGZ,IAAKlL,EAAQmL,GACTA,EAAQ,CAACA,GAGb9E,EAAQlD,GAAS+H,IAAMC,IAI/B1B,UAAW,SAAS9F,EAAM0H,GACtB,IAAIjF,EAAUG,KAAKH,QACnB,IAAIkF,EAAc/E,KAAKsD,UAAUtB,QAAQ,CAAED,SAAU/B,KAAKF,QAAQiC,WAElE,GAAIiD,UAAUhH,QAAU,EAAG,CACvB8G,EAAe1H,EAEf,GAAI0H,EACAjF,EAAQ+C,KAAKmC,QAEblF,EAAQoD,aAIZhG,GAASG,GAAM6H,YAAY,cAAeH,GAAc/F,YAAY,gBAI5EmG,aAAc,SAAS5H,GACnB,IAAIyC,EAAOC,KACX,IAAIuB,EAASxB,EAAKF,QAClB,IAAKsF,EAAY,CACbpH,WAAY,KACZN,SAAU,KACVO,OAAQuD,EAAOlC,WAAWrB,QAG9BgC,KAAKH,QAAQoD,QAEb,IAAImC,EAAgBrM,EAAE8J,IAAIvF,EAAO,SAAS+H,EAAOC,GACzC,UAAWD,IAAU,SACjB,OAAOtM,EAAEsM,OACN,CACHA,EAAM/H,MAAQ,GACd,OAAOvE,EAAEgH,EAAKwF,WAAW,CACrB3H,MAAOuH,EACP/H,KAAM9D,EAAO+L,EAAO,CAAEvH,MAAOwH,UAK7CtF,KAAKH,QAAQ6E,OAAOU,GACpB,IAAI5C,EAAWxC,KAAKH,QAAQR,SAAS,WACrC,IAAK,IAAIsF,EAAI,EAAGA,EAAIrH,EAAMU,OAAQ2G,IAC9B3E,KAAKwF,QAAQ,aAAc,CACvBpI,KAAMoF,EAASiD,GAAGd,GAAGtD,KAAK,WAAWqE,QACrC5L,KAAMwD,EAAMqH,GACZgB,GAAIvM,IAGZ4G,KAAK2C,wBAAwByC,EAAe9H,IAGhDsI,iBAAkB,SAASxI,EAAMyI,GAC7B,IAAIlB,EAAGtF,EAAUyG,EAEjBD,EAAWxG,SAAS,YAAY4D,QAChC,IAAI3F,EAAQF,EAAKiC,SAASvF,OAC1B,IAAKwD,EAAMU,OAAQ,CACfmB,GAAe0G,GACfxG,EAAWwG,EAAWxG,SAAS,YAAYA,SAAS,MACpDW,KAAK2C,wBAAwBtD,EAAU/B,OACpC,CACH0C,KAAK0E,OAAOtH,EAAKiC,SAAUwG,GAE3B,GAAG7F,KAAKF,QAAQsC,aACZpC,KAAK+F,aAAaF,EAAWxG,SAAS,YAAa,OAEvDA,EAAWwG,EAAWxG,SAAS,YAAYA,SAAS,MAEpD,IAAKsF,EAAI,EAAGA,EAAItF,EAASrB,OAAQ2G,IAAK,CAClCmB,EAAQzG,EAASoG,GAAGd,GACpB3E,KAAKwF,QAAQ,aAAc,CACvBpI,KAAM0I,EAAMzE,KAAK,WAAWqE,QAC5B5L,KAAMkG,KAAKyC,SAASqD,GACpBH,GAAIvM,OAMpB4M,UAAW,SAASC,GAChB,IAAI3I,EAAQ0C,KAAKH,QAAQwB,KAAK,WAC9B,IAAI6E,EAAUjN,EAAMoE,KAAK,OACzB,IAAIQ,EAEJ,IAAK,IAAI8G,EAAI,EAAGA,EAAIrH,EAAMU,OAAQ2G,IAC9B,GAAIrH,EAAMqH,GAAGwB,aAAaD,IAAYD,EAAK,CACvCpI,EAASP,EAAMqH,GACf,MAIR,OAAO5L,EAAE8E,IAGbuI,QAAS,SAASC,GACd,IAAIvG,EAAUE,KAAKF,QACnB,IAAIwG,EAAOD,EAAEC,KACb,IAAIC,EAASF,EAAEE,OACf,IAAIjJ,EAAQ+I,EAAE/I,MACd,IAAIuI,EAAa7F,KAAKZ,QACtB,IAAIgD,EAAetC,EAAQsC,aAE3B,GAAIiE,EAAEzB,MAAO,CACT,IAAKtH,EAAM,KAAOA,EAAM,GAAGY,MACvB,OAGJ,OAAO8B,KAAKwG,aAAalJ,EAAO+I,EAAEzB,OAGtC,GAAI0B,EAAM,CACNT,EAAa7F,KAAKgG,UAAUM,EAAKL,KACjCjG,KAAKkD,UAAU2C,EAAY,OAE/B,GAAIU,GAAU,MACVvG,KAAKyG,aAAaJ,EAAEvI,MAAOR,EAAOuI,QAC/B,GAAIU,GAAU,SACjBvG,KAAKP,OAAOO,KAAKgG,UAAU1I,EAAM,GAAG2I,WACjC,GAAIM,GAAU,aACjBvG,KAAKwG,aAAalJ,QACf,GAAIiJ,GAAU,aACjBvG,KAAK4F,iBAAiBU,EAAMT,QAE5B7F,KAAKkF,aAAa5H,GAGtB,GAAIiJ,GAAU,SACV,IAAK,IAAIG,EAAI,EAAGA,EAAIpJ,EAAMU,OAAQ0I,IAE9B,IAAKtE,GAAgB9E,EAAMoJ,GAAGjJ,SAAU,CACpC,IAAIkJ,EAAWrJ,EAAMoJ,GACrB,GAAI1G,KAAK4G,eAAeD,GAChBA,EAASE,OAM7B7G,KAAKwF,QAAQrK,EAAW,CAAEmL,KAAMA,EAAOT,EAAa1M,KAGxD2N,OAAQ,SAAST,GACb,IAAIC,EAAOD,EAAEC,MAAQtG,KAAKgG,UAAUK,EAAEC,KAAKL,KAC3C,IAAIc,EAAY/G,KAAKsD,UAAUpB,MAAM,CAAEH,SAAU/B,KAAKF,QAAQiC,WAE9D,GAAIuE,EAAM,CACNtG,KAAKkD,UAAUoD,EAAM,OACrBtG,KAAKgH,UAAUV,EAAM,OACrBrJ,GAASqJ,GAAMtH,SAAS,eACxBqH,EAAEC,KAAKW,OAAO,WACX,CACHjH,KAAKkD,UAAU,OACflD,KAAKH,QAAQ+C,KAAKmE,KAI1B/F,cAAe,SAASqF,GACpBA,EAAEa,iBAEFlH,KAAKE,WAAWiD,SAGnB7F,MAAO,WACJ,OAAO0C,KAAKH,QAAQwB,KAAK,+BAG7BqC,cAAe,SAASxD,GACpB,IAAIJ,EAAUE,KAAKF,QAEnBA,EAAQI,WAAaA,EAErBF,KAAKQ,cAEL,GAAIR,KAAKF,QAAQqC,SAAU,CACvBnC,KAAKkD,UAAU,MACflD,KAAKE,WAAWiD,UAIxBgE,gBAAiB,WACbnH,KAAKoH,gBAAkB7N,EAAMyG,KAAKoG,QAASpG,MAC3CA,KAAKqH,cAAgB9N,EAAMyG,KAAK8G,OAAQ9G,MAExCA,KAAKE,WAAWoH,KAAK1M,EAAQoF,KAAKoH,iBAClCpH,KAAKE,WAAWoH,KAAKhN,EAAO0F,KAAKqH,gBAGrCE,kBAAmB,WACf,IAAIrH,EAAaF,KAAKE,WAEtB,GAAIA,EAAY,CACZA,EAAWsH,OAAO5M,EAAQoF,KAAKoH,iBAC/BlH,EAAWsH,OAAOlN,EAAO0F,KAAKqH,iBAKtChE,eAAgB,SAASoE,GACrB,IAAIC,EAAgB1H,KAAKF,QAAQlD,GAAS6K,KAAe,GACrDE,EAAQD,EAAc1J,OACtBH,EAAS,oBAEb,GAAI8J,IAAU,EACV9J,GAAU,gBAAkB4J,EAAY,UACrC,CACH5J,GAAU,iBACE9E,EAAE8J,IAAI6E,EAAe,SAASE,GAC1B,MAAO,uBAAyB3O,EAAM4O,KAAKD,GAAK,MACjDE,KAAK,KAAO,KAC3BjK,GAAU,uDAAyD8J,EAAQ,mBAC3E9J,GAAU,kBAAmB8J,EAAQ,aAGzC9J,GAAU,KAEV,OAAOA,GAGX2C,YAAa,WACT,IAAIT,EAAOC,KACPF,EAAUC,EAAKD,QACfI,EAAaJ,EAAQI,WAEzB,IAAKA,EACD,OAGJA,EAAazG,EAAQyG,GAAc,CAAEpG,KAAMoG,GAAeA,EAE1DH,EAAKwH,oBAEL,IAAKrH,EAAW6H,OACZ7H,EAAW6H,OAAS,CAChB,CAAEnD,MAAO,QACT,CAAEA,MAAO,OACT,CAAEA,MAAO,kBACT,CAAEA,MAAO,aAIjB7E,EAAKG,WAAarG,EAAuBmO,OAAO9H,GAEhDH,EAAKoH,mBAGTV,aAAc,SAAS3I,EAAOR,EAAOuI,GACjC,IAAI9F,EAAOC,KAAMX,EAAUD,EAEzB,GAAIyG,EAAWtG,SAAS,cAAe,CACnCF,EAAWwG,EAAWxG,SAAS,MAC/BD,EAAUyG,MACP,CACHzG,EAAUyG,EAAWxG,SAAS,YAC9B,IAAKD,EAAQpB,OACToB,EAAWW,EAAKkE,iBAAiB4B,GAGrCxG,EAAWD,EAAQC,SAAS,MAGjC,IAAK8F,EAAY,CACdpH,WAAY8H,EAAWtG,SAAS,cAChC9B,SAAU,KACVO,OAAQqB,EAASrB,QAGpB,IAAIiK,EAAYlP,EAAE8J,IAAIvF,EAAO,SAAS+H,EAAOC,GACtC,UAAWD,IAAU,SACjB,OAAOtM,EAAEsM,QAET,OAAOtM,EAAEgH,EAAKwF,WAAW,CACrB3H,MAAOuH,EACP/H,KAAM9D,EAAO+L,EAAO,CAAEvH,MAAOwH,SAK3C,UAAWxH,GAASvC,EACfuC,EAAQuB,EAASrB,OAGtB,IAAK,IAAI2G,EAAI,EAAGA,EAAIsD,EAAUjK,OAAQ2G,IAClC,GAAItF,EAASrB,SAAW,GAAKF,IAAU,EACnCsB,EAAQsF,OAAOuD,EAAUtD,SAExBsD,EAAUtD,GAAGuD,YAAY7I,EAASvB,EAAQ,IAIrDiC,EAAK4C,wBAAwBsF,EAAW3K,GACtC,GAAIyC,EAAK0C,SAASoD,GAAa,CAC3B9F,EAAK0C,SAASoD,GAAYpB,YAAc,KACxC1E,EAAKyE,YAAYqB,KAI3BW,aAAc,SAAUlJ,EAAOsH,GAC3B,IAAI7E,EAAOC,KACX,IAAI2E,EAAG2B,EAAM6B,EAAa/K,EAC1B,IAAIgL,EAAU,CAAEC,SAAUtI,EAAKD,QAAS1C,KAAMA,EAAMQ,MAAO,IAC3D,IAAI0K,EAAS1D,GAAS,WAEtB,GAAIA,GAAS,WACT,GAAGtH,EAAM,GAAGsH,GAAO,CACf,IAAI2D,EAAcxI,EAAKiG,UAAU1I,EAAM,GAAG2I,KAE1C,IAAKsC,EAAYhJ,SAAS1D,GACtBkE,EAAKmB,OAAOqH,EAAa,WAG7BxI,EAAKyI,qBAEN,CACH,IAAIhG,EAAWzJ,EAAE8J,IAAIvF,EAAO,SAASF,GACjC,OAAO2C,EAAKiG,UAAU5I,EAAK6I,OAG/B,GAAIqC,EACAvI,EAAKwC,QAAQ,UAAW,WAAa,MAAO,CAAEC,SAAUA,KAG5D,IAAKmC,EAAI,EAAGA,EAAIrH,EAAMU,OAAQ2G,IAAK,CAC/ByD,EAAQhL,KAAOA,EAAOE,EAAMqH,GAC5ByD,EAAQC,SAAWtI,EACnBoI,EAAc3F,EAASmC,GACvB2B,EAAO6B,EAAY5G,SACnB,GAAI+G,EAAQ,CACRF,EAAQxK,MAAQ,CACZG,WAAYuI,EAAK/G,SAAS,cAC1B9B,SAAU0K,EAAY5G,SAAShC,SAAS/D,GACxCwC,OAAQmK,EAAY9I,WAAWrB,QAGnCmK,EAAY9I,SAAS,WAAWI,SAChC0I,EAAYM,QAAQ1I,EAAKuD,UAAUC,YAAYjK,EAAO8O,EAClD,CACI5E,MAAOpG,EAAKqH,aAAerH,EAAKG,SAAWH,EAAKI,WAAauC,EAAKuD,UAAUE,MAAQzD,EAAKuD,UAAUL,OAEvG/F,MAGR,GAAI0H,GAAS,WACT7E,EAAKwE,YAAY4D,GAAc/K,EAAKwH,GAAQxH,EAAKwH,GAAS,OAAQ,WAC/D,GAAIA,GAAS,UAAW,CAC3B7E,EAAK2I,OAAOP,EAAa/K,EAAKwH,IAC7B,IAAKxH,EAAKwH,GACP,GAAIxH,EAAKgB,SACLhB,EAAKuL,IAAI,WAAY,OAKjC,GAAIR,EAAYnK,OACZgC,KAAKwF,QAAQ,aAAc,CAAEpI,KAAM+K,EAAY9G,KAAK,WAAWqE,QAAS5L,KAAMsD,EAAMuI,GAAIvM,IAIhG,GAAIkP,EACAvI,EAAKwC,QAAQ,UAAW,WACpB,MAAO,CACHC,SAAUA,EACV1I,KAAMf,EAAE8J,IAAIvF,EAAO,SAASF,GACxB,MAAO,CAAC,CAAEqF,SAAUrF,WAQ5CwL,gBAAiB,SAAS/I,EAAS6I,GAC/B7I,EAAUG,KAAKH,QAAQwB,KAAKxB,GAC5BA,EACKoF,YAAYpJ,GAAgB6M,GAC5BrL,KAAKhB,GAAgBqM,IAG/BjG,SAAU,SAASrF,GACd,IAAI6I,EAAMlN,EAAEqE,GAAMyL,QAAQtO,GAAM8C,KAAKpE,EAAMoE,KAAK,QAC5C6C,EAAaF,KAAKE,WAEtB,OAAOA,GAAcA,EAAW4I,SAAS7C,IAG9C/E,OAAQ,SAAUrB,EAASkJ,GACvB,IAAIhJ,EAAOC,KAEV,GAAIH,IAAY1G,EACZ,OAAO4G,EAAKF,QAAQwB,KAAKjF,GAAiBmF,SAG9C1B,EAAUE,EAAKF,QAAQwB,KAAKxB,GAE5B,IAAKA,EAAQ7B,OACTgC,KAAKgJ,gBAAgBnJ,QAErBA,EACKrG,KAAK,WACF,IAAI4D,EAAOrE,EAAEiH,MACTiJ,EAAO7L,EAAKiC,SAAShF,GAEzB,GAAI+C,EAAKmC,SAAS1D,GACd,OAAOkE,EAGXA,EAAKiJ,gBAAgBC,EAAMF,KAIvC,OAAOhJ,GAGXyI,eAAgB,WACZxI,KAAKkB,OAAOnI,MAGhB2P,OAAQ,SAAU7I,EAASqJ,GACvBlJ,KAAK4I,gBAAgB/I,EAASqJ,IAAU,OAExC,OAAOlJ,MAGXmJ,QAAS,SAAUtJ,GACfG,KAAK4I,gBAAgB/I,EAAS,OAE9B,OAAOG,MAGX0E,OAAQ,SAAUtH,EAAMgM,GACpBA,EAAgBpJ,KAAKH,QAAQwB,KAAK+H,GAElC,IAAIC,EAAWrJ,KAAKsJ,QAAQlM,EAAMgM,EAAeA,EAAcpL,OAASoL,EAAc/H,KAAK5F,GAAU,MAErGjC,EAAK6P,EAAS/L,MAAO,WACjB+L,EAASzL,MAAM8G,OAAO1E,MACtBnB,GAAgBmB,MAChBf,GAAYe,QAGhBA,KAAKwE,YAAY4E,GACjBvK,GAAgBwK,EAASzL,MAAMyD,KAAK,sBACpCgI,EAASzL,MAAM2L,OAAO,QAEtB,OAAOvJ,MAGXwJ,aAAc,SAAUpM,EAAMgM,GAC1BA,EAAgBpJ,KAAKH,QAAQwB,KAAK+H,GAElC,IAAIC,EAAWrJ,KAAKsJ,QAAQlM,EAAMgM,EAAeA,EAAc7H,UAE/D/H,EAAK6P,EAAS/L,MAAO,WACjB8L,EAAcK,OAAOzJ,MACrBnB,GAAgBmB,MAChBf,GAAYe,QAGhBnB,GAAgBuK,GAChBC,EAASzL,MAAM2L,OAAO,QAEtB,OAAOvJ,MAGXkI,YAAa,SAAU9K,EAAMgM,GACzBA,EAAgBpJ,KAAKH,QAAQwB,KAAK+H,GAElC,IAAIC,EAAWrJ,KAAKsJ,QAAQlM,EAAMgM,EAAeA,EAAc7H,UAE/D/H,EAAK6P,EAAS/L,MAAO,WACjB8L,EAAcM,MAAM1J,MACpBnB,GAAgBmB,MAChBf,GAAYe,QAGhBnB,GAAgBuK,GAChBC,EAASzL,MAAM2L,OAAO,QAEtB,OAAOvJ,MAGXP,OAAQ,SAAUI,GACdA,EAAUG,KAAKH,QAAQwB,KAAKxB,GAE5B,IAAIE,EAAOC,KACPuB,EAAS1B,EAAQX,aAAaa,EAAKF,QAAStF,GAC5CqD,EAAQiC,EAAQ0B,OAAO,MAE3B1B,EAAQJ,SAER,GAAI7B,IAAUA,EAAM2B,SAAS,gBAAkB3B,EAAMyB,SAAS9E,GAAMyD,OAChEJ,EAAM6B,SAGV,GAAI8B,EAAOvD,OAAQ,CACfuD,EAASA,EAAOkE,GAAG,GAEnB1F,EAAKyE,YAAYjD,GACjB1C,GAAgB0C,GAGpB,OAAOxB,GAGX4J,OAAQ,SAAU9J,GACd,IAAIE,EAAOC,KACXH,EAAUE,EAAKF,QAAQwB,KAAKxB,GAE5BA,EAAQrG,KAAK,WACT,IAAI4D,EAAOrE,EAAEiH,MAEbD,EAAK6J,aAAaxM,EAAMA,EAAKiC,SAAS,IAAMrE,IAAWoC,EAAK0G,GAAGrH,QAIvE2E,OAAQ,WACJ,OAAOpB,KAAKH,QAAQR,SAASpD,GAAoByJ,SAGrDmE,MAAO,WACH,IAAIzM,EAAO4C,KAAKH,QAAQR,SAASpD,GAAoB6N,OACjDlM,EAAQR,EAAKiC,SAAS5E,GAE1B,GAAImD,EAAM,GACN,OAAOA,EAAMyB,SAASpD,GAAoB6N,OAE9C,OAAO1M,GAGX+D,SAAU,SAAS4I,GACf,IAAIhK,EAAOC,KACPgK,EAAUjK,EAAKkK,SACfvR,EAAKqH,EAAKM,QAEd,GAAI0J,IAAc5Q,EACd,OAAO6Q,EAGXjK,EAAKF,QAAQqK,WAAW,yBAExB,GAAIF,GAAWA,EAAQhM,OAAQ,CAC3B,GAAIgM,EAAQ,GAAGtR,KAAOA,EAClBsR,EAAQE,WAAW,MAGvBF,EACK3K,SAAShF,GACT0E,YAAYnD,GAGrB,GAAI7C,EAAEgR,GAAW/L,OAAQ,CACrBtF,EAAKqR,EAAU,GAAGrR,IAAMA,EAExBqR,EAAU1M,KAAK,KAAM3E,GACX2G,SAAShF,GACT2E,SAASpD,GAEnBmE,EAAKF,QAAQxC,KAAK,wBAAyB3E,GAG/CqH,EAAKkK,SAAWF,GAGpB9I,SAAU,SAASoF,GACf,IAAItG,EAAOC,KACPmK,EAAM9D,EAAE+D,QACRC,EAAUtK,EAAKoB,WAEnB,GAAIkF,EAAEiE,QAAUjE,EAAEkE,cACd,OAGJ,GAAIJ,GAAO9Q,EAAKmR,MAAQL,GAAO9Q,EAAKoR,MAAO,CACvC1K,EAAKoB,SAASpB,EAAK2K,UAAUL,IAC7BhE,EAAEa,sBACC,GAAIiD,GAAO9Q,EAAKsR,IAAMR,GAAO9Q,EAAKuR,KAAM,CAC3C7K,EAAKoB,SAASpB,EAAK8K,UAAUR,IAC7BhE,EAAEa,sBACC,GAAIiD,GAAO9Q,EAAKyR,OAASX,GAAO9Q,EAAK0R,SAAU,CAClDhL,EAAKe,OAAOuF,GACZA,EAAEa,sBACC,GAAIiD,GAAO9Q,EAAK2R,KAAM,CACzBjL,EAAKoB,SAASpB,EAAKqB,UACnBiF,EAAEa,sBACC,GAAIiD,GAAO9Q,EAAK4R,IAAK,CACxBlL,EAAKoB,SAASpB,EAAK8J,SACnBxD,EAAEa,mBAIVwD,UAAW,SAAStN,GAChB,IAAKA,EACD,OAAO4C,KAAKoB,SAGhB,IAAIxD,EAAQR,EAAKiC,SAAS5E,GACtByQ,EAAO9N,EAAK+N,QAAQ,YAAYzF,QAEpC,GAAI9H,EAAM,GACNsN,EAAOtN,EAAMyB,SAAS,IAAM1E,GAGhC,IAAKuQ,EAAK,GACNA,EAAO9N,EAAKmE,OAAO9G,GAAc8G,OAAOhH,GAAM2Q,OAGlD,IAAKA,EAAK,GACNA,EAAOlL,KAAKoB,SAGhB,GAAI8J,EAAK3L,SAAS1D,GACdqP,EAAOlL,KAAK0K,UAAUQ,GAG1B,OAAOA,GAGXL,UAAW,SAASzN,GAChB,IAAKA,EACD,OAAO4C,KAAK6J,QAGhB,IAAIuB,EAAOhO,EAAKiO,QAAQ,YAAY3F,QAChC7H,EAEJ,IAAKuN,EAAK,GAAI,CACVA,EAAOhO,EAAKmE,OAAO9G,GAAc8G,OAAOhH,GACxC,IAAK6Q,EAAK,GACNA,EAAOpL,KAAK6J,YAEb,CACHhM,EAASuN,EACT,MAAOvN,EAAO,GAAI,CACdA,EAASA,EAAOwB,SAAS5E,GAAc4E,SAAS,IAAMlF,GACtD,GAAI0D,EAAO,GACPuN,EAAOvN,GAKnB,GAAIuN,EAAK7L,SAAS1D,GACduP,EAAOpL,KAAK6K,UAAUO,GAG1B,OAAOA,GAGX9B,QAAS,SAAUlM,EAAMgM,EAAe7H,GACpC,IAAIxB,EAAOC,KACP1C,EACAgO,EAAQvS,EAAEwS,cAAcnO,GACxBoO,EAAkBpC,GAAiBA,EAAc,GACjDjE,EAEJ,IAAKqG,EACDjK,EAASxB,EAAKF,QAGlBsF,EAAY,CACRpH,WAAYwD,EAAOhC,SAAS,cAC5B9B,SAAU1E,EAAEqQ,GAAe7J,SAAS/D,GACpCwC,OAAQuD,EAAOlC,WAAWrB,QAG9B,GAAIwN,IAAoBjK,EAAOvD,OAC3BuD,EAASxI,EAAEgH,EAAK0L,YAAY,CAAE7N,MAAOuH,EAAWrF,QAASC,EAAKD,WAAYN,SAAS4J,GAGvF,GAAIkC,GAAS5R,MAAMD,QAAQ2D,IAASA,aAAgBvD,EAAwB,CACxE,GAAIuD,aAAgBvD,EACjBuD,EAAOA,EAAKtD,OAGfwD,EAAQvE,EAAE8J,IAAIyI,EAAQ,CAAClO,GAAQA,EAAM,SAASiI,EAAOC,GACjD,UAAWD,IAAU,SACjB,OAAOtM,EAAEsM,QAET,OAAOtM,EAAEgH,EAAKwF,WAAW,CACrB3H,MAAOuH,EACP/H,KAAM9D,EAAO+L,EAAO,CAAEvH,MAAOwH,SAIzC,GAAIkG,EAAiB,CACjB,IAAI/I,EAAW1C,EAAK0C,SAAS2G,GAE7B,GAAI3G,EAAU,CACVA,EAASgC,YAAc,KACvB2E,EACK/L,KAAKf,EAAemG,EAAShF,UAC7BiO,IAAI,IAAMlQ,GACV6D,SAAS,MACThC,KAAKd,GAAckG,EAAShF,eAEjC2L,EAAc/L,KAAKf,EAAe,YAGvC,CACH,UAAWc,GAAQ,UAAYA,EAAKuO,OAAO,IAAM,IAC7CrO,EAAQyC,EAAKF,QAAQwB,KAAKjE,QAE1BE,EAAQvE,EAAEqE,GAEd2C,EAAK6L,oBAAoBtO,GAG7B,IAAKF,EAAKY,OACNZ,EAAO,CAACA,GAGZ2C,EAAK4C,wBAAwBrF,EAAOF,GACpC,MAAO,CAAEE,MAAOA,EAAOM,MAAO2D,IAGlCR,aAAc,SAASsF,GACnB,IAAIiE,EAASvR,EAAEsN,EAAEkE,eAEjB,IAAKD,EAAOuB,QAAQ,MAAQhQ,GAAemC,OACvCsM,EAAOrF,YAAY,gBAAiBoB,EAAEyF,MAAQ1Q,IAItDuF,eAAgB,WACZ,IAAIZ,EAAOC,KACP+L,EAAQzO,EAAOG,EAAUuO,EAAcvJ,EAE3CsJ,EAAShM,EAAKF,QACAwB,KAAK,WACLqK,IAAI,WAAc,OAAO3S,EAAEiH,MAAMd,aAAa,cAAe,OAAOlB,SACpEgB,SAAS,oCACT3B,KAAK,OAAQ,SAE3B2O,EAAeD,EAAOxK,SACtBkB,EAAW1C,EAAK0C,SAASuJ,GACzBvO,EAAYgF,GAAYA,EAAShF,UAAa,MAE9CsO,EAAOxK,SACAmK,IAAI,IAAMpP,EAAgB,KAC1Be,KAAKf,EAAemB,GACpBiO,IAAI,IAAMlQ,GACV6D,SAAS,MACThC,KAAKd,GAAckB,GACnB4G,OAEP/G,EAAQyC,EAAKF,QAAQsE,IAAI4H,GAAQ1M,WAEjCU,EAAK6L,oBAAoBtO,GACzByC,EAAKyE,YAAYlH,GACjBuB,GAAgBvB,IAGpBsO,oBAAqB,SAAStO,GAC1B,IAAIU,EAASV,EAAMU,OACfsH,EAAM,EAEV,KAAMA,EAAMtH,EAAQsH,IAChBtF,KAAKiM,mBAAmB3O,EAAMgI,GAAMA,IAI5C2G,mBAAoB,SAAS7O,EAAMU,GAC/B,IAAIM,EAAW4B,KAAKkM,UAChBC,EAAcnM,KAAKF,QAAQqM,YAC3BrP,EAAMqP,GAAeA,EAAYrO,GACjCsO,EAAOpM,KAAKH,QAAQ,GACpBwM,EAAapD,EAEjB7L,EAAOrE,EAAEqE,GAAM4B,SAAS,UAAU3B,KAAK,OAAQ,YAE/C,GAAIpE,EAAMqT,QAAQC,QAAQC,KACtBpP,EAAKqP,IAAI,sBAAuB,UAC3BA,IAAI,sBAAuB,IAGpCrP,EACKiC,SAASpF,GACT+E,SAAStE,GAEduO,EAAO7L,EACEiC,SAAS,KACTL,SAAS5E,GAElB,GAAI6O,EAAK,GAAI,CACTA,EAAK5L,KAAK,OAAQP,GAElBmM,EAAK5J,SAASpF,GACT+E,SAAStE,GAGlB0C,EACK0B,OAAO,gBACPE,SAAS,oBACT3B,KAAKhB,EAAe,MACpBqQ,KAAK,WAAY,OAEtBtP,EACKiC,SAAS,OACTL,SAAShE,EAAU,uBACnBqC,KAAKd,EAAa,MAClB8H,OACA9C,SACAlE,KAAKf,EAAe,OAEzB2M,EAAO7L,EAAKiC,SAAStD,GACrB,GAAIkN,EAAK,GAAI,CACT,GAAI7K,EACAA,EAAS8L,WAAW1N,IACX6C,SAAStD,GACTgD,YAAYjD,GAGzBmN,EAAKjK,SAASlD,GACdkE,KAAKkM,UAAY9O,EAAKC,KAAKb,GAAe,MAG9C,IAAKY,EAAKiC,SAAShF,GAAc,GAAI,CACjCgS,EAAc,gBAAkBjS,EAAO,sDACvC,GAAI+R,GAAeA,EAAYrO,IAAUV,EAAK,GAAGyI,YAAcuG,EAC3DC,EAAc,2BAA6BF,EAAYrO,GAAS,SAGpEV,EACKuP,WACA7N,OAAO,WAAa,OAASkB,KAAK4M,SAASC,MAAM9S,MAA0BiG,KAAK8M,UAAY,IAAM7T,EAAM8T,KAAK/M,KAAKgN,UAAUD,SAC5HE,QAAQZ,GAIjB,GAAIjP,EAAKmE,OAAO,eAAe,GAC3BnE,EAAK4B,SAAS,0BAEd5B,EAAK4B,SAAS,mBAGlB,IAAK,iBAAiBkO,KAAK9P,EAAKC,KAAK,UACjCD,EAAK4B,SAAS,WAAa5B,EAAK8B,aAAac,KAAKH,QAAS,MAAM7B,SAIzE8C,OAAQ,SAAUuF,GACd,IAAItG,EAAOC,KACPsK,EAASjE,EAAEyF,MAAQ/Q,EAAQhC,EAAEsN,EAAEiE,QAAUvK,EAAKoB,WAAW9B,SAAShF,GAClEwF,EAAUE,EAAKF,QACfsN,EAASR,EAAUS,EAAMC,EAE7B,GAAI/C,EAAOuB,QAAQ,MAAQhQ,GAAemC,OACtC,OAGJ,GAAIsM,EAAOzB,QAAQ,eAAe,IAAMhJ,EAAQ,GAC5C,OAGJ,GAAIyK,EAAOxG,GAAG,qBAAuBwG,EAAO/K,SAASnF,GACjD,OAGJ,IAAI6O,EAAOqB,EAAOzB,QAAQxO,GACtB+C,EAAO6L,EAAKJ,QAAQtO,GAExBwF,EAAKiJ,gBAAgBC,GAErB,IAAI7J,EAAUhC,EAAKiC,SAAS,uBAC5B,IAAIoD,EAAWzC,KAAKyC,SAASrF,GAE7B,IAAKgC,EAAQpB,SAAY+B,EAAKD,QAAQsC,cAAgBK,GAAYA,EAASgC,aAC1EzE,KAAK4G,eAAexJ,IAASA,EAAKG,SAAWH,EAAKI,YAC/C4B,EAAWW,EAAKkE,iBAAiB7G,GAGrCuP,EAAWvP,EAAKiE,KAAK5F,GAAQ0I,IAAI/G,EAAKiE,KAAK3F,IAC3C0R,EAAOnE,EAAK5L,KAAKnD,GACjBmT,EAAWD,IAASA,EAAKzB,OAAOyB,EAAKpP,OAAS,IAAM,KAAOoP,EAAKE,QAAQ,IAAMvN,EAAKF,QAAQ,GAAGnH,GAAK,OAAS,GAC5GyU,KAAaE,GAAYV,EAAS3O,QAElC,GAAI2O,EAAS7S,KAAK,cAAgBqT,EAAS,CACvC9G,EAAEa,iBACF,OAGJ,GAAInH,EAAKuE,cAAcxJ,EAAQsC,GAC3B+P,EAAU,KAGd,GAAIA,IAAY,MACZ,OAGJ,GAAIpN,EAAKD,QAAQuC,YAAc1F,GAC3B,GAAIoD,EAAKqE,qBAAqBhH,IAAS+P,EAAS,CAC5C9G,EAAEa,iBACF,OAIR,GAAIyF,EAAS3O,OAAQ,CACjB,IAAIuP,EAAaZ,EAAS7I,GAAGrH,IAE7B,IAAKsD,EAAKuE,eAAeiJ,EAAa1S,EAASK,EAAUkC,GACrD+P,EAAUpN,EAAKwE,YAAYnH,EAAMmQ,GAIzC,GAAIJ,EACA9G,EAAEa,kBAGVN,eAAgB,SAAUxJ,GACtB,OAAQA,EAAKE,OAASF,EAAKE,MAAMU,OAAS,GAAMZ,EAAKqH,aAGzDF,YAAa,SAAU1E,EAAS2N,EAAW/P,GACvC,IAAIsC,EAAOC,KACPyN,EAAa5N,EAAQwB,KAAK5F,GAC1BwN,EAAOpJ,EAAQwB,KAAKhH,GACpByC,EAAMmM,EAAK5L,KAAKnD,GAChBiT,EAAS5P,EACTkF,EAAW1C,EAAK0C,SAAS5C,GACzB6N,GAAcF,EAElB,IAAIvG,EAASxE,GAAYA,EAASwE,SAElC,GAAIxE,IAAahF,GAAYgF,EAAShF,WAAaiQ,EAAY,CAC3DjL,EAASkG,IAAI,WAAY+E,GACzBP,EAAU1K,EAASgC,eAAiBhC,EAASlF,WAAakF,EAASjF,WACnE,OAAO2P,EAGX,GAAI1K,KAAchF,GAAYA,IAAa,UAAawJ,IAAWxE,EAASlF,UAAYkF,EAASjF,WAAY,CACxG,GAAIuC,EAAKD,QAAQsC,aACbpC,KAAKkD,UAAUrD,EAAS,MAG5BA,EAAQR,SAAS,uBAAuBI,SACxC0N,EAAU1K,EAASgC,YAEnBhC,EAASoE,YAEP,GAAI4G,EAAWzP,OAAQ,CAClBgC,KAAK+F,aAAa0H,EAAYD,GAC9BL,EAAU,SACR,CACF5P,EAAUsC,EAAQR,SAAS,IAAOrE,GAElC,GAAIuC,EAAQS,OAAQ,CAChBmP,EAAU,KAEV,IAAK5P,EAAQuG,GAAGpH,KAAUI,IAAQ3D,EAC9B4G,EAAKgG,aAAaxI,EAASiQ,QAE3BzN,EAAK6J,aAAa/J,EAAStC,EAASiQ,IAMxD,OAAOL,GAGXpH,aAAc,SAAUlG,EAAS0N,GAC7B,IAAIxN,EAAOC,KACP2N,EAAoB5N,EAAKD,QAAQ6B,UACjCA,EAAYgM,EAAkBrM,OAC9BsM,EAAuBD,EAAkB7L,UAAY,YAAa6L,EAAkB7L,SACpFA,EAAWxI,EAAO,GAAIqU,EAAkBrM,OAAQqM,EAAkB7L,UAEtE,IAAK8L,EACD9L,EAAWxI,EAAOwI,EAAU,CAAC+L,QAAS,OAG1C,GAAIhO,EAAQiE,GAAGrH,KAAY8Q,EAAY,CACnCxN,EAAK8D,WAAa,MAClB,OAGJhE,EAAQxC,KAAKd,IAAegR,GAE5B1N,EAAQ0B,SACHlE,KAAKf,GAAgBiR,GACrBtI,YAAYzJ,GAAc+R,GAC1BlM,KAAK,mEACD4D,YAAY,wBAAyBsI,GACrCtI,YAAY,uBAAwBsI,GACpCtI,YAAY,yBAA0BsI,GACtCtI,YAAY,oBAAqBsI,GAC1C,GAAIA,EAAY,CACZ5L,EAAYrI,EAAOwI,EAAU,CAAEuC,KAAM,OAErC1C,EAAUmM,SAAW,WACjB/N,EAAKgO,2BAGTpM,EAAYrI,EAAQ,CAAEwU,SAAU,SAAUjO,GAClCE,EAAKuE,cAAcrJ,EAAU4E,EAAQgJ,QAAQtO,IAC7CwF,EAAKgO,uBACJpM,GAGb9B,EACKmO,OAAO,GACPC,UAAU,KAAM,MAChBC,aAAcvM,IAGvBoM,mBAAoB,WAChB,IAAIhO,EAAOC,KACXD,EAAKyF,QAAQ,YACbzF,EAAK8D,WAAa,OAGtBI,iBAAkB,SAASpE,GACvB,IAAIjC,EAAQ7E,EAAE,2GAEd8G,EAAQ6E,OAAO9G,GACf,OAAOA,GAGXwG,qBAAsB,SAAUhH,GAC5B,IAAI2C,EAAOC,KAAMX,EAAU8O,EAAa,MAExC,IAAIjK,EAAS9G,EAAKiE,KAAK5F,GAAQ0I,IAAI/G,EAAKiE,KAAK3F,IAE7C,GAAIwI,EAAOJ,GAAGrH,IACV0R,EAAa,KAGjB,KAAMjK,EAAOJ,GAAGrH,KAAYyH,EAAOlG,SAAW,GAAI,CAC9CqB,EAAWjC,EAAKgR,WAChB/O,EAASgC,KAAK5F,GAAQ0I,IAAI9E,EAASgC,KAAK3F,IAC/BoD,OAAO,WAAc,OAAO/F,EAAEiH,MAAM8D,GAAGrH,MACvCjD,KAAK,SAAUsE,EAAOP,GACnBA,EAAUxE,EAAEwE,GAEZ4Q,EAAapO,EAAKuE,cAAcpJ,EAAUqC,EAAQsL,QAAQtO,IAC1D,IAAK4T,EACDpO,EAAKgG,aAAaxI,EAAS,QAI1CwC,EAAKgE,IAAI,WAAY,WAClBC,WAAW,WACP3E,EAAS7F,KAAK,SAAUsE,EAAOgI,GAC3B,IAAIrD,EAAW1C,EAAK0C,SAASqD,GAE7B,GAAGrD,EACCA,EAASkG,IAAI,WAAY,aAO7C,OAAOwF,GAGXvE,aAAc,SAAU/J,EAASwO,EAAgBb,GAE7C,IAAIzN,EAAOC,KACPsO,EAAazO,EAAQwB,KAAK,4CAC1B4H,EAAOpJ,EAAQwB,KAAKhH,GACpBkU,EAAqBvK,WAAW,WAC5BsK,EAAWtP,SAAS,gBACrB,KACHlF,EAAO,GACPgD,EAAMmM,EAAK5L,KAAKnD,GAEpBnB,EAAEyV,KAAK,CACH1C,KAAM,MACN2C,MAAO,MACP3R,IAAKA,EACL4R,SAAU,OACV5U,KAAMA,EAEN6U,MAAO,SAAUC,EAAKC,GAClBP,EAAWvP,YAAY,eACvB,GAAIgB,EAAKyF,QAAQlL,EAAO,CAAEsU,IAAKA,EAAKC,OAAQA,IACxC7O,KAAK8N,YAIbA,SAAU,WACNgB,aAAaP,GACbD,EAAWvP,YAAY,gBAG3BgQ,QAAS,SAAUjV,GACf,SAASkV,IACL,MAAO,CAAExM,SAAU6L,EAAeY,OAEtC,IACIlP,EAAKwC,QAAQ,UAAWyM,GACxBX,EAAezL,KAAK9I,GACpBiG,EAAKwC,QAAQ,UAAWyM,GAC1B,MAAO3I,GACL,IAAI6I,EAAUlW,OAAOkW,QAErB,GAAIA,GAAWA,EAAQP,MACnBO,EAAQP,MAAMtI,EAAE1N,KAAO,KAAO0N,EAAE8I,QAAU,OAASrS,GAEvDkD,KAAK2O,MAAM3O,KAAK4O,IAAK,SAGzB7O,EAAKgG,aAAasI,EAAgBb,GAElCzN,EAAKyF,QAAQlK,EAAa,CAAE8B,KAAMyC,EAAQ,GAAIwO,eAAgBA,EAAe,SAKzF/J,cAAe,SAAU8K,EAAWvP,GAChC,IAAIE,EAAOC,KAEX,OAAOD,EAAKyF,QAAQ4J,EAAW,CAAEhS,KAAMyC,EAAQ,MAGnDmJ,gBAAiB,SAASC,EAAMF,GAC5B,IAAIhJ,EAAOC,KACPH,EAAUE,EAAKF,QACfzC,EAAO6L,EAAK1H,OAAOhH,GACnB6D,EAAW2B,EAAKmM,UAChBzJ,EAAW1C,EAAK0C,SAASrF,GAE7B,GAAIgB,EACAA,EAAS8L,WAAW1N,IAGxBuD,EAAKmM,UAAY9O,EAAKC,KAAKb,GAAe,MAE1CqD,EAAQwB,KAAKjF,GAAiB2C,YAAYjD,GAC1C+D,EAAQwB,KAAK,MAAQrF,EAAiB,iBAAmBA,GAAgB+C,YAAY/C,GAErFiN,EAAKjK,SAASlD,GACdmN,EAAK/J,aAAaW,EAAStF,GAAMuE,OAAO,iBAAiBE,SAAShD,GAClE+D,EAAKoB,SAAS/D,EAAK,GAAKA,EAAO,MAC/B,GAAGqF,EACEA,EAASkG,IAAI,WAAY,MAG9B,IAAII,EACAhJ,EAAKyF,QAAQ5K,IAIrBgG,YAAa,SAASd,GAClB,GAAIA,GAAY,cAAeA,IAAaA,EAAQ6B,UAChD7B,EAAQ6B,UAAY,CAAEL,OAAQ,CAAEM,QAAS,IAAME,SAAU,CAAEuC,KAAM,KAAMzC,QAAS,MAIxF2D,WAAY,SAAUzF,GAClB,IAAIC,EAAOC,KACPF,EAAUxG,EAAO,CAAE+O,SAAUtI,EAAMnC,MAAO,IAAMkC,GAEpD,IAAImD,EAAQlD,EAAKuD,UAAUL,MACvB7F,EAAO0C,EAAQ1C,KAEnB,OAAO2C,EAAKuD,UAAUlG,KAAK9D,EAAOwG,EAAS,CACvCyD,YAAaxD,EAAKuD,UAAUC,YAC5B8L,cAAetP,EAAKsP,cACpB7L,MAAOzD,EAAK6G,eAAexJ,IAASA,EAAKG,SAAWH,EAAKI,WAAauC,EAAKuD,UAAUE,MAAQP,EAC7FqM,UAAWxP,EAAQsC,cAAgBhF,EAAKK,SAAWsC,EAAK0L,YAAcxI,GACvE/F,MAGPuO,YAAa,SAAS3L,GAClB,IAAIC,EAAOC,KACX,IAAIsD,EAAYvD,EAAKuD,WAAaxD,EAAQuI,SAAS/E,UAEnD,OAAOA,EAAU1F,MAAMtE,EAAO,CAC1BiW,YAAa,SAASzP,GAClB,IAAI8C,EAAO,GACP+B,EAAI,EACJrH,EAAQwC,EAAQxC,MAChBkS,EAAMlS,EAAQA,EAAMU,OAAS,EAC7BJ,EAAQtE,EAAO,CAAE0E,OAAQwR,GAAO1P,EAAQlC,OAE5C,KAAO+G,EAAI6K,EAAK7K,IACZ/B,GAAQ9C,EAAQuI,SAAS9C,WAAWjM,EAAOwG,EAAS,CAChDlC,MAAOA,EACPR,KAAM9D,EAAO,CAAEwE,MAAO6G,GAAKrH,EAAMqH,OAIzC,OAAO/B,IAEZ9C,EAAS5C,MAGhBmS,cAAe,SAASvP,GACpB,OAAOA,EAAQuI,SAAS/E,UAAU/F,QAAQjE,EAAOwG,EAAS5C,QAQtE,OAJAjE,EAAMG,GAAGqW,OAAO/P,IAIT1G,OAAOC,QA5uDd,CA8uDoB,mBAAVT,QAAwBA,OAAOkX,IAAMlX,OAAS,SAASmX,EAAIC,EAAIC,IAAMA,GAAMD"}