{"version":3,"file":"kendo.pdfviewer.min.js","sources":["kendo.pdfviewer.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('pdfviewer/pdfjs',[\"../kendo.core\"], f);\n})(function(){\n\n(function ($, undefined) {\n    var extend = $.extend;\n    var isLoaded = function() {\n        if (!window.pdfjsLib)\n        {\n            var console = window.console;\n\n            if (console && console.error) {\n                console.error(\"PDF.JS required.\");\n            }\n\n            return false;\n        }\n\n        kendo.pdfviewer.pdfjs.lib = window.pdfjsLib;\n\n        return true;\n    };\n\n    extend(kendo, {\n        pdfviewer: {\n            pdfjs: {\n                lib: window.pdfjsLib,\n                isLoaded: isLoaded\n            }\n        }\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('pdfviewer/processors/pdfjs-processor',[\n        \"../pdfjs\"\n    ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"pdfjs-processor\",\n    name: \"PDFJS-Processor\",\n    category: \"framework\",\n    depends: [ \"core\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        atob = window.atob,\n        PDFJS;\n\n    var PDFJSProcessor = Class.extend({\n        init: function(options, viewer) {\n            var that = this;\n\n            if (kendo.pdfviewer.pdfjs.isLoaded()) {\n                PDFJS = kendo.pdfviewer.pdfjs.lib;\n            }\n\n            that.file = options.file;\n            that.viewer = viewer;\n        },\n        fetchDocument: function () {\n            var that = this,\n                deferred = $.Deferred(),\n                messages = that.viewer.options.messages.errorMessages;\n\n            if (!that.file) {\n                return deferred.resolve();\n            }\n\n            if (that._isBase64Data() && atob)\n            {\n                that.file.data = atob(that.file.data);\n            }\n\n            PDFJS.getDocument(this.file).promise.then(function (pdf) {\n                var pageSizes = [];\n                that.pdf = pdf;\n                that.pagePromises = [];\n                that._downloadData = $.Deferred();\n\n                pdf.getData().then(function (data) {\n                    var blob = new Blob([data], { type: 'application/pdf' });\n                    that._downloadData.resolve({\n                        file: blob\n                    });\n                });\n\n                for (var i = 1; i <= pdf.numPages; i++) {\n                    that.pagePromises.push(pdf.getPage(i));\n                }\n\n                Promise.all(that.pagePromises).then(function (pagePromises) {\n                    pageSizes = pagePromises.map(function (pagePromise) {\n                        var viewport = pagePromise.getViewport({scale: 4/3});\n                        return {\n                            width: viewport.width,\n                            height: viewport.height\n                        };\n                    });\n\n                    deferred.resolve({\n                        total: pdf.numPages,\n                        pages: pageSizes\n                    });\n                }).catch(function (e) { // jshint ignore:line\n                    that.viewer._triggerError({\n                        error: e.message,\n                        message: messages.parseError\n                    });\n                });\n\n            }).catch(function (e) { // jshint ignore:line\n                var notFoundError = e.name.includes(\"Missing\");\n                var alertMessage = notFoundError ? messages.notFound : messages.parseError;\n                that.viewer._triggerError({\n                    error: e.message,\n                    message: alertMessage\n                });\n                if (notFoundError) {\n                    that.viewer._renderBlankPage();\n                }\n            });\n\n            return deferred;\n        },\n        fetchPageData: function (number) {\n            return this.pagePromises[number - 1];\n        },\n        downloadFile: function (fileName) {\n            var that = this;\n            kendo.ui.progress(that.viewer.pageContainer, true);\n\n            that._downloadData.done(function (result) {\n                kendo.ui.progress(that.viewer.pageContainer, false);\n\n                var reader = new FileReader();\n                reader.readAsDataURL(result.file);\n\n                reader.onload = function() {\n                    kendo.saveAs({\n                        dataURI: reader.result,\n                        fileName: fileName + \".pdf\",\n                        proxyURL: function() {\n                            return reader.result;\n                        }\n                    });\n                };\n            });\n        },\n        _updateDocument: function (file) {\n            if(this.pdf && this.pdf.loadingTask) {\n                this.pdf.loadingTask.destroy();\n            }\n\n            this.file = file;\n        },\n        _isBase64Data: function () {\n            var data = this.file.data,\n                notBase64 = /[^A-Z0-9+\\/=]/i,\n                length = data && data.length,\n                equalSign;\n\n            if (!length || length % 4 !== 0 || notBase64.test(data)) {\n                return false;\n            }\n\n            equalSign = data.indexOf('=');\n\n            return equalSign === -1 ||\n                equalSign === length - 1 ||\n                (equalSign === length - 2 && data[length - 1] === '=');\n        },\n        renderTextLayer: function (params) {\n            PDFJS.renderTextLayer(params);\n        }\n    });\n\n    extend(kendo.pdfviewer.pdfjs, {\n        processor: PDFJSProcessor\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('pdfviewer/processors/dpl-processor',[\"../../kendo.core\"], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"dpl-processor\",\n    name: \"DPL-Processor\",\n    category: \"framework\",\n    depends: [ \"core\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        Class = kendo.Class;\n\n    var DPLProcessor = Class.extend({\n        init: function(options, viewer) {\n            var that = this;\n\n            that.options = options;\n            that.read = options.read;\n            that.upload = options.upload;\n            that.download = options.download;\n\n            that.viewer = viewer;\n        },\n        fetchDocument: function () {\n            var that = this,\n                deferred = $.Deferred(),\n                errorMessages = that.viewer.options.messages.errorMessages;\n\n            if (!that.read) {\n                return deferred.resolve();\n            }\n\n            $.ajax({\n                type: that.read.type,\n                url: that.read.url,\n                dataType: that.read.dataType,\n                success: function (data) {\n                    if (typeof data != \"string\") {\n                        data = kendo.stringify(data);\n                    }\n                    deferred.resolve(JSON.parse(data));\n                },\n                error: function (xhr) {\n                    that.viewer._triggerError({\n                        error: xhr.responseText,\n                        message: errorMessages.parseError\n                    });\n                }\n            });\n\n            return deferred;\n        },\n        fetchPageData: function (number) {\n            var that = this;\n            var deferred = $.Deferred();\n            var page = that.viewer.document.pages[number - 1];\n            var data = {};\n            data[that.read.pageField] = number;\n\n            if (!page.geometries.length) {\n                $.ajax({\n                    type: that.read.type,\n                    url: that.read.url,\n                    data: data,\n                    success: function (data) {\n                        deferred.resolve(JSON.parse(data));\n                    },\n                    error: function (xhr) {\n                        that.viewer._triggerError({\n                            error: xhr.responseText,\n                            message: that.viewer.options.messages.errorMessages.parseError\n                        });\n                    }\n                });\n            } else {\n                deferred.resolve(page);\n            }\n\n            return deferred;\n        },\n        downloadFile: function (fileName) {\n            window.location = this.download.url + \"?file=\" + fileName;\n        },\n\n        fromJSON: function (json)\n        {\n            var viewer = this.viewer;\n            viewer._clearPages();\n\n            viewer.document = json;\n            viewer.document.total = viewer.document.pages.length;\n\n            viewer._renderPages();\n            viewer.resize(true);\n\n            viewer.activatePage(1);\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        dpl: {\n            processor: DPLProcessor\n        }\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('pdfviewer/pager',[\"../kendo.core\"], f);\n})(function(){\n\n(function($, undefined) {\n    var NS = \".kendoPDFViewer\",\n        Widget = kendo.ui.Widget,\n        CHANGE = \"change\",\n        KEYDOWN = \"keydown\",\n        CLICK = kendo.support.click,\n        SHRINKWIDTH = 480,\n        kendoAttr = kendo.attr,\n        proxy = $.proxy,\n        extend = $.extend,\n        DOT = \".\",\n        ARIA_DISABLED = \"aria-disabled\";\n\n    var pagerStyles = {\n        wrapperClass: \"k-pager-wrap k-button-group\",\n        iconFirst: \"k-i-arrow-end-left\",\n        iconLast: \"k-i-arrow-end-right\",\n        iconPrev: \"k-i-arrow-60-left\",\n        iconNext: \"k-i-arrow-60-right\",\n        first: \"k-pager-first\",\n        last: \"k-pager-last\",\n        nav: \"k-pager-nav\",\n        disabled: \"k-disabled\"\n    };\n\n    var Pager = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.linkTemplate = kendo.template(that.options.linkTemplate);\n\n            that.element.addClass(pagerStyles.wrapperClass);\n\n            that._renderLinks();\n            that._toggleDisabledClass();\n            that._attachEvents();\n        },\n\n        options: {\n            linkTemplate: '<a href=\"\\\\#\" aria-label=\"#=text#\" title=\"#=text#\" class=\"k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-pager-nav #= wrapClass #\" data-page=\"#=pageIdx#\"><span class=\"k-button-icon k-icon #= iconClass #\"></span></a>',\n            previousNext: true,\n            input: true,\n            page: 1,\n            total: 1,\n            messages: {}\n        },\n\n        events: [\n            CHANGE\n        ],\n\n        _pagerLink: function (iconClass, text, pageIdx, wrapClass) {\n            return this.linkTemplate({\n                iconClass: iconClass,\n                text: text,\n                wrapClass: wrapClass || \"\",\n                pageIdx: pageIdx\n            });\n        },\n\n        _renderLinks: function ()\n        {\n            var that = this,\n                options = that.options;\n\n            if (options.previousNext) {\n                that.firstLink = $(that._pagerLink(pagerStyles.iconFirst, options.messages.first, 1, pagerStyles.first));\n                that.prevLink = $(that._pagerLink(pagerStyles.iconPrev, options.messages.previous, options.page - 1));\n                that.nextLink = $(that._pagerLink(pagerStyles.iconNext, options.messages.next, options.page + 1));\n                that.lastLink = $(that._pagerLink(pagerStyles.iconLast, options.messages.last, options.total, pagerStyles.last));\n            }\n\n            that.element.append(that.firstLink);\n            that.element.append(that.prevLink);\n\n            if (options.input) {\n                that._renderInput();\n            }\n\n            that.element.append(that.nextLink);\n            that.element.append(that.lastLink);\n\n        },\n\n        _toggleDisabledClass: function () {\n            var that = this,\n                options = that.options,\n                total = !options.total;\n\n            if (that.nextLink && that.prevLink) {\n                that.prevLink.toggleClass(pagerStyles.disabled, total || options.page === 1);\n                that.nextLink.toggleClass(pagerStyles.disabled, total || options.page === options.total);\n                that.lastLink.toggleClass(pagerStyles.disabled, total || options.page === options.total);\n                that.firstLink.toggleClass(pagerStyles.disabled,total || options.page === 1);\n\n                that.prevLink.attr(ARIA_DISABLED, total || options.page === 1);\n                that.firstLink.attr(ARIA_DISABLED, total || options.page === 1);\n\n                that.nextLink.attr(ARIA_DISABLED, options.page === options.total);\n                that.lastLink.attr(ARIA_DISABLED, options.page === options.total);\n            }\n\n            if (that.input) {\n                that.input.toggleClass(pagerStyles.disabled, options.total <= 1);\n                that.input.attr(ARIA_DISABLED, options.total <= 1);\n            }\n        },\n\n        _attachEvents: function () {\n            var that = this;\n\n            that.element.on(CLICK + NS, DOT + pagerStyles.nav, proxy(that._click, that));\n            that.element.on(KEYDOWN + NS, DOT + pagerStyles.nav, function (e) {\n                if (e.keyCode === kendo.keys.ENTER)\n                {\n                    that._click(e);\n                    e.preventDefault();\n                }\n            });\n\n            if (that.input) {\n                that.input.on(KEYDOWN + NS, proxy(that._keydown, that));\n            }\n        },\n\n        _click: function (e) {\n            var target = $(e.currentTarget);\n            var page = parseInt(target.attr(kendoAttr(\"page\")), 10);\n\n            if (e.isDefaultPrevented()) {\n                return;\n            }\n\n            this._change(page);\n        },\n\n        _keydown: function (e) {\n            var key = e.keyCode,\n                keys = kendo.keys,\n                input = $(e.target),\n                page = parseInt(input.val(), 10),\n                upDown = key === keys.UP || key === keys.DOWN,\n                allowedKeys = key === keys.RIGHT || key === keys.LEFT ||\n                                key === keys.BACKSPACE || key === keys.DELETE,\n                direction = upDown && key === keys.UP ? 1 : -1;\n\n            if (upDown) {\n                page += direction;\n            }\n\n            if (key === keys.ENTER || upDown) {\n                if (isNaN(page) || page < 1 || page > this.options.total) {\n                    page = this.options.page;\n                    input.val(page);\n                    return;\n                }\n                this._change(page);\n                e.preventDefault();\n            } else if (!e.key.match(/^\\d+$/) && !allowedKeys) {\n                e.preventDefault();\n            }\n\n        },\n\n        _change: function (page) {\n            var that = this;\n\n            if (page >= 1 && page <= that.options.total) {\n                that.options.page = page;\n                if (that.input) {\n                    that.input.val(page);\n                }\n                that.prevLink.attr(kendoAttr(\"page\"), page - 1);\n                that.nextLink.attr(kendoAttr(\"page\"), page + 1);\n                that._toggleDisabledClass();\n            }\n\n            that.trigger(CHANGE, { page: page});\n        },\n\n        setOptions: function (options) {\n            var that = this,\n                prevTotal = that.options.total;\n\n            options = $.extend(that.options, options);\n\n            Widget.fn.setOptions.call(that, options);\n\n            if (options.input) {\n                if (prevTotal != options.total) {\n                    that._renderInput();\n                    that.input\n                            .on(KEYDOWN + NS, proxy(that._keydown, that));\n                }\n                else {\n                    that.input.val(options.total > 0 ? options.page : 1);\n                }\n            }\n\n            if (options.total > 1) {\n                that.prevLink.attr(kendoAttr(\"page\"), options.page - 1);\n                that.nextLink.attr(kendoAttr(\"page\"), options.page + 1);\n                that.lastLink.attr(kendoAttr(\"page\"), options.total);\n            }\n\n            that._toggleDisabledClass();\n        },\n\n        _renderInput: function () {\n            var that = this,\n                totalMessage,\n                options = that.options,\n                shouldShrink = that.element.parent().width() <= SHRINKWIDTH,\n                inputTemplate,\n                pagerInputWrap = that.element.find(\".k-pager-input\");\n\n            if (that.input) {\n                that.input.off(NS);\n            }\n\n            totalMessage = options.total > 0 ? kendo.format(options.messages.of, options.total) : \"\";\n\n            if (!shouldShrink) {\n                totalMessage += options.total > 1 ? options.messages.pages : options.messages.page;\n            }\n\n            inputTemplate = '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input class=\"k-input-inner\" aria-label=\"' + options.page + totalMessage  +  '\"></span>' + totalMessage;\n\n            if (pagerInputWrap.length) {\n                pagerInputWrap.html(inputTemplate);\n            } else {\n                that.element.append('<span class=\"k-pager-input k-label\">' + inputTemplate +'</span>');\n            }\n\n            that.input = that.element\n                                .find(\"input\")\n                                .val(options.total > 0 ? options.page : 1);\n        },\n\n        destroy: function() {\n            this.element.off(NS);\n\n            if (this.input) {\n                this.input.off(NS);\n            }\n            Widget.fn.destroy.call(this);\n        }\n    });\n\n\n    extend(kendo.pdfviewer, {\n        Pager: Pager\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n  define('pdfviewer/toolbar',[\"../kendo.toolbar\", \"../kendo.combobox\", \"./pager\"], f);\n})(function(){\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        proxy = $.proxy,\n        ACTION = \"action\",\n        KEYDOWN = \"keydown\",\n        CLICK = kendo.support.click,\n        CHANGE = \"change\",\n        ZOOMIN = \"zoomin\",\n        ZOOMOUT = \"zoomout\",\n        Item = kendo.toolbar.Item,\n        ToolBar = kendo.ui.ToolBar,\n        PREDEFINED_ZOOM_VALUES = {\n            auto: \"auto\",\n            actual: \"actual\",\n            fitToWidth: \"fitToWidth\",\n            fitToPage: \"fitToPage\"\n        },\n        styles = {\n            zoomOutIcon: \"k-i-zoom-out\",\n            zoomInIcon: \"k-i-zoom-in\",\n            zoomButtons: \"k-button-flat k-button-flat-base\",\n            zoomOverflowButtons: \"k-button-solid k-button-solid-base k-overflow-button\",\n            overflowHidden: \"k-overflow-hidden\"\n        };\n\n    var ZOOM_BUTTON_TEMPLATE = kendo.template('<a href=\"\\\\#\" aria-label=\"#=text#\" title=\"#=text#\" data-command=\"#=command#\" class=\"k-button k-button-md k-rounded-md # if(!showText) { # k-icon-button # } # #=className#\">' +\n            '<span class=\"k-button-icon k-icon #= iconClass #\"></span> ' +\n            '# if(showText) { #' +\n                '<span class=\"k-button-text\">#= text #</span> ' +\n            '# } #' +\n        '</a>');\n    var ZOOM_COMBOBOX_TEMPLATE = kendo.template('<select title=\"#=zoomLevel#\" aria-label=\"#=zoomLevel#\">' +\n        '#for(var zoomIndex in zoomLevels){#' +\n            '# var zoomLevel = zoomLevels[zoomIndex]; #' +\n            '<option value=\"#= zoomLevel.percent || (zoomLevel + \"%\") #\">${zoomLevel.text ? zoomLevel.text : zoomLevel + \"%\"}</option>' +\n        '#}#'  +\n    '</select>');\n\n    var DefaultTools = {\n        pager: {\n            type: \"pager\",\n            overflow: \"never\",\n            command: \"PageChangeCommand\"\n        },\n        spacer: { type: \"spacer\" },\n        zoom: {\n            type: \"zoom\",\n            command: \"ZoomCommand\",\n            zoomInOut: true,\n            combobox: { zoomLevels: [50, 100, 150, 200, 300, 400] },\n            enable: false,\n            attributes: { \"class\": \"k-button-group\" }\n        },\n        toggleSelection: {\n            type: \"buttonGroup\",\n            attributes: { \"class\": \"k-toggle-selection-group\" },\n            buttons: [\n                {\n                    togglable: true,\n                    text: \"Enable Selection\",\n                    command: \"EnableSelectionCommand\",\n                    icon: \"cursor\",\n                    showText: \"overflow\",\n                    name: \"toggleSelection\",\n                    group: \"toggle-pan\"\n                }, {\n                    togglable: true,\n                    text: \"Enable Panning\",\n                    command: \"EnablePanCommand\",\n                    icon: \"hand\",\n                    showText: \"overflow\",\n                    name: \"togglePan\",\n                    group: \"toggle-pan\",\n                    selected: true\n                }\n            ]\n        },\n        spacer2: { type: \"spacer\" },\n        search: {\n            type: \"button\",\n            text: \"Search\",\n            command: \"OpenSearchCommand\",\n            icon: \"search\",\n            name: \"search\",\n            showText: \"overflow\",\n            enable: false\n        },\n        open: {\n            type: \"button\",\n            text: \"Open\",\n            showText: \"overflow\",\n            name: \"open\",\n            icon: \"folder-open\",\n            command: \"OpenCommand\"\n        },\n        download: {\n            type: \"button\",\n            text: \"Download\",\n            showText: \"overflow\",\n            name: \"download\",\n            icon: \"download\",\n            command: \"DownloadCommand\",\n            enable: false\n        },\n        print: {\n            type: \"button\",\n            text: \"Print\",\n            showText: \"overflow\",\n            name: \"print\",\n            icon: \"print\",\n            command: \"PrintCommand\",\n            enable: false\n        }\n    };\n\n    var AllTools = extend({}, DefaultTools, {\n        exportAs: { type: \"button\", text: \"Export\", showText: \"overflow\", name: \"exportAs\", icon: \"image-export\", command: \"ExportCommand\" }\n    });\n\n    var ToolbarPager = Item.extend({\n        init: function(options, toolbar) {\n            var pagerElement = $(\"<div />\");\n\n            this.options = extend(true, options, toolbar.options.pager);\n\n            this.toolbar = toolbar;\n\n            this.toolbar.pager = new kendo.pdfviewer.Pager(pagerElement, extend({}, options, {\n                change: proxy(this._change, this)\n            }));\n\n            this.element = pagerElement;\n            this.element.on(KEYDOWN, proxy(this._keydown, this));\n\n            this.attributes();\n            this.addUidAttr();\n            this.addOverflowAttr();\n        },\n        _change: function (e) {\n            if (this.options.change && this.options.change(e.page))\n            {\n                return;\n            }\n\n            this.toolbar.action({\n                command: \"PageChangeCommand\",\n                options: {\n                    value: e.page\n                }\n            });\n        },\n        _keydown: function (e) {\n            var that = this,\n                target = $(e.target),\n                keyCode = e.keyCode,\n                children = that.element.find(\":kendoFocusable\"),\n                targetIndex = children.index(target),\n                direction = e.shiftKey ? -1 : 1,\n                keys = kendo.keys;\n\n            if (keyCode === keys.TAB && children[targetIndex + direction]) {\n                children[targetIndex + direction].focus();\n                e.preventDefault();\n                e.stopPropagation();\n            } else if (keyCode === keys.RIGHT && children[targetIndex + 1]) {\n                children[targetIndex + 1].focus();\n                e.preventDefault();\n                e.stopPropagation();\n            } else if (keyCode === keys.LEFT && children[targetIndex - 1]) {\n                children[targetIndex - 1].focus();\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n    });\n\n    kendo.toolbar.registerComponent(\"pager\", ToolbarPager);\n\n    function appendZoomButtons (element, messages, isOverflow) {\n        var className = isOverflow ? styles.zoomOverflowButtons : styles.zoomButtons;\n\n        element.append(ZOOM_BUTTON_TEMPLATE({\n            text: messages.zoomOut,\n            command: ZOOMOUT,\n            iconClass: styles.zoomOutIcon,\n            showText: isOverflow,\n            className: className\n        }));\n        element.append(ZOOM_BUTTON_TEMPLATE({\n            text: messages.zoomIn,\n            command: ZOOMIN,\n            iconClass:  styles.zoomInIcon,\n            showText: isOverflow,\n            className: className\n        }));\n    }\n\n    var ToolBarZoom = Item.extend({\n        init: function(options, toolbar) {\n            this._init(options, toolbar);\n            this.toolbar.zoom = this;\n\n            if (toolbar.options.scale)\n            {\n                this._initValue = toolbar.options.scale * 100 + \"%\";\n            }\n\n            this._appendElements();\n\n            this._click = kendo.throttle(\n                this._click.bind(this),\n                200\n            );\n            this._keydown = kendo.throttle(\n                this._keydown.bind(this),\n                200\n            );\n\n            this.element.on(CLICK, \".k-button[data-command='zoomin'], .k-button[data-command='zoomout']\", this._click);\n            this.element.on(KEYDOWN, \".k-button[data-command='zoomin'], .k-button[data-command='zoomout']\", this._keydown);\n\n            this.attributes();\n            this.addUidAttr();\n            this.addOverflowAttr();\n            this.enable(options.enable);\n        },\n\n        _init: function (options, toolbar) {\n            var zoomElement = $(\"<div />\");\n\n            this.options = extend(true, options, {\n                messages: toolbar.options.messages.zoom\n            });\n\n            this.toolbar = toolbar;\n            this.element = zoomElement;\n        },\n\n        _appendElements: function () {\n            var options = this.options;\n\n            if (options.zoomInOut) {\n                appendZoomButtons(this.element, options.messages, false);\n            }\n\n            if (options.combobox) {\n                this._buildComboBox();\n            }\n        },\n\n        _buildComboBox: function () {\n            var that = this,\n                combobox,\n                messages = that.options.messages,\n                comboOptions = that.options.combobox,\n                zoomLevels = [{\n                    percent: PREDEFINED_ZOOM_VALUES.auto,\n                    text: messages.autoWidth\n                }, {\n                    percent: PREDEFINED_ZOOM_VALUES.actual,\n                    text: messages.actualWidth\n                }, {\n                    percent: PREDEFINED_ZOOM_VALUES.fitToWidth,\n                    text: messages.fitToWidth\n                }, {\n                    percent: PREDEFINED_ZOOM_VALUES.fitToPage,\n                    text: messages.fitToPage\n                }];\n\n            zoomLevels = zoomLevels.concat(comboOptions.zoomLevels);\n\n            combobox = $(ZOOM_COMBOBOX_TEMPLATE({\n                zoomLevels: zoomLevels,\n                zoomLevel: messages.zoomLevel\n            }));\n\n            if (!kendo.support.mobileOS) {\n                combobox = combobox.kendoComboBox(extend({\n                    autoWidth: true,\n                    clearButton: false,\n                    value: that._initValue\n                }, comboOptions)).getKendoComboBox();\n\n                that.element.append(combobox.wrapper);\n                that.combobox = combobox;\n                that._currentValue = combobox.value();\n            } else {\n                that.element.append(combobox);\n            }\n\n            combobox.bind(CHANGE, kendo.throttle(that.change.bind(that), 300));\n        },\n\n        change: function (e) {\n            var value = e.sender ? e.sender.value() : e.target.value,\n                parsedValue;\n\n            if (value.toString().match(/^[0-9]+%?$/)) {\n                parsedValue = parseInt(value.replace('%', ''), 10) / 100;\n            } else if (!PREDEFINED_ZOOM_VALUES[value]){\n                if (this.combobox) {\n                    this.combobox.value(this._currentValue);\n                }\n                e.preventDefault();\n                return;\n            }\n\n            this._currentValue = value;\n            this.toolbar.action({\n                command: \"ZoomCommand\",\n                options: {\n                    scale: parsedValue || value\n                }\n            });\n        },\n\n        _buttonCommand: function (target) {\n            var button = $(target).closest(\".k-button\"),\n            command = button.data(\"command\");\n\n            this.toolbar.action({\n                command: \"ZoomCommand\",\n                options: {\n                    zoomIn: command === ZOOMIN,\n                    zoomOut: command === ZOOMOUT,\n                    updateComboBox: true\n                }\n            });\n        },\n\n        _click: function (e) {\n            this._buttonCommand(e.target);\n        },\n\n        _keydown: function (e) {\n            var target = e.target,\n                keyCode = e.keyCode,\n                keys = kendo.keys,\n                children = this.element.find(\":kendoFocusable\"),\n                targetIndex = children.index($(target));\n\n            if (keyCode === keys.ENTER) {\n                this._buttonCommand(target);\n                e.preventDefault();\n            } else if (keyCode === keys.RIGHT && children[targetIndex + 1]) {\n                children[targetIndex + 1].focus();\n                e.preventDefault();\n                e.stopPropagation();\n            } else if (keyCode === keys.LEFT && children[targetIndex - 1]) {\n                children[targetIndex - 1].focus();\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        },\n\n        enable: function (value) {\n            var element = this.element;\n\n            element.find(\".k-button, select\").toggleClass(\"k-disabled\", !value);\n\n            if (this.combobox) {\n                this.combobox.enable(value);\n            }\n        },\n\n        destroy: function(){\n            if (this.combobox) {\n                this.combobox.destroy();\n            }\n        }\n    });\n\n    var ToolBarOverflowZoom = ToolBarZoom.extend({\n        _init: function (options, toolbar) {\n            var zoomElement = $(\"<li></li>\");\n\n            this.options = extend(true, options, {\n                messages: toolbar.options.messages.zoom\n            });\n\n            this.toolbar = toolbar;\n            this.element = zoomElement;\n        },\n        _appendElements: function () {\n            var options = this.options;\n            if (options.zoomInOut) {\n                appendZoomButtons(this.element, options.messages, true);\n            }\n        },\n        overflowHidden: function() {\n            this.element.addClass(styles.overflowHidden);\n        }\n    });\n\n    kendo.toolbar.registerComponent(\"zoom\", ToolBarZoom, ToolBarOverflowZoom);\n\n    var ViewerToolBar = ToolBar.extend({\n        init: function(element, options) {\n            var that = this;\n            var items = options.items && options.items.length ? options.items : Object.keys(DefaultTools);\n\n            that.options = options;\n\n            options.items = that._updateItems(items);\n\n            ToolBar.fn.init.call(that, element, options);\n\n            that.bind({\n                click: that._click,\n                toggle: that._click\n            });\n\n            options.viewer.bind({\n                update: that._update.bind(that)\n            });\n        },\n        events: [\n            ACTION\n        ],\n        _updateItems: function (items) {\n            var that = this;\n            var messages = this.options.messages;\n\n            return items.map(function (tool) {\n                var isBuiltInTool =  $.isPlainObject(tool) && Object.keys(tool).length === 1 && tool.name;\n                tool = isBuiltInTool ? tool.name : tool;\n                var toolOptions = $.isPlainObject(tool) ? tool : AllTools[tool];\n                var options;\n                var toolName =  toolOptions.name;\n\n                if (toolOptions.type === \"buttonGroup\") {\n                    toolOptions.buttons = that._updateItems(toolOptions.buttons);\n                } else if (toolOptions.type !== \"pager\") {\n                    options = {\n                        name: toolName,\n                        attributes: {\n                            \"aria-label\": messages[toolName],\n                            \"title\": messages[toolName],\n                            \"data-command\": toolOptions.command\n                        },\n                        overflow: toolOptions.overflow,\n                        fillMode: \"flat\"\n                    };\n                } else {\n                    options = {\n                        overflow: \"never\"\n                    };\n                }\n\n                if (toolOptions.text) {\n                    options.text = messages[toolOptions.name] || toolOptions.text;\n                }\n\n                kendo.deepExtend(toolOptions, options);\n\n                return toolOptions;\n            });\n        },\n        _click: function (e)\n        {\n            var command = $(e.target).data(\"command\");\n\n            if (!command) {\n                return;\n            }\n\n            this.action({\n                command: command,\n                options: e.options\n            });\n        },\n        _update: function (e) {\n            var pageOptions = {\n                page: e.page || 1,\n                total: e.total || 1\n            };\n\n            if (this.zoom) {\n                this.zoom.enable(!e.isBlank);\n                if (e.action === \"zoom\") {\n                    this._updateZoomComboBox(e.zoom);\n                }\n            }\n\n            if ((e.action === \"pagechange\" || e.isBlank) && this.pager) {\n                this.pager.setOptions(pageOptions);\n            }\n\n            this.enable(this.wrapper.find(\".k-toggle-selection-group\"), !e.isBlank);\n\n            this.enable(this.wrapper.find(\"[data-command='OpenSearchCommand']\"), !e.isBlank);\n            this.enable(this.wrapper.find(\"[data-command='DownloadCommand']\"), !e.isBlank);\n            this.enable(this.wrapper.find(\"[data-command='PrintCommand']\"), !e.isBlank);\n        },\n        _updateZoomComboBox: function (value) {\n            var isPredefined = value === PREDEFINED_ZOOM_VALUES.auto ||\n                                value === PREDEFINED_ZOOM_VALUES.actual;\n\n            if (!isPredefined) {\n                value = Math.round(value * 100) + '%';\n            }\n\n            if (this.zoom && this.zoom.combobox) {\n                this.zoom._currentValue = value;\n                this.zoom.combobox.value(value);\n            }\n        },\n        action: function (args)\n        {\n            this.trigger(ACTION, args);\n        },\n        destroy: function () {\n            if (this.pager) {\n                this.pager.destroy();\n            }\n\n            if (this.zoom) {\n                this.zoom.destroy();\n            }\n            ToolBar.fn.destroy.call(this);\n        }\n    });\n\n\n    extend(kendo.pdfviewer, {\n        Toolbar: ViewerToolBar,\n        DefaultTools: DefaultTools\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n    define('pdfviewer/page',[\"../kendo.drawing\"], f);\n})(function(){\n\n(function($, undefined) {\n    var extend = $.extend,\n        noop = $.noop,\n        drawing = kendo.drawing,\n        Group = drawing.Group,\n        Surface = drawing.Surface,\n        RENDER = \"render\",\n        Class = kendo.Class;\n\n    var geometryTypes = {\n        Path: \"path\",\n        MultiPath: \"multipath\",\n        Rect: \"rect\",\n        Image: \"image\",\n        Text: \"text\"\n    };\n\n    var Page = Class.extend({\n        init: function (options, viewer) {\n            this.viewer = viewer;\n            this.processor = options.processor;\n            this.options = options;\n            this.pageNumber = options.number;\n\n            this.element = $(\"<div class='k-page' />\");\n            this.element.attr(kendo.attr(\"number\"), this.pageNumber);\n\n            this._updatePageSize(options);\n            this.width = options.width;\n            this.height = options.height;\n        },\n        resize: function (ratio) {\n            var pageElement = this.element;\n\n            this._updatePageSize({\n                width: Math.min(pageElement.width() * ratio, this.width),\n                height: Math.min(pageElement.height() * ratio, this.height)\n            });\n        },\n        _updatePageSize: function (size) {\n            this.element\n                    .width(size.width)\n                    .height(size.height);\n        },\n        destroy: function () {\n            kendo.destroy(this.element);\n        },\n        render: noop\n    });\n\n    var DPLPage = Page.extend({\n        draw: function () {\n            var that = this,\n                geometries = that.options.geometries;\n\n            that.group = new Group();\n            that.surface.draw(that.group);\n\n            that._drawGeometries(geometries);\n\n            that.viewer.trigger(RENDER, { page: this });\n            kendo.ui.progress(that.element, false);\n        },\n        load: function () {\n            var that = this;\n\n            if (that.loaded || !that.processor)\n            {\n                return;\n            }\n\n            that.processor.fetchPageData(that.pageNumber).then(function (data) {\n                that.options = data;\n                that._initSurface();\n                that.draw();\n            });\n\n            that.loaded = true;\n        },\n        _initSurface: function () {\n            var size = {\n                width: this.element.width(),\n                height: this.element.height()\n            };\n            var surfaceOptions = extend({ width: this.width, height: this.height }, this.viewer.options.view);\n            this.surface = new Surface(this.element, surfaceOptions);\n            this._updatePageSize(size);\n        },\n        _drawGeometries: function (geometries) {\n            var that = this,\n                kGeometry;\n\n            if (!geometries) {\n                return;\n            }\n\n            for (var i = 0; i <= geometries.length; i++) {\n                var geometry = geometries[i];\n\n                if (!geometry) {\n                    continue;\n                }\n\n                switch (geometry.type) {\n                    case geometryTypes.Path:\n                    case geometryTypes.MultiPath:\n                        kGeometry = that._drawPath(geometry);\n                        break;\n                    case geometryTypes.Rect:\n                        kGeometry = that._drawRect(geometry);\n                        break;\n                    case geometryTypes.Image:\n                        kGeometry = that._drawImage(geometry);\n                        break;\n                    case geometryTypes.Text:\n                        kGeometry = that._drawText(geometry);\n                        break;\n                    default:\n                        kGeometry = null;\n                        break;\n                }\n\n                if (kGeometry)\n                {\n                    that.group.append(kGeometry);\n                }\n            }\n        },\n        _drawRect: function (geometry)\n        {\n            var rectGeo = new kendo.geometry.Rect(geometry.point, geometry.size);\n\n            return new drawing.Rect(rectGeo, {\n                transform: this._getMatrix(geometry.transform),\n                fill: geometry.fillOptions,\n                stroke: geometry.strokeOptions\n            });\n        },\n\n        _drawImage: function (geometry)\n        {\n            var imageRect =  new kendo.geometry.Rect(geometry.point, geometry.size);\n            return new drawing.Image(geometry.src, imageRect,  {\n                transform: this._getMatrix(geometry.transform)\n            });\n        },\n\n        _drawText: function (geometry)\n        {\n            var options = {\n                transform: this._getMatrix(geometry.transform),\n                stroke: geometry.strokeOptions,\n                fill: geometry.fillOptions,\n                font: geometry.font\n            };\n            return new kendo.drawing.Text(geometry.content, geometry.point, options);\n        },\n\n        _drawPath: function (geometry)\n        {\n            var options = {\n                transform: this._getMatrix(geometry.transform),\n                stroke: geometry.strokeOptions,\n                fill: geometry.fillOptions\n            };\n            var path = new drawing.MultiPath(options);\n\n            for (var i = 0; i < geometry.paths.length; i++) {\n                var subPath = geometry.paths[i];\n\n                if (!subPath.segments)\n                {\n                    return;\n                }\n\n                path.moveTo.apply(path, subPath.point);\n\n                for (var j = 0; j < subPath.segments.length; j++) {\n                    var segment = subPath.segments[j];\n                    var drawAction = segment.points.length === 1 ? path.lineTo : path.curveTo;\n                    drawAction.apply(path, segment.points);\n                }\n\n                if (subPath.closed) {\n                    path.close();\n                }\n            }\n\n            return path;\n        },\n\n        _getMatrix: function (transform) {\n            var matrix = Object.create(kendo.geometry.Matrix.prototype);\n            kendo.geometry.Matrix.apply(matrix, transform);\n            return matrix;\n        }\n    });\n\n    var PDFJSPage = Page.extend({\n        init: function(options, viewer) {\n            var that = this,\n                canvas;\n\n            canvas = $(\"<canvas style='width: 100%; height: 100%;' />\");\n            that.canvas = canvas.get(0);\n\n            Page.fn.init.call(that, options, viewer);\n\n            that.canvas.width = that.width;\n            that.canvas.height = that.height;\n            that.element.append(canvas);\n        },\n        load: function (defaultScale, force) {\n            var that = this,\n                promise = $.Deferred();\n\n            if (that._scale === defaultScale && !force)\n            {\n                return;\n            } else if (that._scale && that._scale !== defaultScale && !force)\n            {\n                that._scale = defaultScale;\n                that.render(defaultScale);\n                return promise.resolve(that);\n            }\n\n            if (that.processor) {\n                that.processor.fetchPageData(that.pageNumber).then(function (page) {\n                    that._page = page;\n                    that._renderPromise = that.render(defaultScale).then(function () {\n                        that.viewer.trigger(RENDER, { page: that });\n                    });\n                    promise.resolve(that);\n                });\n            }\n\n            that._scale = defaultScale;\n            that.loaded = true;\n            return promise;\n        },\n        render: function (scale) {\n            var that = this;\n            var context = this.canvas.getContext('2d'),\n                viewport = this._page.getViewport({\n                    scale: scale\n                });\n\n            this._scale = scale;\n            this.canvas.width = viewport.width;\n            this.canvas.height = viewport.height;\n\n            if (this._renderTask)\n            {\n                this._renderTask.cancel();\n                this._renderTask = null;\n            }\n\n            this._updatePageSize({\n                width: viewport.width,\n                height: viewport.height\n            });\n\n            this._renderTask = this._page.render({\n                canvasContext: context,\n                viewport: viewport\n            });\n\n            this._renderTextLayer(viewport);\n\n            return this._renderTask.promise.then(function () {\n                that._renderTask = null;\n\n            }).catch(function () {}); // jshint ignore:line\n        },\n        _renderTextLayer: function (viewport) {\n            var that = this;\n            var page = that._page;\n\n            if(that.textLayer) {\n                that.textLayer.remove();\n             }\n\n            that.textLayer = $(\"<div class='k-text-layer'></div>\").get(0);\n            that.element.append(that.textLayer);\n\n            page.getTextContent({\n                normalizeWhitespace: true\n            }).then(function(textContent){\n                $(that.textLayer).css({\n                  height: viewport.height,\n                  width: viewport.width\n                }).html(\"\"); // Clear content to make sure that refreshing the page will not cause duplication of the text content.\n\n                var params = {\n                    textContent: textContent,\n                    container: that.textLayer,\n                    viewport: viewport,\n                    textDivs: [],\n                    enhanceTextSelection: true\n                };\n\n                that.processor.renderTextLayer(params);\n            });\n        }\n    });\n\n    extend(kendo.pdfviewer.dpl, {\n        geometryTypes: geometryTypes,\n        Page: DPLPage\n    });\n    extend(kendo.pdfviewer.pdfjs, {\n        Page: PDFJSPage\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n    define('pdfviewer/search',[\"../kendo.core\"], f);\n})(function(){\n\n(function($, undefined) {\n    var Class = kendo.Class,\n        extend = $.extend,\n        isArray = Array.isArray;\n\n    var SearchDOM = Class.extend({\n        init: function(options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.processDom();\n        },\n\n        options: {\n            highlightClass: \"k-search-highlight\",\n            charClass: \"k-text-char\"\n        },\n\n        processDom: function () {\n            var that = this;\n\n            that.targets = isArray(that.options.target) ? that.options.target : [that.options.target];\n            that.textNodes = [];\n            that.charIndex = 0;\n            that.text = \"\";\n\n            that.targets.forEach(function (target) {\n                that.traverseToTextNode(target);\n            });\n\n            for (var i = 0; i < that.textNodes.length; i++) {\n                that.processTextNode(that.textNodes[i]);\n            }\n        },\n\n        traverseToTextNode: function (node) {\n            var that = this;\n\n            if(node.nodeType === 3) {\n                that.textNodes.push(node);\n            } else {\n                for (var i = 0; i < node.childNodes.length; i++) {\n                    that.traverseToTextNode(node.childNodes[i]);\n                }\n            }\n        },\n\n        processTextNode: function (node) {\n            var that = this;\n            var text = node.textContent;\n            var span;\n\n            that.text = that.text + text;\n\n            if(text.length > 0){\n                span = $(node).wrap(\"<span>\").parent();\n                span.empty();\n                that.splitChars(span.get(0), text);\n                span.children().unwrap();\n            }\n        },\n\n        splitChars: function (span, text) {\n            var that = this;\n            var newHtml = \"\";\n\n            for (var i = 0; i < text.length; i++) {\n                newHtml = newHtml + \"<span class='\"+ that.options.charClass + \"' \" + kendo.attr(\"char-index\") + \"=\" + that.charIndex + \">\" + text[i] + \"</span>\";\n                that.charIndex++;\n            }\n\n            span.innerHTML = newHtml;\n        },\n\n        search: function (value, matchCase) {\n            var that = this;\n            var expression = new RegExp(value, !matchCase ? \"gi\" : \"g\");\n            var match;\n\n            that.matches = [];\n\n            that.resetMark();\n            that.resetHighlight();\n            that.resetMatchIndex();\n\n            if(value === \"\") {\n                return;\n            }\n\n            match = expression.exec(that.text);\n\n            while(match){\n                that.matches.push({\n                    startOffset: match.index,\n                    endOffset: match.index + match[0].length\n                });\n\n                match = expression.exec(that.text);\n            }\n\n            that.highlightAll();\n            that.mark();\n        },\n\n        highlightAll: function () {\n            var that = this;\n\n            that.matches.forEach(function (match, index) {\n                var start = match.startOffset;\n                var end = match.endOffset;\n\n                that.highlight(start, end, index + 1);\n            });\n        },\n\n        highlight: function (start, end, matchIndex) {\n            var that = this;\n\n            for (var i = start; i < end; i++) {\n                $(that.targets)\n                    .find(\".\" + that.options.charClass + \"[\" + kendo.attr(\"char-index\")  + \"=\" + i + \"]\")\n                    .addClass(that.options.highlightClass)\n                    .attr(kendo.attr(\"match-index\"), matchIndex);\n            }\n        },\n\n        resetHighlight: function () {\n            var that = this;\n\n            $(that.targets)\n                .find(\".\" + that.options.highlightClass)\n                .removeClass(that.options.highlightClass);\n        },\n\n        resetMatchIndex: function () {\n            var that = this;\n\n            $(that.targets)\n                .find(\".\" + that.options.charClass + \"[\" + kendo.attr(\"match-index\")  + \"]\")\n                .removeAttr(kendo.attr(\"match-index\"));\n        },\n\n        mark: function () {\n            var that = this;\n\n            if(!that.currentIndex && that.currentIndex !== 0) {\n                that.currentIndex = 0;\n            } else if (that.currentIndex > that.matches.length) {\n                that.currentIndex = that.matches.length;\n            } else {\n                that.resetMark();\n            }\n\n            $(that.targets)\n                .find(\".\" + that.options.charClass + \"[\" + kendo.attr(\"match-index\")  + \"=\" + that.currentIndex + \"]\")\n                .wrapInner(\"<mark>\");\n        },\n\n        resetMark: function () {\n            var that = this;\n            $(that.targets).find(\"mark\").contents().unwrap();\n        },\n\n        nextMatch: function () {\n            var that = this;\n\n            that.currentIndex++;\n\n            if(that.currentIndex > that.matches.length) {\n                that.currentIndex = 1;\n            }\n\n            that.mark();\n        },\n\n        previousMatch: function () {\n            var that = this;\n\n            that.currentIndex--;\n\n            if(that.currentIndex < 1) {\n                that.currentIndex = that.matches.length;\n            }\n\n            that.mark();\n        },\n\n        getMarkedIndex: function () {\n            return this.matches.length ? this.currentIndex : 0;\n        },\n\n        getFirstMarked: function () {\n            return $(this.targets).find(\"mark\").eq(0);\n        },\n\n        destroy: function () {\n            var that = this;\n\n            that.resetMark();\n            $(that.targets).children(\"span:not(.\" + that.options.charClass + \")\").each(function(i, item){\n                $(item).text($(item).text());\n            });\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        SearchDOM: SearchDOM\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n  define('pdfviewer/dialogs',[\"../kendo.dialog\", \"../kendo.window\", \"../kendo.binder\", \"../kendo.numerictextbox\", \"../kendo.dropdownlist\"], f);\n})(function(){\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        Class = kendo.Class,\n        EXTENSIONS = {\n            svg: \".svg\",\n            png: \".png\"\n        },\n        keys = kendo.keys;\n\n    var ErrorDialog = Class.extend({\n        init: function (options) {\n            this.options = extend(options, {\n                actions: [{\n                    text: options.messages.dialogs.okText\n                }]\n            });\n            this._dialog = $(\"<div />\")\n                    .kendoDialog(this.options)\n                    .getKendoDialog();\n        },\n        open: function () {\n            this._dialog.center().open();\n        }\n    });\n\n    var ExportAsDialog = Class.extend({\n        init: function (options) {\n            this.options = extend(options, this.options, {\n                fileFormats: [{\n                    description: options.messages.dialogs.exportAsDialog.png,\n                    extension: EXTENSIONS.png\n                }, {\n                    description: options.messages.dialogs.exportAsDialog.svg,\n                    extension: EXTENSIONS.svg\n                }],\n                title: options.messages.dialogs.exportAsDialog.title,\n                open: function() {\n                    this.center();\n                }\n            });\n            this._initializeDialog();\n            return this;\n        },\n        options: {\n            extension: EXTENSIONS.png,\n            autoFocus: true,\n            resizable: false,\n            modal: {\n                preventScroll: true\n            },\n            width: \"90%\",\n            maxWidth: 520,\n            template:\n                \"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.fileName #:</label></div>\" +\n                \"<div class='k-edit-field'>\" +\n                    \"<span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input class='k-input-inner' data-bind='value: name' /></span>\" +\n                \"</div>\" +\n                \"<div>\" +\n                    \"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.saveAsType #:</label></div>\" +\n                    \"<div class='k-edit-field'>\" +\n                    \"<select data-role='dropdownlist' class='k-file-format' \" +\n                        \"data-text-field='description' \" +\n                        \"data-value-field='extension' \" +\n                        \"data-bind='value: extension, source: fileFormats'></select>\" +\n                    \"</div>\" +\n                \"</div>\" +\n                \"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.page #:</label></div>\" +\n                \"<div class='k-edit-field'>\" +\n                    \"<input data-role='numerictextbox' data-format='n0' data-min='1' data-max='#: total #' data-bind='value: page' />\" +\n                \"</div>\" +\n                \"<div class='k-action-buttons'>\" +\n                    \"<button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary' data-bind='click: apply'><span class='k-button-text'>#: messages.save #</span></button>\" +\n                    \"<button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base' data-bind='click: close'><span class='k-button-text'>#: messages.cancel #</span></button>\" +\n                \"</div>\"\n        },\n        _updateModel: function (options) {\n            if (options.pagesCount) {\n                this.viewModel.set(\"pagesCount\", options.pagesCount);\n            }\n            if (options.page) {\n                this.viewModel.set(\"page\", options.page);\n            }\n        },\n        _initializeDialog: function () {\n            var that = this;\n            var options = that.options;\n            var dialogMessages = options.messages.dialogs;\n            var dialog = $(\"<div class='k-pdf-viewer-window k-action-window k-popup-edit-form' />\")\n                    .append(kendo.template(options.template)({\n                        total: options.pagesCount,\n                        messages: dialogMessages\n                    }))\n                    .kendoWindow(options)\n                    .getKendoWindow();\n\n            that.viewModel = kendo.observable({\n                title: dialogMessages.exportAsDialog.title,\n                name: dialogMessages.exportAsDialog.defaultFileName,\n                extension: options.extension,\n                fileFormats: options.fileFormats,\n                pagesCount: options.pagesCount,\n                page: 1,\n                apply: that.apply.bind(this),\n                close: function () {\n                    dialog.close();\n                }\n            });\n\n            that._dialog = dialog;\n\n            kendo.bind(dialog.element, that.viewModel);\n            return dialog;\n        },\n        open: function() {\n            this._dialog.center().open();\n        },\n        apply: function() {\n            this._dialog.close();\n            this.options.apply({\n                fileName: this.viewModel.name + this.viewModel.extension,\n                extension: this.viewModel.extension,\n                page: this.viewModel.page\n            });\n        }\n    });\n\n    var SearchDialog = Class.extend({\n        init: function (options) {\n            var that = this;\n            that.options = extend({}, options, that.options);\n        },\n        options: {\n            resizable: false,\n            template: \"<div class='k-search-container'>\" +\n                          \"<button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-search-dialog-draghandle'><span class='k-button-icon k-icon k-i-handler-drag'></span></button>\" +\n                          \"<span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'>\" +\n                              \"<input class='k-search-dialog-input k-input-inner' data-bind='value: boundValue, events: { keyup: onKeyup, input: onInput }' aria-label='#: messages.inputLabel #' title='#: messages.inputLabel #' />\" +\n                              \"<span class='k-input-suffix'><button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-match-case-button k-match-case-button' data-bind='css: {k-selected: matchCase}, click: matchCaseClick' aria-label='#: messages.matchCase #' title='#: messages.matchCase #'><span class='k-icon k-i-convert-lowercase'></span></button></span>\" +\n                          \"</span>\" +\n                          \"<span class='k-search-matches'><span data-bind='text: matchIndex'></span> #: messages.of # <span data-bind='text: matches'></span></span>\" +\n                          \"<button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: prev' aria-label='#: messages.previous #' title='#: messages.previous #'><span class='k-button-icon k-icon k-i-arrow-up'></span></button>\" +\n                          \"<button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: next' aria-label='#: messages.next #' title='#: messages.next #'><span class='k-button-icon k-icon k-i-arrow-down'></span></button>\" +\n                          \"<button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: close' aria-label='#: messages.close #' title='#: messages.close #'><span class='k-button-icon k-icon k-i-close'></<span></button>\" +\n                      \"</div>\"\n        },\n        open: function () {\n            var that = this;\n\n            if(!that.dialog) {\n                that._initializeDialog();\n            }\n\n            that.dialog.open();\n        },\n        _initializeDialog: function () {\n            var that = this;\n            var template = kendo.template(that.options.template);\n            var dialogElm = $(\"<div class='k-pdf-viewer-search-dialog'></div>\").append(template({\n                messages: that.options.messages\n            }));\n            var dialogOffset = {\n                top: that.options.position.top + 16,\n                left: that.options.position.left + 16\n            };\n\n            that.dialog = new kendo.ui.Window(dialogElm, extend({}, that.options, {\n                autoFocus: false,\n                title: false,\n                position: { top: dialogOffset.top, left: dialogOffset.left },\n                minHeight: 30,\n                draggable: {\n                    dragHandle: \".k-search-dialog-draghandle\"\n                },\n                activate: function (ev) {\n                    ev.sender.element.find(\".k-search-dialog-input\").trigger(\"focus\");\n                }\n            }));\n\n            that.searchModel = kendo.observable({\n                boundValue: \"\",\n                searchText: \"\",\n                matchCase: false,\n                matchIndex: 0,\n                matches: 0,\n                matchCaseClick: function () {\n                    this.set(\"matchCase\", !this.matchCase);\n                },\n                next: that.options.next,\n                prev: that.options.prev,\n                close: function () {\n                    this.set(\"boundValue\", \"\");\n                    that.dialog.close();\n                },\n                onKeyup: function (ev) {\n                    var key = ev.keyCode;\n                    var navigationFn = ev.shiftKey ? this.prev : this.next;\n\n                    if(key === keys.ENTER) {\n                        navigationFn();\n                        ev.preventDefault();\n                    }\n                },\n                onInput: function (ev) {\n                    this.set(\"searchText\", ev.target.value);\n                }\n            });\n\n            kendo.bind(that.dialog.element, that.searchModel);\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        dialogs: {\n            ErrorDialog: ErrorDialog,\n            ExportAsDialog: ExportAsDialog,\n            SearchDialog: SearchDialog\n        }\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n  define('pdfviewer/commands',[\"../kendo.upload\"], f);\n})(function(){\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        proxy = $.proxy,\n        extend = $.extend,\n        parseJSON = JSON.parse,\n        progress = kendo.ui.progress,\n        Class = kendo.Class,\n        OPEN = \"open\",\n        ZOOMSTART = \"zoomStart\",\n        ZOOMEND = \"zoomEnd\";\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.viewer = options.viewer;\n            this.errorMessages = this.viewer.options.messages.errorMessages;\n        }\n    });\n\n    var OpenCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n            this.upload = this.viewer.processor.upload;\n        },\n        exec: function () {\n            (this.viewer._upload || this._initUpload()).element.click();\n        },\n        _initUpload: function () {\n            var uploadOptions = {\n                select: proxy(this._onSelect, this),\n                success: proxy(this._onSuccess, this),\n                error: proxy(this._onError, this),\n                complete: proxy(this._onComplete, this),\n                showFileList: false,\n                multiple: false,\n                validation: {\n                    allowedExtensions: [\".pdf\"]\n                }\n            };\n\n            if (this.upload) {\n                extend(uploadOptions, {\n                    async: {\n                        saveUrl:  this.upload.url,\n                        autoUpload: true,\n                        saveField: this.upload.saveField\n                    }\n                });\n            }\n\n            var upload = $('<input name=\"files\" accept=\".pdf\" type=\"file\" />').kendoUpload(uploadOptions).getKendoUpload();\n            this.viewer._upload = upload;\n\n            return upload;\n        },\n        _onComplete: function () {\n            progress(this.viewer.pageContainer, false);\n        },\n        _onSuccess: function(e) {\n            var json = parseJSON(e.response);\n\n            if ($.isPlainObject(json)) {\n                this.viewer.processor.fromJSON(json);\n            }\n            else {\n                this.viewer._triggerError({\n                    error: json,\n                    message: this.errorMessages.parseError\n                });\n            }\n        },\n        _onError: function(e) {\n            this.viewer._triggerError({\n                error: e.XMLHttpRequest.responseText,\n                message: this.errorMessages.notSupported\n            });\n        },\n        _onSelect: function (e) {\n            var that = this;\n            var fileToUpload = e.files[0];\n\n            progress(that.viewer.pageContainer, true);\n\n            if (that.viewer.trigger(OPEN, { file: fileToUpload }) || that.upload) {\n                return;\n            } else if (fileToUpload.extension.toLowerCase() !== \".pdf\") {\n                that.viewer._triggerError({\n                    error: fileToUpload,\n                    message: that.errorMessages.notSupported\n                });\n                return;\n            }\n\n            var reader = new FileReader();\n            reader.onload = function(e) {\n                var document = e.target.result;\n                that.viewer.fromFile(document);\n            };\n            reader.onerror = function () {\n                that.viewer._triggerError({\n                    error: fileToUpload,\n                    message: that.errorMessages.parseError\n                });\n            };\n\n            reader.readAsArrayBuffer(fileToUpload.rawFile);\n        }\n    });\n\n    var PageChangeCommand = Command.extend({\n        exec: function () {\n            var pageNumber = this.options.value;\n\n            this.viewer.activatePage(pageNumber);\n        }\n    });\n\n    var DownloadCommand = Command.extend({\n        exec: function () {\n            if (!this.viewer.document) {\n                this.viewer._triggerError({\n                    message: this.errorMessages.notFound\n                });\n                return;\n            }\n\n            var fileName = (this.viewer.document.info && this.viewer.document.info.title) ||\n                            this.viewer.options.messages.defaultFileName;\n\n            this.viewer.processor.downloadFile(fileName);\n        }\n    });\n\n    var ExportCommand = Command.extend({\n        init: function(options) {\n            options = $.extend(options, this.options);\n            Command.fn.init.call(this, options);\n        },\n        exec: function() {\n            var dialog = (this.viewer._saveDialog || this._initDialog());\n\n            dialog._updateModel({\n                pagesCount: (this.viewer.document && this.viewer.document.total) || 1,\n                page: this.viewer.options.page\n            });\n\n            dialog.open();\n        },\n        apply: function (viewModel) {\n            var extension = viewModel.extension;\n\n            if (extension === \".png\") {\n                this.viewer.exportImage(viewModel);\n            } else if (extension === \".svg\") {\n                this.viewer.exportSVG(viewModel);\n            }\n        },\n        _initDialog: function () {\n            this.viewer._saveDialog = new kendo.pdfviewer.dialogs.ExportAsDialog({\n                apply: this.apply.bind(this),\n                pagesCount: (this.viewer.document && this.viewer.document.total) || 1,\n                messages: this.viewer.options.messages\n            });\n            return this.viewer._saveDialog;\n        }\n    });\n\n    var EnableSelectionCommand = Command.extend({\n        exec: function () {\n            var that = this,\n                viewer = that.viewer;\n\n                viewer._toggleSelection(true);\n        }\n    });\n\n    var EnablePanCommand = Command.extend({\n        exec: function () {\n            var that = this,\n                viewer = that.viewer;\n\n                viewer._toggleSelection(false);\n        }\n    });\n\n    var OpenSearchCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n\n            that.viewer = options.viewer;\n\n            if(!that.viewer.searchDialog) {\n                that.viewer.searchDialog = new kendo.pdfviewer.dialogs.SearchDialog({\n                    position: {\n                        top: that.viewer.pageContainer.offset().top,\n                        left: that.viewer.pageContainer.offset().left\n                    },\n                    messages: that.viewer.options.messages.dialogs.search,\n                    open: proxy(that._open, that),\n                    next: proxy(that._next, that),\n                    prev: proxy(that._prev, that),\n                    close: proxy(that._close, that)\n                });\n            }\n\n            Command.fn.init.call(that, options);\n        },\n        exec: function () {\n            var that = this;\n\n            that.viewer.searchDialog.open();\n        },\n        _open: function () {\n            var that = this;\n\n            that.changeHandler = proxy(that._change, that);\n            that.zoomStartHandler = proxy(that._closeDialog, that);\n            that.openFileHandler = proxy(that._closeDialog, that);\n\n            if(!that.viewer._searchDOM) {\n                that.viewer._initSearchDOM();\n                that.viewer.searchDialog.searchModel.bind(\"change\", that.changeHandler);\n                that.viewer.bind(\"zoomStart\", that.zoomStartHandler);\n                that.viewer.bind(\"open\", that.openFileHandler);\n            }\n        },\n        _close: function () {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n\n            that.viewer.searchDialog.searchModel.unbind(\"change\", that.changeHandler);\n            that.viewer.unbind(\"zoomStart\", that.zoomStartHandler);\n            that.viewer.unbind(\"open\", that.openFileHandler);\n            searchEngine.destroy();\n            delete that.viewer._searchDOM;\n            that._updateSearchModel();\n        },\n        _change: function (ev) {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n            var field = ev.field;\n            var model = that.viewer.searchDialog.searchModel;\n            var value = model[field];\n\n            if(!searchEngine) {\n                return;\n            }\n\n            switch (field) {\n                case \"searchText\":\n                    searchEngine.search(value, model.matchCase);\n                    that._updateSearchModel();\n                    break;\n                case \"matchCase\":\n                    searchEngine.search(model.searchText, value);\n                    that._updateSearchModel();\n                    break;\n                default:\n                    break;\n            }\n        },\n        _next: function () {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n\n            if (searchEngine.matches && searchEngine.matches.length) {\n                searchEngine.nextMatch();\n                that._updateSearchModel();\n            }\n        },\n        _prev: function () {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n\n            if (searchEngine.matches && searchEngine.matches.length) {\n                searchEngine.previousMatch();\n                that._updateSearchModel();\n            }\n        },\n        _updateSearchModel: function () {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n            var model = that.viewer.searchDialog.searchModel;\n\n            if(searchEngine) {\n                model.set(\"matches\", searchEngine.matches.length);\n                model.set(\"matchIndex\", searchEngine.getMarkedIndex());\n                that._scrollToMark();\n            } else {\n                model.set(\"searchText\", \"\");\n                model.set(\"matches\", 0);\n                model.set(\"matchIndex\", 0);\n                model.set(\"matchCase\", false);\n            }\n        },\n        _scrollToMark: function () {\n            var that = this;\n            var searchEngine = that.viewer._searchDOM;\n            var marked = searchEngine.getFirstMarked();\n            var scroller = that.viewer._scroller;\n            var position;\n\n            if(!marked.length) {\n                return;\n            }\n\n            position = marked.offset().top - scroller.scrollElement.offset().top - 100;\n\n            scroller.scrollTo(scroller.scrollLeft, position * -1);\n        },\n        _closeDialog: function () {\n            var that = this;\n            that.viewer.searchDialog.dialog.close();\n        }\n    });\n\n    var ZoomCommand = Command.extend({\n        exec: function () {\n            var that = this,\n                options = that.options,\n                viewer = that.viewer,\n                scale = options.scale,\n                loadedPagesHeight = 0,\n                page = that.viewer._pageNum,\n                containerHeight = viewer.pageContainer[0].clientHeight,\n                updatedVisiblePagesCount = 1,\n                renderTasks = [];\n\n            if(viewer.processingLib === \"dpl\") {\n                return;\n            }\n\n            scale = that._calculateZoom();\n\n            var updateViewer = function () {\n                var scroller = that.viewer._scroller,\n                    scrollingStarted = viewer._scrollingStarted;\n\n                if (scroller && scroller.scrollTop > scroller.scrollHeight()) {\n                    scroller._resize();\n                }\n\n                if (!scrollingStarted)\n                {\n                    viewer.activatePage(page);\n                    viewer._scrollingStarted = false;\n                }\n            };\n\n            if (!scale) {\n                return;\n            }\n\n            viewer.zoomScale = scale;\n            viewer._scrollingStarted = false;\n\n            if (viewer.pages) {\n                viewer.pages.forEach(function (page) {\n                    var pageHeight;\n\n                    if (viewer._visiblePages.indexOf(page) !== -1 && page.loaded) {\n                        renderTasks.push(page.render(scale));\n\n                        pageHeight = page._page.getViewport({\n                            scale: scale\n                        }).height;\n                    }\n                    else {\n                        page.resize(scale);\n                        pageHeight = page.element.height();\n                    }\n\n                    loadedPagesHeight += pageHeight;\n\n                    if (loadedPagesHeight <= containerHeight) {\n                        updatedVisiblePagesCount++;\n                    }\n                });\n\n\n                if (viewer._visiblePagesCount != updatedVisiblePagesCount) {\n\n                    viewer._visiblePagesCount = updatedVisiblePagesCount;\n                    viewer._loadVisiblePages();\n                }\n            }\n\n            Promise.all(renderTasks).then(function () {\n                updateViewer();\n                that._triggerZoomEnd(scale);\n            }).catch(function () { // jshint ignore:line\n                updateViewer();\n                that._triggerZoomEnd(scale);\n            });\n        },\n\n        _calculateZoom: function () {\n            var options = this.options,\n                viewer = this.viewer,\n                viewerOptions = viewer.options,\n                pageContainer = viewer.pageContainer,\n                visibleCanvas = viewer._visiblePages && viewer._visiblePages[0].canvas,\n                scale = options.scale,\n                scaleValue = scale,\n                preventZoom;\n\n            viewer._allowResize = false;\n            viewer._autoFit = false;\n\n            if (options.zoomIn) {\n                scaleValue = scale = viewer.zoomScale + viewerOptions.zoomRate;\n            } else if (options.zoomOut) {\n                scaleValue = scale = viewer.zoomScale - viewerOptions.zoomRate;\n            } else if (scale === \"auto\") {\n                viewer._allowResize = true;\n                scaleValue = viewer._autoZoomScale;\n            } else if (scale === \"actual\") {\n                scaleValue = 1;\n            } else if (scale === \"fitToWidth\") {\n                viewer._allowResize = true;\n                viewer._autoFit = \"fitToWidth\";\n                scaleValue = (pageContainer.width() / (visibleCanvas.width / viewer.zoomScale));\n            } else if (scale === \"fitToPage\") {\n                viewer._allowResize = true;\n                viewer._autoFit = \"fitToPage\";\n                scaleValue = (pageContainer.height() / (visibleCanvas.height / viewer.zoomScale));\n            }\n\n            preventZoom = scale < viewerOptions.zoomMin || scale > viewerOptions.zoomMax;\n\n            if (preventZoom || viewer.trigger(ZOOMSTART, { scale: scale})) {\n                return;\n            }\n\n            if (options.updateComboBox && viewer.toolbar)\n            {\n                viewer.toolbar._updateZoomComboBox(scale);\n            }\n\n            return scaleValue;\n        },\n\n        _triggerZoomEnd: function (scale) {\n            var that = this,\n                viewer = that.viewer;\n\n            viewer.trigger(ZOOMEND, { scale: scale });\n        }\n    });\n\n    var PrintCommand = Command.extend({\n        init: function (options){\n            Command.fn.init.call(this, options);\n        },\n        exec: function () {\n            var that = this;\n\n             if (!that.viewer.document) {\n                that.viewer._triggerError({\n                    message: this.errorMessages.notFound\n                });\n                return;\n            }\n\n            progress(that.viewer.pageContainer, true);\n            that._renderPrintContainer();\n            that._loadAllPages().then(proxy(that.processAfterRender,that));\n        },\n        _renderPrintContainer: function () {\n            this.printContainer = $(\"<div></div>\");\n        },\n        _loadAllPages: function () {\n            var that = this;\n            var pages = that.viewer.pages;\n            var loadPromises = [];\n            var renderPromises = [];\n            var promise = $.Deferred();\n\n            that._originalScale = that.viewer.zoom();\n\n            function getRenderPromise (page) {\n                renderPromises.push(page._renderPromise);\n            }\n\n            for (var i = 0; i < pages.length; i++) {\n                loadPromises.push(pages[i].load(3, true).then(getRenderPromise));\n            }\n\n            Promise.all(loadPromises).then(function(){\n                promise.resolve(renderPromises);\n            });\n\n            return promise;\n        },\n        processAfterRender: function(renderPromises){\n            var that = this;\n\n            Promise.all(renderPromises).then(function(){\n                that._renderPrintPages();\n                setTimeout(function () {\n                    that._printDocument();\n                    that.viewer.zoom(that._originalScale);\n                    progress(that.viewer.pageContainer, false);\n                    delete that._originalScale;\n                }, 0);\n            });\n        },\n        _renderPrintPages: function () {\n            var pages = this.viewer.pages;\n\n            for (var i = 0; i < pages.length; i++) {\n                this._renderPrintImage(pages[i]);\n            }\n         },\n        _renderPrintImage: function (page) {\n            var canvas = page.canvas;\n            var div = $(\"<div></div>\");\n\n            var img = \"<img src='\" + canvas.toDataURL() + \"' width='\" + page.width + \"px' height='\" + page.height + \"px' />\";\n\n            div.append(img);\n\n            this.printContainer.append(div);\n        },\n        _printDocument: function () {\n            var that = this;\n            var pages = that.viewer.pages;\n            var width = pages[0].width;\n            var height = pages[0].height;\n            var myWindow = window.open('','','innerWidth=' + width + ',innerHeight=' + height + 'location=no,titlebar=no,toolbar=no');\n            var browser = kendo.support.browser;\n\n            if(!myWindow) {\n                that.viewer._triggerError({\n                    message: that.errorMessages.popupBlocked\n                });\n                return;\n            }\n\n            myWindow.document.write(that.printContainer.html());\n            myWindow.document.close();\n            myWindow.focus();\n            myWindow.print();\n\n            if (!browser.chrome || browser.chromiumEdge) {\n                myWindow.close();\n            } else {\n                $(myWindow.document).find(\"body\").on(\"mousemove\", function(){\n                    myWindow.close();\n                });\n            }\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        OpenCommand: OpenCommand,\n        PageChangeCommand: PageChangeCommand,\n        DownloadCommand: DownloadCommand,\n        EnableSelectionCommand: EnableSelectionCommand,\n        EnablePanCommand: EnablePanCommand,\n        ExportCommand: ExportCommand,\n        PrintCommand: PrintCommand,\n        OpenSearchCommand: OpenSearchCommand,\n        ZoomCommand: ZoomCommand\n    });\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n    define('kendo.pdfviewer',[\n        \"./kendo.mobile.scroller\",\n        \"./pdfviewer/processors/pdfjs-processor\",\n        \"./pdfviewer/processors/dpl-processor\",\n        \"./pdfviewer/toolbar\",\n        \"./pdfviewer/page\",\n        \"./pdfviewer/search\",\n        \"./pdfviewer/dialogs\",\n        \"./pdfviewer/commands\"\n    ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"pdfviewer\",\n    name: \"PDFViewer\",\n    category: \"web\",\n    description: \"PDFViewer to display pdfs in the browser\",\n    depends: [\"core\", \"window\", \"dialog\", \"toolbar\", \"mobile.scroller\", \"upload\", \"combobox\", \"drawing\", \"binder\", \"dropdownlist\", \"numerictextbox\"]\n};\n\n(function($, undefined) {\n    var NS = \".kendoPDFViewer\",\n        kendo = window.kendo,\n        ui = kendo.ui,\n        proxy = $.proxy,\n        extend = $.extend,\n        drawing = kendo.drawing,\n        keys = $.extend({PLUS: 187, MINUS: 189, ZERO: 48, NUMPAD_ZERO: 96 }, kendo.keys),\n        Page,\n        Widget = ui.Widget,\n        progress = kendo.ui.progress,\n        SCROLL = \"scroll\",\n        RENDER = \"render\",\n        OPEN = \"open\",\n        ERROR = \"error\",\n        FOCUS = \"focus\" + NS,\n        KEYDOWN = \"keydown\" + NS,\n        MOUSEWHEEL = \"DOMMouseScroll\" + NS + \" mousewheel\" + NS,\n        UPDATE = \"update\",\n        ZOOM_SCALE = 1.25,\n        PAGE_CHANGE = \"pagechange\",\n        ZOOMSTART = \"zoomStart\",\n        ZOOMEND = \"zoomEnd\",\n        ZOOMCOMMAND = \"ZoomCommand\",\n        WHITECOLOR = \"#ffffff\",\n        TABINDEX = \"tabindex\",\n        PROCESSORS = {\n            pdfjs: \"pdfjs\",\n            dpl: \"dpl\"\n        },\n        styles = {\n            viewer: \"k-pdf-viewer k-widget\",\n            scroller: \"k-canvas k-list-scroller\",\n            enableTextSelection: \"k-enable-text-select\",\n            enablePanning: \"k-enable-panning\",\n            highlightClass: \"k-search-highlight\",\n            charClass: \"k-text-char\"\n        };\n\n    var PDFViewer = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, kendo.deepExtend({}, this.options, options));\n\n            that._wrapper();\n\n            if (that.options.toolbar) {\n                that._renderToolbar();\n            }\n\n            that._initProcessor(options || {});\n            that._renderPageContainer();\n            that._loadDocument();\n\n            that._tabindex();\n            kendo.notify(that, kendo.ui);\n        },\n\n        events: [\n            RENDER,\n            OPEN,\n            ERROR,\n            ZOOMSTART,\n            ZOOMEND\n        ],\n\n        options: {\n            name: \"PDFViewer\",\n            view: {\n                type: \"canvas\"\n            },\n            pdfjsProcessing: {\n                file: null\n            },\n            dplProcessing: {\n                read: {\n                    url: null,\n                    type: \"GET\",\n                    dataType: \"json\",\n                    pageField: \"pageNumber\"\n                },\n                upload: {\n                    url: null,\n                    saveField: \"file\"\n                },\n                download: {\n                    url: null\n                },\n                loadOnDemand: false\n            },\n            toolbar: {\n                items: []\n            },\n            width: 1000,\n            height: 1200,\n            page: 1,\n            defaultPageSize: {\n                width: 794,\n                height: 1123\n            },\n            scale: null,\n            zoomMin: 0.5,\n            zoomMax: 4,\n            zoomRate: 0.25,\n            messages: {\n                defaultFileName: \"Document\",\n                toolbar: {\n                    zoom: {\n                        zoomLevel: \"zoom level\",\n                        zoomOut: \"Zoom Out\",\n                        zoomIn: \"Zoom In\",\n                        actualWidth: \"Actual Width\",\n                        autoWidth: \"Automatic Width\",\n                        fitToWidth: \"Fit to Width\",\n                        fitToPage: \"Fit to Page\"\n                    },\n                    open: \"Open\",\n                    exportAs: \"Export\",\n                    download: \"Download\",\n                    pager:  {\n                        first: \"Go to the first page\",\n                        previous: \"Go to the previous page\",\n                        next: \"Go to the next page\",\n                        last: \"Go to the last page\",\n                        of: \" of {0} \",\n                        page: \"page\",\n                        pages: \"pages\"\n                    },\n                    print: \"Print\",\n                    toggleSelection: \"Enable Selection\",\n                    togglePan: \"Enable Panning\",\n                    search: \"Search\"\n                },\n                errorMessages: {\n                    notSupported: \"Only pdf files allowed.\",\n                    parseError: \"PDF file fails to process.\",\n                    notFound: \"File is not found.\",\n                    popupBlocked: \"Popup is blocked.\"\n                },\n                dialogs: {\n                    exportAsDialog: {\n                        title: \"Export...\",\n                        defaultFileName: \"Document\",\n                        pdf: \"Portable Document Format (.pdf)\",\n                        png: \"Portable Network Graphics (.png)\",\n                        svg: \"Scalable Vector Graphics (.svg)\",\n                        labels: {\n                            fileName: \"File name\",\n                            saveAsType: \"Save as\",\n                            page: \"Page\"\n                        }\n                    },\n                    okText: \"OK\",\n                    save: \"Save\",\n                    cancel: \"Cancel\",\n                    search: {\n                        inputLabel: \"Search Text\",\n                        matchCase: \"Match Case\",\n                        next: \"Next Match\",\n                        previous: \"Previous Match\",\n                        close: \"Close\",\n                        of: \"of\"\n                    }\n                }\n            }\n        },\n\n        _wrapper: function () {\n            var that = this,\n                options = that.options;\n\n            that.wrapper = that.element;\n\n            that.wrapper\n                    .width(options.width)\n                    .height(options.height)\n                    .addClass(styles.viewer)\n                    .on(FOCUS, proxy(that._focus, that))\n                    .on(KEYDOWN, proxy(that._keydown, that));\n\n            that._allowResize = that.options.scale === null;\n            that._autoZoomScale = ZOOM_SCALE;\n            that.zoomScale = that.options.scale || that._autoZoomScale;\n\n            that._resizeHandler = kendo.onResize(function() {\n                that.resize();\n            });\n\n            that._pageNum = that.options.page;\n        },\n\n        _focus: function (e) {\n            if (this.toolbar) {\n                this.toolbar.wrapper.trigger(\"focus\");\n            } else {\n                this.pageContainer.trigger(\"focus\");\n            }\n            e.preventDefault();\n        },\n\n        _keydown: function (e) {\n            var plusShortcuts = [keys.PLUS, keys.NUMPAD_PLUS],\n                minusShortcuts = [keys.MINUS, keys.NUMPAD_MINUS],\n                zeroShortcuts = [keys.ZERO, keys.NUMPAD_ZERO],\n                shouldExecute = false,\n                args = {\n                    command: ZOOMCOMMAND,\n                    options: { updateComboBox: true }\n                };\n\n            if (!e.ctrlKey || this._blankPage || this.processingLib === PROCESSORS.dpl) {\n                return;\n            }\n\n            if (plusShortcuts.includes(e.keyCode)) {\n                args.options.zoomIn = true;\n                shouldExecute = true;\n            } else if (minusShortcuts.includes(e.keyCode)) {\n                args.options.zoomOut = true;\n                shouldExecute = true;\n            } else if (zeroShortcuts.includes(e.keyCode)) {\n                args.options.scale = ZOOM_SCALE;\n                shouldExecute = true;\n            }\n\n            if (shouldExecute) {\n                this.execute(args);\n                e.preventDefault();\n            }\n        },\n\n        _initProcessor: function (options) {\n            var that = this,\n                processingOptions;\n\n            processingOptions = options.dplProcessing ? that.options.dplProcessing : that.options.pdfjsProcessing;\n            that.processingLib = options.dplProcessing ? PROCESSORS.dpl : PROCESSORS.pdfjs;\n\n            that.processor = new kendo.pdfviewer[that.processingLib].processor(processingOptions, that);\n            Page = kendo.pdfviewer[that.processingLib].Page;\n        },\n\n        _renderToolbar: function () {\n            var that = this,\n                options = that.options;\n\n            var toolbarOptions = {\n                pager: {\n                    messages: options.messages.toolbar.pager\n                },\n                scale: options.scale,\n                resizable: true,\n                items: options.toolbar.items,\n                width: options.width,\n                action: that.execute.bind(that),\n                messages: options.messages.toolbar,\n                viewer: this\n            };\n\n            var toolbarElement = $(\"<div />\");\n            toolbarElement.appendTo(that.element);\n            that.toolbar = new kendo.pdfviewer.Toolbar(toolbarElement, toolbarOptions);\n        },\n\n        _initErrorDialog: function (options) {\n            var that = this;\n\n            if (!that._errorDialog) {\n                options = extend(options, {\n                    messages: that.options.messages\n                });\n                var dialogInstance = new kendo.pdfviewer.dialogs.ErrorDialog(options);\n                that._errorDialog = dialogInstance._dialog;\n            }\n            return that._errorDialog;\n        },\n\n        _renderPageContainer: function () {\n            var that = this;\n\n            if (!that.pageContainer) {\n                that.pageContainer = $(\"<div />\");\n                that.pageContainer.addClass(styles.scroller);\n                that.pageContainer.attr(TABINDEX, 0);\n                that.wrapper.append(that.pageContainer);\n            }\n        },\n\n        _triggerError: function (options) {\n            var dialog = this._initErrorDialog();\n            extend(options, {\n                dialog: dialog\n            });\n            if (this.pageContainer) {\n                progress(this.pageContainer, false);\n            }\n\n            if (this.trigger(ERROR, options))\n            {\n                return;\n            }\n\n            dialog.open().content(options.message);\n        },\n\n        _renderPages: function () {\n            var that = this,\n                document = that.document,\n                pagesData;\n\n            that.pages = [];\n\n            if (!document || !document.total) {\n                that._renderBlankPage();\n                return;\n            }\n\n            pagesData = document.pages;\n\n            for (var i = 1; i <= document.total; i++) {\n                var viewerPage,\n                    pageData = {\n                        processor: that.processor,\n                        number: i\n                    };\n\n                if (pagesData && pagesData.length) {\n                    pageData = extend(pageData, pagesData[i - 1]);\n                }\n\n                viewerPage = new Page(pageData, that);\n                that.pages.push(viewerPage);\n                that.pageContainer.append(viewerPage.element);\n            }\n\n            that._attachContainerEvents();\n            that._getVisiblePagesCount();\n        },\n\n        _renderBlankPage: function () {\n            this._blankPage = new Page(this.options.defaultPageSize, this);\n\n            this.pageContainer.append(this._blankPage.element);\n\n            this.trigger(UPDATE, { isBlank: true });\n        },\n\n        _resize: function () {\n            var that = this,\n                containerWidth,\n                ratio;\n\n            if (!that._allowResize) {\n                return;\n            }\n\n            if (!that.pages || !that.pages.length) {\n                if (that._blankPage) {\n                    ratio = containerWidth / that._blankPage.element.width();\n                    that._blankPage.resize(ratio);\n                }\n                return;\n            }\n\n            if (that.toolbar) {\n                that.toolbar.resize(true);\n            }\n\n            if (that._resizeHandler) {\n                clearTimeout(that._resizeHandler);\n            }\n            that._resizeHandler = setTimeout(that._resizePages.bind(that), 100);\n        },\n\n        _resizePages: function () {\n            var that = this,\n                containerWidth = that.pageContainer[0].clientWidth,\n                ratio = 0;\n\n            that.pages.forEach(function (page) {\n                var currentRatio = containerWidth / page.element.width();\n\n                if (currentRatio > ratio) {\n                    ratio = currentRatio;\n                }\n            });\n\n            if(that._autoFit) {\n                that.zoom(that._autoFit, true);\n                return;\n            }\n\n            ratio = Math.min(Math.max(ratio, that.options.zoomMin), ZOOM_SCALE);\n            if (ratio != that.zoomScale) {\n                that.zoom(ratio, true);\n                that.zoomScale = ratio;\n                that._allowResize = true;\n            }\n        },\n\n        _attachContainerEvents: function () {\n            var that = this;\n\n            that._wheel = kendo.throttle(\n                that._wheel.bind(that),\n                300\n            );\n\n            if(that.processingLib !== PROCESSORS.dpl) {\n                that.pageContainer.on(MOUSEWHEEL, function (e) {\n                    if (!e.ctrlKey) {\n                        return;\n                    }\n\n                    if (document.activeElement !== that.pageContainer[0]) {\n                        that.pageContainer.trigger(\"focus\");\n                    }\n\n                    that._wheel(e);\n                    e.preventDefault();\n                });\n            }\n\n            that._scroller = new kendo.mobile.ui.Scroller(that.pageContainer, {\n                zoom: false,\n                elastic: true\n            });\n\n            that._scroller.scrollElement.addClass(styles.enablePanning);\n            that._scroller.bind(SCROLL, proxy(that._scroll, this));\n        },\n\n        _scroll: function (e) {\n            var that = this,\n                containerScrollHeight = that.pageContainer[0].scrollHeight,\n                containerHeight = that.pageContainer.height(),\n                containerScrollTop = e.scrollTop,\n                containerOffsetTop = that.pageContainer.offset().top,\n                total = that.pages.length,\n                pageNum = that._pageNum,\n                pageIndex = pageNum - 1,\n                pageToLoadNum = pageNum,\n                pageToLoad,\n                currentPage, currentPageTop, currentPageHeight,\n                previousPage, prevPageTop, prevPageHeight,\n                scrollDirection = containerScrollTop - that._prevScrollTop > 0 ? 1 : -1;\n\n                if (that._preventScroll || !total) {\n                    that._preventScroll = false;\n                    return;\n                }\n\n                that._scrollingStarted = true;\n\n                currentPage = that.pages[pageIndex];\n                currentPageTop = currentPage.element.offset().top - containerOffsetTop;\n                currentPageHeight = currentPage.element.height();\n\n                if (scrollDirection == -1 && that.pages[pageIndex + scrollDirection]) {\n                    previousPage = that.pages[pageIndex - that._visiblePagesCount] || that.pages[pageIndex + scrollDirection];\n                    prevPageTop = previousPage.element.offset().top - containerOffsetTop;\n                    prevPageHeight = previousPage.element.height();\n                }\n\n                if (Math.abs(containerScrollTop - (that._prevScrollTop || 0)) > containerHeight * that.zoomScale) {\n                    pageToLoadNum = Math.floor(containerScrollTop * (1 / (containerScrollHeight / total))) + 1;\n                } else if (currentPageTop < 0 && Math.abs(currentPageTop) >= currentPageHeight / 2 && scrollDirection === 1) {\n                    pageToLoadNum++;\n                } else if (previousPage && Math.abs(prevPageTop) <= prevPageHeight / 2) {\n                    pageToLoadNum--;\n                }\n\n                if (pageNum !== pageToLoadNum && pageToLoadNum >= 1 && pageToLoadNum <= total) {\n                    pageToLoad = that.pages[pageToLoadNum - 1].element;\n\n                    if (pageToLoad.offset().top > containerHeight) {\n                        return;\n                    }\n\n                    that._pageNum = pageToLoadNum;\n                    that._loadVisiblePages();\n\n                    that.trigger(UPDATE, { action: PAGE_CHANGE, page: pageToLoadNum, total: total });\n                }\n\n                that._prevScrollTop = containerScrollTop;\n        },\n\n        _wheel: function (e) {\n            var originalEvent = e.originalEvent,\n                delta = originalEvent.wheelDelta ? -originalEvent.wheelDelta : originalEvent.detail,\n                zoomIn = delta < 0;\n\n            this.execute({\n                command: ZOOMCOMMAND,\n                options: {\n                    zoomIn: zoomIn,\n                    zoomOut: !zoomIn,\n                    updateComboBox: true\n                }\n            });\n\n            e.preventDefault();\n        },\n\n        zoom: function (scale, preventComboBoxChange) {\n            var that = this;\n            if (!scale) {\n                return that.zoomScale;\n            }\n\n            return that.execute({\n                command: ZOOMCOMMAND,\n                options: {\n                    scale: scale,\n                    updateComboBox: !preventComboBoxChange\n                }\n            });\n        },\n\n        execute: function (options) {\n            var commandOptions = extend({ viewer: this }, options.options);\n            var command = new kendo.pdfviewer[options.command](commandOptions);\n            return command.exec();\n        },\n\n        _loadDocument: function () {\n            var that = this;\n            var page = that.options.page;\n\n            progress(that.pageContainer, true);\n            that.processor.fetchDocument().done(function (document) {\n                that._clearPages();\n                that.document = document;\n\n                that._renderPages();\n                that.resize(true);\n\n                if (document) {\n                    page = page >= 1 && page <= document.total ? page : 1;\n                    that.activatePage(page);\n                }\n\n                progress(that.pageContainer, false);\n            });\n        },\n\n        loadPage: function (number) {\n            var page = this.pages && this.pages[number - 1];\n\n            if (page) {\n                return page.load(this.zoomScale);\n            }\n        },\n\n        activatePage: function (number) {\n            var page = this.pages && this.pages[number - 1],\n                scroller = this._scroller,\n                scrollerTopPosition,\n                scrollerTopOffset,\n                pageTopOffset,\n                pageMargin;\n\n            if (!page) {\n                return;\n            }\n\n            scrollerTopPosition = scroller.scrollTop;\n            scrollerTopOffset = scroller.element.offset().top;\n            pageTopOffset = page.element.offset().top;\n            pageMargin = !this._autoFit ? parseInt(page.element.css(\"marginTop\"), 10) : 0;\n\n            this._pageNum = number;\n            this._loadVisiblePages();\n\n            this._preventScroll = true;\n\n            this._scroller.scrollTo(0, -scrollerTopPosition - pageTopOffset + scrollerTopOffset + pageMargin);\n            this.trigger(UPDATE, { action: PAGE_CHANGE, page: number, total: this.pages.length });\n        },\n\n        _getVisiblePagesCount: function () {\n            var that = this,\n                loadedPagesHeight = 0,\n                updatedVisiblePagesCount = 0,\n                containerHeight = that.pageContainer[0].clientHeight,\n                index = 0;\n\n            while(loadedPagesHeight <= containerHeight && index < that.pages.length)\n            {\n                loadedPagesHeight += that.pages[index].element.height();\n                updatedVisiblePagesCount++;\n                index++;\n            }\n\n            that._visiblePagesCount = updatedVisiblePagesCount;\n        },\n\n        _loadVisiblePages: function () {\n            var pagesCount = this.pages && this.pages.length,\n                minVisiblePageNum =  Math.max(this._pageNum - this._visiblePagesCount, 1),\n                maxVisiblePageNum = Math.min(this._pageNum + this._visiblePagesCount, pagesCount);\n\n            this._visiblePages = this.pages.slice(minVisiblePageNum - 1, maxVisiblePageNum);\n\n            for (var i = minVisiblePageNum; i <= maxVisiblePageNum; i++)\n            {\n                this.loadPage(i);\n            }\n        },\n\n        _loadAllPages: function () {\n            var pagesCount = this.pages && this.pages.length;\n            var promises = [];\n\n            for (var i = 0; i <= pagesCount; i++)\n            {\n                promises.push(this.loadPage(i));\n            }\n\n            return promises;\n        },\n\n        fromFile: function (file) {\n            this.zoomScale = this.options.scale || ZOOM_SCALE;\n            this.zoom(this.zoomScale, true);\n            this.trigger(UPDATE, { action: \"zoom\", zoom: this.options.scale || \"auto\" });\n\n            this.processor._updateDocument(file);\n            this._loadDocument();\n        },\n\n        exportImage: function (options) {\n            var that = this;\n            var pageNumber = options.page;\n            var page = that.pages[pageNumber - 1] || that._blankPage;\n            var rootGroup = new drawing.Group();\n\n            page.load();\n\n            var background = kendo.drawing.Path.fromRect(new kendo.geometry.Rect([0, 0], [page.width, page.height]), {\n                fill: {\n                    color: WHITECOLOR\n                },\n                stroke: null\n            });\n\n            progress(that.pageContainer, true);\n            rootGroup.append(background, page.group);\n\n            drawing.exportImage(rootGroup).done(function (data) {\n                progress(that.pageContainer, false);\n                kendo.saveAs({\n                    dataURI: data,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL || \"\",\n                    forceProxy: options.forceProxy,\n                    proxyTarget: options.proxyTarget\n                });\n            });\n        },\n\n        exportSVG: function (options) {\n            var that = this;\n            var pageNumber = options.page;\n            var page = that.pages[pageNumber - 1] || that._blankPage;\n\n            progress(that.pageContainer, true);\n\n            page.load();\n\n            drawing.exportSVG(page.group).done(function (data) {\n                progress(that.pageContainer, false);\n                kendo.saveAs({\n                    dataURI: data,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL || \"\",\n                    forceProxy: options.forceProxy,\n                    proxyTarget: options.proxyTarget\n                });\n            });\n        },\n\n        setOptions: function (options)\n        {\n            var that = this;\n\n            if (options.pdfjsProcessing || options.dplProcessing) {\n                that._initProcessor(options || {});\n            }\n\n            options = $.extend(that.options, options);\n\n            Widget.fn.setOptions.call(that, options);\n\n            if (options.page) {\n                that._pageNum = options.page;\n                that.activatePage(options.page);\n            }\n\n            if (options.width) {\n                that.element.width(options.width);\n            }\n\n            if (options.height) {\n                that.element.height(options.height);\n            }\n        },\n\n        destroy: function ()\n        {\n            if (this._resizeHandler)\n            {\n                kendo.unbindResize(this._resizeHandler);\n            }\n\n            //destroy nested components\n            if (this._errorDialog) {\n                this._errorDialog.destroy();\n            }\n\n            if (this._saveDialog) {\n                this._saveDialog.destroy();\n            }\n\n            if (this._upload) {\n                this._upload.destroy();\n            }\n\n            if (this.toolbar) {\n                this.toolbar.unbind();\n                this.toolbar.destroy();\n                this.toolbar = null;\n            }\n\n            if (this.pages && this.pages.length) {\n                this.pages.forEach(function (page) {\n                    page.destroy();\n                });\n                this.pages = [];\n            }\n\n            if (this._scroller) {\n                this._scroller.unbind();\n                this._scroller.destroy();\n            }\n            this.pageContainer.off(NS);\n\n            Widget.fn.destroy.call(this);\n        },\n\n        _clearPages: function () {\n            this.pages = [];\n            this.document = null;\n            this._pageNum = 1;\n\n            this.pageContainer.off(NS);\n            this.pageContainer.empty();\n\n            if (this._scroller)\n            {\n                this._scroller.reset();\n                this._scroller.unbind();\n                this._scroller.destroy();\n            }\n        },\n\n        _toggleSelection: function (enable) {\n            var that = this;\n\n            if(enable === undefined) {\n                enable = true;\n            }\n\n            that._scroller.userEvents._shouldNotMove = enable;\n\n            that._scroller.scrollElement.toggleClass(styles.enableTextSelection, enable);\n            that._scroller.scrollElement.toggleClass(styles.enablePanning, !enable);\n        },\n\n\n        _initSearchDOM: function () {\n            var that = this;\n            var promise = new Promise(function (resolve) {\n                Promise.all(that._loadAllPages()).then(function(){\n                    that._searchDOM = new kendo.pdfviewer.SearchDOM({\n                        target: that._getTextLayers(),\n                        highlightClass: styles.highlightClass,\n                        charClass: styles.charClass\n                    });\n\n                    resolve();\n                });\n            });\n\n            return promise;\n        },\n\n        _getTextLayers: function () {\n            return this.pages.map(function(page){\n                return page.textLayer;\n            });\n        }\n    });\n\n    ui.plugin(PDFViewer);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","$","window","kendo","jQuery","undefined","extend","isLoaded","pdfviewer","pdfjs","lib","pdfjsLib","console","error","amd","a1","a2","a3","__meta__","id","name","category","depends","Class","atob","PDFJS","PDFJSProcessor","init","options","viewer","that","this","file","fetchDocument","deferred","Deferred","messages","errorMessages","resolve","_isBase64Data","data","getDocument","promise","then","pdf","pageSizes","pagePromises","_downloadData","getData","blob","Blob","type","i","numPages","push","getPage","Promise","all","map","pagePromise","viewport","getViewport","scale","width","height","total","pages","catch","e","_triggerError","message","parseError","notFoundError","includes","alertMessage","notFound","_renderBlankPage","fetchPageData","number","downloadFile","fileName","ui","progress","pageContainer","done","result","reader","FileReader","readAsDataURL","onload","saveAs","dataURI","proxyURL","_updateDocument","loadingTask","destroy","notBase64","length","equalSign","test","indexOf","renderTextLayer","params","processor","DPLProcessor","read","upload","download","ajax","url","dataType","success","stringify","JSON","parse","xhr","responseText","page","document","pageField","geometries","location","fromJSON","json","_clearPages","_renderPages","resize","activatePage","dpl","NS","Widget","CHANGE","KEYDOWN","CLICK","support","click","SHRINKWIDTH","kendoAttr","attr","proxy","DOT","ARIA_DISABLED","pagerStyles","wrapperClass","iconFirst","iconLast","iconPrev","iconNext","first","last","nav","disabled","Pager","element","fn","call","linkTemplate","template","addClass","_renderLinks","_toggleDisabledClass","_attachEvents","previousNext","input","events","_pagerLink","iconClass","text","pageIdx","wrapClass","firstLink","prevLink","previous","nextLink","next","lastLink","append","_renderInput","toggleClass","on","_click","keyCode","keys","ENTER","preventDefault","_keydown","target","currentTarget","parseInt","isDefaultPrevented","_change","key","val","upDown","UP","DOWN","allowedKeys","RIGHT","LEFT","BACKSPACE","DELETE","direction","isNaN","match","trigger","setOptions","prevTotal","totalMessage","shouldShrink","parent","inputTemplate","pagerInputWrap","find","off","format","of","html","ACTION","ZOOMIN","ZOOMOUT","Item","toolbar","ToolBar","PREDEFINED_ZOOM_VALUES","auto","actual","fitToWidth","fitToPage","styles","zoomOutIcon","zoomInIcon","zoomButtons","zoomOverflowButtons","overflowHidden","ZOOM_BUTTON_TEMPLATE","ZOOM_COMBOBOX_TEMPLATE","DefaultTools","pager","overflow","command","spacer","zoom","zoomInOut","combobox","zoomLevels","enable","attributes","class","toggleSelection","buttons","togglable","icon","showText","group","selected","spacer2","search","open","print","AllTools","exportAs","ToolbarPager","pagerElement","change","addUidAttr","addOverflowAttr","action","value","children","targetIndex","index","shiftKey","TAB","focus","stopPropagation","appendZoomButtons","isOverflow","className","zoomOut","zoomIn","registerComponent","ToolBarZoom","_init","_initValue","_appendElements","throttle","bind","zoomElement","_buildComboBox","comboOptions","percent","autoWidth","actualWidth","concat","zoomLevel","mobileOS","kendoComboBox","clearButton","getKendoComboBox","wrapper","_currentValue","sender","parsedValue","toString","replace","_buttonCommand","button","closest","updateComboBox","ToolBarOverflowZoom","ViewerToolBar","items","Object","_updateItems","toggle","update","_update","tool","isBuiltInTool","isPlainObject","toolOptions","toolName","aria-label","title","data-command","fillMode","deepExtend","pageOptions","isBlank","_updateZoomComboBox","isPredefined","Math","round","args","Toolbar","noop","drawing","Group","Surface","RENDER","geometryTypes","Path","MultiPath","Rect","Image","Text","Page","pageNumber","_updatePageSize","ratio","pageElement","min","size","render","DPLPage","draw","surface","_drawGeometries","load","loaded","_initSurface","surfaceOptions","view","kGeometry","geometry","_drawPath","_drawRect","_drawImage","_drawText","rectGeo","point","transform","_getMatrix","fill","fillOptions","stroke","strokeOptions","imageRect","src","font","content","path","paths","subPath","segments","moveTo","apply","j","segment","drawAction","points","lineTo","curveTo","closed","close","matrix","create","Matrix","prototype","PDFJSPage","canvas","get","defaultScale","force","_scale","_page","_renderPromise","context","getContext","_renderTask","cancel","canvasContext","_renderTextLayer","textLayer","remove","getTextContent","normalizeWhitespace","textContent","css","container","textDivs","enhanceTextSelection","isArray","Array","SearchDOM","processDom","highlightClass","charClass","targets","textNodes","charIndex","forEach","traverseToTextNode","processTextNode","node","nodeType","childNodes","span","wrap","empty","splitChars","unwrap","newHtml","innerHTML","matchCase","expression","RegExp","matches","resetMark","resetHighlight","resetMatchIndex","exec","startOffset","endOffset","highlightAll","mark","start","end","highlight","matchIndex","removeClass","removeAttr","currentIndex","wrapInner","contents","nextMatch","previousMatch","getMarkedIndex","getFirstMarked","eq","each","item","EXTENSIONS","svg","png","ErrorDialog","actions","dialogs","okText","_dialog","kendoDialog","getKendoDialog","center","ExportAsDialog","fileFormats","description","exportAsDialog","extension","_initializeDialog","autoFocus","resizable","modal","preventScroll","maxWidth","_updateModel","pagesCount","viewModel","set","dialogMessages","dialog","kendoWindow","getKendoWindow","observable","defaultFileName","SearchDialog","dialogElm","dialogOffset","top","position","left","Window","minHeight","draggable","dragHandle","activate","ev","searchModel","boundValue","searchText","matchCaseClick","prev","onKeyup","navigationFn","onInput","parseJSON","OPEN","ZOOMSTART","ZOOMEND","Command","OpenCommand","_upload","_initUpload","uploadOptions","select","_onSelect","_onSuccess","_onError","complete","_onComplete","showFileList","multiple","validation","allowedExtensions","async","saveUrl","autoUpload","saveField","kendoUpload","getKendoUpload","response","XMLHttpRequest","notSupported","fileToUpload","files","toLowerCase","fromFile","onerror","readAsArrayBuffer","rawFile","PageChangeCommand","DownloadCommand","info","ExportCommand","_saveDialog","_initDialog","exportImage","exportSVG","EnableSelectionCommand","_toggleSelection","EnablePanCommand","OpenSearchCommand","searchDialog","offset","_open","_next","_prev","_close","changeHandler","zoomStartHandler","_closeDialog","openFileHandler","_searchDOM","_initSearchDOM","searchEngine","unbind","_updateSearchModel","field","model","_scrollToMark","marked","scroller","_scroller","scrollElement","scrollTo","scrollLeft","ZoomCommand","loadedPagesHeight","_pageNum","containerHeight","clientHeight","updatedVisiblePagesCount","renderTasks","processingLib","_calculateZoom","updateViewer","scrollingStarted","_scrollingStarted","scrollTop","scrollHeight","_resize","zoomScale","pageHeight","_visiblePages","_visiblePagesCount","_loadVisiblePages","_triggerZoomEnd","viewerOptions","visibleCanvas","scaleValue","preventZoom","_allowResize","_autoFit","zoomRate","_autoZoomScale","zoomMin","zoomMax","PrintCommand","_renderPrintContainer","_loadAllPages","processAfterRender","printContainer","loadPromises","renderPromises","_originalScale","getRenderPromise","_renderPrintPages","setTimeout","_printDocument","_renderPrintImage","div","img","toDataURL","myWindow","browser","popupBlocked","write","chrome","chromiumEdge","PLUS","MINUS","ZERO","NUMPAD_ZERO","SCROLL","ERROR","FOCUS","MOUSEWHEEL","UPDATE","ZOOM_SCALE","PAGE_CHANGE","ZOOMCOMMAND","WHITECOLOR","TABINDEX","PROCESSORS","enableTextSelection","enablePanning","PDFViewer","_wrapper","_renderToolbar","_initProcessor","_renderPageContainer","_loadDocument","_tabindex","notify","pdfjsProcessing","dplProcessing","loadOnDemand","defaultPageSize","togglePan","labels","saveAsType","save","inputLabel","_focus","_resizeHandler","onResize","plusShortcuts","NUMPAD_PLUS","minusShortcuts","NUMPAD_MINUS","zeroShortcuts","shouldExecute","ctrlKey","_blankPage","execute","processingOptions","toolbarOptions","toolbarElement","appendTo","_initErrorDialog","_errorDialog","dialogInstance","pagesData","viewerPage","pageData","_attachContainerEvents","_getVisiblePagesCount","containerWidth","clearTimeout","_resizePages","clientWidth","currentRatio","max","_wheel","activeElement","mobile","Scroller","elastic","_scroll","containerScrollHeight","containerScrollTop","containerOffsetTop","pageNum","pageIndex","pageToLoadNum","pageToLoad","currentPage","currentPageTop","currentPageHeight","previousPage","prevPageTop","prevPageHeight","scrollDirection","_prevScrollTop","_preventScroll","abs","floor","originalEvent","delta","wheelDelta","detail","preventComboBoxChange","commandOptions","loadPage","scrollerTopPosition","scrollerTopOffset","pageTopOffset","pageMargin","minVisiblePageNum","maxVisiblePageNum","slice","promises","rootGroup","background","fromRect","color","forceProxy","proxyTarget","unbindResize","reset","userEvents","_shouldNotMove","_getTextLayers","plugin"],"mappings":"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"}