{"version":3,"file":"kendo.scheduler.dayview.min.js","sources":["kendo.scheduler.dayview.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.scheduler.dayview',[ \"./kendo.scheduler.view\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"scheduler.dayview\",\n    name: \"Scheduler Day View\",\n    category: \"web\",\n    description: \"The Scheduler Day View\",\n    depends: [ \"scheduler.view\" ],\n    hidden: true\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        setTime = kendo.date.setTime,\n        SchedulerView = ui.SchedulerView,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        extend = $.extend,\n        proxy = $.proxy,\n        getDate = kendo.date.getDate,\n        MS_PER_MINUTE = kendo.date.MS_PER_MINUTE,\n        MS_PER_DAY = kendo.date.MS_PER_DAY,\n        CURRENT_TIME_MARKER_CLASS = \"k-current-time\",\n        CURRENT_TIME_MARKER_ARROW_CLASS = \"k-current-time-arrow\",\n        INVERSE_COLOR_CLASS = \"k-event-inverse\",\n        BORDER_SIZE_COEFF = 0.8666,\n        getMilliseconds = kendo.date.getMilliseconds,\n        NS = \".kendoMultiDayView\";\n\n    var DAY_VIEW_EVENT_TEMPLATE = kendo.template('<div title=\"(#=kendo.format(\"{0:t} - {1:t}\", start, end)#): #=title.replace(/\"/g,\"&\\\\#34;\")#\">' +\n                    '<div class=\"k-event-template k-event-time\">#:kendo.format(\"{0:t} - {1:t}\", start, end)#</div>' +\n                    '<div class=\"k-event-template\">${title}</div>' +\n                '</div>'),\n        DAY_VIEW_ALL_DAY_EVENT_TEMPLATE = kendo.template('<div title=\"(#=kendo.format(\"{0:t}\", start)#): #=title.replace(/\"/g,\"&\\\\#34;\")#\">' +\n                    '<div class=\"k-event-template\">${title}</div>' +\n                '</div>'),\n        DATA_HEADER_TEMPLATE = kendo.template(\"#var dateString = isMobile ? kendo.toString(date,'ddd')[0] : kendo.toString(date,'ddd M/dd'); #\" +\n                \"<span class='k-link k-nav-day'>#=dateString#</span>\"),\n        ALLDAY_EVENT_WRAPPER_STRING = '<div role=\"button\" ' +\n                'aria-label=\"#: ariaLabel #\" ' +\n                'data-#=ns#uid=\"#=uid#\"' +\n                '#if (resources[0]) { #' +\n                    'style=\"background-color:#=resources[0].color#; border-color: #=resources[0].color#\"' +\n                    'class=\"k-event\"' +\n                '#} else {#' +\n                    'class=\"k-event\"' +\n                '#}#' +\n                '>' +\n                '<span class=\"k-event-actions\">' +\n                    '# if(data.tail || data.middle) {#' +\n                        '<span class=\"k-icon k-i-arrow-60-left\"></span>' +\n                    '#}#' +\n                    '# if(data.isException()) {#' +\n                        '<span class=\"k-icon k-i-non-recurrence\"></span>' +\n                    '# } else if(data.isRecurring()) {#' +\n                        '<span class=\"k-icon k-i-reload\"></span>' +\n                    '# } #' +\n                '</span>' +\n                '{0}' +\n                '<span class=\"k-event-actions\">' +\n                    '#if (showDelete) {#' +\n                        '<a href=\"\\\\#\" class=\"k-link k-event-delete\" title=\"${data.messages.destroy}\" aria-label=\"${data.messages.destroy}\"><span class=\"k-icon k-i-close\"></span></a>' +\n                    '#}#' +\n                    '# if(data.head || data.middle) {#' +\n                        '<span class=\"k-icon k-i-arrow-60-right\"></span>' +\n                    '#}#' +\n                '</span>' +\n                '#if(resizable && !singleDay && !data.tail && !data.middle){#' +\n                '<span class=\"k-resize-handle k-resize-w\"></span>' +\n                '#}#' +\n                '#if(resizable && !singleDay && !data.head && !data.middle){#' +\n                '<span class=\"k-resize-handle k-resize-e\"></span>' +\n                '#}#' +\n                '</div>',\n        EVENT_WRAPPER_STRING = '<div role=\"button\" ' +\n                'aria-label=\"#: ariaLabel #\" ' +\n                'data-#=ns#uid=\"#=uid#\" ' +\n                '#if (resources[0]) { #' +\n                    'style=\"background-color:#=resources[0].color #; border-color: #=resources[0].color#\"' +\n                    'class=\"k-event\"' +\n                '#} else {#' +\n                    'class=\"k-event\"' +\n                '#}#' +\n                '>' +\n                 '<span class=\"k-event-actions\">' +\n                    '# if(data.isException()) {#' +\n                        '<span class=\"k-icon k-i-non-recurrence\"></span>' +\n                    '# } else if(data.isRecurring()) {#' +\n                        '<span class=\"k-icon k-i-reload\"></span>' +\n                    '# } #' +\n                '</span>' +\n                '{0}' +\n                '<span class=\"k-event-actions\">' +\n                    '#if (showDelete) {#' +\n                        '<a href=\"\\\\#\" class=\"k-link k-event-delete\" title=\"${data.messages.destroy}\" aria-label=\"${data.messages.destroy}\"><span class=\"k-icon k-i-close\"></span></a>' +\n                    '#}#' +\n                '</span>' +\n                '<span class=\"k-event-top-actions\">' +\n                    '# if(data.tail || data.middle) {#' +\n                    '<span class=\"k-icon k-i-arrow-60-up\"></span>' +\n                    '# } #' +\n                '</span>' +\n                '<span class=\"k-event-bottom-actions\">' +\n                    '# if(data.head || data.middle) {#' +\n                        '<span class=\"k-icon k-i-arrow-60-down\"></span>' +\n                    '# } #' +\n                '</span>' +\n                '# if(resizable && !data.tail && !data.middle) {#' +\n                '<span class=\"k-resize-handle k-resize-n\"></span>' +\n                '# } #' +\n                '# if(resizable && !data.head && !data.middle) {#' +\n                    '<span class=\"k-resize-handle k-resize-s\"></span>' +\n                '# } #' +\n                '</div>';\n\n    function toInvariantTime(date) {\n        var staticDate = new Date(1980, 1, 1, 0, 0, 0);\n        setTime(staticDate, getMilliseconds(date));\n        return staticDate;\n    }\n\n    function isInDateRange(value, min, max) {\n        return value >= min && value <= max;\n    }\n\n    function isInTimeRange(value, min, max, overlaps) {\n        overlaps = overlaps ? value <= max : value < max;\n        return value > min && overlaps;\n    }\n\n    function addContinuousEvent(group, range, element, isAllDay) {\n        var events = group._continuousEvents;\n        var lastEvent = events[events.length - 1];\n        var startDate = getDate(range.start.startDate()).getTime();\n\n        //this handles all day event which is over multiple slots but starts\n        //after one of the time events\n        if (isAllDay && lastEvent &&\n            getDate(lastEvent.start.startDate()).getTime() == startDate) {\n\n                var idx = events.length - 1;\n                for ( ; idx > -1; idx --) {\n                    if (events[idx].isAllDay ||\n                        getDate(events[idx].start.startDate()).getTime() < startDate) {\n                            break;\n                        }\n                }\n\n                events.splice(idx + 1, 0, {\n                    element: element,\n                    isAllDay: true,\n                    uid: element.attr(kendo.attr(\"uid\")),\n                    start: range.start,\n                    end: range.end\n                });\n            } else {\n                events.push({\n                    element: element,\n                    isAllDay: isAllDay,\n                    uid: element.attr(kendo.attr(\"uid\")),\n                    start: range.start,\n                    end: range.end\n                });\n            }\n    }\n\n    function getWorkDays(options) {\n        if(options.workDays && options.workDays.length) {\n            return options.workDays;\n        }\n\n        var workDays = [];\n        var dayIndex = options.workWeekStart % 7;\n        var workWeekEnd = Math.abs(options.workWeekEnd % 7);\n\n        workDays.push(dayIndex);\n\n        while(workWeekEnd != dayIndex) {\n            if(dayIndex > 6 ) {\n                dayIndex -= 7;\n            } else {\n                dayIndex++;\n            }\n            workDays.push(dayIndex);\n        }\n        return workDays;\n    }\n\n    var MultiDayView = SchedulerView.extend({\n        init: function(element, options) {\n            var that = this;\n\n            SchedulerView.fn.init.call(that, element, options);\n\n            that.title = that.options.title || that.options.name;\n\n            that._workDays = getWorkDays(that.options);\n\n            that._templates();\n\n            that._editable();\n\n            that.calculateDateRange();\n\n            that._groups();\n\n            that._currentTime(true);\n        },\n\n        _currentTimeMarkerUpdater: function() {\n            this._updateCurrentTimeMarker(new Date());\n        },\n\n        _updateCurrentTimeMarker: function(currentTime) {\n            var options = this.options,\n                currentTimeMarkers, currentContentMarkers, timesTableMarkerWidth, position,\n                elementHtml = \"<div class='\" + CURRENT_TIME_MARKER_CLASS + \"'></div>\";\n\n            if(options.currentTimeMarker.useLocalTimezone === false) {\n                var timezone = options.dataSource.options.schema.timezone;\n\n                if(options.dataSource && timezone) {\n                   var timezoneOffset = kendo.timezone.offset(currentTime, timezone);\n                   currentTime = kendo.timezone.convert(currentTime, currentTime.getTimezoneOffset(), timezoneOffset);\n                }\n            }\n\n            currentTimeMarkers = this.times.find(\".\" + CURRENT_TIME_MARKER_CLASS);\n            currentContentMarkers = this.content.find(\".\" + CURRENT_TIME_MARKER_CLASS);\n\n            var groupsCount = !options.group || options.group.orientation == \"horizontal\" ? 1 : this.groups.length;\n            var firstTimesCell = this.times.find(\"tr\").first().find(\"th\").first();\n            var lastTimesCell = this.times.find(\"tr\").first().find(\"th\").last();\n\n            if(firstTimesCell.length > 0 && lastTimesCell.length > 0) {\n                if (this._isRtl) {\n                    position = firstTimesCell.position().left + outerHeight(firstTimesCell) - outerHeight(lastTimesCell);\n                } else {\n                    position = lastTimesCell.position().left;\n                }\n            }\n\n            for(var groupIndex = 0; groupIndex < groupsCount; groupIndex++) {\n                var currentGroup = this.groups[groupIndex];\n\n                if (!currentGroup) {\n                    return;\n                }\n\n                var utcCurrentTime = kendo.date.toUtcTime(currentTime);\n                var ranges = currentGroup.timeSlotRanges(utcCurrentTime, utcCurrentTime + 1);\n\n                if(ranges.length === 0) {\n                    return;\n                }\n\n                var collection = ranges[0].collection;\n                var slotElement = collection.slotByStartDate(currentTime);\n\n                if(slotElement) {\n                    var timesTableMarker = currentTimeMarkers[groupIndex] ? currentTimeMarkers.eq(groupIndex) : $(elementHtml).prependTo(this.times);\n                    var markerTopPosition = Math.round(ranges[0].innerRect(currentTime, new Date(currentTime.getTime() + 1), false).top);\n\n                    var timesTableMarkerCss = {};\n\n                    if (this._isRtl) {\n                        timesTableMarkerCss.right = position;\n                        timesTableMarker.addClass(CURRENT_TIME_MARKER_ARROW_CLASS + \"-left\");\n                    } else {\n                        timesTableMarkerCss.left = position;\n                        timesTableMarker.addClass(CURRENT_TIME_MARKER_ARROW_CLASS + \"-right\");\n                    }\n\n                    if(!timesTableMarkerWidth) {\n                        timesTableMarkerWidth = (outerWidth(timesTableMarker) * BORDER_SIZE_COEFF / 2);\n                    }\n\n                    timesTableMarkerCss.top = markerTopPosition - timesTableMarkerWidth;\n\n                    timesTableMarker.css(timesTableMarkerCss);\n\n                    var contentMarker = currentContentMarkers[groupIndex] ? currentContentMarkers.eq(groupIndex) : $(elementHtml).prependTo(this.content);\n\n                    contentMarker.css({\n                        top: markerTopPosition,\n                        height: \"1px\",\n                        right: 0,\n                        left: 0\n                    });\n                }\n            }\n        },\n\n        _currentTime: function(setUpdateTimer) {\n            var that = this;\n            var markerOptions = that.options.currentTimeMarker;\n\n            if (markerOptions !== false && markerOptions.updateInterval !== undefined) {\n                that._currentTimeMarkerUpdater();\n\n                if (setUpdateTimer) {\n                    that._currentTimeUpdateTimer = setInterval(proxy(this._currentTimeMarkerUpdater, that), markerOptions.updateInterval);\n                }\n            }\n        },\n\n        _updateResizeHint: function(event, groupIndex, startTime, endTime) {\n            var multiday;\n\n            if(this.options.enforceAllDaySlot) {\n                multiday = event.isMultiDay();\n            } else {\n                multiday = event.isAllDay;\n            }\n\n            var group = this.groups[groupIndex];\n\n            var ranges = group.ranges(startTime, endTime, multiday, event.isAllDay);\n            var width, height, top, hint;\n\n            this._removeResizeHint();\n\n            for (var rangeIndex = 0; rangeIndex < ranges.length; rangeIndex++) {\n                var range = ranges[rangeIndex];\n                var start = range.startSlot();\n\n                if (this._isGroupedByDate() && multiday) {\n                    for (var slotIdx = start.index; slotIdx <= range.end.index; slotIdx++) {\n                        var slot = range.collection._slots[slotIdx];\n                        width = slot.offsetWidth;\n                        height = slot.clientHeight;\n                        top = slot.offsetTop;\n\n                        hint = SchedulerView.fn._createResizeHint.call(this,\n                            slot.offsetLeft,\n                            top,\n                            width,\n                            height\n                        );\n\n                        this._resizeHint = this._resizeHint.add(hint);\n                    }\n                } else {\n                    width = start.offsetWidth;\n                    height = start.clientHeight;\n                    top = start.offsetTop;\n\n                    if (multiday) {\n                        width = range.innerWidth();\n                    } else {\n                        var rect = range.outerRect(startTime, endTime, this.options.snap);\n                        top = rect.top;\n                        height = rect.bottom - rect.top;\n                    }\n\n                    hint = SchedulerView.fn._createResizeHint.call(this,\n                        start.offsetLeft,\n                        top,\n                        width,\n                        height\n                    );\n\n                   this._resizeHint = this._resizeHint.add(hint);\n                }\n            }\n\n            var format = \"t\";\n            var container = this.content;\n\n            if (multiday) {\n                format = \"M/dd\";\n                container = this.element.find(\".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div\");\n                if (!container.length) {\n                    container = this.content;\n                }\n            }\n\n            this._resizeHint.appendTo(container);\n\n            this._resizeHint.find(\".k-label-top,.k-label-bottom\").text(\"\");\n\n            this._resizeHint.first().addClass(\"k-first\").find(\".k-label-top\").text(kendo.toString(kendo.timezone.toLocalDate(startTime), format));\n\n            this._resizeHint.last().addClass(\"k-last\").find(\".k-label-bottom\").text(kendo.toString(kendo.timezone.toLocalDate(endTime), format));\n        },\n\n        _updateMoveHint: function (event, groupIndex, distance) {\n            var multiday;\n\n            if(this.options.enforceAllDaySlot) {\n                multiday = event.isMultiDay();\n            } else {\n                multiday = event.isAllDay;\n            }\n\n            var group = this.groups[groupIndex];\n\n            var start = kendo.date.toUtcTime(event.start) + distance;\n\n            var end = start + event.duration();\n\n            var ranges = group.ranges(start, end, multiday, event.isAllDay);\n\n            start = kendo.timezone.toLocalDate(start);\n\n            end = kendo.timezone.toLocalDate(end);\n\n            this._removeMoveHint(event.uid);\n\n            if (!multiday &&\n                getMilliseconds(end) < getMilliseconds(this.startTime()) &&\n                (end < this._end().getTime()) &&\n                getMilliseconds(end) !== 0 &&\n                ranges.length > 1) {\n                    ranges.pop();\n            }\n\n            var eventHint = $();\n\n            for (var rangeIndex = 0; rangeIndex < ranges.length; rangeIndex++) {\n                var range = ranges[rangeIndex];\n                var startSlot = range.start;\n                var hint;\n                var css = {\n                    left: startSlot.offsetLeft + 2,\n                    top: startSlot.offsetTop\n                };\n\n                if (this._isGroupedByDate() && multiday) {\n                    for (var slotIdx = startSlot.index; slotIdx <= range.end.index; slotIdx++) {\n                        var slot = range.collection._slots[slotIdx];\n\n                        css.left = this._isRtl ? slot.clientWidth * 0.1 + slot.offsetLeft + 2 : slot.offsetLeft + 2;\n                        css.height = slot.offsetHeight;\n                        css.width = slot.clientWidth * 0.9 - 2;\n\n                        hint = this._createEventElement(event.clone({ start: start, end: end }), !multiday);\n\n                        if(event.inverseColor) {\n                            hint.addClass(INVERSE_COLOR_CLASS);\n                        }\n\n                        this._appendMoveHint(hint, css);\n                        eventHint = eventHint.add(hint);\n                    }\n                } else {\n                    if (this._isRtl) {\n                       css.left = startSlot.clientWidth * 0.1 + startSlot.offsetLeft + 2;\n                    }\n\n                    if (multiday) {\n                        css.width = range.innerWidth() - 2;\n                    } else {\n                        var rect = range.outerRect(start, end, this.options.snap);\n                        css.top = rect.top;\n                        css.height = rect.bottom - rect.top;\n                        css.width = startSlot.clientWidth * 0.9 - 2;\n                    }\n\n                    hint = this._createEventElement(event.clone({ start: start, end: end }), !multiday);\n\n                    if(event.inverseColor) {\n                        hint.addClass(INVERSE_COLOR_CLASS);\n                    }\n\n                    this._appendMoveHint(hint, css);\n                    eventHint = eventHint.add(hint);\n                }\n            }\n\n            var content = this.content;\n\n            if (multiday) {\n                content = this.element.find(\".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div\");\n                if (!content.length) {\n                    content = this.content;\n                }\n            }\n\n            eventHint.appendTo(content);\n        },\n\n        _appendMoveHint: function(hint, css) {\n            hint.addClass(\"k-event-drag-hint\");\n\n            hint.css(css);\n\n            this._moveHint = this._moveHint.add(hint);\n       },\n\n       _slotByPosition: function(x, y) {\n           var slot, offset;\n\n           if (this._isVerticallyGrouped()) {\n               offset = this.content.offset();\n               y += this.content[0].scrollTop;\n               x += this.content[0].scrollLeft;\n           } else {\n               offset = this.element.find(\".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)\").find(\">div\").offset();\n           }\n\n           if (offset) {\n               x -= offset.left;\n               y -= offset.top;\n           }\n\n           x = Math.ceil(x);\n           y = Math.ceil(y);\n\n           var group;\n           var groupIndex;\n\n           for (groupIndex = 0; groupIndex < this.groups.length; groupIndex++) {\n                group = this.groups[groupIndex];\n\n                slot = group.daySlotByPosition(x, y, this._isGroupedByDate());\n\n                if (slot) {\n                    return slot;\n                }\n           }\n\n           if (offset) {\n               x += offset.left;\n               y += offset.top;\n           }\n\n           offset = this.content.offset();\n\n           x -= offset.left;\n           y -= offset.top;\n\n           if (!this._isVerticallyGrouped()) {\n               y += this.content[0].scrollTop;\n               x += this.content[0].scrollLeft;\n           }\n\n           x = Math.ceil(x);\n           y = Math.ceil(y);\n\n           for (groupIndex = 0; groupIndex < this.groups.length; groupIndex++) {\n                group = this.groups[groupIndex];\n\n                slot = group.timeSlotByPosition(x, y);\n\n                if (slot) {\n                    return slot;\n                }\n           }\n\n           return null;\n       },\n\n       _groupCount: function() {\n            var resources = this.groupedResources;\n            var byDate = this._isGroupedByDate();\n\n            if (resources.length) {\n                if (this._groupOrientation() === \"vertical\") {\n                    if (byDate) {\n                        return this._columnCountForLevel(resources.length - 1);\n                    } else {\n                        return this._rowCountForLevel(resources.length - 1);\n                    }\n                } else {\n                    if (byDate) {\n                        return this._columnCountForLevel(resources.length) / this._columnCountForLevel(0);\n                    } else {\n                          return this._columnCountForLevel(resources.length) / this._columnOffsetForResource(resources.length);\n                    }\n                }\n            }\n            return 1;\n        },\n\n        _columnCountInResourceView: function() {\n            var resources = this.groupedResources;\n            var byDate = this._isGroupedByDate();\n\n            if (!resources.length || this._isVerticallyGrouped()) {\n                if (byDate) {\n                     return this._rowCountForLevel(0);\n                } else {\n                     return this._columnCountForLevel(0);\n                }\n            }\n\n            if (byDate) {\n                return this._columnCountForLevel(0);\n            } else {\n                return this._columnOffsetForResource(resources.length);\n            }\n        },\n\n        _timeSlotGroups: function(groupCount, columnCount) {\n            var interval = this._timeSlotInterval();\n            var verticalViews = groupCount;\n            var byDate = this._isGroupedByDate();\n            var tableRows = this.content.find(\"tr:not(.k-scheduler-header-all-day)\");\n            var group, time, rowIndex, cellIndex;\n            var rowCount = tableRows.length;\n\n            if (this._isVerticallyGrouped()) {\n                if (byDate) {\n                    verticalViews = columnCount;\n                }\n                rowCount = Math.floor(rowCount / verticalViews);\n            }\n\n            for (var groupIndex = 0; groupIndex < verticalViews; groupIndex++) {\n                var rowMultiplier = 0;\n                var cellMultiplier = 0;\n\n                if (this._isVerticallyGrouped()) {\n                    rowMultiplier = groupIndex;\n                } else{\n                    cellMultiplier = groupIndex;\n                }\n\n                rowIndex = rowMultiplier * rowCount;\n\n              while (rowIndex < (rowMultiplier + 1) * rowCount) {\n                    var cells = tableRows[rowIndex].children;\n\n                    if (rowIndex % rowCount === 0) {\n                        time = getMilliseconds(new Date(+this.startTime()));\n                    }\n\n                    var timeIndex = 0;\n                    if(byDate){\n                        if (this._isVerticallyGrouped()) {\n                            for (cellIndex = 0; cellIndex < groupCount; cellIndex++) {\n                                group = this.groups[cellIndex];\n                                this._addTimeSlotGroup(group, cells, cellIndex, time, interval, groupIndex);\n                            }\n                        } else {\n                            group = this.groups[groupIndex];\n                            for (cellIndex = cellMultiplier; cellIndex < groupCount * columnCount; cellIndex=cellIndex + groupCount) {\n                                this._addTimeSlotGroup(group, cells, cellIndex, time, interval, timeIndex);\n                                timeIndex++;\n                            }\n                        }\n                    } else {\n                        group = this.groups[groupIndex];\n                        for (cellIndex = cellMultiplier * columnCount; cellIndex < (cellMultiplier + 1) * columnCount; cellIndex++) {\n\n                            this._addTimeSlotGroup(group, cells, cellIndex, time, interval,  timeIndex);\n                             timeIndex++;\n                        }\n                    }\n\n                    time += interval;\n                    rowIndex ++;\n                }\n            }\n        },\n\n        _addTimeSlotGroup: function(group, cells, cellIndex, time, interval, timeIndex) {\n              var cell = cells[cellIndex];\n              var collection = group.getTimeSlotCollection(timeIndex);\n              var currentDate = this._dates[timeIndex];\n              if(!currentDate || !cell){\n                  return;\n              }\n              var currentTime = Date.UTC(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate());\n              var start = currentTime + time;\n              var end = start + interval;\n\n              collection.addTimeSlot(cell, start, end);\n        },\n\n         _addDaySlotGroup: function(collection, cells, cellIndex, columnCount, cellCount) {\n                var cell = cells[cellIndex];\n                var start = this._dates[cellCount];\n                if(!start){\n                    return;\n                }\n                var currentTime = Date.UTC(start.getFullYear(), start.getMonth(), start.getDate());\n\n                collection.addDaySlot(cell, currentTime, currentTime + kendo.date.MS_PER_DAY);\n        },\n\n        _daySlotGroups: function(groupCount, columnCount) {\n            var tableRows, cellIndex;\n            var verticalViews = groupCount;\n            var byDate = this._isGroupedByDate();\n\n            if (this._isVerticallyGrouped()) {\n                if (byDate) {\n                    verticalViews = columnCount;\n                }\n                tableRows = this.element.find(\".k-scheduler-header-all-day\");\n            } else {\n                tableRows = this.element.find(\".k-scheduler-header-all-day tr\");\n            }\n\n            for (var groupIndex = 0; groupIndex < verticalViews; groupIndex++) {\n                var rowMultiplier = 0;\n                var group, collection;\n\n                if (this._isVerticallyGrouped()) {\n                    rowMultiplier = groupIndex;\n                }\n\n                var cells = tableRows[rowMultiplier].children;\n                var cellMultiplier = 0;\n\n                if (!this._isVerticallyGrouped()) {\n                    cellMultiplier = groupIndex;\n                }\n\n                var cellCount = 0;\n                if(byDate){\n                    if (this._isVerticallyGrouped()) {\n                        for (cellIndex = 0; cellIndex < groupCount; cellIndex++) {\n                            group = this.groups[cellIndex];\n                            collection = group.getDaySlotCollection(0);\n                            this._addDaySlotGroup(collection, cells, cellIndex, columnCount, groupIndex);\n                        }\n                    } else {\n                        group = this.groups[groupIndex];\n                        collection = group.getDaySlotCollection(0);\n                        for (cellIndex = cellMultiplier; cellIndex < groupCount * columnCount; cellIndex = cellIndex + groupCount) {\n                            this._addDaySlotGroup(collection, cells, cellIndex, columnCount, cellCount);\n                            cellCount++;\n                        }\n                    }\n                } else {\n                    group = this.groups[groupIndex];\n                    collection = group.getDaySlotCollection(0);\n                    for (cellIndex = cellMultiplier * columnCount; cellIndex < (cellMultiplier + 1) * columnCount; cellIndex++) {\n\n                        this._addDaySlotGroup(collection, cells, cellIndex, columnCount, cellCount);\n                        cellCount++;\n                    }\n                }\n            }\n        },\n\n        _groups: function() {\n            var groupCount = this._groupCount();\n            var columnCount = this._columnCountInResourceView();\n\n            this.groups = [];\n\n            for (var idx = 0; idx < groupCount; idx++) {\n                var view = this._addResourceView(idx);\n\n                for (var columnIndex = 0; columnIndex < columnCount; columnIndex++) {\n                    if(this._dates[columnIndex]){\n                        view.addTimeSlotCollection(this._dates[columnIndex], kendo.date.addDays(this._dates[columnIndex], 1));\n                    }\n                }\n\n                if (this.options.allDaySlot) {\n                    view.addDaySlotCollection(this._dates[0], kendo.date.addDays(this._dates[this._dates.length - 1], 1));\n                }\n            }\n\n            this._timeSlotGroups(groupCount, columnCount);\n\n            if (this.options.allDaySlot) {\n                this._daySlotGroups(groupCount, columnCount);\n            }\n        },\n\n        options: {\n            name: \"MultiDayView\",\n            selectedDateFormat: \"{0:D}\",\n            selectedShortDateFormat: \"{0:d}\",\n            selectedMobileDateFormat: \"{0:MMM} {0:dd} - {1:dd}\",\n            allDaySlot: true,\n            showWorkHours: false,\n            title: \"\",\n            startTime: kendo.date.today(),\n            endTime: kendo.date.today(),\n            minorTickCount: 2,\n            majorTick: 60,\n            majorTimeHeaderTemplate: \"<span>#=kendo.toString(date, 't')#</span>\",\n            minorTimeHeaderTemplate: \"&\\\\#8203;\",\n            groupHeaderTemplate: \"#=text#\",\n            slotTemplate: \"&nbsp;\",\n            allDaySlotTemplate: \"&nbsp;\",\n            eventTemplate: DAY_VIEW_EVENT_TEMPLATE,\n            allDayEventTemplate: DAY_VIEW_ALL_DAY_EVENT_TEMPLATE,\n            dateHeaderTemplate: DATA_HEADER_TEMPLATE,\n            editable: true,\n            workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n            workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            footer: {\n                command: \"workDay\"\n            },\n            messages: {\n                allDay: \"all day\",\n                showFullDay: \"Show full day\",\n                showWorkDay: \"Show business hours\"\n            },\n            currentTimeMarker: {\n                 updateInterval: 10000,\n                 useLocalTimezone: true\n            },\n            // a hidden option that provides us a fallback to the previous behaviour\n            // e.g. all events of 24 hours or more will be rendered in the allDaySlot\n            enforceAllDaySlot: false\n        },\n\n        events: [\"remove\", \"add\", \"edit\"],\n\n        _templates: function() {\n            var options = this.options,\n                settings = extend({}, kendo.Template, options.templateSettings);\n\n            this.eventTemplate = this._eventTmpl(options.eventTemplate, EVENT_WRAPPER_STRING);\n            this.allDayEventTemplate = this._eventTmpl(options.allDayEventTemplate, ALLDAY_EVENT_WRAPPER_STRING);\n\n            this.majorTimeHeaderTemplate = kendo.template(options.majorTimeHeaderTemplate, settings);\n            this.minorTimeHeaderTemplate = kendo.template(options.minorTimeHeaderTemplate, settings);\n            this.dateHeaderTemplate = kendo.template(options.dateHeaderTemplate, settings);\n            this.slotTemplate = kendo.template(options.slotTemplate, settings);\n            this.allDaySlotTemplate = kendo.template(options.allDaySlotTemplate, settings);\n            this.groupHeaderTemplate = kendo.template(options.groupHeaderTemplate, settings);\n        },\n\n        _editable: function() {\n            if (this.options.editable) {\n                if (this._isMobile()) {\n                    this._touchEditable();\n                } else {\n                    this._mouseEditable();\n                }\n            }\n        },\n\n        _mouseEditable: function() {\n            var that = this;\n            that.element.on(\"click\" + NS, \".k-event a:has(.k-i-close)\", function(e) {\n                that.trigger(\"remove\", { uid: $(this).closest(\".k-event\").attr(kendo.attr(\"uid\")) });\n                e.preventDefault();\n            });\n\n            if (that.options.editable.create !== false) {\n                that.element.on(\"dblclick\" + NS, \".k-scheduler-content > table td\", function(e) {\n                    if (!$(this).parent().hasClass(\"k-scheduler-header-all-day\")) {\n                        var slot = that._slotByPosition(e.pageX, e.pageY);\n\n                        if (slot) {\n                            var resourceInfo = that._resourceBySlot(slot);\n                            that.trigger(\"add\", { eventInfo: extend({ start: slot.startDate(), end: slot.endDate() }, resourceInfo) });\n                        }\n\n                        e.preventDefault();\n                    }\n                }).on(\"dblclick\" + NS, \".k-scheduler-header-all-day td\", function(e) {\n                    var slot = that._slotByPosition(e.pageX, e.pageY);\n                    if (slot) {\n                        var resourceInfo = that._resourceBySlot(slot);\n                        that.trigger(\"add\", { eventInfo: extend({}, { isAllDay: true, start: kendo.date.getDate(slot.startDate()), end: kendo.date.getDate(slot.startDate()) }, resourceInfo) });\n                    }\n                    e.preventDefault();\n                });\n            }\n\n            if (that.options.editable.update !== false) {\n                that.element.on(\"dblclick\" + NS, \".k-event\", function(e) {\n                    that.trigger(\"edit\", { uid: $(this).closest(\".k-event\").attr(kendo.attr(\"uid\")) });\n                    e.preventDefault();\n                });\n            }\n        },\n\n        _touchEditable: function() {\n            var that = this;\n            var threshold = 0;\n\n            if (kendo.support.mobileOS.android) {\n                threshold = 5;\n            }\n\n            if (that.options.editable.create !== false) {\n                that._addUserEvents = new kendo.UserEvents(that.element, {\n                    threshold: threshold,\n                    filter:  \".k-scheduler-content td\",\n                    useClickAsTap: !kendo.support.browser.edge,\n                    tap: function(e) {\n                        if (that._scrolling) {\n                            return;\n                        }\n                        if (!$(e.target).parent().hasClass(\"k-scheduler-header-all-day\")) {\n                            var x = e.x.location !== undefined ? e.x.location : e.x;\n                            var y = e.y.location !== undefined ? e.y.location : e.y;\n                            var slot = that._slotByPosition(x, y);\n\n                            if (slot) {\n                                var resourceInfo = that._resourceBySlot(slot);\n                                that.trigger(\"add\", { eventInfo: extend({ start: slot.startDate(), end: slot.endDate() }, resourceInfo) });\n                            }\n\n                            e.preventDefault();\n                        }\n                    }\n                });\n\n                that._allDayUserEvents = new kendo.UserEvents(that.element, {\n                    threshold: threshold,\n                    useClickAsTap: !kendo.support.browser.edge,\n                    filter: \".k-scheduler-header-all-day td\",\n                    tap: function(e) {\n                        if (that._scrolling) {\n                            return;\n                        }\n                        var x = e.x.location !== undefined ? e.x.location : e.x;\n                        var y = e.y.location !== undefined ? e.y.location : e.y;\n                        var slot = that._slotByPosition(x, y);\n\n                        if (slot) {\n                            var resourceInfo = that._resourceBySlot(slot);\n                            that.trigger(\"add\", { eventInfo: extend({}, { isAllDay: true, start: kendo.date.getDate(slot.startDate()), end: kendo.date.getDate(slot.startDate()) }, resourceInfo) });\n                        }\n\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            if (that.options.editable.update !== false) {\n                that._editUserEvents = new kendo.UserEvents(that.element, {\n                    threshold: threshold,\n                    useClickAsTap: !kendo.support.browser.edge,\n                    filter: \".k-event\",\n                    tap: function(e) {\n                        if (that._scrolling) {\n                            return;\n                        }\n                        var eventElement = $(e.target).closest(\".k-event\");\n                        var touchElement = $(e.touch.initialTouch);\n\n                        if (touchElement.hasClass(\"k-i-close\")) {\n                            that.trigger(\"remove\", { uid: eventElement.attr(kendo.attr(\"uid\")) });\n                        } else if (!eventElement.hasClass(\"k-event-active\")) {\n                            that.trigger(\"edit\", { uid: eventElement.attr(kendo.attr(\"uid\")) });\n                        }\n\n                        e.preventDefault();\n                    }\n                });\n            }\n        },\n\n        _layout: function(dates) {\n            var columns = [];\n            var rows = [];\n            var options = this.options;\n            var that = this;\n            var byDate = that._isGroupedByDate();\n\n            for (var idx = 0; idx < dates.length; idx++) {\n                var column = {};\n\n                column.text = that.dateHeaderTemplate({ date: dates[idx], isMobile: that._isMobile() });\n\n                if (kendo.date.isToday(dates[idx])) {\n                    column.className = \"k-today\";\n                }\n\n                columns.push(column);\n            }\n\n            var resources = this.groupedResources;\n\n            if (options.allDaySlot) {\n                rows.push({\n                    text: options.messages.allDay, allDay: true,\n                    cellContent: function(idx) {\n                        var groupIndex = idx;\n\n                        idx = resources.length && that._groupOrientation() !== \"vertical\" ? idx % dates.length : idx;\n\n                        return that.allDaySlotTemplate({ date: dates[idx], resources: function() {\n                                return that._resourceBySlot({ groupIndex: groupIndex });\n                            }\n                        });\n                    }\n                });\n            }\n\n            this._forTimeRange(this.startTime(), this.endTime(), function(date, majorTick, middleRow, lastSlotRow) {\n                var template = majorTick ? that.majorTimeHeaderTemplate : that.minorTimeHeaderTemplate;\n\n                var row = {\n                    text: template({ date: date }),\n                    className: lastSlotRow ? \"k-slot-cell\" : \"\"\n                };\n\n                rows.push(row);\n            });\n\n\n            if (resources.length) {\n                if (this._groupOrientation() === \"vertical\") {\n                    if (byDate) {\n                        rows = this._createDateLayout(columns, rows);\n                        columns = this._createColumnsLayout(resources, null, this.groupHeaderTemplate);\n                    } else {\n                        rows = this._createRowsLayout(resources, rows, this.groupHeaderTemplate);\n                    }\n                } else {\n                      if (byDate) {\n                         columns = this._createColumnsLayout(resources, columns, this.groupHeaderTemplate, columns);\n                      }else {\n                         columns = this._createColumnsLayout(resources, columns, this.groupHeaderTemplate);\n                      }\n                }\n            }\n\n            return {\n                columns: columns,\n                rows: rows\n            };\n        },\n\n        toggleFullDay: function() {\n            var options = this.options;\n\n            this.trigger(\"navigate\", { view: this.name || options.name, date: options.date, isWorkDay: !options.showWorkHours });\n        },\n\n        _footer: function() {\n            var options = this.options;\n\n            if (options.footer !== false) {\n                var html = '<div class=\"k-scheduler-footer k-toolbar\">';\n\n                var command = options.footer.command;\n\n                if (this._isMobile()) {\n                    html += '<span class=\"k-scheduler-today\"><a href=\"#\" tabindex=\"-1\" class=\"k-link\">';\n                    html += options.messages.today + '</a></span>';\n                }\n                if (command && command === \"workDay\") {\n                    if (this._isMobile()) {\n                        html += '<span class=\"k-scheduler-fullday\"><a href=\"#\" tabindex=\"-1\" class=\"k-link\">';\n                        html += (options.showWorkHours ? options.messages.showFullDay : options.messages.showWorkDay) + '</a></span>';\n                    } else {\n                        html += '<button type=\"button\" tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-scheduler-fullday\">';\n                            html += '<span class=\"k-button-icon k-icon k-i-clock\"></span>';\n                            html += '<span class=\"k-button-text\">';\n                                html += (options.showWorkHours ? options.messages.showFullDay : options.messages.showWorkDay);\n                            html += '</span>';\n                        html += '</button>';\n                    }\n                }\n\n                html += \"</div>\";\n\n                this.footer = $(html).appendTo(this.element);\n\n                var that = this;\n\n                this.footer.on(\"click\" + NS, \".k-scheduler-fullday\", function(e) {\n                    e.preventDefault();\n                    that.toggleFullDay();\n                });\n\n                this.footer.on(\"click\" + NS, \".k-scheduler-today\", function(e) {\n                    e.preventDefault();\n                    var timezone = that.options.timezone;\n                    var action = \"today\";\n                    var currentDate = new Date();\n                    var date;\n\n                    if(timezone){\n                        var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                        date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                    }else{\n                        date = currentDate;\n                    }\n\n                    that.trigger(\"navigate\", { view: that.name || options.name, action: action, date: date });\n                });\n            }\n        },\n\n        _forTimeRange: function(min, max, action, after) {\n            min = toInvariantTime(min); //convert the date to 1/2/1980 and sets the time\n            max = toInvariantTime(max);\n\n            var that = this,\n                msMin = getMilliseconds(min),\n                msMax = getMilliseconds(max),\n                minorTickCount = that.options.minorTickCount,\n                msMajorInterval = that.options.majorTick * MS_PER_MINUTE,\n                msInterval = msMajorInterval / minorTickCount || 1,\n                start = new Date(+min),\n                startDay = start.getDate(),\n                msStart,\n                idx = 0, length,\n                html = \"\";\n\n            length = MS_PER_DAY / msInterval;\n\n            if (msMin != msMax) {\n                if (msMin > msMax) {\n                    msMax += MS_PER_DAY;\n                }\n\n                length = ((msMax - msMin) / msInterval);\n            }\n\n            length = Math.round(length);\n\n            for (; idx < length; idx++) {\n                var majorTickDivider = idx % (msMajorInterval/msInterval),\n                    isMajorTickRow = majorTickDivider === 0,\n                    isMiddleRow = majorTickDivider < minorTickCount - 1,\n                    isLastSlotRow = majorTickDivider === minorTickCount - 1;\n\n                html += action(start, isMajorTickRow, isMiddleRow, isLastSlotRow);\n\n                setTime(start, msInterval, false);\n            }\n\n            if (msMax) {\n                msStart = getMilliseconds(start);\n                if (startDay < start.getDate()) {\n                    msStart += MS_PER_DAY;\n                }\n\n                if (msStart > msMax) {\n                    start = new Date(+max);\n                }\n            }\n\n            if (after) {\n                html += after(start);\n            }\n\n            return html;\n        },\n\n        _content: function(dates) {\n            var that = this;\n            var html = '';\n\n            html += '<tbody>';\n\n            html += that._renderRows(dates, that.rowLevels, that.columnLevels);\n\n            html += '</tbody>';\n\n            this.content.find(\"table\").append(html);\n        },\n\n        _virtualContent: function(rowLevels, columnLevels){\n            var that = this;\n            var html = '';\n            var dates = that._dates;\n\n            html += that._renderRows(dates, rowLevels, columnLevels);\n\n            that.content.find(\"table tbody\").append(html);\n        },\n\n        _renderRows: function (dates, rowLevels, columnLevels) {\n            var that = this;\n            var isVerticalGroupped = that._groupOrientation() === \"vertical\";\n            var byDate = that._isGroupedByDate();\n            var dateID = 0;\n            var columnCount = dates.length;\n            var options = that.options;\n            var start = that.startTime();\n            var end = this.endTime();\n            var groupsCount = 1;\n            var rowCount = 1;\n            var resources = this.groupedResources;\n            var html = '';\n\n            if (resources.length) {\n                var levels = that._recalculateLevels(rowLevels, columnLevels);\n\n                rowCount = levels.rowCount;\n                groupsCount = levels.groupsCount;\n            }\n\n            var appendRow = function(date, majorTick, middleRow) {\n                var content = \"\";\n                var groupIdx = 0;\n                var idx, length;\n\n                content = '<tr' + (middleRow ? ' class=\"k-middle-row\"' : \"\") + '>';\n\n                if (byDate) {\n                    for (idx = 0, length = columnCount; idx < length; idx++) {\n                        for (groupIdx = 0; groupIdx < groupsCount; groupIdx++) {\n                            var dateIndex = idx;\n                            if (isVerticalGroupped) {\n                                dateIndex = dateID;\n                            }\n                            content = that._addCellsToContent(content, dates, date, dateIndex, groupIdx, rowIdx);\n\n                        }\n                        if (isVerticalGroupped) {\n\n                            break;\n                        }\n                    }\n                } else {\n                     for (; groupIdx < groupsCount; groupIdx++) {\n                        for (idx = 0, length = columnCount; idx < length; idx++) {\n                            content = that._addCellsToContent(content, dates, date, idx, groupIdx, rowIdx);\n                        }\n                     }\n                }\n\n                content += \"</tr>\";\n\n                return content;\n            };\n\n            for (var rowIdx = 0; rowIdx < rowCount; rowIdx++) {\n                html += options.allDaySlot && isVerticalGroupped ? this._allDayVerticalGroupRow(dates, rowIdx, groupsCount, dateID) : \"\";\n\n                html += this._forTimeRange(start, end, appendRow);\n                if (isVerticalGroupped) {\n                        dateID++;\n                }\n            }\n\n            return html;\n        },\n\n        _recalculateLevels: function (rowLevels, columnLevels) {\n            var that = this;\n            var byDate = that._isGroupedByDate();\n            var isVerticalGroupped = that._groupOrientation() === \"vertical\";\n            var groupsCount = 1;\n            var rowCount = 1;\n\n            if (isVerticalGroupped) {\n                rowCount = that._rowCountForLevel(rowLevels.length - 2, rowLevels);\n\n                if (byDate) {\n                     groupsCount = that._columnCountForLevel(columnLevels.length - 1);\n                }\n            } else {\n                if (byDate) {\n                     groupsCount = that._columnCountForLevel(columnLevels.length - 1) / this._columnCountForLevel(0);\n                } else {\n                     groupsCount = that._columnCountForLevel(columnLevels.length - 2);\n                }\n            }\n\n            return {\n                rowCount: rowCount,\n                groupsCount: groupsCount\n            };\n        },\n\n        _allDayVerticalGroupRow: function (dates, groupIndex, groupsCount, dateID) {\n            var that = this;\n            var result = '<tr class=\"k-scheduler-header-all-day\">';\n            var byDate = that._isGroupedByDate();\n            var dateGroupIndex = byDate ? 0 : groupIndex;\n            var allDaySlotTemplate = that.allDaySlotTemplate;\n\n            var resources = function() {\n                return that._resourceBySlot({ groupIndex: dateGroupIndex });\n            };\n\n            if (byDate) {\n                for (; dateGroupIndex < groupsCount; dateGroupIndex++) {\n                    result += \"<td>\" + allDaySlotTemplate({ date: dates[dateID], resources: resources }) + \"</td>\";\n                }\n            } else {\n                for (var idx = 0; idx < dates.length; idx++) {\n                    result += \"<td>\" + allDaySlotTemplate({ date: dates[idx], resources: resources }) + \"</td>\";\n                }\n            }\n\n            return result + \"</tr>\";\n        },\n\n        _addCellsToContent: function(content, dates, date, idx, groupIdx, rowIdx) {\n            var that = this;\n            var classes = \"\";\n            var tmplDate;\n            var slotTemplate = this.slotTemplate;\n            var isVerticalGroupped = this._groupOrientation() === \"vertical\";\n            var resources = function(groupIndex) {\n                return function() {\n                    return that._resourceBySlot({ groupIndex: groupIndex });\n                };\n            };\n\n            if (kendo.date.isToday(dates[idx])) {\n                classes += \"k-today\";\n            }\n\n            if (kendo.date.getMilliseconds(date) < kendo.date.getMilliseconds(this.options.workDayStart) ||\n                kendo.date.getMilliseconds(date) >= kendo.date.getMilliseconds(this.options.workDayEnd) ||\n                !this._isWorkDay(dates[idx])) {\n                classes += \" k-nonwork-hour\";\n            }\n\n            content += '<td' + (classes !== \"\" ? ' class=\"' + classes + '\"' : \"\") + \">\";\n            tmplDate = kendo.date.getDate(dates[idx]);\n            kendo.date.setTime(tmplDate, kendo.date.getMilliseconds(date));\n\n            content += slotTemplate({ date: tmplDate, resources: resources(isVerticalGroupped && !that._isGroupedByDate()  ? rowIdx : groupIdx) });\n            content += \"</td>\";\n            return content;\n        },\n\n        _isWorkDay: function(date) {\n            var day = date.getDay();\n            var workDays =  this._workDays;\n\n            for (var i = 0; i < workDays.length; i++) {\n                if (workDays[i] === day) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _render: function(dates) {\n            var that = this;\n\n            dates = dates || [];\n\n            this._dates = dates;\n\n            this._startDate = dates[0];\n\n            this._endDate = dates[(dates.length - 1) || 0];\n\n            this.createLayout(this._layout(dates));\n\n            this._content(dates);\n\n            this._footer();\n\n            this.refreshLayout();\n\n            if(this._isVirtualized()) {\n                this._tryRenderContent();\n            }\n\n            var allDayHeader = this.element.find(\".k-scheduler-header-all-day td\");\n\n            if (allDayHeader.length) {\n                this._allDayHeaderHeight = allDayHeader.first()[0].clientHeight;\n            }\n\n            that.element.on(\"click\" + NS, \".k-nav-day\", function(e) {\n                var th = $(e.currentTarget).closest(\"th\");\n                var offset = th.offset();\n                var additioanlWidth = 0;\n                var additionalHeight = outerHeight(th);\n\n                if (that._isGroupedByDate()) {\n                    if (that._isVerticallyGrouped()) {\n                        additioanlWidth = outerWidth(that.times);\n                        additionalHeight = 0;\n                    } else {\n                        additionalHeight = outerHeight(that.datesHeader);\n                    }\n                }\n\n                var slot = that._slotByPosition(offset.left + additioanlWidth, offset.top + additionalHeight);\n\n                that.trigger(\"navigate\", { view: \"day\", date: slot.startDate() });\n            });\n        },\n\n        startTime: function() {\n            var options = this.options;\n            return options.showWorkHours ? options.workDayStart : options.startTime;\n        },\n\n        endTime: function() {\n            var options = this.options;\n            return options.showWorkHours ? options.workDayEnd : options.endTime;\n        },\n\n        startDate: function() {\n            return this._startDate;\n        },\n\n        endDate: function() {\n            return this._endDate;\n        },\n\n        _end: function(isAllDay) {\n            var time = getMilliseconds(this.endTime()) || MS_PER_DAY;\n\n            if (isAllDay) {\n                time = 0;\n            }\n\n            return new Date(this._endDate.getTime() + time);\n        },\n\n        nextDate: function() {\n            return kendo.date.nextDay(this.endDate());\n        },\n\n        previousDate: function() {\n            return kendo.date.previousDay(this.startDate());\n        },\n\n        calculateDateRange: function() {\n            this._render([this.options.date]);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            if (that._currentTimeUpdateTimer) {\n                clearInterval(that._currentTimeUpdateTimer);\n            }\n\n            if (that.datesHeader) {\n                that.datesHeader.off(NS);\n            }\n\n            if (that.element) {\n                that.element.off(NS);\n            }\n\n            if (that.footer) {\n                that.footer.remove();\n            }\n\n            SchedulerView.fn.destroy.call(this);\n\n            if (this._isMobile() && that.options.editable) {\n                if (that.options.editable.create !== false) {\n                    that._addUserEvents.destroy();\n                    that._allDayUserEvents.destroy();\n                }\n\n                if (that.options.editable.update !== false) {\n                    that._editUserEvents.destroy();\n                }\n            }\n        },\n\n        inRange: function(options) {\n            var inRange = SchedulerView.fn.inRange.call(this, options);\n\n            if (options.isAllDay) {\n                return inRange;\n            }\n\n            var startTime = getMilliseconds(this.startTime());\n            var endTime = getMilliseconds(this.endTime()) || kendo.date.MS_PER_DAY;\n\n            var start = getMilliseconds(options.start);\n            var end = getMilliseconds(options.end) || kendo.date.MS_PER_DAY;\n\n            return inRange && startTime <= start && end <= endTime;\n        },\n\n        selectionByElement: function(cell) {\n            var offset = cell.offset();\n            // The magical number 5 is to buffer properly the height of the cell for all browsers\n            var height = Math.round(cell.innerHeight()) - 5;\n\n            return this._slotByPosition(offset.left, offset.top + height);\n        },\n\n        _timeSlotInterval: function() {\n            var options = this.options;\n            return (options.majorTick/options.minorTickCount) * MS_PER_MINUTE;\n        },\n\n        _timeSlotIndex: function(date) {\n            var options = this.options;\n            var eventStartTime = getMilliseconds(date);\n            var startTime = getMilliseconds(this.startTime());\n            var timeSlotInterval = ((options.majorTick/options.minorTickCount) * MS_PER_MINUTE);\n\n            return (eventStartTime - startTime) / (timeSlotInterval);\n        },\n\n        _slotIndex: function(date, multiday) {\n            if (multiday) {\n                return this._dateSlotIndex(date);\n            }\n\n            return this._timeSlotIndex(date);\n        },\n\n        _dateSlotIndex: function(date, overlaps) {\n            var idx;\n            var length;\n            var slots = this._dates || [];\n            var slotStart;\n            var slotEnd;\n            var offset = 1;\n\n            for (idx = 0, length = slots.length; idx < length; idx++) {\n                slotStart = kendo.date.getDate(slots[idx]);\n                slotEnd = new Date(kendo.date.getDate(slots[idx]).getTime() + MS_PER_DAY - (overlaps ? 0 : 1));\n\n                if (isInDateRange(date, slotStart, slotEnd)) {\n                    return idx * offset;\n                }\n            }\n            return -1;\n        },\n\n        _positionAllDayEvent: function(element, slotRange) {\n            var slotWidth = slotRange.innerWidth();\n            var startIndex = slotRange.start.index;\n            var endIndex = slotRange.end.index;\n\n            var allDayEvents = SchedulerView.collidingEvents(slotRange.events(), startIndex, endIndex);\n\n            var currentColumnCount = this._headerColumnCount || 0;\n\n            var leftOffset = 2;\n\n            var rightOffset = startIndex !== endIndex ? 3 : 2;\n\n            var eventHeight = this._allDayHeaderHeight;\n\n            var start = slotRange.startSlot();\n\n            element\n                .css({\n                    left: start.offsetLeft + leftOffset,\n                    width: slotWidth - rightOffset\n                });\n\n            slotRange.addEvent({ slotIndex: startIndex, start: startIndex, end: endIndex, element: element });\n\n            allDayEvents.push({ slotIndex: startIndex, start: startIndex, end: endIndex, element: element });\n\n            var rows = SchedulerView.createRows(allDayEvents);\n\n            if (rows.length && rows.length > currentColumnCount) {\n                this._headerColumnCount = rows.length;\n            }\n\n            var top = slotRange.start.offsetTop;\n\n            for (var idx = 0, length = rows.length; idx < length; idx++) {\n                var rowEvents = rows[idx].events;\n\n                for (var j = 0, eventLength = rowEvents.length; j < eventLength; j++) {\n                    $(rowEvents[j].element).css({\n                        top: top + idx * eventHeight,\n                        // apply calculated height.\n                        // -2 is to match normal events\n                        height: eventHeight - 2\n                    });\n                }\n            }\n        },\n\n        _arrangeColumns: function(element, top, height, slotRange) {\n            var startSlot = slotRange.start;\n\n            element = { element: element, slotIndex: startSlot.index, start: top, end: top + height };\n\n            var columns,\n                slotWidth = startSlot.clientWidth,\n                eventRightOffset = slotWidth * 0.10,\n                columnEvents,\n                eventElements =  slotRange.events(),\n                slotEvents = SchedulerView.collidingEvents(eventElements, element.start, element.end);\n\n            slotRange.addEvent(element);\n\n            slotEvents.push(element);\n\n            columns = SchedulerView.createColumns(slotEvents);\n\n            var columnWidth = (slotWidth - eventRightOffset) / columns.length;\n\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                columnEvents = columns[idx].events;\n\n                for (var j = 0, eventLength = columnEvents.length; j < eventLength; j++) {\n                    var calculatedWidth = columnWidth - 2;\n                    columnEvents[j].element[0].style.width = (calculatedWidth > 0 ? calculatedWidth : columnWidth) + \"px\";\n                    columnEvents[j].element[0].style.left = (this._isRtl ? eventRightOffset : 0) + startSlot.offsetLeft + idx * columnWidth + 2 + \"px\";\n                }\n            }\n        },\n\n        _positionEvent: function(event, element, slotRange) {\n            var start = event._startTime || event.start;\n            var end = event._endTime || event.end;\n            var borderWidths = kendo.getComputedStyles(slotRange.start.element, [\"border-top-width\", \"border-bottom-width\"]);\n\n            var rect = slotRange.innerRect(start, end, false);\n\n            var height = rect.bottom - rect.top -\n                            parseFloat(borderWidths[\"border-top-width\"]) -\n                            parseFloat(borderWidths[\"border-bottom-width\"]);\n\n            if (height < 0) {\n                height = 0;\n            }\n\n            element.css( {\n                top: rect.top,\n                height: height\n            } );\n\n            this._arrangeColumns(element, rect.top, element[0].clientHeight, slotRange);\n       },\n\n       _createEventElement: function(event, isOneDayEvent, head, tail) {\n            var template = isOneDayEvent ? this.eventTemplate : this.allDayEventTemplate;\n            var options = this.options;\n            var editable = options.editable;\n            var isMobile = this._isMobile();\n            var showDelete = editable && editable.destroy !== false && !isMobile;\n            var resizable = editable && editable.resize !== false;\n            var startDate = getDate(this.startDate());\n            var endDate = getDate(this.endDate());\n            var startTime = getMilliseconds(this.startTime());\n            var endTime = getMilliseconds(this.endTime());\n            var eventStartTime = event._time(\"start\");\n            var eventEndTime = event._time(\"end\");\n            var middle;\n\n            if (startTime >= endTime) {\n                endTime = getMilliseconds(new Date(this.endTime().getTime() + MS_PER_DAY - 1));\n            }\n\n            if (!isOneDayEvent && !event.isAllDay) {\n                endDate = new Date(endDate.getTime() + MS_PER_DAY);\n            }\n\n            var eventStartDate = event.start;\n            var eventEndDate = event.end;\n\n            if (event.isAllDay) {\n                eventEndDate = getDate(event.end);\n            }\n            if ((!isInDateRange(getDate(eventStartDate), startDate, endDate) &&\n                !isInDateRange(eventEndDate, startDate, endDate)) ||\n                (isOneDayEvent &&\n                    event.start.getTime() !== event.end.getTime() &&\n                    (eventStartTime < startTime || eventStartTime >= endTime) &&\n                    (eventEndTime > endTime || eventEndTime <= startTime ))) {\n\n                middle = true;\n            } else if (getDate(eventStartDate) < startDate ||\n                (isOneDayEvent &&\n                    eventStartTime !== 0 &&\n                    event.start.getTime() !== event.end.getTime() &&\n                    (eventStartTime < startTime || eventStartTime >= endTime))) {\n\n                tail = true;\n            } else if ((eventEndDate > endDate && !isOneDayEvent) ||\n                (isOneDayEvent &&\n                    eventEndTime !== 0 &&\n                    event.start.getTime() !== event.end.getTime() &&\n                    (eventEndTime > endTime || eventEndTime <= startTime))) {\n\n                head = true;\n            }\n\n            var resources = this.eventResources(event);\n\n           if (event._startTime && eventStartTime !== kendo.date.getMilliseconds(event.start)) {\n                eventStartDate = new Date(eventStartTime);\n                eventStartDate = kendo.timezone.apply(eventStartDate, \"Etc/UTC\");\n            }\n\n           if (event._endTime && eventEndTime !== kendo.date.getMilliseconds(event.end)) {\n                eventEndDate = new Date(eventEndTime);\n                eventEndDate = kendo.timezone.apply(eventEndDate, \"Etc/UTC\");\n            }\n\n            var data = extend({}, {\n                ns: kendo.ns,\n                resizable: resizable,\n                showDelete: showDelete,\n                middle: middle,\n                head: head,\n                tail: tail,\n                singleDay: this._dates.length == 1,\n                resources: resources,\n                inverseColor: false,\n                messages: options.messages,\n                ariaLabel: this._formatEventAriaLabel(event.title, eventStartDate, eventEndDate, event.isAllDay)\n            }, event, {\n                start: eventStartDate,\n                end: eventEndDate\n            });\n\n            var element = $(template(data));\n\n            this.angular(\"compile\", function(){\n                return {\n                    elements: element,\n                    data: [ { dataItem: data } ]\n                };\n            });\n\n            return element;\n        },\n\n        _isInTimeSlot: function(event) {\n            var slotStartTime = this.startTime(),\n                slotEndTime = this.endTime(),\n                startTime = event._startTime || event.start,\n                endTime = event._endTime || event.end;\n\n            if (getMilliseconds(slotEndTime) === getMilliseconds(kendo.date.getDate(slotEndTime))) {\n                slotEndTime = kendo.date.getDate(slotEndTime);\n                setTime(slotEndTime, MS_PER_DAY - 1);\n            }\n\n            if (event._date(\"end\") > event._date(\"start\")) {\n               endTime = +event._date(\"end\") + (MS_PER_DAY - 1);\n            }\n\n            endTime = event._endTime ? endTime - event._date(\"end\"): getMilliseconds(new Date(endTime));\n            startTime = event._startTime? startTime - event._date(\"start\"): getMilliseconds(new Date(startTime));\n\n            slotEndTime = getMilliseconds(slotEndTime);\n            slotStartTime = getMilliseconds(slotStartTime);\n\n            if(slotStartTime === startTime && startTime === endTime) {\n                return true;\n            }\n\n            var overlaps = startTime !== slotEndTime;\n\n            return isInTimeRange(startTime, slotStartTime, slotEndTime, overlaps) ||\n                isInTimeRange(endTime, slotStartTime, slotEndTime, overlaps) ||\n                isInTimeRange(slotStartTime, startTime, endTime) ||\n                isInTimeRange(slotEndTime, startTime, endTime) ||\n                (event.end.getDate() > event.start.getDate() && endTime > slotStartTime);\n        },\n\n        _isInDateSlot: function(event) {\n            var groups = this.groups[0];\n            var slotStart = groups.firstSlot().start;\n            var slotEnd = groups.lastSlot().end - 1;\n\n            var startTime = kendo.date.toUtcTime(event.start);\n            var endTime = kendo.date.toUtcTime(event.end);\n\n            return (isInDateRange(startTime, slotStart, slotEnd) ||\n                isInDateRange(endTime, slotStart, slotEnd) ||\n                isInDateRange(slotStart, startTime, endTime) ||\n                isInDateRange(slotEnd, startTime, endTime)) &&\n                (!isInDateRange(endTime, slotStart, slotStart) || isInDateRange(endTime, startTime, startTime) || event.isAllDay );\n        },\n\n        _updateAllDayHeaderHeight: function(height) {\n            if (this._height !== height) {\n                this._height = height;\n\n                var allDaySlots = this.element.find(\".k-scheduler-header-all-day td\");\n\n                if (allDaySlots.length) {\n                    allDaySlots.parent()\n                        .add(this.element.find(\".k-scheduler-times-all-day\").parent())\n                        .height(height);\n\n                    for (var groupIndex = 0; groupIndex < this.groups.length; groupIndex++) {\n                        this.groups[groupIndex].refresh();\n                    }\n                }\n            }\n        },\n\n        _renderEvents: function(events, groupIndex) {\n            var allDayEventContainer = this.datesHeader.find(\".k-scheduler-header-wrap > div\");\n            var byDate = this._isGroupedByDate();\n            var event;\n\n            var idx;\n            var length;\n\n            for (idx = 0, length = events.length; idx < length; idx++) {\n                event = events[idx];\n\n                if (this._isInDateSlot(event)) {\n                    var isMultiDayEvent, container, element, ranges, range, start, end, group;\n\n                    if(this.options.enforceAllDaySlot) {\n                        isMultiDayEvent = event.isAllDay || event.duration() >= MS_PER_DAY;\n                    } else {\n                        isMultiDayEvent = event.isAllDay;\n                    }\n\n                    container = isMultiDayEvent && !this._isVerticallyGrouped() ? allDayEventContainer : this.content;\n\n                    if (!isMultiDayEvent) {\n                        if (this._isInTimeSlot(event)) {\n                            group = this.groups[groupIndex];\n\n                            if(!group) {\n                                continue;\n                            }\n\n                            if (!group._continuousEvents) {\n                                group._continuousEvents = [];\n                            }\n\n                            ranges = group.slotRanges(event);\n\n                            var rangeCount = ranges.length;\n\n                            for (var rangeIndex = 0; rangeIndex < rangeCount; rangeIndex++) {\n                                range = ranges[rangeIndex];\n                                start = event.start;\n                                end = event.end;\n\n                                if (rangeCount > 1) {\n                                    if (rangeIndex === 0) {\n                                        end = range.end.endDate();\n                                    } else if (rangeIndex == rangeCount - 1) {\n                                        start = range.start.startDate();\n                                    } else {\n                                        start = range.start.startDate();\n                                        end = range.end.endDate();\n                                    }\n                                }\n\n                                var occurrence = event.clone({ start: start, end: end, _startTime: event._startTime, _endTime: event.endTime });\n\n                                if (this._isInTimeSlot(occurrence)) {\n                                    var head = range.head;\n\n                                    element = this._createEventElement(event, !isMultiDayEvent, head, range.tail);\n\n                                    element.appendTo(container);\n\n                                    this._inverseEventColor(element);\n\n                                    this._positionEvent(occurrence, element, range);\n\n                                    addContinuousEvent(group, range, element, false);\n                                }\n                            }\n                        }\n\n                    } else if (this.options.allDaySlot) {\n                        group = this.groups[groupIndex];\n\n                        if(!group) {\n                            continue;\n                        }\n\n                        if (!group._continuousEvents) {\n                            group._continuousEvents = [];\n                        }\n\n                        ranges = group.slotRanges(event);\n\n                        if (ranges.length) {\n                            range = ranges[0];\n                            var startIndex = range.start.index;\n                            var endIndex = range.end.index;\n\n                            if (byDate && startIndex !== endIndex) {\n                                start = range.start.start;\n                                end = range.end.end;\n                                var newStart = start;\n                                var newEnd = start;\n\n                                for (var i = range.start.index; i <= range.end.index; i++) {\n                                    element = this._createEventElement(event, !isMultiDayEvent, i !== endIndex, i !== startIndex);\n\n                                    var dateRange = group.daySlotRanges(newStart, newEnd, true)[0];\n                                    newStart = newEnd += kendo.date.MS_PER_DAY;\n\n                                    this._positionAllDayEvent(element, dateRange);\n\n                                    addContinuousEvent(group, dateRange, element, true);\n\n                                    element.appendTo(container);\n\n                                    this._inverseEventColor(element);\n                                }\n                            } else {\n                                element = this._createEventElement(event, !isMultiDayEvent);\n\n                                this._positionAllDayEvent(element, ranges[0]);\n\n                                addContinuousEvent(group, ranges[0], element, true);\n\n                                element.appendTo(container);\n\n                                this._inverseEventColor(element);\n                            }\n                        }\n                    }\n                }\n            }\n        },\n\n        render: function(events) {\n            var that = this;\n\n            this._headerColumnCount = 0;\n\n            this._cachedEvents = events;\n\n            this._groups();\n\n            this.element.find(\".k-event\").remove();\n\n            events = new kendo.data.Query(events)\n                .sort([{ field: \"start\", dir: \"asc\" },{ field: \"end\", dir: \"desc\" }])\n                .toArray();\n\n            var eventsByResource = [];\n\n            this._eventsByResource(events, this.groupedResources, eventsByResource);\n\n            var eventsPerDate = $.map(this._dates, function(date) {\n                return Math.max.apply(null,\n                    $.map(eventsByResource, function(events) {\n                        return $.grep(events, function(event) {\n                            if(that.options.enforceAllDaySlot) {\n                                return event.isMultiDay() && isInDateRange(date, getDate(event.start), getDate(event.end));\n                            } else {\n                                return event.isAllDay && isInDateRange(date, getDate(event.start), getDate(event.end));\n                            }\n                        }).length;\n                    })\n                );\n            });\n\n            var height = Math.max.apply(null, eventsPerDate);\n\n            this._updateAllDayHeaderHeight((height + 1) * this._allDayHeaderHeight);\n\n            for (var groupIndex = 0; groupIndex < eventsByResource.length; groupIndex++) {\n                this._renderEvents(eventsByResource[groupIndex], groupIndex);\n            }\n\n            this.refreshLayout();\n\n            this._currentTime(false);\n\n            this.trigger(\"activate\");\n        },\n\n        _eventsByResource: function(events, resources, result, parentValue) {\n            var resource = resources[0];\n\n            if (resource) {\n                var view = resource.dataSource.view();\n\n                view = view.filter(function(item) {\n                    var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n\n                    return itemParentValue === null || itemParentValue === undefined || itemParentValue === parentValue;\n                });\n\n                for (var itemIdx = 0; itemIdx < view.length; itemIdx++) {\n                    var value = this._resourceValue(resource, view[itemIdx]);\n\n                    var eventsFilteredByResource = new kendo.data.Query(events).filter({ field: resource.field, operator: SchedulerView.groupEqFilter(value) }).toArray();\n\n                    if (resources.length > 1) {\n                        this._eventsByResource(eventsFilteredByResource, resources.slice(1), result, value);\n                    } else {\n                        result.push(eventsFilteredByResource);\n                    }\n                }\n            } else {\n                result.push(events);\n            }\n        },\n\n        _columnOffsetForResource: function(index) {\n            return this._columnCountForLevel(index) / this._columnCountForLevel(index - 1);\n        },\n\n        _columnCountForLevel: function(level) {\n            var columnLevel = this.columnLevels[level];\n            return columnLevel ? columnLevel.length : 0;\n        },\n\n        _rowCountForLevel: function(level, rowLevels) {\n            rowLevels = rowLevels || this.rowLevels;\n            var rowLevel = rowLevels[level];\n            return rowLevel ? rowLevel.length : 0;\n        },\n\n        clearSelection: function() {\n\n            this.content.add(this.datesHeader)\n                .find(\".k-state-selected\")\n                .removeAttr(\"id\")\n                .removeClass(\"k-state-selected\");\n        },\n\n        _updateDirection: function(selection, ranges, multiple, reverse, vertical) {\n            var isDaySlot = selection.isAllDay;\n            var startSlot = ranges[0].start;\n            var endSlot = ranges[ranges.length - 1].end;\n\n            if (multiple) {\n                if (vertical) {\n                    if (!isDaySlot &&\n                        startSlot.index === endSlot.index &&\n                        startSlot.collectionIndex === endSlot.collectionIndex) {\n                            selection.backward = reverse;\n                    }\n                } else {\n                    if ((isDaySlot && startSlot.index === endSlot.index) ||\n                        (!isDaySlot && startSlot.collectionIndex === endSlot.collectionIndex)) {\n                            selection.backward = reverse;\n                    }\n                }\n            }\n        },\n\n        _changeViewPeriod: function(selection, reverse, vertical) {\n            if (!vertical) {\n                var date = reverse ? this.previousDate() : this.nextDate();\n                var start = selection.start;\n                var end = selection.end;\n                var verticalByDate = this._isGroupedByDate()  && this._isVerticallyGrouped();\n                var group = this.groups[selection.groupIndex];\n                var collection = reverse ? group._timeSlotCollections : group._getCollections(group.daySlotCollectionCount());\n                var slots = collection[collection.length - 1]._slots;\n                var slotIndex = (!reverse && !group.daySlotCollectionCount()) ? 0 : slots.length - 1;\n                var endMilliseconds;\n                var newDateStart, newDateEnd;\n\n                newDateStart =  new Date(date);\n                newDateEnd = new Date(date);\n\n                if(this._isInRange(newDateStart, newDateEnd)){\n                    return false;\n                }\n\n                selection.start = newDateStart;\n                selection.end = newDateEnd;\n\n                if (verticalByDate) {\n                    var newStart =new Date(slots[slotIndex].startDate());\n                    var newEnd = new Date(slots[slotIndex].endDate());\n                    endMilliseconds = getMilliseconds(newEnd) ? getMilliseconds(newEnd) : MS_PER_DAY ;\n\n                        setTime(selection.start, getMilliseconds(newStart));\n                        setTime(selection.end, endMilliseconds);\n                        if(group.daySlotCollectionCount()){\n                            selection.isAllDay = !selection.isAllDay;\n                        }\n                } else {\n                    endMilliseconds = (selection.isAllDay || !getMilliseconds(end)) ? MS_PER_DAY : getMilliseconds(end);\n\n                    setTime(selection.start, getMilliseconds(start));\n                    setTime(selection.end, endMilliseconds);\n                }\n\n                if (!this._isVerticallyGrouped()) {\n                    selection.groupIndex = reverse ? this.groups.length - 1 : 0;\n                }\n\n                selection.events = [];\n\n                return true;\n            }\n        }\n    });\n\n    extend(true, ui, {\n        MultiDayView: MultiDayView,\n        DayView: MultiDayView.extend({\n            options: {\n                name: \"DayView\",\n                title: \"Day\",\n                selectedMobileDateFormat: \"{0:MMM d}\"\n            },\n            name: \"day\"\n        }),\n        WeekView: MultiDayView.extend({\n            options: {\n                name: \"WeekView\",\n                title: \"Week\",\n                selectedDateFormat: \"{0:D} - {1:D}\",\n                selectedShortDateFormat: \"{0:d} - {1:d}\"\n            },\n            name: \"week\",\n            calculateDateRange: function() {\n                var selectedDate = this.options.date,\n                    start = kendo.date.dayOfWeek(selectedDate, this.calendarInfo().firstDay, -1),\n                    idx, length,\n                    dates = [];\n\n                for (idx = 0, length = 7; idx < length; idx++) {\n                    dates.push(start);\n                    start = kendo.date.nextDay(start);\n                }\n                this._render(dates);\n            }\n        }),\n        WorkWeekView: MultiDayView.extend({\n            options: {\n                name: \"WorkWeekView\",\n                title: \"Work Week\",\n                selectedDateFormat: \"{0:D} - {1:D}\",\n                selectedShortDateFormat: \"{0:d} - {1:d}\"\n            },\n            name: \"workWeek\",\n            nextDate: function() {\n                var weekStart = kendo.date.dayOfWeek(kendo.date.nextDay(this.startDate()), this.calendarInfo().firstDay, 1);\n                return kendo.date.addDays(weekStart, this._workDays[0]);\n            },\n            previousDate: function() {\n                var weekStart = kendo.date.dayOfWeek(this.startDate(), this.calendarInfo().firstDay, -1);\n                var workDays = this._workDays;\n\n                return kendo.date.addDays(weekStart, workDays[workDays.length - 1] - 7);\n            },\n            calculateDateRange: function() {\n                var options = this.options,\n                    selectedDate = options.date,\n                    dayOfWeek = kendo.date.dayOfWeek,\n                    weekStart = dayOfWeek(selectedDate, this.calendarInfo().firstDay, -1),\n                    start = dayOfWeek(weekStart, options.workWeekStart, 1),\n                    end = dayOfWeek(start, options.workWeekEnd, 1),\n                    dates = [],\n                    workDays =(options.workDays && options.workDays.length) ? options.workDays.map(function(day){\n                        return dayOfWeek(weekStart, day, 1).getTime();\n                    }) : null;\n\n                if(workDays) {\n                    start = weekStart;\n                    end = dayOfWeek(start, this.calendarInfo().firstDay + 6, 1);\n                }\n\n                while (start <= end) {\n                    if(workDays && workDays.indexOf(start.getTime()) > -1) {\n                        dates.push(start);\n                    } else if(!workDays) {\n                        dates.push(start);\n                    }\n\n                    start = kendo.date.nextDay(start);\n                }\n\n                this._render(dates);\n            }\n        })\n    });\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","hidden","$","window","kendo","jQuery","undefined","ui","setTime","date","SchedulerView","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","proxy","getDate","MS_PER_MINUTE","MS_PER_DAY","CURRENT_TIME_MARKER_CLASS","CURRENT_TIME_MARKER_ARROW_CLASS","INVERSE_COLOR_CLASS","BORDER_SIZE_COEFF","getMilliseconds","NS","DAY_VIEW_EVENT_TEMPLATE","template","DAY_VIEW_ALL_DAY_EVENT_TEMPLATE","DATA_HEADER_TEMPLATE","ALLDAY_EVENT_WRAPPER_STRING","EVENT_WRAPPER_STRING","toInvariantTime","staticDate","Date","isInDateRange","value","min","max","isInTimeRange","overlaps","addContinuousEvent","group","range","element","isAllDay","events","_continuousEvents","lastEvent","length","startDate","start","getTime","idx","splice","uid","attr","end","push","getWorkDays","options","workDays","dayIndex","workWeekStart","workWeekEnd","Math","abs","MultiDayView","init","that","this","fn","call","title","_workDays","_templates","_editable","calculateDateRange","_groups","_currentTime","_currentTimeMarkerUpdater","_updateCurrentTimeMarker","currentTime","currentTimeMarkers","currentContentMarkers","timesTableMarkerWidth","position","elementHtml","currentTimeMarker","useLocalTimezone","timezone","dataSource","schema","timezoneOffset","offset","convert","getTimezoneOffset","times","find","content","groupsCount","orientation","groups","firstTimesCell","first","lastTimesCell","last","_isRtl","left","groupIndex","currentGroup","utcCurrentTime","toUtcTime","ranges","timeSlotRanges","collection","slotElement","slotByStartDate","timesTableMarker","eq","prependTo","markerTopPosition","round","innerRect","top","timesTableMarkerCss","right","addClass","css","contentMarker","height","setUpdateTimer","markerOptions","updateInterval","_currentTimeUpdateTimer","setInterval","_updateResizeHint","event","startTime","endTime","multiday","enforceAllDaySlot","isMultiDay","width","hint","_removeResizeHint","rangeIndex","startSlot","_isGroupedByDate","slotIdx","index","slot","_slots","offsetWidth","clientHeight","offsetTop","_createResizeHint","offsetLeft","_resizeHint","add","innerWidth","rect","outerRect","snap","bottom","format","container","appendTo","text","toString","toLocalDate","_updateMoveHint","distance","duration","_removeMoveHint","_end","pop","eventHint","clientWidth","offsetHeight","_createEventElement","clone","inverseColor","_appendMoveHint","_moveHint","_slotByPosition","x","y","_isVerticallyGrouped","scrollTop","scrollLeft","ceil","daySlotByPosition","timeSlotByPosition","_groupCount","resources","groupedResources","byDate","_groupOrientation","_columnCountForLevel","_rowCountForLevel","_columnOffsetForResource","_columnCountInResourceView","_timeSlotGroups","groupCount","columnCount","interval","_timeSlotInterval","verticalViews","tableRows","time","rowIndex","cellIndex","rowCount","floor","rowMultiplier","cellMultiplier","cells","children","timeIndex","_addTimeSlotGroup","cell","getTimeSlotCollection","currentDate","_dates","UTC","getFullYear","getMonth","addTimeSlot","_addDaySlotGroup","cellCount","addDaySlot","_daySlotGroups","getDaySlotCollection","view","_addResourceView","columnIndex","addTimeSlotCollection","addDays","allDaySlot","addDaySlotCollection","selectedDateFormat","selectedShortDateFormat","selectedMobileDateFormat","showWorkHours","today","minorTickCount","majorTick","majorTimeHeaderTemplate","minorTimeHeaderTemplate","groupHeaderTemplate","slotTemplate","allDaySlotTemplate","eventTemplate","allDayEventTemplate","dateHeaderTemplate","editable","workDayStart","workDayEnd","footer","command","messages","allDay","showFullDay","showWorkDay","settings","Template","templateSettings","_eventTmpl","_isMobile","_touchEditable","_mouseEditable","on","e","trigger","closest","preventDefault","create","parent","hasClass","pageX","pageY","resourceInfo","_resourceBySlot","eventInfo","endDate","update","threshold","support","mobileOS","android","_addUserEvents","UserEvents","filter","useClickAsTap","browser","edge","tap","_scrolling","target","location","_allDayUserEvents","_editUserEvents","eventElement","touchElement","touch","initialTouch","_layout","dates","columns","rows","column","isMobile","isToday","className","cellContent","_forTimeRange","middleRow","lastSlotRow","row","_createDateLayout","_createColumnsLayout","_createRowsLayout","toggleFullDay","isWorkDay","_footer","html","action","after","msMin","msMax","msMajorInterval","msInterval","startDay","msStart","majorTickDivider","isMajorTickRow","isMiddleRow","isLastSlotRow","_content","_renderRows","rowLevels","columnLevels","append","_virtualContent","isVerticalGroupped","dateID","levels","_recalculateLevels","appendRow","groupIdx","dateIndex","_addCellsToContent","rowIdx","_allDayVerticalGroupRow","result","dateGroupIndex","classes","tmplDate","_isWorkDay","day","getDay","i","_render","_startDate","_endDate","createLayout","refreshLayout","_isVirtualized","_tryRenderContent","allDayHeader","_allDayHeaderHeight","th","currentTarget","additioanlWidth","additionalHeight","datesHeader","nextDate","nextDay","previousDate","previousDay","destroy","clearInterval","off","remove","inRange","selectionByElement","innerHeight","_timeSlotIndex","eventStartTime","timeSlotInterval","_slotIndex","_dateSlotIndex","slots","slotStart","slotEnd","_positionAllDayEvent","slotRange","slotWidth","startIndex","endIndex","allDayEvents","collidingEvents","currentColumnCount","_headerColumnCount","leftOffset","rightOffset","eventHeight","addEvent","slotIndex","createRows","rowEvents","j","eventLength","_arrangeColumns","eventRightOffset","columnEvents","eventElements","slotEvents","createColumns","columnWidth","calculatedWidth","style","_positionEvent","_startTime","_endTime","borderWidths","getComputedStyles","parseFloat","isOneDayEvent","head","tail","showDelete","resizable","resize","_time","eventEndTime","middle","eventStartDate","eventEndDate","eventResources","apply","data","ns","singleDay","ariaLabel","_formatEventAriaLabel","angular","elements","dataItem","_isInTimeSlot","slotStartTime","slotEndTime","_date","_isInDateSlot","firstSlot","lastSlot","_updateAllDayHeaderHeight","_height","allDaySlots","refresh","_renderEvents","allDayEventContainer","isMultiDayEvent","slotRanges","rangeCount","occurrence","_inverseEventColor","newStart","newEnd","dateRange","daySlotRanges","render","_cachedEvents","Query","sort","field","dir","toArray","eventsByResource","_eventsByResource","eventsPerDate","map","grep","parentValue","resource","item","itemParentValue","getter","dataParentValueField","itemIdx","_resourceValue","eventsFilteredByResource","operator","groupEqFilter","slice","level","columnLevel","rowLevel","clearSelection","removeAttr","removeClass","_updateDirection","selection","multiple","reverse","vertical","isDaySlot","endSlot","collectionIndex","backward","_changeViewPeriod","verticalByDate","_timeSlotCollections","_getCollections","daySlotCollectionCount","endMilliseconds","newDateStart","newDateEnd","_isInRange","DayView","WeekView","selectedDate","dayOfWeek","calendarInfo","firstDay","WorkWeekView","weekStart","indexOf","amd","a1","a2","a3"],"mappings":"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"}