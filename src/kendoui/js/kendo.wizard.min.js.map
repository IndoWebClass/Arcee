{"version":3,"file":"kendo.wizard.min.js","sources":["kendo.wizard.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.wizard',[ \"./kendo.stepper\", \"./kendo.button\", \"./kendo.form\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"wizard\",\n    name: \"Wizard\",\n    category: \"web\",\n    description: \"The Wizard widget serves as a container of stepped process.\",\n    depends: [ \"stepper\", \"button\", \"form\" ],\n    features: [{\n        id: \"wizard-form-dropdowns\",\n        name: \"DropDowns\",\n        description: \"Support for DropDown editors in Wizard From\",\n        depends: [ \"autocomplete\", \"combobox\", \"multiselect\", \"dropdowntree\", \"multicolumncombobox\" ]\n    }, {\n        id: \"wizard-form-datepickers\",\n        name: \"DatePickers\",\n        description: \"Support for DatePicker editors in Wizard From\",\n        depends: [ \"dateinput\", \"datepicker\", \"datetimepicker\", \"timepicker\" ]\n    }, {\n        id: \"wizard-form-inputs\",\n        name: \"Inputs\",\n        description: \"Support for Input editors in Wizard From\",\n        depends: [ \"numerictextbox\", \"maskedtextbox\", \"switch\", \"rating\", \"slider\", \"colorpicker\" ]\n    }, {\n        id: \"wizard-form-editor\",\n        name: \"Editor\",\n        description: \"Support for Editor editor in Wizard From\",\n        depends: [ \"editor\" ]\n    }]\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        extend = $.extend,\n        proxy = $.proxy,\n\n        WIZARD = \".kendoWizard\",\n\n        CLICK = \"click\",\n        ACTIVATE = \"activate\",\n        SELECT = \"select\",\n        RESET = \"reset\",\n        SUBMIT = \"submit\",\n        PREVIOUS = \"previous\",\n        NEXT = \"next\",\n        DONE = \"done\",\n        ERROR = \"error\",\n        CONTENTLOAD = \"contentLoad\",\n        FORM_VALIDATE_FAILED = \"formValidateFailed\",\n\n        HIDDEN = \"k-hidden\",\n        STEPPER_LIST = \"k-step-list\",\n        STEPPER_STEP_LINK = \"k-step-link\",\n\n\n        ARIA_SELECTED = \"aria-selected\",\n        ARIA_CONTROLS = \"aria-controls\",\n        ARIA_HIDDEN = \"aria-hidden\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_LABEL = \"aria-label\",\n\n        VERTICAL = \"vertical\",\n        HORIZONTAL = \"horizontal\",\n        BOTTOM = \"bottom\",\n        RIGHT = \"right\",\n        LEFT = \"left\",\n\n        DOT = \".\",\n        SPACE = \" \",\n        DASH = \"-\",\n        ID = \"id\",\n        TABINDEX = \"tabindex\",\n        ROLE = \"role\",\n        DATA_WIZARD_PREFIX = \"data-wizard-\";\n\n    var wizardClasses = {\n        wizard: \"k-widget k-wizard\",\n        horizontalWizard: \"k-wizard-horizontal\",\n        verticalWizard: \"k-wizard-vertical\",\n        rightWizard: \"k-wizard-right\",\n        leftWizard: \"k-wizard-left\",\n        wizardStepsContainer: \"k-wizard-steps\",\n        wizardStep: \"k-wizard-step\",\n        wizardContent: \"k-wizard-content\",\n        wizardButtons: \"k-wizard-buttons\",\n        wizardLeftButtons: \"k-wizard-buttons-left\",\n        wizardRightButtons: \"k-wizard-buttons-right\",\n        wizardPager: \"k-wizard-pager\"\n    };\n\n    var Step = kendo.Class.extend({\n        init: function(options) {\n            this.options = extend({}, this.options, options);\n\n            if(this.options.actionBar) {\n                this._processButtons();\n            }\n\n            this._render();\n        },\n\n        options: {\n            name: \"WizardStep\",\n            index: 0,\n            content: \"\",\n            contentUrl: null,\n            contentId: null,\n            markupContainer: null,\n            form: null,\n            actionBar: true,\n            buttons: [],\n            pager: true,\n            selected: false,\n            enabled: true,\n            className: \"\",\n            totalSteps: 1,\n            wizardId: \"wizard\",\n            formTag: \"form\",\n            messages: {}\n        },\n\n        _defaultButtonsConfiguration: {\n            first: [RESET,NEXT],\n            middle: [RESET,PREVIOUS,NEXT],\n            last: [RESET,PREVIOUS,DONE]\n        },\n\n        _pagerTemplate: '<span class=\"k-wizard-pager\">' +\n            '#: step # ' +\n            '#: currentStep # ' +\n            '#: of # ' +\n            '#: totalSteps #' +\n        '</span>',\n\n        buttons: function() {\n            return this._buttons;\n        },\n\n        load: function() {\n            if(this.options.contentUrl) {\n                this._ajaxRequest();\n            }\n        },\n\n        resetButtons: function() {\n            var buttonsContainer = this.element.find(DOT + wizardClasses.wizardButtons);\n\n            kendo.destroy(buttonsContainer);\n            buttonsContainer.remove();\n\n            this.options.buttons = [];\n            this._processButtons();\n            this._buttonsContainer();\n        },\n\n        _ajaxRequest: function (wizard, triggerActivate) {\n            var that = this,\n                url = that.options.contentUrl,\n                data = {},\n                element = that.element;\n\n            var ajaxOptions = {\n                type: \"GET\",\n                cache: false,\n                url: url,\n                dataType: \"html\",\n                data: data,\n\n                error: function (xhr, status) {\n                    if(wizard) {\n                        wizard._triggerError(xhr, status, that);\n                    }\n                },\n\n                complete: function () {\n                    if(wizard && triggerActivate) {\n                        wizard._triggerActivate(that);\n                    }\n                },\n\n                success: function (content) {\n                    var contentElement = element.find(DOT + wizardClasses.wizardContent);\n\n                    try {\n                        if(wizard) {\n                            wizard.angular(\"cleanup\", function () { return { elements: element.get() }; });\n                        }\n\n                        kendo.destroy(contentElement);\n                        contentElement.html(content);\n\n                        if(wizard) {\n                            wizard._triggerContentLoad(that);\n                        }\n                    } catch (e) {\n                        this.error(this.xhr, \"error\");\n                    }\n\n                    if(wizard) {\n                        wizard.angular(\"compile\", function(){ return { elements: element.get() }; });\n                    }\n                }\n            };\n\n            if (typeof url === \"object\") {\n                ajaxOptions = $.extend(true, {}, ajaxOptions, url);\n            }\n\n            $.ajax(ajaxOptions);\n        },\n\n        _ariaAttributes: function() {\n            var element = this.element,\n                options = this.options,\n                messages = options.messages,\n                label = messages.step + \" \" + (options.index + 1) + \" \" + messages.of + \" \" + options.totalSteps;\n\n            element.attr(ROLE, \"tabpanel\")\n                .attr(TABINDEX, 0)\n                .attr(ID, options.wizardId + DASH + options.index)\n                .attr(ARIA_EXPANDED, options.selected)\n                .attr(ARIA_LABEL, label);\n        },\n\n        _buttonFactory: function(buttonOptions) {\n            var button = $(\"<button type='button'>\").kendoButton({\n                    themeColor: buttonOptions.primary ? \"primary\" : \"base\"\n                }).getKendoButton(),\n                buttonElement = button.element;\n\n            buttonElement.attr(DATA_WIZARD_PREFIX + buttonOptions.name, \"\");\n            buttonElement.text(buttonOptions.text);\n\n            if(buttonOptions.click) {\n                button.bind(CLICK, buttonOptions.click);\n            }\n            if(buttonOptions.enabled === false) {\n                button.enable(false);\n            }\n\n            if(buttonOptions.position === LEFT) {\n                this._leftButtonsContainer.append(buttonElement);\n            } else {\n                this._rightButtonsContainer.append(buttonElement);\n            }\n\n            if(buttonOptions.name === \"done\" && this.options.formTag !== \"form\") {\n                button.element.attr(\"type\", SUBMIT);\n            }\n\n            this._buttons.push(button);\n        },\n\n        _buttonsContainer: function() {\n            var buttonsContainer = $(\"<div>\").addClass(wizardClasses.wizardButtons);\n\n            this._leftButtonsContainer = $(\"<span>\").addClass(wizardClasses.wizardLeftButtons);\n            this._rightButtonsContainer = $(\"<span>\").addClass(wizardClasses.wizardRightButtons);\n\n            buttonsContainer.append(this._leftButtonsContainer);\n            buttonsContainer.append(this._rightButtonsContainer);\n\n            this.element.append(buttonsContainer);\n\n            this._buttons = [];\n\n            this.options.buttons.map(proxy(this._buttonFactory, this));\n\n            if(this.options.pager) {\n                this._pager();\n            }\n        },\n\n        _content: function() {\n            var options = this.options,\n                loadFromRemote = !!options.contentUrl,\n                contentElement = $(\"<div>\").addClass(wizardClasses.wizardContent);\n\n            if (!loadFromRemote && options.contentId) {\n                contentElement.html($(\"#\" + options.contentId).html());\n            } else if (!loadFromRemote && options.content) {\n                contentElement.append(options.content);\n            }\n\n            if (options.markupContainer) {\n                if(!loadFromRemote && !options.contentId && !options.content) {\n                    contentElement.append(options.markupContainer.html());\n                }\n\n                kendo.destroy(options.markupContainer);\n                options.markupContainer.remove();\n            }\n\n            this.element.prepend(contentElement);\n        },\n\n        _form: function() {\n            var formTag = \"<\" + this.options.formTag + \">\",\n                formElement = $(formTag).hide(),\n                contentElement = $(\"<div>\").addClass(wizardClasses.wizardContent),\n                formOptions = this.options.form;\n\n            $(\"body\").append(formElement);\n            this.element.prepend(contentElement);\n\n            formOptions.buttonsTemplate = formOptions.buttonsTemplate || \"\";\n            this.form = formElement.kendoForm(formOptions).getKendoForm();\n\n            contentElement.append(formElement.show());\n        },\n\n        _iterateButton: function(button) {\n            var messages = this.options.messages;\n\n            if(typeof button === \"string\") {\n                button = {\n                    name: button\n                };\n            }\n            if(!button.text) {\n                button.text = messages[button.name] || button.name.charAt(0).toUpperCase() + button.name.slice(1);\n            }\n            if(button.primary !== false && (button.name === DONE || button.name === NEXT)) {\n                button.primary = true;\n            }\n            if(!button.position && button.name === RESET) {\n                button.position = LEFT;\n            } else if(!button.position) {\n                button.position = RIGHT;\n            }\n\n            return button;\n        },\n\n        _pager: function() {\n            var options = this.options,\n                messages = options.messages,\n                pagerData = {\n                    step: messages.step,\n                    currentStep: options.index + 1,\n                    of: messages.of,\n                    totalSteps: options.totalSteps\n                },\n                pager = kendo.template(this._pagerTemplate)(pagerData);\n\n            this._leftButtonsContainer.append(pager);\n        },\n\n        _processButtons: function() {\n            var options = this.options,\n                buttonsOptions = options.buttons,\n                defaultButtons = this._defaultButtonsConfiguration;\n\n            if(!buttonsOptions || !buttonsOptions.length || buttonsOptions.length === 0) {\n                this.options.defaultButtons = true;\n\n                if(options.index === 0) {\n                    buttonsOptions = defaultButtons.first;\n                } else if(options.index + 1 === options.totalSteps) {\n                    buttonsOptions = defaultButtons.last;\n                } else {\n                    buttonsOptions = defaultButtons.middle;\n                }\n            }\n\n            this.options.buttons = buttonsOptions.map(proxy(this._iterateButton, this));\n        },\n\n        _render: function() {\n            this.element = $(\"<div>\").addClass(wizardClasses.wizardStep);\n\n            if(this.options.className) {\n                this.element.addClass(this.options.className);\n            }\n\n            this._ariaAttributes();\n\n            if(!this.options.selected) {\n                this.element.addClass(HIDDEN);\n                this.element.attr(ARIA_HIDDEN, true);\n            }\n\n            if(this.options.actionBar) {\n                this._buttonsContainer();\n            }\n\n            if(this.options.form) {\n                this._form();\n            } else {\n                this._content();\n            }\n        }\n    });\n\n    var Wizard = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = options || {};\n\n            Widget.fn.init.call(that, element, options);\n\n            that._wrapper();\n            that._createSteps();\n            that._stepper();\n            that._attachEvents();\n        },\n\n        options: {\n            name: \"Wizard\",\n            contentPosition: BOTTOM,\n            actionBar: true,\n            pager: true,\n            loadOnDemand: false,\n            reloadOnSelect: false,\n            validateForms: true,\n            stepper: {},\n            steps: [],\n            messages: {\n                reset: \"Reset\",\n                previous: \"Previous\",\n                next: \"Next\",\n                done: \"Done\",\n                step: \"Step\",\n                of: \"of\"\n            }\n        },\n\n        events: [\n            ACTIVATE,\n            SELECT,\n            RESET,\n            DONE,\n            ERROR,\n            CONTENTLOAD,\n            FORM_VALIDATE_FAILED\n        ],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that.stepper);\n            Widget.fn.destroy.call(that);\n\n            that.wrapper.off(WIZARD);\n        },\n\n        activeStep: function() {\n            return this.currentStep;\n        },\n\n        enableStep: function(stepIndex, value) {\n            var that = this,\n                targetStep;\n\n            if(stepIndex === undefined || stepIndex === null || isNaN(stepIndex) || stepIndex >= that._steps.length || stepIndex < 0) {\n                return;\n            }\n\n            stepIndex = Number(stepIndex);\n            targetStep = that._steps[stepIndex];\n\n            if(targetStep.options.enabled === value) {\n                return;\n            } else {\n                targetStep.options.enabled = value;\n                that.stepper.steps()[stepIndex].enable(value);\n            }\n        },\n\n        insertAt: function(index, stepOptions) {\n            var steps = this._steps,\n                numberOfSteps = steps.length,\n                messages = this.options.messages,\n                step, stepperStepOptions, alteredStepIndex, alteredStep,\n                iterateStep = function(step, i) {\n                    var label;\n\n                    if(i >= index) {\n                        step.options.index += 1;\n                    }\n                    step.options.totalSteps += 1;\n                    step.element.find(DOT + wizardClasses.wizardPager).remove();\n                    step._pager();\n\n                    label = messages.step + \" \" + (step.options.index + 1) + \" \" + messages.of + \" \" + (numberOfSteps + 1);\n                    step.element.attr(ARIA_LABEL, label);\n                };\n\n            if(index === null || index === undefined || isNaN(index) || index < 0 || index > numberOfSteps) {\n                return;\n            }\n            if(!stepOptions) {\n                return;\n            }\n\n            stepperStepOptions = this._mapStepForStepper(stepOptions);\n            this.stepper.insertAt(index, stepperStepOptions);\n\n            stepOptions.totalSteps = numberOfSteps + 1;\n            stepOptions.messages = messages;\n            stepOptions.index = index;\n            stepOptions.formTag = this.wrapper.is(\"form\") ? \"div\" : \"form\";\n\n            if(this.options.pager === false && stepOptions.pager !== true) {\n                stepOptions.pager = false;\n            }\n\n            step = new Step(stepOptions);\n            steps.forEach(iterateStep);\n            steps.splice(index, 0, step);\n\n            if(index === 0 || index === numberOfSteps) {\n                alteredStepIndex = index === 0 ? 1 : numberOfSteps - 1;\n                alteredStep = steps[alteredStepIndex];\n\n                if(alteredStep.options.defaultButtons) {\n                    alteredStep.resetButtons();\n                }\n            }\n\n            this._insertStepElementAtIndex(index, step.element);\n            this._stepperAriaAttributes();\n            this._steps.forEach(this._iterateAriaStep);\n        },\n\n        next: function() {\n            var that = this,\n                stepsLength = that._steps.length,\n                currentStepIndex = that.currentStep.options.index;\n\n            if(currentStepIndex + 1 === stepsLength) {\n                return;\n            } else if (!that.steps()[currentStepIndex + 1].options.enabled) {\n                return;\n            } else {\n                that._select(currentStepIndex + 1);\n                that._selectStepper(currentStepIndex + 1);\n            }\n\n        },\n\n        previous: function() {\n            var that = this,\n                currentStepIndex = that.currentStep.options.index;\n\n            if(currentStepIndex === 0) {\n                return;\n            } else if (!that.steps()[currentStepIndex - 1].options.enabled) {\n                return;\n            } else {\n                that._select(currentStepIndex - 1);\n                that._selectStepper(currentStepIndex - 1);\n            }\n        },\n\n        removeAt: function(index) {\n            var steps = this._steps,\n                numberOfSteps = steps.length,\n                stepContentElement = $(this.element.find(DOT + wizardClasses.wizardStep).get(index)),\n                removedStep, newSelectedStepIndex, alteredStepIndex, alteredStep, i, step, label,\n                messages = this.options.messages;\n\n            if(index === null || index === undefined || isNaN(index) || index < 0 || index > numberOfSteps || numberOfSteps === 1) {\n                return;\n            }\n\n            this.stepper.removeAt(index);\n            removedStep = steps.splice(index, 1)[0];\n\n            if(!stepContentElement.hasClass(HIDDEN)) {\n                newSelectedStepIndex = index === 0 ? 0 : index - 1;\n                this.select(newSelectedStepIndex);\n            }\n\n            kendo.destroy(stepContentElement);\n            stepContentElement.remove();\n\n            for(i = 0; i < numberOfSteps - 1; i +=1) {\n                step = steps[i];\n                step.options.index = i;\n                step.options.totalSteps = numberOfSteps - 1;\n                step.element.find(DOT + wizardClasses.wizardPager).remove();\n                step._pager();\n                label = messages.step + \" \" + (i + 1) + \" \" + messages.of + \" \" + (numberOfSteps - 1);\n                step.element.attr(ARIA_LABEL, label);\n            }\n\n            if(index === 0 || index === numberOfSteps - 1) {\n                alteredStepIndex = index === 0 ? 0 : numberOfSteps - 2;\n                alteredStep = steps[alteredStepIndex];\n\n                if(alteredStep.options.defaultButtons) {\n                    alteredStep.resetButtons();\n                }\n            }\n\n            this._stepperAriaAttributes();\n            this._steps.forEach(this._iterateAriaStep);\n        },\n\n        select: function(stepIndex) {\n            var that = this,\n                targetStep;\n\n            if(stepIndex === undefined || stepIndex === null || isNaN(stepIndex) || stepIndex >= that._steps.length || stepIndex < 0) {\n                return;\n            }\n\n            stepIndex = Number(stepIndex);\n            targetStep = that._steps[stepIndex];\n\n            if(!targetStep.options.enabled) {\n                return;\n            }\n\n            that._select(stepIndex);\n            that._selectStepper(stepIndex);\n        },\n\n        steps: function() {\n            return this._steps;\n        },\n\n        _attachEvents: function() {\n            var that = this,\n                clickBeforeSubmit = function() {\n                    that._doneClicked = true;\n                };\n\n            that.stepper.bind(SELECT, proxy(that._stepperSelectHandler, that));\n\n            that.wrapper\n                .on(CLICK + WIZARD, \"[\" + DATA_WIZARD_PREFIX + RESET + \"]\", proxy(that._resetClickHandler, that))\n                .on(CLICK + WIZARD, \"[\" + DATA_WIZARD_PREFIX + PREVIOUS + \"]\", proxy(that._previousClickHandler, that))\n                .on(CLICK + WIZARD, \"[\" + DATA_WIZARD_PREFIX + NEXT + \"]\", proxy(that._nextClickHandler, that));\n\n            if(that.wrapper.is(\"form\")) {\n                that.wrapper.on(CLICK + WIZARD, \"[\" + DATA_WIZARD_PREFIX + DONE + \"]\", clickBeforeSubmit);\n                that.wrapper.on(SUBMIT + WIZARD, proxy(that._doneHandler, that));\n            } else {\n                that.wrapper.on(CLICK + WIZARD, \"[\" + DATA_WIZARD_PREFIX + DONE + \"]\", clickBeforeSubmit);\n                that.wrapper.on(CLICK + WIZARD, \"[\" + DATA_WIZARD_PREFIX + DONE + \"]\", proxy(that._doneHandler, that));\n            }\n        },\n\n        _changeStep: function(step) {\n            var steps = this.wrapper.find(DOT + wizardClasses.wizardStep);\n\n            this.currentStep = step;\n\n            steps.addClass(HIDDEN);\n            steps.attr(ARIA_HIDDEN, true);\n            steps.attr(ARIA_EXPANDED, false);\n\n            step.element.removeClass(HIDDEN);\n            step.element.removeAttr(ARIA_HIDDEN);\n            step.element.attr(ARIA_EXPANDED, true);\n        },\n\n        _createStep: function(options, index, stepsFromMarkup, total) {\n            var wrapper = this.wrapper,\n                stepsFromMarkupTitles = this.wrapper.children(\"ol, ul\").children(\"li\");\n\n            if(typeof options === \"string\") {\n                options = {\n                    title: options\n                };\n            }\n\n            options.totalSteps = total;\n            options.messages = this.options.messages;\n            options.index = index;\n            options.formTag = this.wrapper.is(\"form\") ? \"div\" : \"form\";\n\n            if(index === 0) {\n                options.selected = true;\n            }\n            if(this.options.actionBar === false) {\n                options.actionBar = false;\n            }\n            if(stepsFromMarkup.length > 0 && stepsFromMarkup[index]) {\n                options.markupContainer = $(stepsFromMarkup[index]);\n\n                if(!options.title) {\n                    options.title = stepsFromMarkupTitles[index] ? stepsFromMarkupTitles[index].textContent : (index + 1).toString();\n\n                    if(!this.options.steps) {\n                        this.options.steps = [];\n                    }\n\n                }\n            }\n            if(wrapper.attr(ID)) {\n                options.wizardId = wrapper.attr(ID);\n            }\n            if(this.options.pager === false && options.pager !== true) {\n                options.pager = false;\n            }\n\n            this.options.steps[index] = extend(true, {}, options);\n\n            return new Step(options);\n        },\n\n        _createSteps: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                stepsOptions = that.options.steps,\n                stepsFromMarkup = wrapper.children(\"div\"),\n                stepsContainer, i, stepOptions, step;\n\n            stepsContainer = $(\"<div>\").addClass(wizardClasses.wizardStepsContainer);\n\n            that._steps = [];\n\n            if(!stepsOptions || stepsOptions.length === 0) {\n                stepsOptions = [];\n                for(i = 0; i < stepsFromMarkup.length; i+= 1) {\n                    stepsOptions.push({});\n                }\n            }\n\n            for(i = 0; i < stepsOptions.length; i += 1) {\n                stepOptions = stepsOptions[i];\n\n                step = that._createStep(stepOptions, i, stepsFromMarkup, stepsOptions.length);\n\n                if(stepOptions.contentUrl && (i === 0 || !that.options.loadOnDemand )) {\n                    kendo.ui.progress(that.wrapper, true);\n                    step._ajaxRequest(that);\n                }\n\n                stepsContainer.append(step.element);\n\n                that._steps.push(step);\n            }\n\n            wrapper.children(\"ol, ul\").remove();\n\n            wrapper.empty();\n            wrapper.append(stepsContainer);\n            that._refreshEditorWidgets();\n\n            that.currentStep = that._steps[0];\n        },\n\n        _doneHandler: function(e) {\n            var steps = this._steps,\n                currentStep = this.currentStep,\n                forms = [],\n                form, i;\n\n            if(!this._doneClicked) {\n                return;\n            }\n\n            this._doneClicked = false;\n\n            if(!!this.options.validateForms && !!currentStep.form && !currentStep.form.validator.validate()) {\n                e.preventDefault();\n                this.trigger(FORM_VALIDATE_FAILED, { sender: this, step: currentStep, form: currentStep.form });\n                return;\n            }\n\n            for(i = 0; i < steps.length; i += 1) {\n                form = steps[i].form;\n                if(form) {\n                    forms.push(form);\n                }\n            }\n\n            this.trigger(DONE, { sender: this, forms: forms, originalEvent: e, button: $(e.target).getKendoButton() });\n        },\n\n        _insertStepElementAtIndex: function(index, stepElement) {\n            var stepsContainer = this.wrapper.find(DOT + wizardClasses.wizardStepsContainer);\n\n            if(index === 0) {\n                stepsContainer.prepend(stepElement);\n            } else {\n                stepsContainer.find(DOT + wizardClasses.wizardStep + \":nth-child(\" + index + \")\").after(stepElement);\n            }\n        },\n\n        _isEmpty: function(element){\n            return !kendo.trim(element.html());\n        },\n\n        _iterateAriaStep: function(step) {\n            step._ariaAttributes();\n        },\n\n        _mapStepForStepper: function(step) {\n            var stepperStep = extend(true, {}, step );\n\n            stepperStep.label = stepperStep.title;\n\n            delete stepperStep.buttons;\n            delete stepperStep.pager;\n            delete stepperStep.content;\n            delete stepperStep.contentUrl;\n            delete stepperStep.contentId;\n            delete stepperStep.formTag;\n            delete stepperStep.wizardId;\n            delete stepperStep.messages;\n\n            return stepperStep;\n        },\n\n        _select: function(index) {\n            var targetStep = this._steps[index],\n                options = this.options;\n\n            if(targetStep.options.contentUrl &&\n                (options.reloadOnSelect ||\n                    (options.loadOnDemand && this._isEmpty(targetStep.element.find(DOT + wizardClasses.wizardContent))))) {\n                this.ajaxLoad = true;\n                kendo.ui.progress(this.wrapper, true);\n                targetStep._ajaxRequest(this, true);\n            } else {\n                this._changeStep(targetStep);\n            }\n        },\n\n        _nextClickHandler: function(e) {\n            var that = this,\n                steps = that._steps,\n                numberOfSteps = that._steps.length,\n                currentStep = that.currentStep,\n                currentStepIndex = currentStep.options.index,\n                button = $(e.target).getKendoButton(),\n                targetStep = steps[currentStepIndex + 1];\n\n            if(numberOfSteps === currentStepIndex + 1 || !targetStep.options.enabled) {\n                return;\n            }\n\n            if(!!that.options.validateForms && !!currentStep.form && !currentStep.form.validator.validate()) {\n                that.trigger(FORM_VALIDATE_FAILED, { sender: that, step: currentStep, form: currentStep.form });\n                return;\n            }\n\n            if(!that.trigger(SELECT, {\n                sender: that,\n                originalEvent: e.originalEvent,\n                step: targetStep,\n                button: button\n            })) {\n                that._select(currentStepIndex + 1);\n                that._selectStepper(currentStepIndex + 1);\n\n                if(!that.ajaxLoad) {\n                    that.trigger(ACTIVATE, { sender: that, step: targetStep });\n                }\n\n                that.ajaxLoad = false;\n            }\n        },\n\n        _previousClickHandler: function(e) {\n            var that = this,\n                validateForms = that.options.validateForms,\n                steps = that._steps,\n                currentStep = that.currentStep,\n                currentStepIndex = currentStep.options.index,\n                button = $(e.target).getKendoButton(),\n                targetStep = steps[currentStepIndex - 1];\n\n            if(currentStepIndex === 0 || !targetStep.options.enabled) {\n                return;\n            }\n\n            if(!!validateForms && validateForms.validateOnPrevious !== false && !!currentStep.form && !currentStep.form.validator.validate()) {\n                that.trigger(FORM_VALIDATE_FAILED, { sender: that, step: currentStep, form: currentStep.form });\n                return;\n            }\n\n            if(!that.trigger(SELECT, {\n                sender: that,\n                originalEvent: e.originalEvent,\n                step: targetStep,\n                button: button\n            })) {\n                that._select(currentStepIndex - 1);\n                that._selectStepper(currentStepIndex - 1);\n\n                if(!that.ajaxLoad) {\n                    that.trigger(ACTIVATE, { sender: that, step: targetStep });\n                }\n\n                that.ajaxLoad = false;\n            }\n        },\n\n        _refreshEditorWidgets: function() {\n            var editorElements = this.wrapper.find(\"[data-role='editor']\"),\n                i, element;\n\n            for(i = 0; i < editorElements.length; i += 1) {\n                element = $(editorElements[i]);\n                element.getKendoEditor().refresh();\n            }\n        },\n\n        _resetClickHandler: function(e) {\n            this.trigger(RESET, { sender: this, originalEvent: e, button: $(e.target).getKendoButton() });\n        },\n\n        _selectStepper: function(index) {\n            var stepper = this.stepper,\n                targetStep = stepper.steps()[index],\n                targetLink = targetStep.element.find(DOT + STEPPER_STEP_LINK);\n\n            stepper.select(index);\n\n            stepper.wrapper.find(DOT + STEPPER_STEP_LINK).attr(ARIA_SELECTED, false);\n            targetLink.attr(ARIA_SELECTED, true).trigger(\"focus\");\n        },\n\n        _stepper: function() {\n            var wrapper = this.wrapper,\n                stepperElement = $(\"<div>\").prependTo(wrapper),\n                options = this.options,\n                stepperOptions = options.stepper,\n                stepsOptions = options.steps.map(this._mapStepForStepper);\n\n            stepperOptions.steps = stepsOptions;\n            stepperOptions.orientation = options.contentPosition === BOTTOM ? HORIZONTAL : VERTICAL;\n            stepperOptions.selectOnFocus = true;\n            stepperOptions.kendoKeydown = function(e) {\n                if(e.keyCode === kendo.keys.TAB){\n                    e.preventKendoKeydown = true;\n                }\n            };\n\n            this.stepper = stepperElement.kendoStepper(stepperOptions).getKendoStepper();\n\n            this._stepperAriaAttributes();\n        },\n\n        _stepperAriaAttributes: function() {\n            var stepper = this.stepper,\n                wrapperId = this.wrapper.attr(ID) || \"wizard\",\n                stepperSteps = stepper.steps(),\n                selected, step, i;\n\n            if(!stepperSteps) {\n                return;\n            }\n\n            stepper.element.find(DOT + STEPPER_LIST).attr(ROLE, \"tablist\");\n\n            for(i = 0; i < stepperSteps.length; i += 1) {\n                selected = false;\n\n                if(i === 0) {\n                    selected = true;\n                }\n\n                step = stepperSteps[i];\n                step.element.attr(ROLE, \"none\")\n                    .find(\"a\").attr(ROLE, \"tab\")\n                    .attr(ARIA_CONTROLS, wrapperId + DASH + i)\n                    .attr(ARIA_SELECTED, selected);\n            }\n        },\n\n        _stepperSelectHandler: function(e) {\n            var that = this,\n                validateForms = that.options.validateForms,\n                stepper = e.sender,\n                stepperStep = e.step,\n                currentStepIndex = that.currentStep.options.index,\n                stepIndex = stepperStep.getIndex(),\n                wizardSteps = that._steps,\n                step = wizardSteps[stepIndex],\n                currentStep = that.currentStep;\n\n            if(stepIndex > currentStepIndex && !!validateForms && !!currentStep.form && !currentStep.form.validator.validate()) {\n                e.preventDefault();\n                that.trigger(FORM_VALIDATE_FAILED, { sender: that, step: currentStep, form: currentStep.form });\n                return;\n            }\n\n            if(stepIndex < currentStepIndex && !!validateForms && validateForms.validateOnPrevious !== false && !!currentStep.form && !currentStep.form.validator.validate()) {\n                e.preventDefault();\n                that.trigger(FORM_VALIDATE_FAILED, { sender: that, step: currentStep, form: currentStep.form });\n                return;\n            }\n\n            if(!that.trigger(SELECT, { sender: that, originalEvent: e.originalEvent, step: step, stepper: stepper })) {\n                that._select(stepIndex);\n\n                stepper.wrapper.find(DOT + STEPPER_STEP_LINK).attr(ARIA_SELECTED, false);\n                stepperStep.element.find(DOT + STEPPER_STEP_LINK).attr(ARIA_SELECTED, true);\n\n                if(!that.ajaxLoad) {\n                    that.trigger(ACTIVATE, { sender: that, step: step });\n                }\n\n                that.ajaxLoad = false;\n            } else {\n                e.preventDefault();\n            }\n        },\n\n        _triggerActivate: function(step) {\n            this._changeStep(step);\n            this.trigger(ACTIVATE, { sender: this, step: step });\n        },\n\n        _triggerError: function(xhr, status, step) {\n            kendo.ui.progress(this.wrapper, false);\n            this.trigger(ERROR, { sender: this, xhr: xhr, status: status, step: step });\n        },\n\n        _triggerContentLoad: function(step) {\n            kendo.ui.progress(this.wrapper, false);\n            this.trigger(CONTENTLOAD, { sender: this, step: step });\n        },\n\n        _wrapper: function() {\n            var that = this,\n                element = that.element,\n                contentPosition = that.options.contentPosition;\n\n            that.wrapper = element;\n            that.wrapper.addClass(wizardClasses.wizard);\n\n            if(contentPosition === RIGHT) {\n                that.wrapper.addClass(wizardClasses.verticalWizard + SPACE + wizardClasses.rightWizard);\n            } else if(contentPosition === LEFT) {\n                that.wrapper.addClass(wizardClasses.verticalWizard + SPACE + wizardClasses.leftWizard);\n            } else {\n                that.wrapper.addClass(wizardClasses.horizontalWizard);\n            }\n        }\n    });\n\n    kendo.wizard = {\n        Step: Step\n    };\n\n    kendo.ui.plugin(Wizard);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n"],"names":["define","__meta__","id","name","category","description","depends","features","$","window","kendo","jQuery","undefined","Widget","ui","extend","proxy","WIZARD","CLICK","ACTIVATE","SELECT","RESET","SUBMIT","PREVIOUS","NEXT","DONE","ERROR","CONTENTLOAD","FORM_VALIDATE_FAILED","HIDDEN","STEPPER_LIST","STEPPER_STEP_LINK","ARIA_SELECTED","ARIA_CONTROLS","ARIA_HIDDEN","ARIA_EXPANDED","ARIA_LABEL","VERTICAL","HORIZONTAL","BOTTOM","RIGHT","LEFT","DOT","SPACE","DASH","ID","TABINDEX","ROLE","DATA_WIZARD_PREFIX","wizardClasses","wizard","horizontalWizard","verticalWizard","rightWizard","leftWizard","wizardStepsContainer","wizardStep","wizardContent","wizardButtons","wizardLeftButtons","wizardRightButtons","wizardPager","Step","Class","init","options","this","actionBar","_processButtons","_render","index","content","contentUrl","contentId","markupContainer","form","buttons","pager","selected","enabled","className","totalSteps","wizardId","formTag","messages","_defaultButtonsConfiguration","first","middle","last","_pagerTemplate","_buttons","load","_ajaxRequest","resetButtons","buttonsContainer","element","find","destroy","remove","_buttonsContainer","triggerActivate","that","url","data","ajaxOptions","type","cache","dataType","error","xhr","status","_triggerError","complete","_triggerActivate","success","contentElement","angular","elements","get","html","_triggerContentLoad","e","ajax","_ariaAttributes","label","step","of","attr","_buttonFactory","buttonOptions","button","kendoButton","themeColor","primary","getKendoButton","buttonElement","text","click","bind","enable","position","_leftButtonsContainer","append","_rightButtonsContainer","push","addClass","map","_pager","_content","loadFromRemote","prepend","_form","formElement","hide","formOptions","buttonsTemplate","kendoForm","getKendoForm","show","_iterateButton","charAt","toUpperCase","slice","pagerData","currentStep","template","buttonsOptions","defaultButtons","length","Wizard","fn","call","_wrapper","_createSteps","_stepper","_attachEvents","contentPosition","loadOnDemand","reloadOnSelect","validateForms","stepper","steps","reset","previous","next","done","events","wrapper","off","activeStep","enableStep","stepIndex","value","targetStep","isNaN","_steps","Number","insertAt","stepOptions","numberOfSteps","stepperStepOptions","alteredStepIndex","alteredStep","iterateStep","i","_mapStepForStepper","is","forEach","splice","_insertStepElementAtIndex","_stepperAriaAttributes","_iterateAriaStep","stepsLength","currentStepIndex","_select","_selectStepper","removeAt","stepContentElement","removedStep","newSelectedStepIndex","hasClass","select","clickBeforeSubmit","_doneClicked","_stepperSelectHandler","on","_resetClickHandler","_previousClickHandler","_nextClickHandler","_doneHandler","_changeStep","removeClass","removeAttr","_createStep","stepsFromMarkup","total","stepsFromMarkupTitles","children","title","textContent","toString","stepsOptions","stepsContainer","progress","empty","_refreshEditorWidgets","forms","validator","validate","preventDefault","trigger","sender","originalEvent","target","stepElement","after","_isEmpty","trim","stepperStep","ajaxLoad","validateOnPrevious","editorElements","getKendoEditor","refresh","targetLink","stepperElement","prependTo","stepperOptions","orientation","selectOnFocus","kendoKeydown","keyCode","keys","TAB","preventKendoKeydown","kendoStepper","getKendoStepper","wrapperId","stepperSteps","getIndex","wizardSteps","plugin","amd","a1","a2","a3"],"mappings":"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"}